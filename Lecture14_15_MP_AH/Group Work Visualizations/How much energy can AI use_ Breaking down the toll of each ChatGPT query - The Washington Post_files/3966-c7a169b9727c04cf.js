"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3966],{33966:function(e,t,n){n.d(t,{O:function(){return ei}});var r,o,i=n(94213),a=n(32586),s=n(5093),c=n(29718),u=n(75271),l=n(74693),f=n(62004),d=n(74471),p=n(22892),y=Object.create,g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,v=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,C=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},S=function(e,t,n,r){var o=!0,i=!1,a=void 0;if(t&&"object"==typeof t||"function"==typeof t)try{for(var s,c=b(t)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)!function(){var o=s.value;h.call(e,o)||o===n||g(e,o,{get:function(){return t[o]},enumerable:!(r=m(t,o))||r.enumerable})}()}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return e},w=function(e,t,n){return n=null!=e?y(v(e)):{},S(!t&&e&&e.__esModule?n:g(n,"default",{value:e,enumerable:!0}),e)},x=(r=function(){},function(){return r&&(o=r(r=0)),o}),_=C(function(e){var t=function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case d:case a:case c:case s:case y:return e;default:switch(e=e&&e.$$typeof){case l:case p:case b:case m:case u:return e;default:return t}}case i:return t}}},n=function(e){return t(e)===d};x();var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,y=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,h=r?Symbol.for("react.fundamental"):60117,C=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;e.AsyncMode=f,e.ConcurrentMode=d,e.ContextConsumer=l,e.ContextProvider=u,e.Element=o,e.ForwardRef=p,e.Fragment=a,e.Lazy=b,e.Memo=m,e.Portal=i,e.Profiler=c,e.StrictMode=s,e.Suspense=y,e.isAsyncMode=function(e){return n(e)||t(e)===f},e.isConcurrentMode=n,e.isContextConsumer=function(e){return t(e)===l},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},e.isForwardRef=function(e){return t(e)===p},e.isFragment=function(e){return t(e)===a},e.isLazy=function(e){return t(e)===b},e.isMemo=function(e){return t(e)===m},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===c},e.isStrictMode=function(e){return t(e)===s},e.isSuspense=function(e){return t(e)===y},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===c||e===s||e===y||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p||e.$$typeof===h||e.$$typeof===C||e.$$typeof===S||e.$$typeof===v)},e.typeOf=t});C(function(e){x()});var k=C(function(e,t){x(),t.exports=_()}),O=C(function(e,t){var n=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)};x();var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?function(e,t){for(var a,s,c=n(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))o.call(a,l)&&(c[l]=a[l]);if(r){s=r(a);for(var f=0;f<s.length;f++)i.call(a,s[f])&&(c[s[f]]=a[s[f]])}}return c}:Object.assign}),T=C(function(e,t){x(),t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}),E=C(function(e,t){x(),t.exports=Function.call.bind(Object.prototype.hasOwnProperty)}),j=C(function(e,t){var n=function(e,t,n,r,o){};x(),n.resetWarningCache=function(){},t.exports=n});C(function(e,t){var n=function(){return null};x();var r=k(),o=O(),i=T(),a=E(),s=j(),u=function(){};t.exports=function(e,t){var l="function"==typeof Symbol&&Symbol.iterator,f="<<anonymous>>",d={array:g("array"),bigint:g("bigint"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:y(n),arrayOf:function(e){return y(function(t,n,r,o,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new p("Invalid "+o+" `"+a+"` of type "+("`"+b(s))+"` supplied to `"+r+"`, expected an array.");for(var c=0;c<s.length;c++){var u=e(s,c,r,o,a+"["+c+"]",i);if(u instanceof Error)return u}return null})},element:y(function(t,n,r,o,i){var a=t[n];return e(a)?null:new p("Invalid "+o+" `"+i+"` of type "+("`"+b(a))+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:y(function(e,t,n,o,i){var a=e[t];return r.isValidElementType(a)?null:new p("Invalid "+o+" `"+i+"` of type "+("`"+b(a))+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return y(function(t,n,r,o,i){if(!(t[n]instanceof e)){var a,s=e.name||f;return new p("Invalid "+o+" `"+i+"` of type "+("`"+((a=t[n]).constructor&&a.constructor.name?a.constructor.name:f))+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null})},node:y(function(t,n,r,o,i){return!function t(n){switch(void 0===n?"undefined":(0,c._)(n)){case"number":case"string":case"undefined":return!0;case"boolean":return!n;case"object":if(Array.isArray(n))return n.every(t);if(null===n||e(n))return!0;var r=function(e){var t=e&&(l&&e[l]||e["@@iterator"]);if("function"==typeof t)return t}(n);if(!r)return!1;var o,i=r.call(n);if(r!==n.entries){for(;!(o=i.next()).done;)if(!t(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!t(a[1]))return!1}return!0;default:return!1}}(t[n])?new p("Invalid "+o+" `"+i+"` supplied to `"+r+"`, expected a ReactNode."):null}),objectOf:function(e){return y(function(t,n,r,o,s){if("function"!=typeof e)return new p("Property `"+s+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var c=t[n],u=b(c);if("object"!==u)return new p("Invalid "+o+" `"+s+"` of type "+("`"+u)+"` supplied to `"+r+"`, expected an object.");for(var l in c)if(a(c,l)){var f=e(c,l,r,o,s+"."+l,i);if(f instanceof Error)return f}return null})},oneOf:function(e){return Array.isArray(e)?y(function(t,n,r,o,i){for(var a,s=t[n],c=0;c<e.length;c++)if(s===(a=e[c])?0!==s||1/s==1/a:s!=s&&a!=a)return null;var u=JSON.stringify(e,function(e,t){return"symbol"===v(t)?String(t):t});return new p("Invalid "+o+" `"+i+"` of value `"+String(s)+"` "+("supplied to `"+r)+"`, expected one of "+u+".")}):n},oneOfType:function(e){if(!Array.isArray(e))return n;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return u("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+function(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}(r)+" at index "+t+"."),n}return y(function(t,n,r,o,s){for(var c=[],u=0;u<e.length;u++){var l=(0,e[u])(t,n,r,o,s,i);if(null==l)return null;l.data&&a(l.data,"expectedType")&&c.push(l.data.expectedType)}return new p("Invalid "+o+" `"+s+"` supplied to "+("`"+r)+"`"+(c.length>0?", expected one of type ["+c.join(", ")+"]":"")+".")})},shape:function(e){return y(function(t,n,r,o,a){var s=t[n],c=b(s);if("object"!==c)return new p("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var l=e[u];if("function"!=typeof l)return m(r,o,a,u,v(l));var f=l(s,u,r,o,a+"."+u,i);if(f)return f}return null})},exact:function(e){return y(function(t,n,r,s,c){var u=t[n],l=b(u);if("object"!==l)return new p("Invalid "+s+" `"+c+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var f=o({},t[n],e);for(var d in f){var y=e[d];if(a(e,d)&&"function"!=typeof y)return m(r,s,c,d,v(y));if(!y)return new p("Invalid "+s+" `"+c+"` key `"+d+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var g=y(u,d,r,s,c+"."+d,i);if(g)return g}return null})}};function p(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function y(e){function n(n,r,o,a,s,c,u){if(a=a||f,c=c||o,u!==i&&t){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}return null==r[o]?n?new p(null===r[o]?"The "+s+" `"+c+"` is marked as required in `"+a+"`, but its value is `null`.":"The "+s+" `"+c+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:e(r,o,a,s,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function g(e){return y(function(t,n,r,o,i,a){var s=t[n];return b(s)!==e?new p("Invalid "+o+" `"+i+"` of type "+("`"+v(s))+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null})}function m(e,t,n,r,o){return new p((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function b(e){var t=void 0===e?"undefined":(0,c._)(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":"symbol"===t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t}function v(e){if((void 0===e?"undefined":(0,c._)(e))>"u"||null===e)return""+e;var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return p.prototype=Error.prototype,d.checkPropTypes=s,d.resetWarningCache=s.resetWarningCache,d.PropTypes=d,d}});var P=C(function(e,t){var n=function(){},r=function(){};x();var o=T();r.resetWarningCache=n,t.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:n};return i.PropTypes=i,i}}),I=C(function(e,t){x(),t.exports=P()()});x();var R=w(I());x();var N="wapo_identity",q={consentCountry:"",tos:""},M=function(){var e=window.location&&window.location.hostname||"",t="prod";return/(pb-impact\.|subs-stage\.|sandbox\.|.preview.now.washingtonpost.com|localhost.washingtonpost.com)/.test(e)?t="sandbox":/dev\.washpost|localhost|digitalink\.com/.test(e)&&(t="dev"),t},L=function(){var e=window.location&&window.location.hostname||"";return/(subscribe\.|subscription\.|subs-stage\.|local.digitalink\.)/.test(e)},A={configUrl:{dev:"https://subscribe.digitalink.com",sandbox:"https://subs-stage.washingtonpost.com",prod:"https://www.washingtonpost.com/subscribe"},subsUrl:{dev:"https://subscribe.digitalink.com",sandbox:"https://subs-stage.washingtonpost.com",prod:"https://subscribe.washingtonpost.com"}},$=function(){try{var e=new Date().toString();window.localStorage.setItem(e,e);var t=window.localStorage.getItem(e)===e;return window.localStorage.removeItem(e),t}catch(e){return!1}},F=function(e){return A[e][M()]||A[e].prod},H=function(){var e=M(),t=(0,l.getCookie)("wp_geo")||"";return t&&t.split("|")[0]?t.split("|")[0].toLowerCase():t||"prod"===e?null:"us"},V=function(){var e=F(L()?"subsUrl":"configUrl");return Promise.race([fetch("".concat(e,"/static/config/tos/tos.json"),{method:"GET"}),new Promise(function(e,t){return setTimeout(function(){return t(Error("timeout"))},8e3)})])},Y=function(){var e=(0,l.getCookie)("wapo_actmgmt");return!!(e&&"undefined"!==e)},U=function(){var e;return $()&&(e=Y()?JSON.parse(localStorage.getItem(N)):{}),e?e.privacySetting||q:{}},J=function(e){var t;if($()&&(t=JSON.parse(localStorage.getItem(N))),t){var n={privacySetting:(0,i._)({},t.privacySetting,e)},r=(0,i._)({},t,n);localStorage.setItem(N,JSON.stringify(r))}},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=F("subsUrl"),r={appName:"SC",locationId:"SC:TermsOfService",message:"no message",state:{}};r=(0,i._)({},r,t);var o=(0,l.getCookie)("wapo_login_id")||"";return o&&(r.state.wapo_login_id=o),(0,l.JSONFetch)("".concat(n,"/logging/").concat(e),{method:"POST",credentials:"include",body:JSON.stringify(r)})},W=function(e){if($()){var t=localStorage.getItem("wapo_identity"),n=Object.assign(t=t&&JSON.parse(t)||{},e),r=Date.now()+60*6e4*24;n.e=r,localStorage.setItem("wapo_identity",JSON.stringify(n))}},D=function(e,t){var n=F("subsUrl"),r=null;return(0,l.JSONFetch)("".concat(n,"/user/auth-status?_v=").concat(new Date().getTime()),{method:"GET",credentials:"include"}).then(function(e){e&&"SUCCESS"===e.status&&!L()&&W(e.userState),r=e}).catch(function(e){return console.error(e)}).finally(function(){return L()||J(e),t&&t(),r})},B=function(){var e=U();return 0===Object.keys(e).length&&Y()&&L()?D().then(function(e){var t;return(null==(t=null==e?void 0:e.userState)?void 0:t.privacySetting)||q}):Promise.resolve(e)},G=function(e){var t=!1,n=!1;return B().then(function(r){var o=r.marketingConsent,i=void 0===o?{}:o,a=r.tos,s=void 0===a?{}:a;return t="Y"!==s.consent,(void 0===i.consent||0!=i.consent)&&(n=!0),{tos:s,marketingConsent:i,isConfigNeeded:e||t||n,isToSNeeded:t,isMcNeeded:n,userConfigReady:!0}})},K=function(e,t,n){t&&(e.email=t);var r=F("subsUrl"),o=JSON.stringify(e);(0,l.JSONFetch)("".concat(r,"/user/save-identity-preferences"),{method:"POST",credentials:"include",body:o}).then(function(t){if("SUCCESS"===t.status&&Y()){var r=JSON.parse(localStorage.getItem(N));r&&r.signedIn?(L()||J(e.privacySetting),n()):D(e.privacySetting,n)}else"SUCCESS"===t.status&&n()}).catch(function(e){console.error(e),z("logFailure",{message:"SIP failed",locationId:"SC:TermsOfService:api:/user/save-identity-preferences",state:{status:"failure",request:o}}),n("failed")})},Q=function(e){return Object.keys(e).reduce(function(t,n){return t[n.toLowerCase()]=e[n],t},{})},X=function(e,t){var n=RegExp(Object.keys(t).join("|"),"gi");return null==e?void 0:e.replace(n,function(e){return t[e]})},Z=function(e){var t,n,r,o,s=e.s3Config,c=e.country,u=e.propTosConfig,l=e.propMcConfig,f=e.isToSNeeded,d=e.type,p=e.overrideTosHidden,y=e.s3MapObj,g=s._||{},m=(0,i._)({},null==g?void 0:g.tos._,null==g?void 0:g.tos[d]),b=(0,i._)({},null==g?void 0:g.marketingConsent._,null==g?void 0:g.marketingConsent[d]),v={},h={},C=Object.keys(s).find(function(e){return e.toLowerCase().indexOf(c)>-1});if(C){var S=Q(void 0===u?{}:u),w=(0,i._)({},S._,S[C]),x=Q(void 0===l?{}:l),_=(0,i._)({},x._,x[C]);v=(0,i._)({},null==(t=s[C])?void 0:t.tos._,null==(n=s[C])?void 0:n.tos[d],w),h=(0,i._)({},null==(r=s[C])?void 0:r.marketingConsent._,null==(o=s[C])?void 0:o.marketingConsent[d],_)}var k=!p&&(!f||v.prechecked);return v=(0,a._)((0,i._)({},m,v),{isChecked:!!k}),h=(0,a._)((0,i._)({},b,h),{isChecked:!!h.prechecked}),y&&(v.text=X(v.text,y),h.text=X(h.text,y)),{tos:v,mc:h}};x();var ee=w(I()),et=function(e){var t=e.onChange,n=e.isChecked,r=e.id,o=e.children,s=e.disabled,c=e.checkboxLabelClass,l=e.checkboxLabelStyle,d=e.labelSizeSm?"16px":"18px";return u.createElement("div",{className:"db gray-dark relative flex pt-xxs pb-xxs items-start ".concat(c)},u.createElement(f.a,{checked:n,disabled:s,id:r,"data-testid":r,onCheckedChange:t,css:{height:d,width:d,marginTop:"16px"===d?"3px":0}},u.createElement("span",{className:"relative db ".concat(c||""),style:(0,a._)((0,i._)({},l),{paddingTop:"2px"})},o)))};et.propTypes={onChange:ee.default.func,isChecked:ee.default.bool,checkboxLabelStyle:ee.default.object,checkboxLabelClass:ee.default.string,id:ee.default.string,children:ee.default.node,disabled:ee.default.bool,labelSizeSm:ee.default.bool},x();var en={tosConfig:{_:{tos:{_:{text:"I agree to The Washington Post&#39;s {{TERMS_OF_SERVICE}} and {{PRIVACY_POLICY}}.",required:!0,implicit:!1,prechecked:!1},checkout:{text:"By creating your account, you agree to The Washington Post&#39;s {{TERMS_OF_SERVICE}} and {{PRIVACY_POLICY}}.",required:!1,implicit:!0},freeTrial:{text:"By signing up for this free trial, you agree to the {{TERMS_OF_SERVICE}} and {{PRIVACY_POLICY}}.",implicit:!1}},marketingConsent:{_:{text:null,implicit:!0,prechecked:!1}}},us:{tos:{},marketingConsent:{}},ca:{tos:{},marketingConsent:{_:{text:"The Washington Post may use my email address to provide me occasional special offers via email and through other platforms. I can opt out at any time.",implicit:!1},checkout:{required:!1}}},"gb|at|be|bg|hr|cy|cz|dk|ee|fi|fr|de|gr|hu|ie|it|lv|lt|lu|mt|nl|pl|pt|ro|sk|si|es|se|is|no|ch|li":{tos:{freeTrial:{text:"By signing up for this free trial of our <span id='ftSubType'></span>, you agree to our {{TERMS_OF_SERVICE}} and understand we process data as set forth in our {{PRIVACY_POLICY}}.",implicit:!1}},marketingConsent:{_:{text:"The Washington Post may use my email address to provide me occasional special offers via email and through other platforms. I can opt out at any time.",implicit:!1},checkout:{required:!1}}}},tosMapObj:{"{{TERMS_OF_SERVICE}}":"<a target='_blank' style='color:inherit;' class='underline' href='https://www.washingtonpost.com/terms-of-service/2011/11/18/gIQAldiYiN_story.html'>Terms of Service</a>","{{PRIVACY_POLICY}}":"<a target='_blank' style='color:inherit;' class='underline' href='https://www.washingtonpost.com/privacy-policy/'>Privacy Policy</a>","{{THIRD_PARTY_PARTNERS}}":"<a target='_blank' style='color:inherit;' class='underline' href='https://www.washingtonpost.com/third-party-partners/'>third-party partners</a>"}},er=function(e){var t=e.propTosConfig,n=e.propMcConfig,r=e.isToSNeeded,o=e.type,i=e.isConfigNeeded,a=e.overrideTosHidden,c=e.userConfigReady,l=(0,s._)((0,u.useState)(!1),2),f=l[0],d=l[1],p=(0,s._)((0,u.useState)({isChecked:!1}),2),y=p[0],g=p[1],m=(0,s._)((0,u.useState)({isChecked:!1}),2),b=m[0],v=m[1],h=(0,s._)((0,u.useState)(null),2),C=h[0],S=h[1],w=H(),x=function(e){var i=null==e?void 0:e.tosConfig,s=null==e?void 0:e.tosMapObj;i||(i=en.tosConfig,s=en.tosMapObj);var c=Z({s3Config:i,country:w,propTosConfig:t,propMcConfig:n,isToSNeeded:r,type:o,overrideTosHidden:a,s3MapObj:s}),u=c.tos,l=c.mc;g(u),v(l),d(!0)};return(0,u.useEffect)(function(){c&&(i||t||n?C?x(C):V().then(function(e){return e.json()}).then(function(e){S(e),x(e)}).catch(function(e){console.error(e),x(en)}):d(!0))},[c,i,r,o]),{tosConfig:y,mcConfig:b,ready:f,country:w,updateConfigValue:function(e,t){"tos"===e?g(t):"mc"===e&&v(t)}}},eo=function(e){var t=e||{},n=t.type,r=t.tosConfig,o=t.mcConfig,i=t.overrideTosHidden,a=void 0!==i&&i,c=t.refreshKey,l=(0,s._)((0,u.useState)({}),2),f=l[0],d=l[1],p=(0,s._)((0,u.useState)({isHidden:!1,isRequired:!1}),2),y=p[0],g=p[1];(0,u.useEffect)(function(){var e={},t=function(){G(a).then(function(t){e=t,d(t)})},n=function(e){e&&t()},r=Y();window.registerPwapiConsumer&&r?window.registerAuthConsumer?window.registerAuthConsumer(n):window.registerAuthConsumer||(window.authConsumers=window.authConsumers||[],window.authConsumers.push(n)):t(),setTimeout(function(){r&&!e.userConfigReady&&t()},3e3)},[a,void 0===c?0:c]);var m=f.isConfigNeeded,b=f.isToSNeeded,v=f.isMcNeeded,h=er({propTosConfig:r,propMcConfig:o,isToSNeeded:b,type:void 0===n?"account":n,isConfigNeeded:m,overrideTosHidden:a,userConfigReady:f.userConfigReady}),C=h.tosConfig,S=h.mcConfig,w=h.ready,x=h.country,_=h.updateConfigValue;return(0,u.useEffect)(function(){w&&g({isHidden:(!b||C.implicit)&&!a&&(!v||S.implicit),isRequired:!!(b&&C.required)||!!(v&&S.required)})},[w,f]),{ready:w,isHidden:y.isHidden,isRequired:y.isRequired,storedUserConfig:f,tosConfig:C,mcConfig:S,country:x,updateConfigValue:_}},ei=function(e){var t=e.isSubmitted,n=void 0!==t&&t,r=e.email,o=e.className,s=e.checkboxLabelClass,c=void 0===s?"":s,l=e.checkboxLabelStyle,f=void 0===l?{}:l,y=e.labelSizeSm,g=void 0===y||y,m=e.asteriskColor,b=void 0===m?"red":m,v=e.onChange,h=void 0===v?function(){console.error("onChange function missing"),z("logFailure",{message:"onChange function missing"})}:v,C=e.tosConfigReady,S=void 0===C?function(){}:C,w=e.overrideTosHidden,x=void 0!==w&&w,_=e.disabled,k=void 0!==_&&_,O=e.pageLocation,T=void 0===O?"":O,E=e.accountSource,j=eo(e),P=j.storedUserConfig,I=j.tosConfig,R=j.mcConfig,N=j.ready,q=j.country,M=j.updateConfigValue,L=P.tos,A=void 0===L?{}:L,$=P.marketingConsent,F=void 0===$?{}:$,H=P.isConfigNeeded,V=P.isToSNeeded,Y=P.isMcNeeded,U=(!V||I.implicit)&&!x&&(!Y||R.implicit);(0,u.useEffect)(function(){N&&((I.required||R.required)&&H||h(!0),S({isHidden:U,tosConfig:I,mcConfig:R}))},[N]),(0,u.useEffect)(function(){I.required&&R.required?h(I.isChecked&&R.isChecked):I.required?h(I.isChecked):R.required&&h(R.isChecked)},[I.isChecked,R.isChecked]);var J=function(){if(!q){console.error("SIP failed - wp_geo missing"),z("logFailure",{message:"wp_geo missing"}),S({isHidden:U,isProcessed:!0,isSIPFailed:!0});return}var e=A.consent,t=A.consentCountry,n=F.consent,o=F.consentCountry,i=R.isChecked?0:1,a=R.implicit?-1:i,s=q,c=I.isChecked||!V||I.implicit?"Y":"N";10==n?(a=a<0?1:a,s=q):(void 0!==n&&!Y||n>-1&&a<0||n==a)&&(a=n,s=o);var u={privacySetting:{tos:{consent:"".concat(c),consentCountry:"Y"!==e||V||x?q:t},marketingConsent:{consent:"".concat(a),consentCountry:s}}};E&&(u.accountSource=E),K(u,r,function(e){S("failed"===e?{isHidden:U,isProcessed:!0,isSIPFailed:!0}:{isHidden:U,isProcessed:!0})})};(0,u.useEffect)(function(){n&&J()},[n]);var W=V||x,D=T?"".concat(T,"TosCheckbox"):"tosCheckbox",B=T?"".concat(T,"McCheckbox"):"mcCheckbox",G=g?"font-xxxxs":"font-xxxs",Q=I.implicit?"".concat(G," ").concat(c," pt-xxs pb-xxs gray-dark"):G,X=R.implicit?"gray-dark ".concat(G," ").concat(c):G,Z=(0,d.a)("span",{color:d.f.colors.error}),ee=u.createElement("span",{style:(0,a._)((0,i._)({},f),{paddingTop:"1px"}),className:"db ".concat(Q||"")},u.createElement("span",{dangerouslySetInnerHTML:{__html:I.text}}),I.required&&u.createElement(Z,{css:(0,a._)((0,i._)({},f),{color:b})},"*")),en=u.createElement("span",{style:(0,a._)((0,i._)({},f),{paddingTop:"1px"}),className:"relative db ".concat(X||"")},u.createElement("span",{dangerouslySetInnerHTML:{__html:R.text}}),R.required&&u.createElement(Z,{css:(0,a._)((0,i._)({},f),{color:b})},"*"));return u.createElement("div",{className:"db mt-xs mb-xs ".concat(void 0===o?"":o)},W&&I.text&&!I.implicit&&u.createElement(et,{onChange:function(){return M("tos",(0,a._)((0,i._)({},I),{isChecked:!I.isChecked}))},isChecked:I.isChecked,id:D,disabled:k,checkboxLabelClass:c,checkboxLabelStyle:f,labelSizeSm:g},ee),W&&I.text&&I.implicit&&u.createElement(p.a,{required:I.required},ee),Y&&R.text&&!R.implicit&&u.createElement(et,{htmlText:R.text,onChange:function(){return M("mc",(0,a._)((0,i._)({},R),{isChecked:!R.isChecked}))},isChecked:R.isChecked,id:B,disabled:k,checkboxLabelClass:c,checkboxLabelStyle:f,labelSizeSm:g},en),Y&&R.text&&R.implicit&&u.createElement(p.a,{required:R.required},en))},ea=R.default.objectOf(R.default.shape({text:R.default.string,required:R.default.bool,implicit:R.default.bool,prechecked:R.default.bool}));ei.propTypes={onChange:R.default.func.isRequired,isSubmitted:R.default.oneOfType([R.default.string,R.default.bool]).isRequired,email:R.default.string,type:R.default.oneOfType([R.default.string]),className:R.default.string,checkboxLabelClass:R.default.string,checkboxLabelStyle:R.default.object,tosConfig:ea,mcConfig:ea,tosConfigReady:R.default.func,overrideTosHidden:R.default.bool,labelSizeSm:R.default.bool,disabled:R.default.bool,asteriskColor:R.default.string,pageLocation:R.default.string,accountSource:R.default.string};/*
object-assign
(c) Sindre Sorhus
@license MIT
*//** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *//** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */}}]);