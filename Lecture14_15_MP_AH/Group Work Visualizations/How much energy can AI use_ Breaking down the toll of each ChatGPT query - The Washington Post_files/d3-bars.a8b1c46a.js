!function(){"use strict";var t="http://www.w3.org/1999/xhtml",e={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function n(t){var n=t+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=t.slice(0,r))&&(t=t.slice(r+1)),e.hasOwnProperty(n)?{space:e[n],local:t}:t}function r(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t){var e=n(t);return(e.local?o:r)(e)}function a(){}function s(t){return null==t?a:function(){return this.querySelector(t)}}function l(){return[]}function c(t){return new Array(t.length)}function u(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}u.prototype={constructor:u,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var h="$";function f(t,e,n,r,o,i){for(var a,s=0,l=e.length,c=i.length;s<c;++s)(a=e[s])?(a.__data__=i[s],r[s]=a):n[s]=new u(t,i[s]);for(;s<l;++s)(a=e[s])&&(o[s]=a)}function d(t,e,n,r,o,i,a){var s,l,c,f={},d=e.length,p=i.length,g=new Array(d);for(s=0;s<d;++s)(l=e[s])&&(g[s]=c=h+a.call(l,l.__data__,s,e),c in f?o[s]=l:f[c]=l);for(s=0;s<p;++s)(l=f[c=h+a.call(t,i[s],s,i)])?(r[s]=l,l.__data__=i[s],f[c]=null):n[s]=new u(t,i[s]);for(s=0;s<d;++s)(l=e[s])&&f[g[s]]===l&&(o[s]=l)}function p(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function g(t){return function(){this.removeAttribute(t)}}function m(t){return function(){this.removeAttributeNS(t.space,t.local)}}function b(t,e){return function(){this.setAttribute(t,e)}}function y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function v(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function w(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function k(t){return function(){this.style.removeProperty(t)}}function M(t,e,n){return function(){this.style.setProperty(t,e,n)}}function A(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function T(t){return function(){delete this[t]}}function _(t,e){return function(){this[t]=e}}function E(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function $(t){return t.trim().split(/^|\s+/)}function O(t){return t.classList||new S(t)}function S(t){this._node=t,this._names=$(t.getAttribute("class")||"")}function N(t,e){for(var n=O(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function L(t,e){for(var n=O(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function C(t){return function(){N(this,t)}}function D(t){return function(){L(this,t)}}function z(t,e){return function(){(e.apply(this,arguments)?N:L)(this,t)}}function R(){this.textContent=""}function P(t){return function(){this.textContent=t}}function j(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function I(){this.innerHTML=""}function F(t){return function(){this.innerHTML=t}}function U(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function B(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y(){return null}function W(){var t=this.parentNode;t&&t.removeChild(this)}function q(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function G(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}S.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var V={},X=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(V={mouseenter:"mouseover",mouseleave:"mouseout"}));function K(t,e,n){return t=Z(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Z(t,e,n){return function(r){var o=X;X=r;try{t.call(this,this.__data__,e,n)}finally{X=o}}}function J(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function Q(t,e,n){var r=V.hasOwnProperty(t.type)?K:Z;return function(o,i,a){var s,l=this.__on,c=r(e,i,a);if(l)for(var u=0,h=l.length;u<h;++u)if((s=l[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function tt(t,e,n){var r=w(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function et(t,e){return function(){return tt(this,t,e)}}function nt(t,e){return function(){return tt(this,t,e.apply(this,arguments))}}var rt=[null];function ot(t,e){this._groups=t,this._parents=e}function it(){return new ot([[document.documentElement]],rt)}function at(t){return"string"==typeof t?new ot([[document.querySelector(t)]],[document.documentElement]):new ot([[t]],rt)}function st(){for(var t,e=X;t=e.sourceEvent;)e=t;return e}function lt(t){var e=st();return e.changedTouches&&(e=e.changedTouches[0]),function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}(t,e)}function ct(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ut(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ht(t){let e,n,r;function o(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(o<i){if(0!==e(r,r))return i;do{const e=o+i>>>1;n(t[e],r)<0?o=e+1:i=e}while(o<i)}return o}return 2!==t.length?(e=ct,n=(e,n)=>ct(t(e),n),r=(e,n)=>t(e)-n):(e=t===ct||t===ut?t:ft,n=t,r=t),{left:o,center:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=o(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return i>n&&r(t[i-1],e)>-r(t[i],e)?i-1:i},right:function(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(o<i){if(0!==e(r,r))return i;do{const e=o+i>>>1;n(t[e],r)<=0?o=e+1:i=e}while(o<i)}return o}}}function ft(){return 0}ot.prototype=it.prototype={constructor:ot,select:function(t){"function"!=typeof t&&(t=s(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a,l=e[o],c=l.length,u=r[o]=new Array(c),h=0;h<c;++h)(i=l[h])&&(a=t.call(i,i.__data__,h,l))&&("__data__"in i&&(a.__data__=i.__data__),u[h]=a);return new ot(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=function(t){return null==t?l:function(){return this.querySelectorAll(t)}}(t));for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var a,s=e[i],c=s.length,u=0;u<c;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),o.push(a));return new ot(r,o)},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new ot(r,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),u=-1,this.each((function(t){m[++u]=t})),m;var n,r=e?d:f,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=o[u],p=i[u],g=p.length,m=t.call(h,h&&h.__data__,u,o),b=m.length,y=l[u]=new Array(b),v=s[u]=new Array(b);r(h,p,y,v,c[u]=new Array(g),m,e);for(var x,w,k=0,M=0;k<b;++k)if(x=y[k]){for(k>=M&&(M=k+1);!(w=v[M])&&++M<b;);x._next=w||null}}return(s=new ot(s,o))._enter=l,s._exit=c,s},enter:function(){return new ot(this._enter||this._groups.map(c),this._parents)},exit:function(){return new ot(this._exit||this._groups.map(c),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=e[s],u=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;s<r;++s)a[s]=e[s];return new ot(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=p);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new ot(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],a=0,s=i.length;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,e){var r=n(t);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((null==e?r.local?m:g:"function"==typeof e?r.local?x:v:r.local?y:b)(r,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?k:"function"==typeof e?A:M)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||w(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?T:"function"==typeof e?E:_)(t,e)):this.node()[t]},classed:function(t,e){var n=$(t+"");if(arguments.length<2){for(var r=O(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?z:e?C:D)(n,e))},text:function(t){return arguments.length?this.each(null==t?R:("function"==typeof t?j:P)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?U:F)(t)):this.node().innerHTML},raise:function(){return this.each(B)},lower:function(){return this.each(H)},append:function(t){var e="function"==typeof t?t:i(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:i(t),r=null==e?Y:"function"==typeof e?e:s(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(W)},clone:function(t){return this.select(t?G:q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=i.length;if(!(arguments.length<2)){for(s=e?Q:J,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?nt:et)(t,e))}};const dt=ht(ct).right;ht((function(t){return null===t?NaN:+t})).center;var pt=dt;function gt(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}const mt=Math.sqrt(50),bt=Math.sqrt(10),yt=Math.sqrt(2);function vt(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),a=i>=mt?10:i>=bt?5:i>=yt?2:1;let s,l,c;return o<0?(c=Math.pow(10,-o)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,o)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?vt(t,e,2*n):[s,l,c]}function xt(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[o,i,a]=r?vt(e,t,n):vt(t,e,n);if(!(i>=o))return[];const s=i-o+1,l=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)l[t]=(i-t)/-a;else for(let t=0;t<s;++t)l[t]=(i-t)*a;else if(a<0)for(let t=0;t<s;++t)l[t]=(o+t)/-a;else for(let t=0;t<s;++t)l[t]=(o+t)*a;return l}function wt(t,e,n){return vt(t=+t,e=+e,n=+n)[2]}function kt(t,e,n){n=+n;const r=(e=+e)<(t=+t),o=r?wt(e,t,n):wt(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function Mt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function At(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function Tt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _t(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Et(){}var $t=.7,Ot=1/$t,St="\\s*([+-]?\\d+)\\s*",Nt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ct=/^#([0-9a-f]{3,8})$/,Dt=new RegExp("^rgb\\("+[St,St,St]+"\\)$"),zt=new RegExp("^rgb\\("+[Lt,Lt,Lt]+"\\)$"),Rt=new RegExp("^rgba\\("+[St,St,St,Nt]+"\\)$"),Pt=new RegExp("^rgba\\("+[Lt,Lt,Lt,Nt]+"\\)$"),jt=new RegExp("^hsl\\("+[Nt,Lt,Lt]+"\\)$"),It=new RegExp("^hsla\\("+[Nt,Lt,Lt,Nt]+"\\)$"),Ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ut(){return this.rgb().formatHex()}function Bt(){return this.rgb().formatRgb()}function Ht(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ct.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yt(e):3===n?new Vt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Wt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Wt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Dt.exec(t))?new Vt(e[1],e[2],e[3],1):(e=zt.exec(t))?new Vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Rt.exec(t))?Wt(e[1],e[2],e[3],e[4]):(e=Pt.exec(t))?Wt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=jt.exec(t))?Jt(e[1],e[2]/100,e[3]/100,1):(e=It.exec(t))?Jt(e[1],e[2]/100,e[3]/100,e[4]):Ft.hasOwnProperty(t)?Yt(Ft[t]):"transparent"===t?new Vt(NaN,NaN,NaN,0):null}function Yt(t){return new Vt(t>>16&255,t>>8&255,255&t,1)}function Wt(t,e,n,r){return r<=0&&(t=e=n=NaN),new Vt(t,e,n,r)}function qt(t){return t instanceof Et||(t=Ht(t)),t?new Vt((t=t.rgb()).r,t.g,t.b,t.opacity):new Vt}function Gt(t,e,n,r){return 1===arguments.length?qt(t):new Vt(t,e,n,null==r?1:r)}function Vt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Xt(){return"#"+Zt(this.r)+Zt(this.g)+Zt(this.b)}function Kt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Zt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Jt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new te(t,e,n,r)}function Qt(t){if(t instanceof te)return new te(t.h,t.s,t.l,t.opacity);if(t instanceof Et||(t=Ht(t)),!t)return new te;if(t instanceof te)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=e===i?(n-r)/s+6*(n<r):n===i?(r-e)/s+2:(e-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new te(a,s,l,t.opacity)}function te(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ee(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Tt(Et,Ht,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ut,formatHex:Ut,formatHsl:function(){return Qt(this).formatHsl()},formatRgb:Bt,toString:Bt}),Tt(Vt,Gt,_t(Et,{brighter:function(t){return t=null==t?Ot:Math.pow(Ot,t),new Vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?$t:Math.pow($t,t),new Vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatRgb:Kt,toString:Kt})),Tt(te,(function(t,e,n,r){return 1===arguments.length?Qt(t):new te(t,e,n,null==r?1:r)}),_t(Et,{brighter:function(t){return t=null==t?Ot:Math.pow(Ot,t),new te(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?$t:Math.pow($t,t),new te(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Vt(ee(t>=240?t-240:t+120,o,r),ee(t,o,r),ee(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ne=Math.PI/180,re=180/Math.PI,oe=.96422,ie=1,ae=.82521,se=4/29,le=6/29,ce=3*le*le,ue=le*le*le;function he(t){if(t instanceof de)return new de(t.l,t.a,t.b,t.opacity);if(t instanceof ve)return xe(t);t instanceof Vt||(t=qt(t));var e,n,r=be(t.r),o=be(t.g),i=be(t.b),a=pe((.2225045*r+.7168786*o+.0606169*i)/ie);return r===o&&o===i?e=n=a:(e=pe((.4360747*r+.3850649*o+.1430804*i)/oe),n=pe((.0139322*r+.0971045*o+.7141733*i)/ae)),new de(116*a-16,500*(e-a),200*(a-n),t.opacity)}function fe(t,e,n,r){return 1===arguments.length?he(t):new de(t,e,n,null==r?1:r)}function de(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function pe(t){return t>ue?Math.pow(t,1/3):t/ce+se}function ge(t){return t>le?t*t*t:ce*(t-se)}function me(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function be(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ye(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ve)return new ve(t.h,t.c,t.l,t.opacity);if(t instanceof de||(t=he(t)),0===t.a&&0===t.b)return new ve(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*re;return new ve(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new ve(t,e,n,null==r?1:r)}function ve(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function xe(t){if(isNaN(t.h))return new de(t.l,0,0,t.opacity);var e=t.h*ne;return new de(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function we(t){return function(){return t}}function ke(t){return 1==(t=+t)?Me:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):we(isNaN(e)?n:e)}}function Me(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):we(isNaN(t)?e:t)}Tt(de,fe,_t(Et,{brighter:function(t){return new de(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new de(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Vt(me(3.1338561*(e=oe*ge(e))-1.6168667*(t=ie*ge(t))-.4906146*(n=ae*ge(n))),me(-.9787684*e+1.9161415*t+.033454*n),me(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Tt(ve,ye,_t(Et,{brighter:function(t){return new ve(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new ve(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return xe(this).rgb()}}));var Ae=function t(e){var n=ke(e);function r(t,e){var r=n((t=Gt(t)).r,(e=Gt(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),a=Me(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Te(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(n=0;n<r;++n)o[n]=t[n]*(1-i)+e[n]*i;return o}}function _e(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=Ce(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=i[n](t);return a}}function Ee(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function $e(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Oe(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ce(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var Se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ne=new RegExp(Se.source,"g");function Le(t,e){var n,r,o,i=Se.lastIndex=Ne.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Se.exec(t))&&(r=Ne.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:$e(n,r)})),i=Ne.lastIndex;return i<e.length&&(o=e.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Ce(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?we(e):("number"===o?$e:"string"===o?(n=Ht(e))?(e=n,Ae):Le:e instanceof Ht?Ae:e instanceof Date?Ee:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?_e:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Oe:$e:Te))(t,e)}function De(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ze(t,e){var n=Me((t=fe(t)).l,(e=fe(e)).l),r=Me(t.a,e.a),o=Me(t.b,e.b),i=Me(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=o(e),t.opacity=i(e),t+""}}function Re(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Pe(t){return+t}var je=[0,1];function Ie(t){return t}function Fe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Ue(t,e,n){var r=t[0],o=t[1],i=e[0],a=e[1];return o<r?(r=Fe(o,r),i=n(a,i)):(r=Fe(r,o),i=n(i,a)),function(t){return i(r(t))}}function Be(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)o[a]=Fe(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(e){var n=pt(t,e,1,r)-1;return i[n](o[n](e))}}function He(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ye(){var t,e,n,r,o,i,a=je,s=je,l=Ce,c=Ie;function u(){var t,e,n,l=Math.min(a.length,s.length);return c!==Ie&&(t=a[0],e=a[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?Be:Ue,o=i=null,h}function h(e){return null==e||isNaN(e=+e)?n:(o||(o=r(a.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((i||(i=r(s,a.map(t),$e)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Pe),u()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=De,u()},h.clamp=function(t){return arguments.length?(c=!!t||Ie,u()):c!==Ie},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function We(){return Ye()(Ie,Ie)}function qe(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ge(t){return(t=qe(Math.abs(t)))?t[1]:NaN}var Ve,Xe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ke(t){if(!(e=Xe.exec(t)))throw new Error("invalid format: "+t);var e;return new Ze({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ze(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Je(t,e){var n=qe(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Ke.prototype=Ze.prototype,Ze.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Qe={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Je(100*t,e),r:Je,s:function(t,e){var n=qe(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-(Ve=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+qe(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tn(t){return t}var en,nn,rn,on=Array.prototype.map,an=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function sn(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?tn:(e=on.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var o=t.length,i=[],a=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(t.substring(o-=s,o+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return i.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?tn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(on.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ke(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,b=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Qe[y]||(void 0===m&&(m=12),b=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var v="$"===f?o:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?i:/[%p]/.test(y)?l:"",w=Qe[y],k=/[defgprs%]/.test(y);function M(t){var o,i,l,f=v,M=x;if("c"===y)M=w(t)+M,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),b&&(t=function(t){t:for(var e,n=t.length,r=1,o=-1;r<n;++r)switch(t[r]){case".":o=e=r;break;case"0":0===o&&(o=r),e=r;break;default:if(!+t[r])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==h&&(A=!1),f=(A?"("===h?h:c:"-"===h||"("===h?"":h)+f,M=("s"===y?an[8+Ve/3]:"")+M+(A&&"("===h?")":""),k)for(o=-1,i=t.length;++o<i;)if(48>(l=t.charCodeAt(o))||l>57){M=(46===l?a+t.slice(o+1):t.slice(o))+M,t=t.slice(0,o);break}}g&&!d&&(t=r(t,1/0));var T=f.length+t.length+M.length,_=T<p?new Array(p-T+1).join(e):"";switch(g&&d&&(t=r(_+t,_.length?p-M.length:1/0),_=""),n){case"<":t=f+t+M+_;break;case"=":t=f+_+t+M;break;case"^":t=_.slice(0,T=_.length>>1)+f+t+M+_.slice(T);break;default:t=_+f+t+M}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ke(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ge(e)/3))),o=Math.pow(10,-r),i=an[8+r/3];return function(t){return n(o*t)+i}}}}function ln(t,e,n,r){var o,i=kt(t,e,n);switch((r=Ke(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ge(e)/3)))-Ge(Math.abs(t)))}(i,a))||(r.precision=o),rn(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ge(e)-Ge(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-Ge(Math.abs(t)))}(i))||(r.precision=o-2*("%"===r.type))}return nn(r)}function cn(){var t=We();return t.copy=function(){return He(t,cn())},Re.apply(t,arguments),function(t){var e=t.domain;return t.ticks=function(t){var n=e();return xt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ln(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,i=e(),a=0,s=i.length-1,l=i[a],c=i[s],u=10;for(c<l&&(o=l,l=c,c=o,o=a,a=s,s=o);u-- >0;){if((o=wt(l,c,n))===r)return i[a]=l,i[s]=c,e(i);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}r=o}return t},t}(t)}en=sn({thousands:",",grouping:[3],currency:["$",""]}),nn=en.format,rn=en.formatPrefix;const un=new Date,hn=new Date;function fn(t,e,n,r){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=e=>(t(e=new Date(+e)),e),o.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),o.round=t=>{const e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),o.range=(n,r,i)=>{const a=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;let s;do{a.push(s=new Date(+n)),e(n,i),t(n)}while(s<n&&n<r);return a},o.filter=n=>fn((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(o.count=(e,r)=>(un.setTime(+e),hn.setTime(+r),t(un),t(hn),Math.floor(n(un,hn))),o.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?e=>r(e)%t==0:e=>o.count(0,e)%t==0):o:null)),o}const dn=fn((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));dn.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?fn((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):dn:null),dn.range;const pn=1e3,gn=6e4,mn=36e5,bn=864e5,yn=6048e5,vn=2592e6,xn=31536e6,wn=fn((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*pn)}),((t,e)=>(e-t)/pn),(t=>t.getUTCSeconds()));wn.range;const kn=fn((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pn)}),((t,e)=>{t.setTime(+t+e*gn)}),((t,e)=>(e-t)/gn),(t=>t.getMinutes()));kn.range;const Mn=fn((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*gn)}),((t,e)=>(e-t)/gn),(t=>t.getUTCMinutes()));Mn.range;const An=fn((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pn-t.getMinutes()*gn)}),((t,e)=>{t.setTime(+t+e*mn)}),((t,e)=>(e-t)/mn),(t=>t.getHours()));An.range;const Tn=fn((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*mn)}),((t,e)=>(e-t)/mn),(t=>t.getUTCHours()));Tn.range;const _n=fn((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gn)/bn),(t=>t.getDate()-1));_n.range;const En=fn((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/bn),(t=>t.getUTCDate()-1));En.range;const $n=fn((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/bn),(t=>Math.floor(t/bn)));function On(t){return fn((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gn)/yn))}$n.range;const Sn=On(0),Nn=On(1),Ln=On(2),Cn=On(3),Dn=On(4),zn=On(5),Rn=On(6);function Pn(t){return fn((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/yn))}Sn.range,Nn.range,Ln.range,Cn.range,Dn.range,zn.range,Rn.range;const jn=Pn(0),In=Pn(1),Fn=Pn(2),Un=Pn(3),Bn=Pn(4),Hn=Pn(5),Yn=Pn(6);jn.range,In.range,Fn.range,Un.range,Bn.range,Hn.range,Yn.range;const Wn=fn((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));Wn.range;const qn=fn((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));qn.range;const Gn=fn((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Gn.every=t=>isFinite(t=Math.floor(t))&&t>0?fn((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Gn.range;const Vn=fn((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function Xn(t,e,n,r,o,i){const a=[[wn,1,pn],[wn,5,5e3],[wn,15,15e3],[wn,30,3e4],[i,1,gn],[i,5,3e5],[i,15,9e5],[i,30,18e5],[o,1,mn],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,bn],[r,2,1728e5],[n,1,yn],[e,1,vn],[e,3,7776e6],[t,1,xn]];function s(e,n,r){const o=Math.abs(n-e)/r,i=ht((t=>{let[,,e]=t;return e})).right(a,o);if(i===a.length)return t.every(kt(e/xn,n/xn,r));if(0===i)return dn.every(Math.max(kt(e,n,r),1));const[s,l]=a[o/a[i-1][2]<a[i][2]/o?i-1:i];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const o=n&&"function"==typeof n.range?n:s(t,e,n),i=o?o.range(t,+e+1):[];return r?i.reverse():i},s]}Vn.every=t=>isFinite(t=Math.floor(t))&&t>0?fn((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,Vn.range,Xn(Vn,qn,jn,$n,Tn,Mn);const[Kn,Zn]=Xn(Gn,Wn,Sn,_n,An,kn);function Jn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function tr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var er,nr,rr={"-":"",_:" ",0:"0"},or=/^\s*\d+/,ir=/^%/,ar=/[\\^$*+?|[\]().{}]/g;function sr(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function lr(t){return t.replace(ar,"\\$&")}function cr(t){return new RegExp("^(?:"+t.map(lr).join("|")+")","i")}function ur(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function hr(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function fr(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function dr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function pr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function gr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function mr(t,e,n){var r=or.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function br(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vr(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function xr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function wr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function kr(t,e,n){var r=or.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Mr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ar(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function _r(t,e,n){var r=or.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Er(t,e,n){var r=or.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function $r(t,e,n){var r=ir.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Or(t,e,n){var r=or.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Sr(t,e,n){var r=or.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Nr(t,e){return sr(t.getDate(),e,2)}function Lr(t,e){return sr(t.getHours(),e,2)}function Cr(t,e){return sr(t.getHours()%12||12,e,2)}function Dr(t,e){return sr(1+_n.count(Gn(t),t),e,3)}function zr(t,e){return sr(t.getMilliseconds(),e,3)}function Rr(t,e){return zr(t,e)+"000"}function Pr(t,e){return sr(t.getMonth()+1,e,2)}function jr(t,e){return sr(t.getMinutes(),e,2)}function Ir(t,e){return sr(t.getSeconds(),e,2)}function Fr(t){var e=t.getDay();return 0===e?7:e}function Ur(t,e){return sr(Sn.count(Gn(t)-1,t),e,2)}function Br(t){var e=t.getDay();return e>=4||0===e?Dn(t):Dn.ceil(t)}function Hr(t,e){return t=Br(t),sr(Dn.count(Gn(t),t)+(4===Gn(t).getDay()),e,2)}function Yr(t){return t.getDay()}function Wr(t,e){return sr(Nn.count(Gn(t)-1,t),e,2)}function qr(t,e){return sr(t.getFullYear()%100,e,2)}function Gr(t,e){return sr((t=Br(t)).getFullYear()%100,e,2)}function Vr(t,e){return sr(t.getFullYear()%1e4,e,4)}function Xr(t,e){var n=t.getDay();return sr((t=n>=4||0===n?Dn(t):Dn.ceil(t)).getFullYear()%1e4,e,4)}function Kr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+sr(e/60|0,"0",2)+sr(e%60,"0",2)}function Zr(t,e){return sr(t.getUTCDate(),e,2)}function Jr(t,e){return sr(t.getUTCHours(),e,2)}function Qr(t,e){return sr(t.getUTCHours()%12||12,e,2)}function to(t,e){return sr(1+En.count(Vn(t),t),e,3)}function eo(t,e){return sr(t.getUTCMilliseconds(),e,3)}function no(t,e){return eo(t,e)+"000"}function ro(t,e){return sr(t.getUTCMonth()+1,e,2)}function oo(t,e){return sr(t.getUTCMinutes(),e,2)}function io(t,e){return sr(t.getUTCSeconds(),e,2)}function ao(t){var e=t.getUTCDay();return 0===e?7:e}function so(t,e){return sr(jn.count(Vn(t)-1,t),e,2)}function lo(t){var e=t.getUTCDay();return e>=4||0===e?Bn(t):Bn.ceil(t)}function co(t,e){return t=lo(t),sr(Bn.count(Vn(t),t)+(4===Vn(t).getUTCDay()),e,2)}function uo(t){return t.getUTCDay()}function ho(t,e){return sr(In.count(Vn(t)-1,t),e,2)}function fo(t,e){return sr(t.getUTCFullYear()%100,e,2)}function po(t,e){return sr((t=lo(t)).getUTCFullYear()%100,e,2)}function go(t,e){return sr(t.getUTCFullYear()%1e4,e,4)}function mo(t,e){var n=t.getUTCDay();return sr((t=n>=4||0===n?Bn(t):Bn.ceil(t)).getUTCFullYear()%1e4,e,4)}function bo(){return"+0000"}function yo(){return"%"}function vo(t){return+t}function xo(t){return Math.floor(+t/1e3)}function wo(t){return new Date(t)}function ko(t){return t instanceof Date?+t:+new Date(+t)}function Mo(t,e,n,r,o,i,a,s,l,c){var u=We(),h=u.invert,f=u.domain,d=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),b=c("%a %d"),y=c("%b %d"),v=c("%B"),x=c("%Y");function w(t){return(l(t)<t?d:s(t)<t?p:a(t)<t?g:i(t)<t?m:r(t)<t?o(t)<t?b:y:n(t)<t?v:x)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?f(Array.from(t,ko)):f().map(wo)},u.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(function(t,e){var n,r=0,o=(t=t.slice()).length-1,i=t[r],a=t[o];return a<i&&(n=r,r=o,o=n,n=i,i=a,a=n),t[r]=e.floor(i),t[o]=e.ceil(a),t}(n,t)):u},u.copy=function(){return He(u,Mo(t,e,n,r,o,i,a,s,l,c))},u}function Ao(){return Re.apply(Mo(Kn,Zn,Gn,Wn,Sn,_n,An,kn,wn,nr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function To(t,e,n,r){const o=fe(t),[i,a]=n?[Math.min(o.l,r[0]),Math.max(o.l,r[1])]:r;let s=1===e?[o.l]:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}(Ce(i,a),e);if(n&&!s.includes(o.l)){const t=s.reduce(((t,e)=>Math.abs(t)>Math.abs(o.l-e)?o.l-e:t),100);s=s.map((e=>e+t))}return s=s.map((t=>fe(t,o.a,o.b))),s.map((t=>t.hex()))}function _o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Error("cant create getColor function without theme"),{selectedColor:e=0,customColors:n={},keys:r=[],permute:o,includeBaseColor:i=!0,lightnessRange:a=[30,90],positiveColor:s=!1,negativeColor:l=!1,negativeColorValue:c=null,neutralColor:u=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const h=t.colors.palette,f=Lo(e,h),d="number"==typeof e?e:h.indexOf(e);c=Lo(c,h);const p=r.length-Object.keys(n).filter((t=>""!==n[t].toString()&&r.includes(t))).length,g=[];if(n&&Object.keys(n).length){const t={};Object.keys(n).forEach((e=>{String(n[e]).length&&(t[e]=isNaN(n[e])?n[e]:h[n[e]%h.length])})),Object.keys(t).length&&g.push(Eo(t))}var m;(s||l||u)&&g.push($o(s?t.colors.positive:f,l?null!==(m=c)&&void 0!==m?m:t.colors.negative:f,u?t.colors.neutral:s?t.colors.positive:f));const{mode:b}=t.colors;if(b&&p>0&&(b.rotateLimit>=p&&d>-1?g.push(Oo(h,d)):b.shades&&b.shades[f]&&r.length>1&&g.push(So(b.shades[f],p))),p>0){o=void 0===o?p>4:o,a=p<=3?[30,60]:a;let t=To(f,p,i,a);o&&(t=function(t){t.reverse();const e=t.length;if(e<3)return t.slice(0);let n=0,r=-2;const o=[],i={},a=Math.ceil(e/2.5);do{n%=e,!i[n]&&(e<5||Math.abs(r-n)>1)?(o.push(t[n]),i[n]=!0,r=n,n+=a):n+=1}while(o.length<e);return o}(t)),g.push(No(t))}return(t,e,n)=>{let r=null;return g.find((o=>(r=o({key:t,i:e,value:n}),null!=r))),null==r&&(r=f),r}}!function(t){er=function(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,i=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=cr(o),u=ur(o),h=cr(i),f=ur(i),d=cr(a),p=ur(a),g=cr(s),m=ur(s),b=cr(l),y=ur(l),v={a:function(t){return a[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Nr,e:Nr,f:Rr,g:Gr,G:Xr,H:Lr,I:Cr,j:Dr,L:zr,m:Pr,M:jr,p:function(t){return o[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:vo,s:xo,S:Ir,u:Fr,U:Ur,V:Hr,w:Yr,W:Wr,x:null,X:null,y:qr,Y:Vr,Z:Kr,"%":yo},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Zr,e:Zr,f:no,g:po,G:mo,H:Jr,I:Qr,j:to,L:eo,m:ro,M:oo,p:function(t){return o[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:vo,s:xo,S:io,u:ao,U:so,V:co,w:uo,W:ho,x:null,X:null,y:fo,Y:go,Z:bo,"%":yo},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:wr,e:wr,f:Er,g:br,G:mr,H:Mr,I:Mr,j:kr,L:_r,m:xr,M:Ar,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:vr,Q:Or,s:Sr,S:Tr,u:fr,U:dr,V:pr,w:hr,W:gr,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:br,Y:mr,Z:yr,"%":$r};function k(t,e){return function(n){var r,o,i,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(o=rr[r=t.charAt(++s)])?r=t.charAt(++s):o="e"===r?" ":"0",(i=e[r])&&(r=i(n,o)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function M(t,e){return function(n){var r,o,i=tr(1900,void 0,1);if(A(i,t,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(e&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(o=(r=Qn(tr(i.y,0,1))).getUTCDay(),r=o>4||0===o?In.ceil(r):In(r),r=En.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(o=(r=Jn(tr(i.y,0,1))).getDay(),r=o>4||0===o?Nn.ceil(r):Nn(r),r=_n.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?Qn(tr(i.y,0,1)).getUTCDay():Jn(tr(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Qn(i)):Jn(i)}}function A(t,e,n,r){for(var o,i,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(o=e.charCodeAt(a++))){if(o=e.charAt(a++),!(i=w[o in rr?e.charAt(a++):o])||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return v.x=k(n,v),v.X=k(r,v),v.c=k(e,v),x.x=k(n,x),x.X=k(r,x),x.c=k(e,x),{format:function(t){var e=k(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}(t),nr=er.format,er.parse,er.utcFormat,er.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const Eo=t=>e=>({}.hasOwnProperty.call(t,e.key)?t[String(e.key)]:null),$o=(t,e,n)=>r=>r.value>0?t:r.value<0?e:n,Oo=(t,e)=>n=>t[(Math.max(0,e)+n.i)%t.length],So=(t,e)=>function(n){if("string"!=typeof t[0]){t.sort((function(t,e){return t.length-e.length}));let r=t.length-1;return t.forEach((function(t,n){e>(t[n-1]||[]).length&&e<=t.length&&(r=n)})),t[r][n.i%t[r].length]}return t[n.i%t.length]},No=t=>{let e=0;const n=[];return r=>n[r.i]?n[r.i]:e!==t.length?n[r.i]=t[e++]:null},Lo=(t,e)=>null===t?e[0]:isNaN(t)?t:e[t%e.length];function Co(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Do="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function zo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ro,Po,jo,Io,Fo,Uo,Bo,Ho,Yo,Wo,qo,Go,Vo,Xo,Ko,Zo,Jo,Qo,ti={exports:{}};(function(t){function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,r,o){return t[1]&&o?n(r.ctx.slice(),t[1](o(e))):r.ctx}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g("")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function w(t,e,n){t.classList[n?"add":"remove"](e)}class k{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=p(e.nodeName):this.e=d(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)u(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(h)}}let M;function A(t){M=t}function T(){const t=function(){if(!M)throw new Error("Function called outside component initialization");return M}();return function(e,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.$$.callbacks[e];if(o){const i=function(t,e){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function _(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const E=[],$=[];let O=[];const S=[],N=Promise.resolve();let L=!1;function C(){L||(L=!0,N.then(j))}function D(){return C(),N}function z(t){O.push(t)}const R=new Set;let P=0;function j(){if(0!==P)return;const t=M;do{try{for(;P<E.length;){const t=E[P];P++,A(t),I(t.$$)}}catch(t){throw E.length=0,P=0,t}for(A(null),E.length=0,P=0;$.length;)$.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];R.has(e)||(R.add(e),e())}O.length=0}while(E.length);for(;S.length;)S.pop()();L=!1,R.clear(),A(t)}function I(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const F=new Set;let U;function B(){U={r:0,c:[],p:U}}function H(){U.r||i(U.c),U=U.p}function Y(t,e){t&&t.i&&(F.delete(t),t.i(e))}function W(t,e,n,r){if(t&&t.o){if(F.has(t))return;F.add(t),U.c.push((()=>{F.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function q(t){t&&t.c()}function G(t,e,n,o){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),o||z((()=>{const e=t.$$.on_mount.map(r).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]})),l.forEach(z)}function V(t,e){const n=t.$$;null!==n.fragment&&(function(t){const e=[],n=[];O.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),O=e}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,n,r,a,s,l,c){let u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const f=M;A(t);const d=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let p=!1;if(d.ctx=r?r(t,n.props||{},(function(e,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return d.ctx&&s(d.ctx[e],d.ctx[e]=r)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](r),p&&function(t,e){-1===t.$$.dirty[0]&&(E.push(t),C(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],d.update(),p=!0,i(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();n.intro&&Y(t.$$.fragment),G(t,n.target,n.anchor,n.customElement),j()}A(f)}class K{$destroy(){V(this,1),this.$destroy=e}$on(t,n){if(!a(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Z(t){let e,n,r=t[8](t[2])+"",o=t[3]&&J(t);return{c(){e=d("div"),n=d("span"),o&&o.c(),y(e,"class","legend-title label"),y(e,"aria-hidden","true")},m(t,i){u(t,e,i),c(e,n),n.innerHTML=r,o&&o.m(e,null)},p(t,i){260&i&&r!==(r=t[8](t[2])+"")&&(n.innerHTML=r),t[3]?o?o.p(t,i):(o=J(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&h(e),o&&o.d()}}}function J(t){let e,n,r=t[8](t[2])+"";return{c(){e=d("div"),n=d("span"),x(n,"color",t[3].color),x(n,"-webkit-text-stroke",t[3].textStroke),y(e,"class","legend-title label buffer"),y(e,"aria-hidden","true")},m(t,o){u(t,e,o),c(e,n),n.innerHTML=r},p(t,e){260&e&&r!==(r=t[8](t[2])+"")&&(n.innerHTML=r),8&e&&x(n,"color",t[3].color),8&e&&x(n,"-webkit-text-stroke",t[3].textStroke)},d(t){t&&h(e)}}}function Q(t){let e,n,r,o,i,a=t[2]&&Z(t);const s=t[10].default,f=function(t,e,n,r){if(t){const r=l(t,e,n,null);return t[0](r)}}(s,t,t[9]);return{c(){e=d("div"),a&&a.c(),n=m(),f&&f.c(),y(e,"class",t[0]),y(e,"role","graphics-legend"),y(e,"aria-label",t[1]),x(e,"width",t[4]),x(e,"height",t[5]),x(e,"max-width",t[6]),x(e,"max-height",t[7])},m(s,l){u(s,e,l),a&&a.m(e,null),c(e,n),f&&f.m(e,null),r=!0,o||(i=b(e,"mouseleave",t[11]),o=!0)},p(t,o){let[i]=o;t[2]?a?a.p(t,i):(a=Z(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null),f&&f.p&&(!r||512&i)&&function(t,e,n,r,o,i){if(o){const i=l(e,n,r,null);t.p(i,o)}}(f,s,t,t[9],r?function(t,e,n,r){return t[2],e.dirty}(s,t[9]):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[9])),(!r||1&i)&&y(e,"class",t[0]),(!r||2&i)&&y(e,"aria-label",t[1]),16&i&&x(e,"width",t[4]),32&i&&x(e,"height",t[5]),64&i&&x(e,"max-width",t[6]),128&i&&x(e,"max-height",t[7])},i(t){r||(Y(f,t),r=!0)},o(t){W(f,t),r=!1},d(t){t&&h(e),a&&a.d(),f&&f.d(t),o=!1,i()}}}function tt(t,e,n){let{$$slots:r={},$$scope:o}=e,{className:i=""}=e,{ariaLabel:a=""}=e,{title:s=""}=e,{buffer:l}=e,{width:c="auto"}=e,{height:u="auto"}=e,{maxWidth:h=null}=e,{maxHeight:f=null}=e,{purifyHtml:d}=e;return t.$$set=t=>{"className"in t&&n(0,i=t.className),"ariaLabel"in t&&n(1,a=t.ariaLabel),"title"in t&&n(2,s=t.title),"buffer"in t&&n(3,l=t.buffer),"width"in t&&n(4,c=t.width),"height"in t&&n(5,u=t.height),"maxWidth"in t&&n(6,h=t.maxWidth),"maxHeight"in t&&n(7,f=t.maxHeight),"purifyHtml"in t&&n(8,d=t.purifyHtml),"$$scope"in t&&n(9,o=t.$$scope)},[i,a,s,l,c,u,h,f,d,o,r,function(e){_.call(this,t,e)}]}class et extends K{constructor(t){super(),X(this,t,tt,Q,s,{className:0,ariaLabel:1,title:2,buffer:3,width:4,height:5,maxWidth:6,maxHeight:7,purifyHtml:8})}}function nt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return t;const r=Array.isArray(e)?e:e.split(".");let o=t;for(let t=0;t<r.length&&null!=o;t++)o=o[r[t]];return null==o?n:o}var rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Do?Do:"undefined"!=typeof self?self:{};function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var it,at={exports:{}};
/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */function st(){return it||(it=1,function(t,e){t.exports=function(){const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:o}=Object;let{freeze:i,seal:a,create:s}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;i||(i=function(t){return t}),a||(a=function(t){return t}),l||(l=function(t,e,n){return t.apply(e,n)}),c||(c=function(t,e){return new t(...e)});const u=w(Array.prototype.forEach),h=w(Array.prototype.pop),f=w(Array.prototype.push),d=w(String.prototype.toLowerCase),p=w(String.prototype.toString),g=w(String.prototype.match),m=w(String.prototype.replace),b=w(String.prototype.indexOf),y=w(String.prototype.trim),v=w(RegExp.prototype.test),x=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return c(t,n)}}(TypeError);function w(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return l(t,e,r)}}function k(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;e&&e(t,null);let i=r.length;for(;i--;){let e=r[i];if("string"==typeof e){const t=o(e);t!==e&&(n(r)||(r[i]=t),e=t)}t[e]=!0}return t}function M(e){const n=s(null);for(const[r,i]of t(e))void 0!==o(e,r)&&(n[r]=i);return n}function A(t,e){for(;null!==t;){const n=o(t,e);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}t=r(t)}return function(t){return console.warn("fallback value for",t),null}}const T=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),E=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),S=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=i(["#text"]),L=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),C=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),R=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),P=a(/<%[\w\W]*|[\w\W]*%>/gm),j=a(/\${[\w\W]*}/gm),I=a(/^data-[\-\w.\u00B7-\uFFFF]/),F=a(/^aria-[\-\w]+$/),U=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B=a(/^(?:\w+script|data):/i),H=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=a(/^html$/i);var W=Object.freeze({__proto__:null,MUSTACHE_EXPR:R,ERB_EXPR:P,TMPLIT_EXPR:j,DATA_ATTR:I,ARIA_ATTR:F,IS_ALLOWED_URI:U,IS_SCRIPT_OR_DATA:B,ATTR_WHITESPACE:H,DOCTYPE_NAME:Y}),q=function e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const r=t=>e(t);if(r.version="3.0.6",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;let{document:o}=n;const a=o,l=a.currentScript,{DocumentFragment:c,HTMLTemplateElement:w,Node:R,Element:P,NodeFilter:j,NamedNodeMap:I=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:F,DOMParser:B,trustedTypes:H}=n,q=P.prototype,G=A(q,"cloneNode"),V=A(q,"nextSibling"),X=A(q,"childNodes"),K=A(q,"parentNode");if("function"==typeof w){const t=o.createElement("template");t.content&&t.content.ownerDocument&&(o=t.content.ownerDocument)}let Z,J="";const{implementation:Q,createNodeIterator:tt,createDocumentFragment:et,getElementsByTagName:nt}=o,{importNode:rt}=a;let ot={};r.isSupported="function"==typeof t&&"function"==typeof K&&Q&&void 0!==Q.createHTMLDocument;const{MUSTACHE_EXPR:it,ERB_EXPR:at,TMPLIT_EXPR:st,DATA_ATTR:lt,ARIA_ATTR:ct,IS_SCRIPT_OR_DATA:ut,ATTR_WHITESPACE:ht}=W;let{IS_ALLOWED_URI:ft}=W,dt=null;const pt=k({},[...T,..._,...E,...O,...N]);let gt=null;const mt=k({},[...L,...C,...D,...z]);let bt=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,vt=null,xt=!0,wt=!0,kt=!1,Mt=!0,At=!1,Tt=!1,_t=!1,Et=!1,$t=!1,Ot=!1,St=!1,Nt=!0,Lt=!1,Ct=!0,Dt=!1,zt={},Rt=null;const Pt=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jt=null;const It=k({},["audio","video","img","source","image","track"]);let Ft=null;const Ut=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bt="http://www.w3.org/1998/Math/MathML",Ht="http://www.w3.org/2000/svg",Yt="http://www.w3.org/1999/xhtml";let Wt=Yt,qt=!1,Gt=null;const Vt=k({},[Bt,Ht,Yt],p);let Xt=null;const Kt=["application/xhtml+xml","text/html"];let Zt=null,Jt=null;const Qt=o.createElement("form"),te=function(t){return t instanceof RegExp||t instanceof Function},ee=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Jt||Jt!==t){if(t&&"object"==typeof t||(t={}),t=M(t),Xt=Xt=-1===Kt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,Zt="application/xhtml+xml"===Xt?p:d,dt="ALLOWED_TAGS"in t?k({},t.ALLOWED_TAGS,Zt):pt,gt="ALLOWED_ATTR"in t?k({},t.ALLOWED_ATTR,Zt):mt,Gt="ALLOWED_NAMESPACES"in t?k({},t.ALLOWED_NAMESPACES,p):Vt,Ft="ADD_URI_SAFE_ATTR"in t?k(M(Ut),t.ADD_URI_SAFE_ATTR,Zt):Ut,jt="ADD_DATA_URI_TAGS"in t?k(M(It),t.ADD_DATA_URI_TAGS,Zt):It,Rt="FORBID_CONTENTS"in t?k({},t.FORBID_CONTENTS,Zt):Pt,yt="FORBID_TAGS"in t?k({},t.FORBID_TAGS,Zt):{},vt="FORBID_ATTR"in t?k({},t.FORBID_ATTR,Zt):{},zt="USE_PROFILES"in t&&t.USE_PROFILES,xt=!1!==t.ALLOW_ARIA_ATTR,wt=!1!==t.ALLOW_DATA_ATTR,kt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Mt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,At=t.SAFE_FOR_TEMPLATES||!1,Tt=t.WHOLE_DOCUMENT||!1,$t=t.RETURN_DOM||!1,Ot=t.RETURN_DOM_FRAGMENT||!1,St=t.RETURN_TRUSTED_TYPE||!1,Et=t.FORCE_BODY||!1,Nt=!1!==t.SANITIZE_DOM,Lt=t.SANITIZE_NAMED_PROPS||!1,Ct=!1!==t.KEEP_CONTENT,Dt=t.IN_PLACE||!1,ft=t.ALLOWED_URI_REGEXP||U,Wt=t.NAMESPACE||Yt,bt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&te(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&te(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(bt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),At&&(wt=!1),Ot&&($t=!0),zt&&(dt=k({},[...N]),gt=[],!0===zt.html&&(k(dt,T),k(gt,L)),!0===zt.svg&&(k(dt,_),k(gt,C),k(gt,z)),!0===zt.svgFilters&&(k(dt,E),k(gt,C),k(gt,z)),!0===zt.mathMl&&(k(dt,O),k(gt,D),k(gt,z))),t.ADD_TAGS&&(dt===pt&&(dt=M(dt)),k(dt,t.ADD_TAGS,Zt)),t.ADD_ATTR&&(gt===mt&&(gt=M(gt)),k(gt,t.ADD_ATTR,Zt)),t.ADD_URI_SAFE_ATTR&&k(Ft,t.ADD_URI_SAFE_ATTR,Zt),t.FORBID_CONTENTS&&(Rt===Pt&&(Rt=M(Rt)),k(Rt,t.FORBID_CONTENTS,Zt)),Ct&&(dt["#text"]=!0),Tt&&k(dt,["html","head","body"]),dt.table&&(k(dt,["tbody"]),delete yt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Z=t.TRUSTED_TYPES_POLICY,J=Z.createHTML("")}else void 0===Z&&(Z=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(H,l)),null!==Z&&"string"==typeof J&&(J=Z.createHTML(""));i&&i(t),Jt=t}},ne=k({},["mi","mo","mn","ms","mtext"]),re=k({},["foreignobject","desc","title","annotation-xml"]),oe=k({},["title","style","font","a","script"]),ie=k({},_);k(ie,E),k(ie,$);const ae=k({},O);k(ae,S);const se=function(t){f(r.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},le=function(t,e){try{f(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!gt[t])if($t||Ot)try{se(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ce=function(t){let e=null,n=null;if(Et)t="<remove></remove>"+t;else{const e=g(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===Xt&&Wt===Yt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=Z?Z.createHTML(t):t;if(Wt===Yt)try{e=(new B).parseFromString(r,Xt)}catch(t){}if(!e||!e.documentElement){e=Q.createDocument(Wt,"template",null);try{e.documentElement.innerHTML=qt?J:r}catch(t){}}const i=e.body||e.documentElement;return t&&n&&i.insertBefore(o.createTextNode(n),i.childNodes[0]||null),Wt===Yt?nt.call(e,Tt?"html":"body")[0]:Tt?e.documentElement:i},ue=function(t){return tt.call(t.ownerDocument||t,t,j.SHOW_ELEMENT|j.SHOW_COMMENT|j.SHOW_TEXT,null)},he=function(t){return"function"==typeof R&&t instanceof R},fe=function(t,e,n){ot[t]&&u(ot[t],(t=>{t.call(r,e,n,Jt)}))},de=function(t){let e=null;if(fe("beforeSanitizeElements",t,null),function(t){return t instanceof F&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof I)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)}(t))return se(t),!0;const n=Zt(t.nodeName);if(fe("uponSanitizeElement",t,{tagName:n,allowedTags:dt}),t.hasChildNodes()&&!he(t.firstElementChild)&&v(/<[/\w]/g,t.innerHTML)&&v(/<[/\w]/g,t.textContent))return se(t),!0;if(!dt[n]||yt[n]){if(!yt[n]&&ge(n)){if(bt.tagNameCheck instanceof RegExp&&v(bt.tagNameCheck,n))return!1;if(bt.tagNameCheck instanceof Function&&bt.tagNameCheck(n))return!1}if(Ct&&!Rt[n]){const e=K(t)||t.parentNode,n=X(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r)e.insertBefore(G(n[r],!0),V(t))}return se(t),!0}return t instanceof P&&!function(t){let e=K(t);e&&e.tagName||(e={namespaceURI:Wt,tagName:"template"});const n=d(t.tagName),r=d(e.tagName);return!!Gt[t.namespaceURI]&&(t.namespaceURI===Ht?e.namespaceURI===Yt?"svg"===n:e.namespaceURI===Bt?"svg"===n&&("annotation-xml"===r||ne[r]):Boolean(ie[n]):t.namespaceURI===Bt?e.namespaceURI===Yt?"math"===n:e.namespaceURI===Ht?"math"===n&&re[r]:Boolean(ae[n]):t.namespaceURI===Yt?!(e.namespaceURI===Ht&&!re[r])&&!(e.namespaceURI===Bt&&!ne[r])&&!ae[n]&&(oe[n]||!ie[n]):!("application/xhtml+xml"!==Xt||!Gt[t.namespaceURI]))}(t)?(se(t),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!v(/<\/no(script|embed|frames)/i,t.innerHTML)?(At&&3===t.nodeType&&(e=t.textContent,u([it,at,st],(t=>{e=m(e,t," ")})),t.textContent!==e&&(f(r.removed,{element:t.cloneNode()}),t.textContent=e)),fe("afterSanitizeElements",t,null),!1):(se(t),!0)},pe=function(t,e,n){if(Nt&&("id"===e||"name"===e)&&(n in o||n in Qt))return!1;if(wt&&!vt[e]&&v(lt,e));else if(xt&&v(ct,e));else if(!gt[e]||vt[e]){if(!(ge(t)&&(bt.tagNameCheck instanceof RegExp&&v(bt.tagNameCheck,t)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(t))&&(bt.attributeNameCheck instanceof RegExp&&v(bt.attributeNameCheck,e)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(e))||"is"===e&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&v(bt.tagNameCheck,n)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(n))))return!1}else if(Ft[e]);else if(v(ft,m(n,ht,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==b(n,"data:")||!jt[t])if(kt&&!v(ut,m(n,ht,"")));else if(n)return!1;return!0},ge=function(t){return t.indexOf("-")>0},me=function(t){fe("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gt};let o=e.length;for(;o--;){const i=e[o],{name:a,namespaceURI:s,value:l}=i,c=Zt(a);let f="value"===a?l:y(l);if(n.attrName=c,n.attrValue=f,n.keepAttr=!0,n.forceKeepAttr=void 0,fe("uponSanitizeAttribute",t,n),f=n.attrValue,n.forceKeepAttr)continue;if(le(a,t),!n.keepAttr)continue;if(!Mt&&v(/\/>/i,f)){le(a,t);continue}At&&u([it,at,st],(t=>{f=m(f,t," ")}));const d=Zt(t.nodeName);if(pe(d,c,f)){if(!Lt||"id"!==c&&"name"!==c||(le(a,t),f="user-content-"+f),Z&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(s);else switch(H.getAttributeType(d,c)){case"TrustedHTML":f=Z.createHTML(f);break;case"TrustedScriptURL":f=Z.createScriptURL(f)}try{s?t.setAttributeNS(s,a,f):t.setAttribute(a,f),h(r.removed)}catch(t){}}}fe("afterSanitizeAttributes",t,null)},be=function t(e){let n=null;const r=ue(e);for(fe("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)fe("uponSanitizeShadowNode",n,null),de(n)||(n.content instanceof c&&t(n.content),me(n));fe("afterSanitizeShadowDOM",e,null)};return r.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=null,i=null,s=null;if(qt=!t,qt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!he(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!r.isSupported)return t;if(_t||ee(e),r.removed=[],"string"==typeof t&&(Dt=!1),Dt){if(t.nodeName){const e=Zt(t.nodeName);if(!dt[e]||yt[e])throw x("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof R)n=ce("\x3c!----\x3e"),o=n.ownerDocument.importNode(t,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!$t&&!At&&!Tt&&-1===t.indexOf("<"))return Z&&St?Z.createHTML(t):t;if(n=ce(t),!n)return $t?null:St?J:""}n&&Et&&se(n.firstChild);const l=ue(Dt?t:n);for(;i=l.nextNode();)de(i)||(i.content instanceof c&&be(i.content),me(i));if(Dt)return t;if($t){if(Ot)for(s=et.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(gt.shadowroot||gt.shadowrootmode)&&(s=rt.call(a,s,!0)),s}let h=Tt?n.outerHTML:n.innerHTML;return Tt&&dt["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&v(Y,n.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+h),At&&u([it,at,st],(t=>{h=m(h,t," ")})),Z&&St?Z.createHTML(h):h},r.setConfig=function(){ee(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),_t=!0},r.clearConfig=function(){Jt=null,_t=!1},r.isValidAttribute=function(t,e,n){Jt||ee({});const r=Zt(t),o=Zt(e);return pe(r,o,n)},r.addHook=function(t,e){"function"==typeof e&&(ot[t]=ot[t]||[],f(ot[t],e))},r.removeHook=function(t){if(ot[t])return h(ot[t])},r.removeHooks=function(t){ot[t]&&(ot[t]=[])},r.removeAllHooks=function(){ot={}},r}();return q}()}(at)),at.exports}window.DOMPurify||(window.DOMPurify=st().default||st());var lt,ct=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},ut="object"==typeof rt&&rt&&rt.Object===Object&&rt,ht="object"==typeof self&&self&&self.Object===Object&&self,ft=ut||ht||Function("return this")(),dt=ft.Symbol,pt=dt,gt=Object.prototype,mt=gt.hasOwnProperty,bt=gt.toString,yt=pt?pt.toStringTag:void 0,vt=Object.prototype.toString,xt=function(t){var e=mt.call(t,yt),n=t[yt];try{t[yt]=void 0;var r=!0}catch(t){}var o=bt.call(t);return r&&(e?t[yt]=n:delete t[yt]),o},wt=dt?dt.toStringTag:void 0,kt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":wt&&wt in Object(t)?xt(t):function(t){return vt.call(t)}(t)},Mt=ct,At=ft["__core-js_shared__"],Tt=(lt=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||""))?"Symbol(src)_1."+lt:"",_t=Function.prototype.toString,Et=function(t){if(!Mt(t))return!1;var e=kt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},$t=function(t){return!!Tt&&Tt in t},Ot=ct,St=/^\[object .+?Constructor\]$/,Nt=Function.prototype,Lt=Object.prototype,Ct=Nt.toString,Dt=Lt.hasOwnProperty,zt=RegExp("^"+Ct.call(Dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=function(t){return!(!Ot(t)||$t(t))&&(Et(t)?zt:St).test(function(t){if(null!=t){try{return _t.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))},Pt=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Rt(n)?n:void 0},jt=Pt;!function(){try{var t=jt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var It=Pt(Object,"create"),Ft=It,Ut=It,Bt=Object.prototype.hasOwnProperty,Ht=It,Yt=Object.prototype.hasOwnProperty,Wt=It,qt=function(){this.__data__=Ft?Ft(null):{},this.size=0},Gt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vt=function(t){var e=this.__data__;if(Ut){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Bt.call(e,t)?e[t]:void 0};function Xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xt.prototype.clear=qt,Xt.prototype.delete=Gt,Xt.prototype.get=Vt,Xt.prototype.has=function(t){var e=this.__data__;return Ht?void 0!==e[t]:Yt.call(e,t)},Xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Wt&&void 0===e?"__lodash_hash_undefined__":e,this};var Kt=Xt,Zt=function(t,e){return t===e||t!=t&&e!=e},Jt=function(t,e){for(var n=t.length;n--;)if(Zt(t[n][0],e))return n;return-1},Qt=Jt,te=Array.prototype.splice,ee=Jt,ne=Jt,re=Jt,oe=function(){this.__data__=[],this.size=0};function ie(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ie.prototype.clear=oe,ie.prototype.delete=function(t){var e=this.__data__,n=Qt(e,t);return!(n<0||(n==e.length-1?e.pop():te.call(e,n,1),--this.size,0))},ie.prototype.get=function(t){var e=this.__data__,n=ee(e,t);return n<0?void 0:e[n][1]},ie.prototype.has=function(t){return ne(this.__data__,t)>-1},ie.prototype.set=function(t,e){var n=this.__data__,r=re(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var ae=ie,se=Pt(ft,"Map"),le=Kt,ce=ae,ue=se,he=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map},fe=he,de=he,pe=he,ge=he;function me(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}me.prototype.clear=function(){this.size=0,this.__data__={hash:new le,map:new(ue||ce),string:new le}},me.prototype.delete=function(t){var e=fe(this,t).delete(t);return this.size-=e?1:0,e},me.prototype.get=function(t){return de(this,t).get(t)},me.prototype.has=function(t){return pe(this,t).has(t)},me.prototype.set=function(t,e){var n=ge(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var be=me;function ye(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ye.Cache||be),n}ye.Cache=be;var ve=ye,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/\\(\\)?/g;!function(t){var e=ve((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(xe,(function(t,n,r,o){e.push(r?o.replace(we,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache}();var ke=dt?dt.prototype:void 0;ke&&ke.toString;var Me="object"==typeof rt&&rt&&rt.Object===Object&&rt,Ae=Me,Te="object"==typeof self&&self&&self.Object===Object&&self,_e=Ae||Te||Function("return this")(),Ee=_e.Symbol,$e=Ee,Oe=Object.prototype,Se=Oe.hasOwnProperty,Ne=Oe.toString,Le=$e?$e.toStringTag:void 0,Ce=Object.prototype.toString,De=function(t){var e=Se.call(t,Le),n=t[Le];try{t[Le]=void 0;var r=!0}catch(t){}var o=Ne.call(t);return r&&(e?t[Le]=n:delete t[Le]),o},ze=Ee?Ee.toStringTag:void 0,Re=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ze&&ze in Object(t)?De(t):function(t){return Ce.call(t)}(t)},Pe=function(t){return null!=t&&"object"==typeof t},je=Re,Ie=Pe,Fe=function(t){return Ie(t)&&"[object Arguments]"==je(t)},Ue=Pe,Be=Object.prototype,He=Be.hasOwnProperty,Ye=Be.propertyIsEnumerable,We=Fe(function(){return arguments}())?Fe:function(t){return Ue(t)&&He.call(t,"callee")&&!Ye.call(t,"callee")},qe=We,Ge=Array.isArray,Ve={exports:{}},Xe=function(){return!1};!function(t,e){var n=_e,r=Xe,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;t.exports=s}(Ve,Ve.exports);var Ke=/^(?:0|[1-9]\d*)$/,Ze={exports:{}};!function(t,e){var n=Me,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r&&n.process,a=function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}(Ze,Ze.exports);var Je=Ze.exports;Je&&Je.isTypedArray;var Qe=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},tn=Re,en=Qe,nn=function(t,e){return t===e||t!=t&&e!=e},rn=function(t,e){for(var n=t.length;n--;)if(nn(t[n][0],e))return n;return-1},on=rn,an=Array.prototype.splice,sn=rn,ln=rn,cn=rn,un=function(){this.__data__=[],this.size=0};function hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hn.prototype.clear=un,hn.prototype.delete=function(t){var e=this.__data__,n=on(e,t);return!(n<0||(n==e.length-1?e.pop():an.call(e,n,1),--this.size,0))},hn.prototype.get=function(t){var e=this.__data__,n=sn(e,t);return n<0?void 0:e[n][1]},hn.prototype.has=function(t){return ln(this.__data__,t)>-1},hn.prototype.set=function(t,e){var n=this.__data__,r=cn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var fn=hn,dn=_e["__core-js_shared__"],pn=function(){var t=/[^.]+$/.exec(dn&&dn.keys&&dn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gn=Function.prototype.toString,mn=function(t){if(null!=t){try{return gn.call(t)}catch(t){}try{return t+""}catch(t){}}return""},bn=function(t){if(!en(t))return!1;var e=tn(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},yn=function(t){return!!pn&&pn in t},vn=Qe,xn=mn,wn=/^\[object .+?Constructor\]$/,kn=Function.prototype,Mn=Object.prototype,An=kn.toString,Tn=Mn.hasOwnProperty,_n=RegExp("^"+An.call(Tn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),En=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!vn(t)||yn(t))&&(bn(t)?_n:wn).test(xn(t))}(n)?n:void 0},$n=En(_e,"Map"),On=En(Object,"create"),Sn=On,Nn=On,Ln=Object.prototype.hasOwnProperty,Cn=On,Dn=Object.prototype.hasOwnProperty,zn=On,Rn=function(){this.__data__=Sn?Sn(null):{},this.size=0},Pn=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jn=function(t){var e=this.__data__;if(Nn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Ln.call(e,t)?e[t]:void 0};function In(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}In.prototype.clear=Rn,In.prototype.delete=Pn,In.prototype.get=jn,In.prototype.has=function(t){var e=this.__data__;return Cn?void 0!==e[t]:Dn.call(e,t)},In.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zn&&void 0===e?"__lodash_hash_undefined__":e,this};var Fn=In,Un=fn,Bn=$n,Hn=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map},Yn=Hn,Wn=Hn,qn=Hn,Gn=Hn;function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new Fn,map:new(Bn||Un),string:new Fn}},Vn.prototype.delete=function(t){var e=Yn(this,t).delete(t);return this.size-=e?1:0,e},Vn.prototype.get=function(t){return Wn(this,t).get(t)},Vn.prototype.has=function(t){return qn(this,t).has(t)},Vn.prototype.set=function(t,e){var n=Gn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var Xn=Vn;_e.Uint8Array;var Kn=Ee?Ee.prototype:void 0;Kn&&Kn.valueOf;var Zn=En(_e,"DataView"),Jn=$n,Qn=En(_e,"Promise"),tr=En(_e,"Set"),er=En(_e,"WeakMap"),nr=Re,rr=mn,or="[object Map]",ir="[object Promise]",ar="[object Set]",sr="[object WeakMap]",lr="[object DataView]",cr=rr(Zn),ur=rr(Jn),hr=rr(Qn),fr=rr(tr),dr=rr(er),pr=nr;(Zn&&pr(new Zn(new ArrayBuffer(1)))!=lr||Jn&&pr(new Jn)!=or||Qn&&pr(Qn.resolve())!=ir||tr&&pr(new tr)!=ar||er&&pr(new er)!=sr)&&(pr=function(t){var e=nr(t),n="[object Object]"==e?t.constructor:void 0,r=n?rr(n):"";if(r)switch(r){case cr:return lr;case ur:return or;case hr:return ir;case fr:return ar;case dr:return sr}return e});var gr=Re,mr=Pe,br=function(t){return"symbol"==typeof t||mr(t)&&"[object Symbol]"==gr(t)},yr=Ge,vr=br,xr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wr=/^\w*$/,kr=Xn;function Mr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Mr.Cache||kr),n}Mr.Cache=kr;var Ar=Mr,Tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_r=/\\(\\)?/g,Er=function(t){var e=Ar((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Tr,(function(t,n,r,o){e.push(r?o.replace(_r,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}(),$r=Ge,Or=br,Sr=Ee?Ee.prototype:void 0,Nr=Sr?Sr.toString:void 0,Lr=function t(e){if("string"==typeof e)return e;if($r(e))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(e,t)+"";if(Or(e))return Nr?Nr.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},Cr=Ge,Dr=function(t,e){if(yr(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!vr(t))||wr.test(t)||!xr.test(t)||null!=e&&t in Object(e)},zr=Er,Rr=br,Pr=function(t,e){return Cr(t)?t:Dr(t,e)?[t]:zr(function(t){return null==t?"":Lr(t)}(t))},jr=qe,Ir=Ge,Fr=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Ke.test(t))&&t>-1&&t%1==0&&t<e},Ur=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Br=function(t){if("string"==typeof t||Rr(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Hr=ot((function(t){return t})),Yr=Object.prototype.hasOwnProperty,Wr=function(t,e){return null!=t&&Yr.call(t,e)},qr=function(t,e,n){for(var r=-1,o=(e=Pr(e,t)).length,i=!1;++r<o;){var a=Br(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Ur(o)&&Fr(a,o)&&(Ir(t)||jr(t))},Gr=ot((function(t,e){return null!=t&&qr(t,e,Wr)}));function Vr(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}var Xr=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Kr(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,o=t-1;r>1;)o*=r,r--;return 0===o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Kr(1-t));if(t>=171.35)return 1/0;if(t>85){var i=t*t,a=i*t,s=a*t,l=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*i)-139/(51840*a)-571/(2488320*s)+163879/(209018880*l)+5246819/(75246796800*l*t))}--t,n=Xr[0];for(var c=1;c<Xr.length;++c)n+=Xr[c]/(t+c);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}var Zr=1/3,Jr=Object.freeze({__proto__:null,add:function(t,e){return Number(t)+Number(e)},sub:function(t,e){return t-e},mul:function(t,e){return t*e},div:function(t,e){return t/e},mod:function(t,e){return t%e},concat:function(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e},equal:function(t,e){return t===e},notEqual:function(t,e){return t!==e},greaterThan:function(t,e){return t>e},lessThan:function(t,e){return t<e},greaterThanEqual:function(t,e){return t>=e},lessThanEqual:function(t,e){return t<=e},andOperator:function(t,e){return Boolean(t&&e)},orOperator:function(t,e){return Boolean(t||e)},inOperator:function(t,e){return Vr(e,t)},sinh:function(t){return(Math.exp(t)-Math.exp(-t))/2},cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},tanh:function(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},asinh:function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},atanh:function(t){return Math.log((1+t)/(1-t))/2},log10:function(t){return Math.log(t)*Math.LOG10E},neg:function(t){return-t},not:function(t){return!t},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},random:function(t){return Math.random()*(t||1)},factorial:function(t){return Kr(t+1)},gamma:Kr,stringOrArrayLength:function(t){return Array.isArray(t)?t.length:String(t).length},hypot:function(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,o=Math.abs(arguments[n]);e<o?(t=t*(r=e/o)*r+1,e=o):t+=o>0?(r=o/e)*r:o}return e===1/0?1/0:e*Math.sqrt(t)},condition:function(t,e,n){return t?e:n},roundTo:function(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))},setVar:function(t,e,n){return n&&(n[t]=e),e},arrayIndex:function(t,e){return t[0|e]},max:function(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)},min:function(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)},arrayMap:function(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))},arrayFold:function(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)},arrayFilter:function(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))},stringOrArrayIndexOf:function(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)},arrayJoin:function(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)},sign:function(t){return(t>0)-(t<0)||+t},cbrt:function(t){return t<0?-Math.pow(-t,Zr):Math.pow(t,Zr)},expm1:function(t){return Math.exp(t)-1},log1p:function(t){return Math.log(1+t)},log2:function(t){return Math.log(t)/Math.LN2},sum:function(t){if(!Array.isArray(t))throw new Error("Sum argument is not an array");return t.reduce((function(t,e){return t+Number(e)}),0)}}),Qr="INUMBER",to="IOP1",eo="IOP2",no="IOP3",ro="IVAR",oo="IVARNAME",io="IFUNCALL",ao="IFUNDEF",so="IEXPR",lo="IEXPREVAL",co="IMEMBER",uo="IENDSTATEMENT",ho="IARRAY";function fo(t,e){this.type=t,this.value=null!=e?e:0}function po(t){return new fo(to,t)}function go(t){return new fo(eo,t)}function mo(t,e,n){var r,o,i,a,s,l,c=[];if(yo(t))return vo(t,n);for(var u=t.length,h=0;h<u;h++){var f=t[h],d=f.type;if(d===Qr||d===oo)c.push(f.value);else if(d===eo)o=c.pop(),r=c.pop(),"and"===f.value?c.push(!!r&&!!mo(o,e,n)):"or"===f.value?c.push(!!r||!!mo(o,e,n)):"="===f.value?(a=e.binaryOps[f.value],c.push(a(r,mo(o,e,n),n))):(a=e.binaryOps[f.value],c.push(a(vo(r,n),vo(o,n))));else if(d===no)i=c.pop(),o=c.pop(),r=c.pop(),"?"===f.value?c.push(mo(r?o:i,e,n)):(a=e.ternaryOps[f.value],c.push(a(vo(r,n),vo(o,n),vo(i,n))));else if(d===ro){if(/^__proto__|prototype|constructor$/.test(f.value))throw new Error("prototype access detected");if(f.value in e.functions)c.push(e.functions[f.value]);else if(f.value in e.unaryOps&&e.parser.isOperatorEnabled(f.value))c.push(e.unaryOps[f.value]);else{var p=n[f.value];if(void 0===p)throw new Error("undefined variable: "+f.value);c.push(p)}}else if(d===to)r=c.pop(),a=e.unaryOps[f.value],c.push(a(vo(r,n)));else if(d===io){for(l=f.value,s=[];l-- >0;)s.unshift(vo(c.pop(),n));if(!(a=c.pop()).apply||!a.call)throw new Error(a+" is not a function");c.push(a.apply(void 0,s))}else if(d===ao)c.push(function(){for(var t=c.pop(),r=[],o=f.value;o-- >0;)r.unshift(c.pop());var i=c.pop(),a=function(){for(var o=Object.assign({},n),i=0,a=r.length;i<a;i++)o[r[i]]=arguments[i];return mo(t,e,o)};return Object.defineProperty(a,"name",{value:i,writable:!1}),n[i]=a,a}());else if(d===so)c.push(bo(f,e));else if(d===lo)c.push(f);else if(d===co)r=c.pop(),c.push(r[f.value]);else if(d===uo)c.pop();else{if(d!==ho)throw new Error("invalid Expression");for(l=f.value,s=[];l-- >0;)s.unshift(c.pop());c.push(s)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:vo(c[0],n)}function bo(t,e,n){return yo(t)?t:{type:lo,value:function(n){return mo(t.value,e,n)}}}function yo(t){return t&&t.type===lo}function vo(t,e){return yo(t)?t.value(e):t}fo.prototype.toString=function(){switch(this.type){case Qr:case to:case eo:case no:case ro:case oo:case uo:return this.value;case io:return"CALL "+this.value;case ao:return"DEF "+this.value;case ho:return"ARRAY "+this.value;case co:return"."+this.value;default:return"Invalid Instruction"}};var xo="TEOF",wo="TOP",ko="TNUMBER",Mo="TSTRING",Ao="TPAREN",To="TBRACKET",_o="TCOMMA",Eo="TNAME",$o="TSEMICOLON";function Oo(t,e,n){this.type=t,this.value=e,this.index=n}function So(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}Oo.prototype.toString=function(){return this.type+": "+this.value},So.prototype.newToken=function(t,e,n){return new Oo(t,e,null!=n?n:this.pos)},So.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},So.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},So.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(xo,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},So.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var o=this.expression.substring(e+1,r);this.current=this.newToken(Mo,this.unescape(o),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},So.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(Ao,t),this.pos++,!0)},So.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("[")||(this.current=this.newToken(To,t),this.pos++,0))},So.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(_o,","),this.pos++,!0)},So.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken($o,";"),this.pos++,!0)},So.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken(ko,this.consts[r]),this.pos+=r.length,!0}return!1},So.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(wo,r),this.pos+=r.length,!0}return!1},So.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var o=this.expression.substring(t,e);return this.current=this.newToken(Eo,o),this.pos+=o.length,!0}return!1},So.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var No=/^[0-9a-f]{4}$/i;function Lo(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess,this.restrictMemberAccess=new Set(n.restrictMemberAccess||[])}So.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var o=t.substring(e+1,e+5);No.test(o)||this.parseError("Illegal escape sequence: \\u"+o),n+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var i=t.indexOf("\\",e);n+=t.substring(e,i<0?t.length:i),e=i}return n},So.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},So.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,o=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!e.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(ko,parseInt(this.expression.substring(o,n),t)),this.pos=n),r},So.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,o=n,i=!1,a=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!i&&"."===t);)"."===t?i=!0:a=!0,n++,e=a;if(e&&(o=n),"e"===t||"E"===t){n++;for(var s=!0,l=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;l=!0,s=!1}else s=!1;n++}l||(n=o)}return e?(this.current=this.newToken(ko,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=o,e},So.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(wo,e);else if("∙"===e||"•"===e)this.current=this.newToken(wo,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(wo,">="),this.pos++):this.current=this.newToken(wo,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(wo,"<="),this.pos++):this.current=this.newToken(wo,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(wo,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(wo,"=="),this.pos++):this.current=this.newToken(wo,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(wo,"!="),this.pos++):this.current=this.newToken(wo,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},So.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},So.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},So.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},Lo.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Lo.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?Vr(e,t.value):"function"==typeof e?e(t):t.value===e)},Lo.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Lo.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Lo.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e)||(this.next(),0))},Lo.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},Lo.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept(Eo)||this.accept(wo,(function(t){return t.value in e})))t.push(new fo(ro,this.current.value));else if(this.accept(ko))t.push(new fo(Qr,this.current.value));else if(this.accept(Mo))t.push(new fo(Qr,this.current.value));else if(this.accept(Ao,"("))this.parseExpression(t),this.expect(Ao,")");else{if(!this.accept(To,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(To,"]"))t.push(new fo(ho,0));else{var n=this.parseArrayList(t);t.push(new fo(ho,n))}}},Lo.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},Lo.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},Lo.prototype.parseUntilEndStatement=function(t,e){return!!this.accept($o)&&(!this.nextToken||this.nextToken.type===xo||this.nextToken.type===Ao&&")"===this.nextToken.value||e.push(new fo(uo)),this.nextToken.type!==xo&&this.parseExpression(e),t.push(new fo(so,e)),!0)},Lo.prototype.parseArrayList=function(t){for(var e=0;!this.accept(To,"]");)for(this.parseExpression(t),++e;this.accept(_o);)this.parseExpression(t),++e;return e},Lo.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(wo,"=");){var e=t.pop(),n=[],r=t.length-1;if(e.type!==io){if(e.type!==ro&&e.type!==co)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new fo(oo,e.value)),t.push(new fo(so,n)),t.push(go("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=e.value+1;o<i;o++){var a=r-o;t[a].type===ro&&(t[a]=new fo(oo,t[a].value))}this.parseVariableAssignmentExpression(n),t.push(new fo(so,n)),t.push(new fo(ao,e.value))}}},Lo.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(wo,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(wo,":"),this.parseConditionalExpression(n),t.push(new fo(so,e)),t.push(new fo(so,n)),t.push(new fo(no,"?"))}},Lo.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(wo,"or");){var e=[];this.parseAndExpression(e),t.push(new fo(so,e)),t.push(go("or"))}},Lo.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(wo,"and");){var e=[];this.parseComparison(e),t.push(new fo(so,e)),t.push(go("and"))}};var zo=["==","!=","<","<=",">=",">","in"];Lo.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(wo,zo);){var e=this.current;this.parseAddSub(t),t.push(go(e.value))}};var ti=["+","-","||"];Lo.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(wo,ti);){var e=this.current;this.parseTerm(t),t.push(go(e.value))}};var ei=["*","/","%"];Lo.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(wo,ei);){var e=this.current;this.parseFactor(t),t.push(go(e.value))}},Lo.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(wo,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Ao&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if(this.nextToken.type===$o||this.nextToken.type===_o||this.nextToken.type===xo||this.nextToken.type===Ao&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(po(n.value))}else this.parseExponential(t)},Lo.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(wo,"^");)this.parseFactor(t),t.push(go("^"))},Lo.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(wo,"!");)t.push(po("!"))},Lo.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(wo,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(po(n.value))}else for(this.parseMemberExpression(t);this.accept(Ao,"(");)if(this.accept(Ao,")"))t.push(new fo(io,0));else{var r=this.parseArgumentList(t);t.push(new fo(io,r))}},Lo.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(Ao,")");)for(this.parseExpression(t),++e;this.accept(_o);)this.parseExpression(t),++e;return e},Lo.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(wo,".")||this.accept(To,"[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');if(this.restrictMemberAccess.has(this.nextToken.value))throw new Error('access to member "'+this.nextToken.value+'" is not permitted');this.expect(Eo),t.push(new fo(co,this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect(To,"]"),t.push(go("["))}}};const{add:ni,sub:ri,mul:oi,div:ii,mod:ai,equal:si,notEqual:li,greaterThan:ci,lessThan:ui,greaterThanEqual:hi,lessThanEqual:fi,andOperator:di,orOperator:pi,log10:gi,neg:mi,not:bi,trunc:yi,random:vi,stringOrArrayLength:xi,condition:wi,roundTo:ki,arrayIndex:Mi,max:Ai,min:Ti,sum:_i,arrayMap:Ei,arrayFold:$i,arrayFilter:Oi,sign:Si,log1p:Ni,log2:Li}=Jr;function Ci(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function Di(t){return t.trim()}Ci.prototype.evaluate=function(t){return t=t||{},mo(this.tokens,this,t)},Ci.prototype.variables=function(){return(this.tokens||[]).filter((t=>"IVAR"===t.type)).map((t=>t.value))};const zi=new Set(["__proto__","prototype","constructor"]);function Ri(t){this.options=t||{},this.unaryOps={SIN:Math.sin,COS:Math.cos,TAN:Math.tan,ASIN:Math.asin,ACOS:Math.acos,ATAN:Math.atan,SQRT:Math.sqrt,LOG:Math.log,LOG2:Math.log2||Li,LN:Math.log,LOG10:Math.log10||gi,LG:Math.log10||gi,LOG1P:Math.log1p||Ni,ABS:Math.abs,CEIL:Math.ceil,FLOOR:Math.floor,ISNULL:t=>null===t,TRUNC:Math.trunc||yi,"-":mi,"+":Number,EXP:Math.exp,NOT:bi,LENGTH:xi,"!":bi,SIGN:Math.sign||Si,TEXT:t=>e(t)?t.toISOString():String(t),NUMBER:Number},this.binaryOps={"+":ni,"-":ri,"*":oi,"/":ii,"%":ai,"^":Math.pow,"==":si,"!=":li,">":ci,"<":ui,">=":hi,"<=":fi,and:di,or:pi,in:(t,e)=>Array.isArray(e)?e.includes(t):String(e).includes(t),"[":Mi},this.ternaryOps={"?":wi};const e=t=>t instanceof Date&&!isNaN(t),n=t=>{if(e(t))return t;try{const n=new Date(t);return e(n)?n:null}catch(t){return null}};function r(t){return(1===arguments.length&&Array.isArray(t)?t:Array.from(arguments)).slice(0).filter((t=>!isNaN(t)&&Number.isFinite(t)))}let o=/\w*/g,i=/\w\S*/g;const a=/[\\^$*+?.()|[\]{}]/g;try{o=new RegExp("\\p{L}*","ug"),i=new RegExp("[\\p{L}\\p{N}]\\S*","ug")}catch(t){}this.functions={IF:wi,RANDOM:vi,MIN(){const t=r.apply(this,arguments);return Ti(t)},MAX(){return Ai(r.apply(this,arguments))},SUM(){return _i(r.apply(this,arguments))},MEAN(){const t=r.apply(this,arguments);return _i(t)/t.length},MEDIAN(){const t=r.apply(this,arguments).sort(((t,e)=>t-e)),e=Math.floor(t.length/2);return t.length%2==1?t[e]:.5*(t[e-1]+t[e])},POW:Math.pow,ATAN2:Math.atan2,ROUND:ki,CONCAT(){return Array.from(arguments).join("")},TRIM:Di,SUBSTR:(t,e,n)=>t.substr(e,n),REPLACE:(t,e,n)=>t.replace(new RegExp(String(e).replace(a,"\\$&"),"g"),n),REPLACE_REGEX:(t,e,n)=>t.replace(new RegExp(e,"g"),n),SPLIT:(t,e)=>String(t).split(e),LOWER:t=>String(t).toLowerCase(),UPPER:t=>String(t).toUpperCase(),PROPER:t=>String(t).replace(o,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),TITLE:t=>String(t).replace(i,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),SORT(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(zi.has(n))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to SORT is not an array");return t.slice(0).sort(((t,r)=>((t="string"==typeof n?t[n]:"function"==typeof n?n(t):t)>(r="string"==typeof n?r[n]:"function"==typeof n?n(r):r)?1:t<r?-1:0)*(e?1:-1)))},SLICE(t,e,n){if(!Array.isArray(t))throw new Error("First argument to SLICE is not an array");return t.slice(e,n)},JOIN(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw new Error("First argument to JOIN is not an array");return n?[t.slice(0,t.length-1).join(e),t[t.length-1]].join(n):t.join(e)},MAP:Ei,FOLD:$i,FILTER:Oi,PLUCK(t,e){if(zi.has(e))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to PLUCK is not an array");return t.map((t=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:null))},INDEXOF:(t,e)=>(Array.isArray(t)||(t=String(t)),t.indexOf(e)),FIND(t,e){if(!Array.isArray(t))throw new Error("First argument to FIND is not an array");if("function"!=typeof e)throw new Error("Second argument to FIND is not a function");const n=t.length;for(let r=0;r<n;r++)if(e(t[r]))return t[r];return null},RANGE(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},EVERY(t,e){if(!Array.isArray(t))throw new Error("First argument to EVERY is not an array");if("function"!=typeof e)throw new Error("Second argument to EVERY is not a function");const n=t.length;let r=!0;for(let o=0;o<n;o++)if(r=r&&e(t[o]),!r)return!1;return!0},SOME(t,e){if(!Array.isArray(t))throw new Error("First argument to SOME is not an array");if("function"!=typeof e)throw new Error("Second argument to SOME is not a function");const n=t.length;let r=!1;for(let o=0;o<n;o++)if(r=r||e(t[o]),r)return!0;return!1},DATE(){return arguments.length>1&&(arguments[1]=arguments[1]-1),new Date(...arguments)},YEAR:t=>(t=n(t))?t.getFullYear():null,MONTH:t=>(t=n(t))?t.getMonth()+1:null,DAY:t=>(t=n(t))?t.getDate():null,WEEKDAY:t=>(t=n(t))?t.getDay():null,HOURS:t=>(t=n(t))?t.getHours():null,MINUTES:t=>(t=n(t))?t.getMinutes():null,SECONDS:t=>(t=n(t))?t.getSeconds():null,DATEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/864e5:null),TIMEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/1e3:null)},this.unaryOps.LOWER=this.functions.LOWER,this.unaryOps.UPPER=this.functions.UPPER,this.unaryOps.PROPER=this.functions.PROPER,this.unaryOps.TITLE=this.functions.TITLE,this.unaryOps.TRIM=this.functions.TRIM,this.unaryOps.YEAR=this.functions.YEAR,this.unaryOps.MONTH=this.functions.MONTH,this.unaryOps.DAY=this.functions.DAY,this.unaryOps.WEEKDAY=this.functions.WEEKDAY,this.unaryOps.HOURS=this.functions.HOURS,this.unaryOps.MINUTES=this.functions.MINUTES,this.unaryOps.SECONDS=this.functions.SECONDS,this.consts={E:Math.E,PI:Math.PI,TRUE:!0,FALSE:!1,NA:Number.NaN,NULL:Number.NaN}}Ri.prototype.parse=function(t){var e=[],n=new Lo(this,new So(this,t),{allowMemberAccess:!0,restrictMemberAccess:zi});return n.parseExpression(e),n.expect(xo,"EOF"),new Ci(e,this)},Ri.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Pi=new Ri;Ri.parse=function(t){return Pi.parse(t)},Ri.evaluate=function(t,e){return Pi.parse(t).evaluate(e)},Ri.keywords=["ABS","ACOS","ACOSH","and","ASIN","ASINH","ATAN","ATAN2","ATANH","CBRT","CEIL","CONCAT","COS","COSH","DATEDIFF","DAY","E","EVERY","EXP","EXPM1","FIND","FLOOR","HOURS","IF","in","INDEXOF","ISNULL","JOIN","LENGTH","LN","LOG","LOG10","LOG1P","LOG2","LOWER","MAP","MAX","MEAN","MEDIAN","MIN","MINUTES","MONTH","NOT","NOT","or","PI","PLUCK","POW","PROPER","RANDOM","RANGE","REPLACE","REPLACE_REGEX","ROUND","SECONDS","SIGN","SIN","SINH","SLICE","SOME","SORT","SPLIT","SQRT","SUBSTR","SUM","TAN","TANH","TIMEDIFF","TITLE","TRIM","TRUNC","UPPER","WEEKDAY","YEAR"];var ji={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",AND:"logical",OR:"logical",NOT:"logical",IN:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Ri.prototype.isOperatorEnabled=function(t){var e=function(t){return Object.prototype.hasOwnProperty.call(ji,t)?ji[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};const Ii="%UNDEFINED%",Fi={color:{prop:"color"},fontWeight:{prop:"font-weight"},fontStretch:{prop:"font-stretch"},typeface:{prop:"font-family"},textTransform:{prop:"text-transform"},letterSpacing:{tsf:t=>Bi(t),prop:"letter-spacing"},fontSize:{prop:"font-size",tsf:t=>Bi(t)},lineHeight:{prop:"line-height",tsf:t=>{return(e=t)===Ii?e:e>3?"".concat(e,"px"):String(e);var e}},underlined:{prop:"text-decoration",tsf:t=>t?"underline":"none"},cursive:{prop:"font-style",tsf:t=>t?"italic":"normal"}};function Ui(t,e){const n=function(t){let e="";for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(const n of t)e+=n+(r.length?r.shift():"");return e.split("\n").filter((t=>t)).filter((t=>!t.includes(Ii))).join("\n")};function r(t,e,n){return nt(t,e,void 0===n?Ii:n)}return{getProp:(t,n)=>r(e,t,n),getObjProp:r,typography:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(Fi).filter((n=>{let[r]=n;return Gr(t,r)||Gr(e,r)})).map((n=>{let[r,{prop:o,tsf:i=Hr}]=n;return"".concat(o,": ").concat(i(nt(t,r,e[r])),";")})).join("\n")},css:function(){return t.css(n(...arguments))},cssTemplate:n,UNDEFINED_STYLE:Ii}}function Bi(t){return t===Ii?t:Number.isFinite(t)?"".concat(t,"px"):t}const Hi=Math.cos,Yi=Math.sin,Wi=Math.sqrt,qi=Math.PI,Gi=2*qi,Vi=Math.PI,Xi=2*Vi,Ki=1e-6,Zi=Xi-Ki;function Ji(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Qi{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Ji:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return Ji;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(Ro||(Ro=Co(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Po||(Po=Co(["Z"]))))}lineTo(t,e){this._append(jo||(jo=Co(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,r){this._append(Io||(Io=Co(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}bezierCurveTo(t,e,n,r,o,i){this._append(Fo||(Fo=Co(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+o,this._y1=+i)}arcTo(t,e,n,r,o){if(t=+t,e=+e,n=+n,r=+r,(o=+o)<0)throw new Error("negative radius: ".concat(o));let i=this._x1,a=this._y1,s=n-t,l=r-e,c=i-t,u=a-e,h=c*c+u*u;if(null===this._x1)this._append(Uo||(Uo=Co(["M",",",""])),this._x1=t,this._y1=e);else if(h>Ki)if(Math.abs(u*s-l*c)>Ki&&o){let f=n-i,d=r-a,p=s*s+l*l,g=f*f+d*d,m=Math.sqrt(p),b=Math.sqrt(h),y=o*Math.tan((Vi-Math.acos((p+h-g)/(2*m*b)))/2),v=y/b,x=y/m;Math.abs(v-1)>Ki&&this._append(Bo||(Bo=Co(["L",",",""])),t+v*c,e+v*u),this._append(Ho||(Ho=Co(["A",",",",0,0,",",",",",""])),o,o,+(u*f>c*d),this._x1=t+x*s,this._y1=e+x*l)}else this._append(Yo||(Yo=Co(["L",",",""])),this._x1=t,this._y1=e)}arc(t,e,n,r,o,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^i,h=i?r-o:o-r;null===this._x1?this._append(Wo||(Wo=Co(["M",",",""])),l,c):(Math.abs(this._x1-l)>Ki||Math.abs(this._y1-c)>Ki)&&this._append(qo||(qo=Co(["L",",",""])),l,c),n&&(h<0&&(h=h%Xi+Xi),h>Zi?this._append(Go||(Go=Co(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,t-a,e-s,n,n,u,this._x1=l,this._y1=c):h>Ki&&this._append(Vo||(Vo=Co(["A",",",",0,",",",",",",",""])),n,n,+(h>=Vi),u,this._x1=t+n*Math.cos(o),this._y1=e+n*Math.sin(o)))}rect(t,e,n,r){this._append(Xo||(Xo=Co(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}toString(){return this._}}function ta(){return new Qi}ta.prototype=Qi.prototype;var ea={draw(t,e){const n=Wi(e/qi);t.moveTo(n,0),t.arc(0,0,n,0,Gi)}},na={draw(t,e){const n=Wi(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ra={draw(t,e){const n=Wi(e),r=-n/2;t.rect(r,r,n,n)}};const oa=Yi(qi/10)/Yi(7*qi/10),ia=Yi(Gi/10)*oa,aa=-Hi(Gi/10)*oa;var sa={draw(t,e){const n=Wi(.8908130915292852*e),r=ia*n,o=aa*n;t.moveTo(0,-n),t.lineTo(r,o);for(let e=1;e<5;++e){const i=Gi*e/5,a=Hi(i),s=Yi(i);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*o,s*r+a*o)}t.closePath()}};const la=-.5,ca=Wi(3)/2,ua=1/Wi(12),ha=3*(ua/2+1);var fa={draw(t,e){const n=Wi(e/ha),r=n/2,o=n*ua,i=r,a=n*ua+n,s=-i,l=a;t.moveTo(r,o),t.lineTo(i,a),t.lineTo(s,l),t.lineTo(la*r-ca*o,ca*r+la*o),t.lineTo(la*i-ca*a,ca*i+la*a),t.lineTo(la*s-ca*l,ca*s+la*l),t.lineTo(la*r+ca*o,la*o-ca*r),t.lineTo(la*i+ca*a,la*a-ca*i),t.lineTo(la*s+ca*l,la*l-ca*s),t.closePath()}},da=Object.assign(Object.assign({name:"circle"},ea),{bbox(t){const e=2*Math.sqrt(t/Math.PI);return{width:e,height:e}}}),pa=Object.assign(Object.assign({name:"cross"},na),{bbox(t){const e=3*Math.sqrt(t/5);return{width:e,height:e}},verticalAlign:"bottom"}),ga={name:"diamond",draw(t,e){const n=.7071*Math.sqrt(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()},bbox(t){const e=.7071*Math.sqrt(t);return{width:2*e,height:2*e}}},ma={name:"hexagon",draw(t,e){const n=.56416*Math.sqrt(e),r=1.09963*n,o=r/2,i=.952436*n;t.moveTo(0,-r),t.lineTo(i,-o),t.lineTo(i,o),t.lineTo(0,r),t.lineTo(-i,o),t.lineTo(-i,-o),t.lineTo(0,-r)},bbox(t){const e=.56416*Math.sqrt(t);return{width:.952436*e*2,height:1.09963*e*2}}},ba={name:"marker",draw(t,e){const n=.691*Math.sqrt(e);t.moveTo(.004066*n,-2.757056*n),t.bezierCurveTo(-.462735*n,-2.757056*n,-.841214*n,-2.378661*n,-.841214*n,-1.9117769999999998*n),t.bezierCurveTo(-.841214*n,-1.7810229999999998*n,-.811497*n,-1.6570359999999997*n,-.75842*n,-1.54659*n),t.bezierCurveTo(-.75545*n,-1.5403129999999998*n,.004064999999999985*n,0,.004064999999999985*n,0),t.lineTo(.757389*n,-1.5280999999999998*n),t.bezierCurveTo(.8161619999999999*n,-1.6431679999999997*n,.849344*n,-1.7735959999999997*n,.849344*n,-1.9117769999999998*n),t.bezierCurveTo(.849344*n,-2.378662*n,.470949*n,-2.757056*n,.0040639999999999565*n,-2.757056*n),t.moveTo(.507167*n,n*(-1.404609-.507167)),t.arc(0,n*(-1.404609-.507167),.507167*n,0,2*Math.PI)},bbox(t){const e=Math.sqrt(t);return{width:1.1682*e,height:1.9051*e}},baseline:1},ya={name:"spike",draw(t,e){t.moveTo(-2,0),t.lineTo(0,-e),t.lineTo(2,0)},bbox:t=>({width:4,height:t}),baseline:1},va=Object.assign(Object.assign({name:"square"},ra),{bbox(t){const e=Math.sqrt(t);return{width:e,height:e}}}),xa=Object.assign(Object.assign({name:"star"},sa),{bbox(t){const e=Math.sqrt(t);return{width:1.7897*e,height:1.7048*e}},baseline:.55}),wa=Object.assign(Object.assign({name:"wye"},fa),{bbox(t){const e=Math.sqrt(t);return{width:1.472*e,height:1.2763*e}},baseline:.455});const ka=Math.sqrt(3);var Ma={name:"triangleUp",draw(t,e){const n=-Math.sqrt(e/(3*ka));t.moveTo(0,2*n),t.lineTo(-ka*n,-n),t.lineTo(ka*n,-n),t.closePath()},bbox(t){const e=Math.sqrt(t/(3*ka));return{width:ka*e*2,height:3*e}},baseline:.66667};const Aa=Math.sqrt(3);var Ta={name:"triangleDown",draw(t,e){const n=-Math.sqrt(e/(3*Aa));t.moveTo(0,2*-n),t.lineTo(-Aa*n,n),t.lineTo(Aa*n,n),t.closePath()},bbox(t){const e=Math.sqrt(t/(3*Aa));return{width:Aa*e*2,height:3*e}},baseline:.3333},_a=Object.freeze({__proto__:null,symbolCircle:da,symbolCross:pa,symbolDiamond:ga,symbolHexagon:ma,symbolMarker:ba,symbolSpike:ya,symbolSquare:va,symbolStar:xa,symbolTriangleDown:Ta,symbolTriangleUp:Ma,symbolWye:wa}),Ea=/\s/,$a=/^\s+/,Oa="object"==typeof rt&&rt&&rt.Object===Object&&rt,Sa="object"==typeof self&&self&&self.Object===Object&&self,Na=(Oa||Sa||Function("return this")()).Symbol,La=Na,Ca=Object.prototype,Da=Ca.hasOwnProperty,za=Ca.toString,Ra=La?La.toStringTag:void 0,Pa=Object.prototype.toString,ja=function(t){var e=Da.call(t,Ra),n=t[Ra];try{t[Ra]=void 0;var r=!0}catch(t){}var o=za.call(t);return r&&(e?t[Ra]=n:delete t[Ra]),o},Ia=Na?Na.toStringTag:void 0,Fa=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ia&&Ia in Object(t)?ja(t):function(t){return Pa.call(t)}(t)},Ua=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ea.test(t.charAt(e)););return e}(t)+1).replace($a,""):t},Ba=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Ha=/^[-+]0x[0-9a-f]+$/i,Ya=/^0b[01]+$/i,Wa=/^0o[0-7]+$/i,qa=parseInt,Ga=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t},Va=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==Fa(t)}(t))return NaN;if(Ba(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ba(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ua(t);var n=Ya.test(t);return n||Wa.test(t)?qa(t.slice(2),n?2:8):Ha.test(t)?NaN:+t},Xa=ot((function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Va(n))==n?n:0),void 0!==e&&(e=(e=Va(e))==e?e:0),Ga(Va(t),e,n)}));function Ka(t){let e;function n(t,e){return t[14]?Ja:Za}let r=n(t),o=r(t);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),u(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&h(e)}}}function Za(t){let e,n;return{c(){e=d("div"),y(e,"class",n="legend-color buffer ".concat(t[34])),x(e,"width",Bi((t[11]?t[11]:t[21])+t[1].size)),x(e,"height",Bi(t[19]+t[1].size)),x(e,"background",t[1].color),x(e,"margin-left",t[0]?Bi(t[29]):null),x(e,"margin-right",t[0]?null:Bi(t[29])),x(e,"position","absolute"),x(e,"z-index","0"),x(e,"right",t[0]?Bi(-t[1].size/2):null),x(e,"left",t[0]?null:Bi(-t[1].size/2)),x(e,"top",t[5]?"calc(60% - ".concat(t[19]/2+t[1].size,"px)"):Bi(-t[1].size/2))},m(t,n){u(t,e,n)},p(t,r){8&r[1]&&n!==(n="legend-color buffer ".concat(t[34]))&&y(e,"class",n),2099202&r[0]&&x(e,"width",Bi((t[11]?t[11]:t[21])+t[1].size)),524290&r[0]&&x(e,"height",Bi(t[19]+t[1].size)),2&r[0]&&x(e,"background",t[1].color),536870913&r[0]&&x(e,"margin-left",t[0]?Bi(t[29]):null),536870913&r[0]&&x(e,"margin-right",t[0]?null:Bi(t[29])),3&r[0]&&x(e,"right",t[0]?Bi(-t[1].size/2):null),3&r[0]&&x(e,"left",t[0]?null:Bi(-t[1].size/2)),524322&r[0]&&x(e,"top",t[5]?"calc(60% - ".concat(t[19]/2+t[1].size,"px)"):Bi(-t[1].size/2))},d(t){t&&h(e)}}}function Ja(t){let e,n,r,o=t[14].strokeWidth>0&&Qa(t),i=t[14].symbol&&ts(t);return{c(){e=p("svg"),o&&o.c(),n=m(),i&&i.c(),y(e,"class",r="legend-color buffer ".concat(t[34])),x(e,"width",Bi(t[21])),x(e,"height",Bi(t[19])),x(e,"margin-left",t[0]?Bi(t[29]):null),x(e,"margin-right",t[0]?null:Bi(t[29])),x(e,"position","absolute"),x(e,"z-index","0"),x(e,"right",t[0]?Bi(-t[1].size/2):null),x(e,"left",t[0]?null:Bi(-t[1].size/2)),x(e,"top","calc(60% - ".concat(t[19]/2+t[1].size,"px)"))},m(t,r){u(t,e,r),o&&o.m(e,null),c(e,n),i&&i.m(e,null)},p(t,a){t[14].strokeWidth>0?o?o.p(t,a):(o=Qa(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),t[14].symbol?i?i.p(t,a):(i=ts(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),8&a[1]&&r!==(r="legend-color buffer ".concat(t[34]))&&y(e,"class",r),2097152&a[0]&&x(e,"width",Bi(t[21])),524288&a[0]&&x(e,"height",Bi(t[19])),536870913&a[0]&&x(e,"margin-left",t[0]?Bi(t[29]):null),536870913&a[0]&&x(e,"margin-right",t[0]?null:Bi(t[29])),3&a[0]&&x(e,"right",t[0]?Bi(-t[1].size/2):null),3&a[0]&&x(e,"left",t[0]?null:Bi(-t[1].size/2)),524290&a[0]&&x(e,"top","calc(60% - ".concat(t[19]/2+t[1].size,"px)"))},d(t){t&&h(e),o&&o.d(),i&&i.d()}}}function Qa(t){let e,n,r,o,i,a,s;return{c(){e=p("line"),y(e,"x1",n=t[25][0].x+(t[0]?-t[1].size:0)),y(e,"y1",r=t[25][0].y+(t[20]?t[1].size:t[1].size/4)),y(e,"x2",o=t[25][1].x+(t[0]?0:t[1].size)),y(e,"y2",i=t[25][1].y+t[1].size/4),y(e,"stroke",a=t[1].color),y(e,"stroke-width",s=t[14].strokeWidth+t[1].size),y(e,"stroke-linecap",t[22])},m(t,n){u(t,e,n)},p(t,l){33554435&l[0]&&n!==(n=t[25][0].x+(t[0]?-t[1].size:0))&&y(e,"x1",n),34603010&l[0]&&r!==(r=t[25][0].y+(t[20]?t[1].size:t[1].size/4))&&y(e,"y1",r),33554435&l[0]&&o!==(o=t[25][1].x+(t[0]?0:t[1].size))&&y(e,"x2",o),33554434&l[0]&&i!==(i=t[25][1].y+t[1].size/4)&&y(e,"y2",i),2&l[0]&&a!==(a=t[1].color)&&y(e,"stroke",a),16386&l[0]&&s!==(s=t[14].strokeWidth+t[1].size)&&y(e,"stroke-width",s),4194304&l[0]&&y(e,"stroke-linecap",t[22])},d(t){t&&h(e)}}}function ts(t){let e,n,r,o,i;return{c(){e=p("path"),y(e,"class","symbol"),y(e,"transform",n="translate("+(t[18].x+.5*t[1].size*(t[0]?-1:1))+", "+t[18].y+")"),y(e,"d",t[26]),y(e,"fill",r=t[1].color),y(e,"stroke",o=t[1].color),y(e,"stroke-width",i=t[1].size)},m(t,n){u(t,e,n)},p(t,a){262147&a[0]&&n!==(n="translate("+(t[18].x+.5*t[1].size*(t[0]?-1:1))+", "+t[18].y+")")&&y(e,"transform",n),67108864&a[0]&&y(e,"d",t[26]),2&a[0]&&r!==(r=t[1].color)&&y(e,"fill",r),2&a[0]&&o!==(o=t[1].color)&&y(e,"stroke",o),2&a[0]&&i!==(i=t[1].size)&&y(e,"stroke-width",i)},d(t){t&&h(e)}}}function es(t){let e,n,r,o=t[6]&&os(t);return{c(){e=d("div"),o&&o.c(),r=m(),y(e,"class",n="legend-color ".concat(t[34])),x(e,"width",Bi(t[11]||t[21])),x(e,"height",Bi(t[12]||t[19])),x(e,"margin-left",t[0]?Bi(t[29]):null),x(e,"margin-right",t[0]?null:Bi(t[29])),x(e,"background",t[8]),x(e,"mix-blend-mode",t[6]?"screen":null)},m(t,n){u(t,e,n),o&&o.m(t,n),u(t,r,n)},p(t,i){8&i[1]&&n!==(n="legend-color ".concat(t[34]))&&y(e,"class",n),2099200&i[0]&&x(e,"width",Bi(t[11]||t[21])),528384&i[0]&&x(e,"height",Bi(t[12]||t[19])),536870913&i[0]&&x(e,"margin-left",t[0]?Bi(t[29]):null),536870913&i[0]&&x(e,"margin-right",t[0]?null:Bi(t[29])),256&i[0]&&x(e,"background",t[8]),64&i[0]&&x(e,"mix-blend-mode",t[6]?"screen":null),t[6]?o?o.p(t,i):(o=os(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&h(e),o&&o.d(t),t&&h(r)}}}function ns(t){let e,n,r=t[14].strokeWidth>0&&is(t),o=t[14].symbol&&as(t);return{c(){e=p("svg"),r&&r.c(),n=m(),o&&o.c(),y(e,"class","legend-color"),x(e,"width",Bi(t[21])),x(e,"height",Bi(t[19])),x(e,"margin-left",t[0]?Bi(t[29]):null),x(e,"margin-right",t[0]?null:Bi(t[29]))},m(t,i){u(t,e,i),r&&r.m(e,null),c(e,n),o&&o.m(e,null)},p(t,i){t[14].strokeWidth>0?r?r.p(t,i):(r=is(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),t[14].symbol?o?o.p(t,i):(o=as(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),2097152&i[0]&&x(e,"width",Bi(t[21])),524288&i[0]&&x(e,"height",Bi(t[19])),536870913&i[0]&&x(e,"margin-left",t[0]?Bi(t[29]):null),536870913&i[0]&&x(e,"margin-right",t[0]?null:Bi(t[29]))},d(t){t&&h(e),r&&r.d(),o&&o.d()}}}function rs(t){let e,n,r,o,i,a,s,l,f,d,g,m;return{c(){e=p("svg"),n=p("defs"),r=p("pattern"),o=p("line"),d=p("rect"),y(o,"x1",i=t[31]/2),y(o,"y1","0"),y(o,"x2",a=t[31]/2),y(o,"y2",t[31]),y(o,"stroke",t[8]),y(o,"stroke-width",s=t[13].strokeWidth),y(o,"shape-rendering","crispEdges"),y(r,"id",l="color-legend-fill-pattern-".concat(t[2])),y(r,"patternTransform",f="rotate(".concat(180-(t[32]||0)," 0 0)")),y(r,"patternUnits","userSpaceOnUse"),y(r,"width",t[31]),y(r,"height",t[31]),y(d,"width",g=t[11]||t[21]),y(d,"height",t[19]),y(d,"fill",m="url(#color-legend-fill-pattern-".concat(t[2],")")),y(d,"rx",t[24]),y(d,"ry",t[24]),y(e,"class","legend-color"),x(e,"width",Bi(t[11]||t[21])),x(e,"height",Bi(t[19])),x(e,"margin-left",t[0]?Bi(t[29]):null),x(e,"margin-right",t[0]?null:Bi(t[29]))},m(t,i){u(t,e,i),c(e,n),c(n,r),c(r,o),c(e,d)},p(t,n){1&n[1]&&i!==(i=t[31]/2)&&y(o,"x1",i),1&n[1]&&a!==(a=t[31]/2)&&y(o,"x2",a),1&n[1]&&y(o,"y2",t[31]),256&n[0]&&y(o,"stroke",t[8]),8192&n[0]&&s!==(s=t[13].strokeWidth)&&y(o,"stroke-width",s),4&n[0]&&l!==(l="color-legend-fill-pattern-".concat(t[2]))&&y(r,"id",l),2&n[1]&&f!==(f="rotate(".concat(180-(t[32]||0)," 0 0)"))&&y(r,"patternTransform",f),1&n[1]&&y(r,"width",t[31]),1&n[1]&&y(r,"height",t[31]),2099200&n[0]&&g!==(g=t[11]||t[21])&&y(d,"width",g),524288&n[0]&&y(d,"height",t[19]),4&n[0]&&m!==(m="url(#color-legend-fill-pattern-".concat(t[2],")"))&&y(d,"fill",m),16777216&n[0]&&y(d,"rx",t[24]),16777216&n[0]&&y(d,"ry",t[24]),2099200&n[0]&&x(e,"width",Bi(t[11]||t[21])),524288&n[0]&&x(e,"height",Bi(t[19])),536870913&n[0]&&x(e,"margin-left",t[0]?Bi(t[29]):null),536870913&n[0]&&x(e,"margin-right",t[0]?null:Bi(t[29]))},d(t){t&&h(e)}}}function os(t){let e,n;return{c(){e=d("div"),y(e,"class",n="legend-color blend-multiply-background ".concat(t[34])),x(e,"width",Bi(t[11]||t[21])),x(e,"height",Bi(t[12]||t[19])),x(e,"margin-left",t[0]?null:Bi(-(t[11]||t[21])-t[29])),x(e,"margin-right",t[0]?Bi(-(t[11]||t[21])-t[29]):null),x(e,"background",t[7]),x(e,"position","relative"),x(e,"z-index","-1")},m(t,n){u(t,e,n)},p(t,r){8&r[1]&&n!==(n="legend-color blend-multiply-background ".concat(t[34]))&&y(e,"class",n),2099200&r[0]&&x(e,"width",Bi(t[11]||t[21])),528384&r[0]&&x(e,"height",Bi(t[12]||t[19])),538970113&r[0]&&x(e,"margin-left",t[0]?null:Bi(-(t[11]||t[21])-t[29])),538970113&r[0]&&x(e,"margin-right",t[0]?Bi(-(t[11]||t[21])-t[29]):null),128&r[0]&&x(e,"background",t[7])},d(t){t&&h(e)}}}function is(t){let e,n,r,o,i,a,s;return{c(){e=p("line"),y(e,"x1",n=t[25][0].x),y(e,"y1",r=t[25][0].y),y(e,"x2",o=t[25][1].x),y(e,"y2",i=t[25][1].y),y(e,"stroke",t[8]),y(e,"stroke-width",a=t[14].strokeWidth),y(e,"stroke-dasharray",s=t[14].dashArray),y(e,"stroke-linecap",t[22])},m(t,n){u(t,e,n)},p(t,l){33554432&l[0]&&n!==(n=t[25][0].x)&&y(e,"x1",n),33554432&l[0]&&r!==(r=t[25][0].y)&&y(e,"y1",r),33554432&l[0]&&o!==(o=t[25][1].x)&&y(e,"x2",o),33554432&l[0]&&i!==(i=t[25][1].y)&&y(e,"y2",i),256&l[0]&&y(e,"stroke",t[8]),16384&l[0]&&a!==(a=t[14].strokeWidth)&&y(e,"stroke-width",a),16384&l[0]&&s!==(s=t[14].dashArray)&&y(e,"stroke-dasharray",s),4194304&l[0]&&y(e,"stroke-linecap",t[22])},d(t){t&&h(e)}}}function as(t){let e,n,r,o,i,a;return{c(){var s,l,c;e=p("path"),y(e,"class","symbol"),y(e,"transform",n="translate("+t[18].x+", "+t[18].y+")"),y(e,"d",t[26]),y(e,"fill",r="hollow"===t[27]?null===(s=t[3].colors)||void 0===s?void 0:s.background:t[8]),y(e,"stroke",o="hollow"===t[27]?t[8]:null),y(e,"stroke-width",i="hollow"===t[27]?(null===(l=t[14])||void 0===l?void 0:l.strokeWidth)||(null===(c=t[14])||void 0===c?void 0:c.defaultWidth)||2:null),y(e,"opacity",a=t[14].symbol.opacity)},m(t,n){u(t,e,n)},p(t,s){var l,c,u;262144&s[0]&&n!==(n="translate("+t[18].x+", "+t[18].y+")")&&y(e,"transform",n),67108864&s[0]&&y(e,"d",t[26]),134217992&s[0]&&r!==(r="hollow"===t[27]?null===(l=t[3].colors)||void 0===l?void 0:l.background:t[8])&&y(e,"fill",r),134217984&s[0]&&o!==(o="hollow"===t[27]?t[8]:null)&&y(e,"stroke",o),134234112&s[0]&&i!==(i="hollow"===t[27]?(null===(c=t[14])||void 0===c?void 0:c.strokeWidth)||(null===(u=t[14])||void 0===u?void 0:u.defaultWidth)||2:null)&&y(e,"stroke-width",i),16384&s[0]&&a!==(a=t[14].symbol.opacity)&&y(e,"opacity",a)},d(t){t&&h(e)}}}function ss(t){let e,n=t[4](t[23])+"";return{c(){e=d("div"),y(e,"class","legend-label"),x(e,"text-shadow",t[1]?t[1].textShadow:null),x(e,"color",t[28])},m(t,r){u(t,e,r),e.innerHTML=n},p(t,r){8388624&r[0]&&n!==(n=t[4](t[23])+"")&&(e.innerHTML=n),2&r[0]&&x(e,"text-shadow",t[1]?t[1].textShadow:null),268435456&r[0]&&x(e,"color",t[28])},d(t){t&&h(e)}}}function ls(t){let e,n,r=t[4](t[9])+"";return{c(){e=new k(!1),n=m(),e.a=n},m(t,o){e.m(r,t,o),u(t,n,o)},p(t,n){528&n[0]&&r!==(r=t[4](t[9])+"")&&e.p(r)},d(t){t&&h(n),t&&e.d()}}}function cs(t){let e,n,r=t[4](t[33])+"";return{c(){e=new k(!1),n=m(),e.a=n},m(t,o){e.m(r,t,o),u(t,n,o)},p(t,n){16&n[0]|4&n[1]&&r!==(r=t[4](t[33])+"")&&e.p(r)},d(t){t&&h(n),t&&e.d()}}}function us(t){let n,r,o,a,s,l,f,p=t[1]&&Ka(t);function g(t,e){return t[13]?rs:t[14]&&(t[14].strokeWidth>0||t[14].symbol)?ns:es}let v=g(t),k=v(t),M=t[5]&&ss(t);function A(t,e){return t[5]?cs:ls}let T=A(t),_=T(t);return{c(){n=d("div"),r=d("div"),p&&p.c(),o=m(),k.c(),a=m(),M&&M.c(),s=d("div"),_.c(),y(r,"class","legend-no-break"),y(s,"class","legend-label"),x(s,"text-shadow",t[1]?t[1].textShadow:null),x(s,"color",t[28]),y(n,"class","legend-swatch"),y(n,"aria-hidden","true"),w(n,"highlight",t[17]),x(n,"margin-left",t[0]?Bi(t[30]):null),x(n,"margin-right",t[0]?null:Bi(t[30])),x(n,"--swatch-height",Bi(t[19]))},m(e,i){u(e,n,i),c(n,r),p&&p.m(r,null),c(r,o),k.m(r,null),c(r,a),M&&M.m(r,null),c(n,s),_.m(s,null),l||(f=[b(n,"mouseenter",t[43]),b(n,"click",t[44]),b(n,"mousemove",t[41]),b(n,"mouseleave",t[42])],l=!0)},p(t,e){t[1]?p?p.p(t,e):(p=Ka(t),p.c(),p.m(r,o)):p&&(p.d(1),p=null),v===(v=g(t))&&k?k.p(t,e):(k.d(1),k=v(t),k&&(k.c(),k.m(r,a))),t[5]?M?M.p(t,e):(M=ss(t),M.c(),M.m(r,null)):M&&(M.d(1),M=null),T===(T=A(t))&&_?_.p(t,e):(_.d(1),_=T(t),_&&(_.c(),_.m(s,null))),2&e[0]&&x(s,"text-shadow",t[1]?t[1].textShadow:null),268435456&e[0]&&x(s,"color",t[28]),131072&e[0]&&w(n,"highlight",t[17]),1073741825&e[0]&&x(n,"margin-left",t[0]?Bi(t[30]):null),1073741825&e[0]&&x(n,"margin-right",t[0]?null:Bi(t[30])),524288&e[0]&&x(n,"--swatch-height",Bi(t[19]))},i:e,o:e,d(t){t&&h(n),p&&p.d(),k.d(),M&&M.d(),_.d(),l=!1,i(f)}}}function hs(t,e,n){let r,o,i,a,s,l,c,u,h,f,d,p,g,m,b,y;const v=T();let{rtl:x}=e,{buffer:w}=e,{id:k}=e,{themeData:M}=e,{chroma:A}=e,{purifyHtml:E}=e,{horizontal:$=!0}=e,{blendMultiply:O=!1}=e,{blendMultiplyBackground:S=""}=e;if(O&&!S)throw new Error("Property 'blendMultiplyBackground' missing from legend");let{color:N}=e,{label:L}=e,{key:C}=e,{width:D}=e,{height:z}=e,{pattern:R}=e,{line:P}=e,{min:j}=e,{max:I}=e,{highlight:F=!1}=e;const U={horizontal:90,vertical:0,"diagonal-up":135,"diagonal-down":45};let B,H,Y,W="fill";const q={x:0,y:0};return t.$$set=t=>{"rtl"in t&&n(0,x=t.rtl),"buffer"in t&&n(1,w=t.buffer),"id"in t&&n(2,k=t.id),"themeData"in t&&n(3,M=t.themeData),"chroma"in t&&n(36,A=t.chroma),"purifyHtml"in t&&n(4,E=t.purifyHtml),"horizontal"in t&&n(5,$=t.horizontal),"blendMultiply"in t&&n(6,O=t.blendMultiply),"blendMultiplyBackground"in t&&n(7,S=t.blendMultiplyBackground),"color"in t&&n(8,N=t.color),"label"in t&&n(9,L=t.label),"key"in t&&n(10,C=t.key),"width"in t&&n(11,D=t.width),"height"in t&&n(12,z=t.height),"pattern"in t&&n(13,R=t.pattern),"line"in t&&n(14,P=t.line),"min"in t&&n(15,j=t.min),"max"in t&&n(16,I=t.max),"highlight"in t&&n(17,F=t.highlight)},t.$$.update=()=>{var e,v,x,w,k,T,_,E;if(8&t.$$.dirty[0]&&n(24,r=nt(M,"vis.base.legend.swatch.borderRadius")),16777216&t.$$.dirty[0]&&n(34,o="50%"===r?"dw-circle":"export-rect"),512&t.$$.dirty[0]&&n(23,i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=t.trim().indexOf(" "),n=t.trim().indexOf("-");return e<0&&n<0?t:n<0||e>0&&e<n?t.slice(0,e):t.slice(0,n+1)}(L)),8389120&t.$$.dirty[0]&&n(33,a=function(t,e){const n=t.slice(e.length),r=e.match(/<(\w*)>/);if(r){const t=r[1];if(!e.match(new RegExp("</".concat(t,">"),"g")))return"".concat(" "===n.charAt(0)?" ":"","<").concat(t,">").concat(n.trim())}return n}(L,i)),8192&t.$$.dirty[0]&&n(32,s=R?U[R.type]:0),8192&t.$$.dirty[0]&&n(31,l=R?R.lineGap+R.strokeWidth:0),8&t.$$.dirty[0]&&n(30,c=nt(M,"vis.base.legend.text.marginRight",10)),8&t.$$.dirty[0]&&n(29,u=nt(M,"vis.base.legend.swatch.marginRight",3)),8&t.$$.dirty[0]&&n(20,b=nt(M,"vis.base.legend.swatch.diagonal",!1)),1064968&t.$$.dirty[0]&&n(21,h=P?nt(M,"vis.d3-lines.legend.swatch.width",16):nt(M,"vis.base.legend.swatch.width",nt(M,"vis.base.legend.swatch.size",14))),3162120&t.$$.dirty[0]&&n(19,f=P?b?h:nt(M,"vis.d3-lines.legend.swatch.height",20):nt(M,"vis.base.legend.swatch.height",nt(M,"vis.base.legend.swatch.size",14))),8&t.$$.dirty[0]&&n(40,d=nt(M,"colors.background","#ffffff")),264&t.$$.dirty[0]|544&t.$$.dirty[1]&&n(28,p=nt(M,"vis.base.legend.text.useSwatchColor")&&function(t,e,n,r){const[o,i,a]=r(t).lch(),s=r(e).lch()[0];if(r.contrast(t,e)>=n)return t;const l=r.contrast("#000000",e),c=r.contrast("#ffffff",e),u=s>o&&l>=n||s<=o&&c<n;return u?h(0,o,10):h(o,100,10);function h(t,o,s){const l=.5*(t+o),c=r.lch(l,i,a),f=r.contrast(c,e);return Math.abs(f-n)<.2||!s?c.hex():f<n&&u||f>n&&!u?h(t,l,s-1):h(l,o,s-1)}}(N,d,4.5,A)),8&t.$$.dirty[0]&&n(22,g=nt(M,"vis.d3-lines.legend.swatch.linecap","round")),4210688&t.$$.dirty[0]&&n(39,m=P&&"butt"!==g?.5*P.strokeWidth:0),16384&t.$$.dirty[0]&&n(38,y=null!==(e=P)&&void 0!==e&&e.symbol?(null===(v=P)||void 0===v||null===(v=v.symbol)||void 0===v?void 0:v.position)||"center":null),16384&t.$$.dirty[0]&&null!==(x=P)&&void 0!==x&&x.symbol&&n(37,H=2*Xa((null===(w=P)||void 0===w?void 0:w.symbol.size)||3.5,1,4)),3686400&t.$$.dirty[0]|192&t.$$.dirty[1]&&null!==(k=P)&&void 0!==k&&k.symbol&&(n(18,q.x="left"===y?H/2+P.strokeWidth:"right"===y?h-H/2-P.strokeWidth:h/2,q),n(18,q.y=b&&"left"===y?f-H/2-P.strokeWidth:b&&"right"===y?H/2+P.strokeWidth:f/2,q)),3948544&t.$$.dirty[0]|384&t.$$.dirty[1]&&n(25,B=P?[{x:"left"===y?q.x:m,y:b?"left"===y?q.y:f-m:f/2},{x:"right"===y?q.x:h-m,y:b?"right"===y?q.y:m:f/2}]:[{x:0,y:0},{x:0,y:0}]),16384&t.$$.dirty[0]|64&t.$$.dirty[1]&&null!==(T=P)&&void 0!==T&&T.symbol){const t=ta(),e=P.symbol,r=Object.values(_a).find((t=>t.name===e.shape));if(void 0===r)throw new Error("'".concat(e.shape,"' is not a valid shape"));const o=Math.pow(H/2,2)*Math.PI;r.draw(t,o),n(26,Y=t.toString())}16384&t.$$.dirty[0]&&(null===(_=P)||void 0===_?void 0:_.symbol)&&n(27,W=(null===(E=P)||void 0===E?void 0:E.symbol.style)||"fill")},[x,w,k,M,E,$,O,S,N,L,C,D,z,R,P,j,I,F,q,f,b,h,g,i,r,B,Y,W,p,u,c,l,s,a,o,v,A,H,y,m,d,function(e){_.call(this,t,e)},function(e){_.call(this,t,e)},()=>v("mouseenter",{key:C,label:L,color:N,min:j,max:I,value:C}),()=>v("mouseenter",{key:C,label:L,color:N,min:j,max:I,value:C})]}class fs extends K{constructor(t){super(),X(this,t,hs,us,s,{rtl:0,buffer:1,id:2,themeData:3,chroma:36,purifyHtml:4,horizontal:5,blendMultiply:6,blendMultiplyBackground:7,color:8,label:9,key:10,width:11,height:12,pattern:13,line:14,min:15,max:16,highlight:17},null,[-1,-1])}}function ds(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return"";const{css:o,getProp:i,typography:a}=Ui(t,e),s="vis.base.legend.caption",l="vis.base.labels.legend",c=i("vis.base.legend.alignment"),u="below"===n;return o(Ko||(Ko=Co(["\n        text-align: ",";\n        &.dir-rtl {\n            direction: rtl;\n            text-align: ",";\n        }\n\n        ","\n\n        width: ",";\n        height: ",";\n\n        .legend-title {\n            position: relative;\n            margin-bottom: ",";\n        }\n        .legend-title,\n        .legend-title span {\n            text-shadow: none;\n            ","\n        }\n        .legend-title:not(.buffer) > span {\n            position: relative;\n            z-index: 10;\n        }\n        .legend-title.buffer {\n            position: absolute;\n            top: 0;\n            width: 100%;\n            z-index: 1;\n        }\n        text:not(.buffer) {\n            fill: currentColor;\n        }\n        g.group text.label,\n        g.group text.label tspan,\n        g.swatch text,\n        g.swatch text tspan {\n            font-size: ",";\n            font-family: ",";\n        }\n    "])),c,("left"===c?"right":"right"===c?"left":null)||c,r?"":"\n        padding-top: ".concat(Bi(u?i("vis.base.legend.padding.bottom",10):i("vis.base.legend.padding.top")),";\n        padding-bottom: ").concat(Bi(u?i("vis.base.legend.padding.top"):i("vis.base.legend.padding.bottom",10)),";"),Bi(i("".concat(l,".width"))),Bi(i("".concat(l,".height"))),Bi(i("".concat(s,".margin.vertical"),4)),a(nt(e,s),{fontWeight:700}),Bi(i("vis.base.labels.legend.fontSize")),i("vis.base.labels.legend.typeface"))}function ps(t,e){if(!t)return"";const{css:n}=Ui(t,e);return n(Zo||(Zo=Co(["\n        /* general styles */\n        svg {\n            overflow: visible;\n            display: block;\n        }\n\n        &.dir-rtl {\n            direction: rtl;\n        }\n\n        /* shared styles */\n        g.group text.label,\n        g.group text.label tspan {\n            dominant-baseline: middle;\n        }\n\n        g.swatch path.tick {\n            shape-rendering: crispEdges;\n        }\n\n        g.swatch text {\n            transition: opacity 0.15s ease-in-out;\n        }\n\n        &.vertical {\n            & g.swatch text,\n            & g.swatch text tspan {\n                text-anchor: start;\n                dominant-baseline: middle;\n            }\n\n            & g.labels text,\n            & g.labels text tspan {\n                text-anchor: start;\n            }\n\n            & .group text.label,\n            & .group text.label tspan {\n                dominant-baseline: middle;\n            }\n\n            &:not(.dir-rtl) {\n                & .group text.label,\n                & .group text.label tspan {\n                    text-anchor: end;\n                }\n            }\n\n            &.dir-rtl {\n                & .group text.label,\n                & .group text.label tspan {\n                    text-anchor: start;\n                }\n            }\n        }\n\n        &.horizontal {\n            & g.swatch text,\n            & g.swatch text tspan {\n                text-anchor: middle;\n                dominant-baseline: hanging;\n            }\n\n            & g.labels text,\n            & g.labels text tspan {\n                dominant-baseline: hanging;\n            }\n        }\n\n        & g.highlighted g.swatch {\n            & text {\n                opacity: 0.3;\n            }\n\n            & rect,\n            & path {\n                opacity: 0.2;\n            }\n\n            &.highlight {\n                & text,\n                & rect,\n                & path {\n                    opacity: 1;\n                }\n            }\n        }\n    "])))}const gs="accessibility / color-legend / ";function ms(t,e){let{colors:n,title:r="",format:o,swatches:i,limits:a}=e;const s=e=>t("".concat(gs).concat(e));if("function"==typeof n&&a){const[t,e]=[a[0],a[a.length-1]].map(o);return r?s("continuous-title").replace("%title%",r).replace("%from%",t).replace("%to%",e):s("continuous").replace("%from%",t).replace("%to%",e)}{if(!i||!i.length)return"";const[t,e]=[i[0].label,i[i.length-1].label].map((t=>t.replace("<",s("less-than")).replace("≥",s("greater-equal-than"))));return r?s("stepped-title").replace("%title%",r).replace("%count%",String(i.length)).replace("%from%",t).replace("%to%",e):s("stepped").replace("%count%",String(i.length)).replace("%from%",t).replace("%to%",e)}}function bs(t,e){return"ListFormat"in Intl?new Intl.ListFormat(t).format(e):e.join(", ")}function ys(t,e,n,r){if(!n||!n.length)return"";const o=e=>t("".concat(gs).concat(e)),i=n.map((t=>t.label)),a=i.length<=5?o("category-items-few").replace("%items%",bs(e,[...i.slice(0,-1),i[i.length-1]])):o("category-items-many").replace("%items%",bs(e,i.slice(0,3))).replace("%last%",i[i.length-1]);return 1===i.length?r?o("category-single-title").replace("%title%",r).replace("%item%",i[0]):o("category-single").replace("%item%",i[0]):i.length<=5?r?o("category-few-title").replace("%count%",String(i.length)).replace("%title%",r).replace("%items_description%",a):o("category-few").replace("%count%",String(i.length)).replace("%items_description%",a):r?o("category-many-title").replace("%count%",String(i.length)).replace("%title%",r).replace("%items_description%",a):o("category-many").replace("%count%",String(i.length)).replace("%items_description%",a)}function vs(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700,r=null,o=!1,i=!0;return{set(a){let s=a;"string"!=typeof a&&(s=JSON.stringify(a)),r!==s&&(e&&clearTimeout(e),e=setTimeout((()=>{i=!1,t(a)}),i?n:0)),r=s,o=!0},clear(){o&&null===r||(r=null,i=!0,e&&clearTimeout(e),t(null)),o=!0},get:()=>r}}function xs(t,e){const n="ontouchstart"in window||navigator.maxTouchPoints,r=vs((t=>{i&&i("string"==typeof t||"number"==typeof t?t:null)}),n?0:700),o=e=>{r.clear(),t(e.type)};let i;return{onMouseEnter:n=>{e&&r.set(n.detail.key),t(n.type,n.detail)},onMouseLeave:o,onLegendMouseLeave:()=>{n&&o(new MouseEvent("mouseleave"))},onHighlight:t=>{i=t}}}function ws(t){const e={size:5,color:t};return{...e,textStroke:"".concat(e.size,"px ").concat(e.color),textShadow:"1px 1px 0px ".concat(e.color,", 0px 1px 0px ").concat(e.color,", -1px 1px 0px ").concat(e.color,", 1px -1px 0px ").concat(e.color,", 0px -1px 0px ").concat(e.color,", -1px -1px 0px ").concat(e.color,", 1px 0px 0px ").concat(e.color,", 0px 0px 0px ").concat(e.color,", -1px 0px 0px ").concat(e.color),svgTextStyles:{fill:e.color,stroke:e.color,"stroke-width":e.size,"stroke-linejoin":"round"}}}function ks(t,e,n){const r=t.slice();return r[36]=e[n],r[38]=n,r}function Ms(t){let e,n,r=t[19],o=[];for(let e=0;e<r.length;e+=1)o[e]=As(ks(t,r,e));const i=t=>W(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m()},m(t,r){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(20453757&n[0]){let a;for(r=t[19],a=0;a<r.length;a+=1){const i=ks(t,r,a);o[a]?(o[a].p(i,n),Y(o[a],1)):(o[a]=As(i),o[a].c(),Y(o[a],1),o[a].m(e.parentNode,e))}for(B(),a=r.length;a<o.length;a+=1)i(a);H()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)W(o[t]);n=!1},d(t){f(o,t),t&&h(e)}}}function As(t){let e,r;const o=[t[36],{id:"".concat(t[24],"-").concat(t[38])},{rtl:t[4]},{themeData:t[8]},{chroma:t[5]},{purifyHtml:t[6]},{buffer:t[20]},{highlight:t[0]?t[0]===t[36].key:t[3].includes(t[36].key)},{blendMultiply:t[11]},{blendMultiplyBackground:t[12]},{horizontal:t[2]}];let i={};for(let t=0;t<o.length;t+=1)i=n(i,o[t]);return e=new fs({props:i}),e.$on("mouseenter",t[21]),{c(){q(e.$$.fragment)},m(t,n){G(e,t,n),r=!0},p(t,n){const r=18356605&n[0]?function(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const a=t[i],s=e[i];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)o[t]||(n[t]=s[t],o[t]=1);t[i]=s}else for(const t in a)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(o,[524288&n[0]&&(i=t[36],"object"==typeof i&&null!==i?i:{}),16777216&n[0]&&{id:"".concat(t[24],"-").concat(t[38])},16&n[0]&&{rtl:t[4]},256&n[0]&&{themeData:t[8]},32&n[0]&&{chroma:t[5]},64&n[0]&&{purifyHtml:t[6]},1048576&n[0]&&{buffer:t[20]},524297&n[0]&&{highlight:t[0]?t[0]===t[36].key:t[3].includes(t[36].key)},2048&n[0]&&{blendMultiply:t[11]},4096&n[0]&&{blendMultiplyBackground:t[12]},4&n[0]&&{horizontal:t[2]}]):{};var i;e.$set(r)},i(t){r||(Y(e.$$.fragment,t),r=!0)},o(t){W(e.$$.fragment,t),r=!1},d(t){V(e,t)}}}function Ts(t){let e,n,r,o,i,a=t[7]&&Ms(t);return{c(){e=d("div"),a&&a.c(),y(e,"class",n=["legend-categories",t[17],t[16],t[15],t[2]?"horizontal":"vertical"].join(" ")),w(e,"highlighted",""!==t[0]||t[3].length)},m(n,s){u(n,e,s),a&&a.m(e,null),r=!0,o||(i=b(e,"mouseleave",t[22]),o=!0)},p(t,o){t[7]?a?(a.p(t,o),128&o[0]&&Y(a,1)):(a=Ms(t),a.c(),Y(a,1),a.m(e,null)):a&&(B(),W(a,1,1,(()=>{a=null})),H()),(!r||229380&o[0]&&n!==(n=["legend-categories",t[17],t[16],t[15],t[2]?"horizontal":"vertical"].join(" ")))&&y(e,"class",n),(!r||229389&o[0])&&w(e,"highlighted",""!==t[0]||t[3].length)},i(t){r||(Y(a),r=!0)},o(t){W(a),r=!1},d(t){t&&h(e),a&&a.d(),o=!1,i()}}}function _s(t){let e,n;return e=new et({props:{title:t[1],buffer:t[20],className:["category-legend",t[2]?"horizontal":"vertical",t[16],t[15],t[18]].join(" "),maxWidth:Bi(t[9]),maxHeight:Bi(t[10]),ariaLabel:ys(t[13],t[14],t[19],t[1]),purifyHtml:t[6],$$slots:{default:[Ts]},$$scope:{ctx:t}}}),e.$on("mouseleave",t[23]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),1048576&n[0]&&(r.buffer=t[20]),360452&n[0]&&(r.className=["category-legend",t[2]?"horizontal":"vertical",t[16],t[15],t[18]].join(" ")),512&n[0]&&(r.maxWidth=Bi(t[9])),1024&n[0]&&(r.maxHeight=Bi(t[10])),548866&n[0]&&(r.ariaLabel=ys(t[13],t[14],t[19],t[1])),64&n[0]&&(r.purifyHtml=t[6]),1808893&n[0]|256&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Es(t,e,n){let r,o,i,a,s,l,c,u;const h=T();let{title:f=""}=e,{horizontal:d=!0}=e,{highlight:p=!1}=e,{defaultHighlighted:g=[]}=e,{reverse:m=!1}=e,{rtl:b=!1}=e,{emotion:y}=e,{chroma:v}=e,{purifyHtml:x}=e,{swatches:w}=e,{themeData:k={}}=e,{width:M="100%"}=e,{height:A="auto"}=e,{position:_="above"}=e,{noPadding:E=!1}=e,{buffer:$=!1}=e,{blendMultiply:O=!1}=e,{blendMultiplyBackground:S=""}=e,{translate:N}=e,{locale:L}=e,{highlightedKey:C=""}=e,{highlightedValue:D=null}=e;const{onMouseEnter:z,onMouseLeave:R,onLegendMouseLeave:P,onHighlight:j}=xs(h,p);j((t=>{n(0,C=t||""),""===C&&n(25,D=null)}));const I=Math.random().toString().replace(".","");return t.$$set=t=>{"title"in t&&n(1,f=t.title),"horizontal"in t&&n(2,d=t.horizontal),"highlight"in t&&n(26,p=t.highlight),"defaultHighlighted"in t&&n(3,g=t.defaultHighlighted),"reverse"in t&&n(27,m=t.reverse),"rtl"in t&&n(4,b=t.rtl),"emotion"in t&&n(28,y=t.emotion),"chroma"in t&&n(5,v=t.chroma),"purifyHtml"in t&&n(6,x=t.purifyHtml),"swatches"in t&&n(7,w=t.swatches),"themeData"in t&&n(8,k=t.themeData),"width"in t&&n(9,M=t.width),"height"in t&&n(10,A=t.height),"position"in t&&n(29,_=t.position),"noPadding"in t&&n(30,E=t.noPadding),"buffer"in t&&n(31,$=t.buffer),"blendMultiply"in t&&n(11,O=t.blendMultiply),"blendMultiplyBackground"in t&&n(12,S=t.blendMultiplyBackground),"translate"in t&&n(13,N=t.translate),"locale"in t&&n(14,L=t.locale),"highlightedKey"in t&&n(0,C=t.highlightedKey),"highlightedValue"in t&&n(25,D=t.highlightedValue)},t.$$.update=()=>{var e;256&t.$$.dirty[0]&&n(33,r=nt(k,"colors.background","white")),5&t.$$.dirty[1]&&n(20,o=$&&ws(r)),32&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(32,i=v(r).lab()[0]<50),134217856&t.$$.dirty[0]&&n(19,a=m?w.slice(0).reverse():w),1879048448&t.$$.dirty[0]&&n(18,s=ds(y,k,_,E)),268435712&t.$$.dirty[0]&&n(17,l=function(t,e){if(!t)return"";const{css:n,getProp:r,typography:o}=Ui(t,e);return n(Jo||(Jo=Co(["\n        line-height: 1.4;\n        ","\n\n        svg {\n            overflow: visible;\n            border-radius: ",";\n            vertical-align: middle;\n            position: relative;\n            z-index: 10;\n        }\n\n        .legend-color {\n            display: inline-block;\n            vertical-align: middle;\n            border-radius: ",";\n            position: relative;\n            z-index: 10;\n        }\n\n        &:not(.dir-rtl) .legend-color {\n            margin-right: 3px;\n        }\n        &.dir-rtl .legend-color {\n            margin-left: 3px;\n        }\n\n        .legend-no-break {\n            white-space: nowrap;\n            display: inline-block;\n            position: relative;\n        }\n\n        .legend-label {\n            display: inline;\n            white-space: normal;\n            vertical-align: middle;\n            position: relative;\n        }\n        .legend-label span {\n            position: relative;\n            z-index: 10;\n        }\n        .legend-label.buffer {\n            position: absolute;\n            right: 0;\n            z-index: 1;\n        }\n\n        .legend-swatch {\n            margin-bottom: 3px;\n            margin-bottom: ",";\n        }\n        &.horizontal:not(.dir-rtl) .legend-swatch {\n            margin-right: 10px;\n        }\n        &.horizontal.dir-rtl .legend-swatch {\n            margin-left: 10px;\n        }\n        &.horizontal .legend-swatch {\n            display: inline;\n        }\n        &.horizontal .legend-swatch .legend-color {\n            display: inline-block;\n        }\n        /* if br tag is present in label, we force swatch to be full width */\n        &.horizontal .legend-swatch:has(br) {\n            display: block;\n        }\n        &.vertical .legend-swatch {\n            display: grid;\n            grid-template-columns: auto 1fr;\n            min-height: var(--swatch-height);\n            grid-template-rows: max(1lh, var(--swatch-height)) auto;\n        }\n        &.vertical .legend-no-break {\n            display: grid;\n            align-content: center;\n        }\n        &.vertical .legend-color {\n            grid-column: 1;\n            grid-row: 1;\n        }\n        &.vertical .legend-label {\n            grid-row: span 2;\n            align-self: center;\n        }\n\n        &.highlighted .legend-swatch {\n            opacity: 0.3;\n            transition: opacity 0.15s ease-in-out;\n        }\n        &.highlighted.is-dark .legend-swatch {\n            opacity: 0.4;\n        }\n        &.highlighted .legend-swatch.highlight {\n            opacity: 1;\n        }\n    "])),o(nt(e,"vis.base.labels.legend")),Bi(r("vis.base.legend.swatch.borderRadius")),Bi(r("vis.base.legend.swatch.borderRadius")),Bi(r("vis.base.legend.rowSpacing")))}(y,k)),16&t.$$.dirty[0]&&n(16,c=b?"dir-rtl":"dir-ltr"),2&t.$$.dirty[1]&&n(15,u=i?"is-dark":""),33554560&t.$$.dirty[0]&&n(0,C=(null===(e=w.find((t=>{if(null!==D&&t.min&&t.max)return D>=t.min&&D<t.max})))||void 0===e?void 0:e.key)||"")},[C,f,d,g,b,v,x,w,k,M,A,O,S,N,L,u,c,l,s,a,o,z,R,P,I,D,p,m,y,_,E,$,i,r]}class $s extends K{constructor(t){super(),X(this,t,Es,_s,s,{title:1,horizontal:2,highlight:26,defaultHighlighted:3,reverse:27,rtl:4,emotion:28,chroma:5,purifyHtml:6,swatches:7,themeData:8,width:9,height:10,position:29,noPadding:30,buffer:31,blendMultiply:11,blendMultiplyBackground:12,translate:13,locale:14,highlightedKey:0,highlightedValue:25},null,[-1,-1])}}function Os(t,e,n){const r=t.slice();return r[65]=e[n],r}function Ss(t,e,n){const r=t.slice();return r[68]=e[n],r[70]=n,r}function Ns(t,e,n){const r=t.slice();return r[71]=e[n],r[73]=n,r}function Ls(t,e,n){const r=t.slice();return r[71]=e[n],r[73]=n,r}function Cs(t){let e,n,r,o,i,a,s,l;return{c(){e=p("g"),n=p("path"),o=p("rect"),y(n,"class","triangle"),y(n,"d",t[19]),y(n,"transform",r="translate(".concat(t[18].join(","),")")),x(n,"fill",t[24].svgTextStyles.fill),x(n,"stroke",t[24].svgTextStyles.stroke),x(n,"stroke-width",t[24].svgTextStyles["stroke-width"]),x(n,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"]),y(e,"class","highlight"),y(e,"aria-hidden","true"),y(e,"style",t[15]),y(o,"class","buffer"),y(o,"width",i=(t[3]?t[4]:t[12])+t[24].size),y(o,"height",a=(t[3]?t[12]:t[5])+t[24].size),y(o,"x",s=-t[24].size/2),y(o,"y",l=-t[24].size/2),x(o,"fill",t[24].color),x(o,"pointer-events","none")},m(t,r){u(t,e,r),c(e,n),u(t,o,r)},p(t,c){524288&c[0]&&y(n,"d",t[19]),262144&c[0]&&r!==(r="translate(".concat(t[18].join(","),")"))&&y(n,"transform",r),16777216&c[0]&&x(n,"fill",t[24].svgTextStyles.fill),16777216&c[0]&&x(n,"stroke",t[24].svgTextStyles.stroke),16777216&c[0]&&x(n,"stroke-width",t[24].svgTextStyles["stroke-width"]),16777216&c[0]&&x(n,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"]),32768&c[0]&&y(e,"style",t[15]),16781336&c[0]&&i!==(i=(t[3]?t[4]:t[12])+t[24].size)&&y(o,"width",i),16781352&c[0]&&a!==(a=(t[3]?t[12]:t[5])+t[24].size)&&y(o,"height",a),16777216&c[0]&&s!==(s=-t[24].size/2)&&y(o,"x",s),16777216&c[0]&&l!==(l=-t[24].size/2)&&y(o,"y",l),16777216&c[0]&&x(o,"fill",t[24].color)},d(t){t&&h(e),t&&h(o)}}}function Ds(t){let e,n,r;return{c(){e=p("rect"),y(e,"width",n=t[3]?t[4]:t[12]),y(e,"height",r=t[3]?t[12]:t[5]),x(e,"fill",t[23])},m(t,n){u(t,e,n)},p(t,o){4120&o[0]&&n!==(n=t[3]?t[4]:t[12])&&y(e,"width",n),4136&o[0]&&r!==(r=t[3]?t[12]:t[5])&&y(e,"height",r),8388608&o[0]&&x(e,"fill",t[23])},d(t){t&&h(e)}}}function zs(t){let e,n,r,o=t[68],i=[];for(let e=0;e<o.length;e+=1)i[e]=Rs(Ls(t,o,e));return{c(){e=p("text");for(let t=0;t<i.length;t+=1)i[t].c();y(e,"class",n=["buffer",t[21][t[70]]].join(" ")),y(e,"transform",r="translate(".concat(t[20][t[70]],")")),x(e,"fill",t[24].svgTextStyles.fill),x(e,"stroke",t[24].svgTextStyles.stroke),x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"])},m(t,n){u(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null)},p(t,a){if(512&a[0]){let n;for(o=t[68],n=0;n<o.length;n+=1){const r=Ls(t,o,n);i[n]?i[n].p(r,a):(i[n]=Rs(r),i[n].c(),i[n].m(e,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}2097152&a[0]&&n!==(n=["buffer",t[21][t[70]]].join(" "))&&y(e,"class",n),1048576&a[0]&&r!==(r="translate(".concat(t[20][t[70]],")"))&&y(e,"transform",r),16777216&a[0]&&x(e,"fill",t[24].svgTextStyles.fill),16777216&a[0]&&x(e,"stroke",t[24].svgTextStyles.stroke),16777216&a[0]&&x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),16777216&a[0]&&x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"])},d(t){t&&h(e),f(i,t)}}}function Rs(t){let e,n,r=t[71]+"";return{c(){e=p("tspan"),n=g(r),y(e,"x","0"),y(e,"dy",0===t[73]?0:Hs)},m(t,r){u(t,e,r),c(e,n)},p(t,e){512&e[0]&&r!==(r=t[71]+"")&&v(n,r)},d(t){t&&h(e)}}}function Ps(t){let e,n,r=t[71]+"";return{c(){e=p("tspan"),n=g(r),y(e,"x","0"),y(e,"dy",0===t[73]?0:Hs)},m(t,r){u(t,e,r),c(e,n)},p(t,e){512&e[0]&&r!==(r=t[71]+"")&&v(n,r)},d(t){t&&h(e)}}}function js(t){let e,n,r,o=t[0]&&t[24]&&zs(t),i=t[68],a=[];for(let e=0;e<i.length;e+=1)a[e]=Ps(Ns(t,i,e));return{c(){o&&o.c(),e=p("text");for(let t=0;t<a.length;t+=1)a[t].c();y(e,"class",n=t[21][t[70]]),y(e,"transform",r="translate(".concat(t[20][t[70]],")"))},m(t,n){o&&o.m(t,n),u(t,e,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,null)},p(t,s){if(t[0]&&t[24]?o?o.p(t,s):(o=zs(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),512&s[0]){let n;for(i=t[68],n=0;n<i.length;n+=1){const r=Ns(t,i,n);a[n]?a[n].p(r,s):(a[n]=Ps(r),a[n].c(),a[n].m(e,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}2097152&s[0]&&n!==(n=t[21][t[70]])&&y(e,"class",n),1048576&s[0]&&r!==(r="translate(".concat(t[20][t[70]],")"))&&y(e,"transform",r)},d(t){o&&o.d(t),t&&h(e),f(a,t)}}}function Is(t){let e,n;return{c(){e=p("text"),n=g(t[17]),y(e,"class","buffer"),x(e,"fill",t[24].svgTextStyles.fill),x(e,"stroke",t[24].svgTextStyles.stroke),x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"]),x(e,"pointer-events","none")},m(t,r){u(t,e,r),c(e,n)},p(t,r){131072&r[0]&&v(n,t[17]),16777216&r[0]&&x(e,"fill",t[24].svgTextStyles.fill),16777216&r[0]&&x(e,"stroke",t[24].svgTextStyles.stroke),16777216&r[0]&&x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),16777216&r[0]&&x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"])},d(t){t&&h(e)}}}function Fs(t){let e,n;return{c(){e=p("stop"),y(e,"offset",100*t[65]+"%"),y(e,"stop-color",n=t[31](t[65],t[2]))},m(t,n){u(t,e,n)},p(t,r){4&r[0]&&n!==(n=t[31](t[65],t[2]))&&y(e,"stop-color",n)},d(t){t&&h(e)}}}function Us(t){let e,n,r,o,a,s,l,d,k,M,A,T,_,E,$,O,S,N,L,C,D,z,R,P=t[0]&&t[24]&&Cs(t),j=t[8]&&Ds(t),I=t[9],F=[];for(let e=0;e<I.length;e+=1)F[e]=js(Ss(t,I,e));let U=t[0]&&t[24]&&Is(t),B=t[29],H=[];for(let e=0;e<B.length;e+=1)H[e]=Fs(Os(t,B,e));return{c(){e=p("svg"),n=p("g"),P&&P.c(),r=m(),j&&j.c(),o=p("rect"),l=p("g");for(let t=0;t<F.length;t+=1)F[t].c();k=p("g"),M=p("path"),T=p("g"),U&&U.c(),_=p("text"),E=g(t[17]),O=p("defs"),S=p("linearGradient");for(let t=0;t<H.length;t+=1)H[t].c();y(o,"class","legend-color"),y(o,"width",a=t[3]?t[4]:t[12]),y(o,"height",s=t[3]?t[12]:t[5]),x(o,"fill","url(#".concat(t[30],")")),x(o,"mix-blend-mode",t[8]?"screen":null),y(l,"class","labels"),y(l,"aria-hidden","true"),y(l,"transform",d="translate(".concat(t[22],")")),y(M,"class","triangle"),y(M,"d",t[19]),y(M,"transform",A="translate(".concat(t[18].join(","),")")),y(T,"class","text"),y(T,"transform",$="translate(".concat(t[3]?[0,t[12]+12]:[t[6]?-12:t[12]+12,0],")")),y(k,"class","highlight"),y(k,"aria-hidden","true"),y(k,"style",t[15]),w(n,"highlighted",null!==t[13]&&t[10]),y(S,"id",t[30]),y(S,"x2",N=t[3]?1:0),y(S,"y2",L=t[3]?0:1),y(e,"width",C=t[16].width),y(e,"height",D=t[16].height),w(e,"no-transition",t[14])},m(i,a){u(i,e,a),c(e,n),P&&P.m(n,null),c(n,r),j&&j.m(n,null),c(n,o),c(n,l);for(let t=0;t<F.length;t+=1)F[t]&&F[t].m(l,null);c(n,k),c(k,M),c(k,T),U&&U.m(T,null),c(T,_),c(_,E),t[55](n),c(e,O),c(O,S);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(S,null);z||(R=[b(e,"mouseenter",t[33]),b(e,"mouseleave",t[34]),b(e,"mousemove",t[35])],z=!0)},p(t,i){if(t[0]&&t[24]?P?P.p(t,i):(P=Cs(t),P.c(),P.m(n,r)):P&&(P.d(1),P=null),t[8]?j?j.p(t,i):(j=Ds(t),j.c(),j.m(n,o)):j&&(j.d(1),j=null),4120&i[0]&&a!==(a=t[3]?t[4]:t[12])&&y(o,"width",a),4136&i[0]&&s!==(s=t[3]?t[12]:t[5])&&y(o,"height",s),256&i[0]&&x(o,"mix-blend-mode",t[8]?"screen":null),19923457&i[0]){let e;for(I=t[9],e=0;e<I.length;e+=1){const n=Ss(t,I,e);F[e]?F[e].p(n,i):(F[e]=js(n),F[e].c(),F[e].m(l,null))}for(;e<F.length;e+=1)F[e].d(1);F.length=I.length}if(4194304&i[0]&&d!==(d="translate(".concat(t[22],")"))&&y(l,"transform",d),524288&i[0]&&y(M,"d",t[19]),262144&i[0]&&A!==(A="translate(".concat(t[18].join(","),")"))&&y(M,"transform",A),t[0]&&t[24]?U?U.p(t,i):(U=Is(t),U.c(),U.m(T,_)):U&&(U.d(1),U=null),131072&i[0]&&v(E,t[17]),4168&i[0]&&$!==($="translate(".concat(t[3]?[0,t[12]+12]:[t[6]?-12:t[12]+12,0],")"))&&y(T,"transform",$),32768&i[0]&&y(k,"style",t[15]),9216&i[0]&&w(n,"highlighted",null!==t[13]&&t[10]),536870916&i[0]|1&i[1]){let e;for(B=t[29],e=0;e<B.length;e+=1){const n=Os(t,B,e);H[e]?H[e].p(n,i):(H[e]=Fs(n),H[e].c(),H[e].m(S,null))}for(;e<H.length;e+=1)H[e].d(1);H.length=B.length}8&i[0]&&N!==(N=t[3]?1:0)&&y(S,"x2",N),8&i[0]&&L!==(L=t[3]?0:1)&&y(S,"y2",L),65536&i[0]&&C!==(C=t[16].width)&&y(e,"width",C),65536&i[0]&&D!==(D=t[16].height)&&y(e,"height",D),16384&i[0]&&w(e,"no-transition",t[14])},d(n){n&&h(e),P&&P.d(),j&&j.d(),f(F,n),U&&U.d(),t[55](null),f(H,n),z=!1,i(R)}}}function Bs(t){let e,n;return e=new et({props:{title:t[1],ariaLabel:t[25],buffer:t[24],className:["color-legend","continuous",t[3]?"horizontal":"vertical",t[6]?"dir-rtl":"dir-ltr",t[28],t[27],t[26]].join(" "),width:t[3]?Bi(t[4]):void 0,purifyHtml:t[7],$$slots:{default:[Us]},$$scope:{ctx:t}}}),e.$on("mouseleave",t[32]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),33554432&n[0]&&(r.ariaLabel=t[25]),16777216&n[0]&&(r.buffer=t[24]),469762120&n[0]&&(r.className=["color-legend","continuous",t[3]?"horizontal":"vertical",t[6]?"dir-rtl":"dir-ltr",t[28],t[27],t[26]].join(" ")),24&n[0]&&(r.width=t[3]?Bi(t[4]):void 0),128&n[0]&&(r.purifyHtml=t[7]),33554301&n[0]|8192&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}const Hs=15;function Ys(t,e,n){let r,o,i,a,s,l,c,u,h,f,d,p,g,m,b,y,v,{title:x=""}=e,{colors:w=(()=>"fff")}=e,{limits:k=[0,100]}=e,{format:M=(t=>String(+t.toFixed(2)))}=e,{labels:A}=e,{horizontal:_=!0}=e,{width:E=100}=e,{height:O=200}=e,{noPadding:S=!1}=e,{position:N="above"}=e,{highlight:L=!1}=e,{rtl:C=!1}=e,{reverse:z=!1}=e,{buffer:R=!1}=e,{emotion:P}=e,{purifyHtml:j}=e,{themeData:I={}}=e,{blendMultiply:F=!1}=e,{blendMultiplyBackground:U=""}=e,{translate:B}=e;const H=new Promise((t=>{v=t})),Y=T();let W=!1,q=!1;const G=[...Array(17).keys()].map((t=>t/16)),V="g-".concat(Math.floor(1e6*Math.random()).toString(32));function X(t){return q?t<.5?u[0]+2*t*(u[1]-u[0]):u[1]+2*(t-.5)*(u[2]-u[1]):u[0]+t*(u[1]-u[0])}let K=[],Z=!1,J=!1,{highlightedValue:Q=null}=e,tt=null;const et={x:null,y:null};let rt=null,ot=null;const{onMouseEnter:it,onMouseLeave:at,onLegendMouseLeave:st,onHighlight:lt}=xs(Y,L);let ct;lt((t=>{n(10,Z=null!==t)}));const ut={width:100,height:100};return t.$$set=t=>{"title"in t&&n(1,x=t.title),"colors"in t&&n(2,w=t.colors),"limits"in t&&n(36,k=t.limits),"format"in t&&n(37,M=t.format),"labels"in t&&n(38,A=t.labels),"horizontal"in t&&n(3,_=t.horizontal),"width"in t&&n(4,E=t.width),"height"in t&&n(5,O=t.height),"noPadding"in t&&n(39,S=t.noPadding),"position"in t&&n(40,N=t.position),"highlight"in t&&n(41,L=t.highlight),"rtl"in t&&n(6,C=t.rtl),"reverse"in t&&n(42,z=t.reverse),"buffer"in t&&n(0,R=t.buffer),"emotion"in t&&n(43,P=t.emotion),"purifyHtml"in t&&n(7,j=t.purifyHtml),"themeData"in t&&n(44,I=t.themeData),"blendMultiply"in t&&n(8,F=t.blendMultiply),"blendMultiplyBackground"in t&&n(45,U=t.blendMultiplyBackground),"translate"in t&&n(46,B=t.translate),"highlightedValue"in t&&n(48,Q=t.highlightedValue)},t.$$.update=()=>{if(13056&t.$$.dirty[1]&&n(28,r=ds(P,I,N,S)),12288&t.$$.dirty[1]&&n(27,o=ps(P,I)),12288&t.$$.dirty[1]&&n(26,i=function(t,e){const{css:n}=Ui(t,e);return n(Qo||(Qo=Co(["\n        &.vertical {\n            g.labels text,\n            g.labels text tspan {\n                &.min {\n                    dominant-baseline: hanging;\n                }\n                &.center {\n                    dominant-baseline: middle;\n                }\n                &.max {\n                    dominant-baseline: ideographic;\n                }\n            }\n        }\n        &.horizontal {\n            g.labels text,\n            g.labels text tspan {\n                &.center {\n                    text-anchor: middle;\n                }\n            }\n            &:not(.dir-rtl) g.labels text,\n            &:not(.dir-rtl) g.labels text tspan {\n                &.min {\n                    text-anchor: start;\n                }\n                &.max {\n                    text-anchor: end;\n                }\n            }\n            &.dir-rtl g.labels text,\n            &.dir-rtl g.labels text tspan {\n                &.min {\n                    text-anchor: end;\n                }\n                &.max {\n                    text-anchor: start;\n                }\n            }\n        }\n        g.highlight {\n            display: none;\n            transition: transform 0.4s cubic-bezier(1, 0, 0, 1);\n        }\n        .no-transition g.highlight {\n            transition: none;\n        }\n        .highlighted g.highlight {\n            display: block;\n            & path.triangle {\n                fill: #000;\n            }\n            & text {\n                font-size: 14px;\n            }\n        }\n        .highlighted g.labels text {\n            opacity: 0.3;\n        }\n        &.horizontal .highlighted rect {\n            cursor: text;\n        }\n        &.vertical .highlighted rect {\n            cursor: vertical-text;\n        }\n        &.horizontal g.highlight text,\n        &.horizontal g.highlight text tspan {\n            text-anchor: middle;\n            dominant-baseline: hanging;\n        }\n        &.vertical g.highlight text,\n        &.vertical g.highlight text tspan {\n            dominant-baseline: mathematical;\n        }\n    "])))}(P,I)),72&t.$$.dirty[0]|2048&t.$$.dirty[1]&&n(49,W=C||!_?!z:z),32&t.$$.dirty[1]&&n(50,q=3===k.length&&void 0!==k[2]),6&t.$$.dirty[0]|32864&t.$$.dirty[1]&&n(25,a=ms(B,{colors:w,title:x,format:M,limits:k})),1&t.$$.dirty[0]|8192&t.$$.dirty[1]&&n(24,s=R&&ws(nt(I,"colors.background","white"))),8192&t.$$.dirty[1]&&n(12,l=nt(I,"vis.base.legend.ruler.thickness",13)),8192&t.$$.dirty[1]&&n(54,c=nt(I,"vis.base.legend.swatch.marginRight",3)),262176&t.$$.dirty[1]&&(u=W?[...k].reverse():[...k]),8192&t.$$.dirty[1]&&n(23,h=nt(I,"colors.background","#ffffff")),262368&t.$$.dirty[1]){const t=[...A||k.map(M)];W&&t.reverse(),n(9,K=t.map((t=>[...t.split("<br>")])))}if(4168&t.$$.dirty[0]|8388608&t.$$.dirty[1]&&n(22,f=(_?[0,l+c]:[C?-c:l+c,0]).join(",")),512&t.$$.dirty[0]|524288&t.$$.dirty[1]&&n(21,d=K.map(((t,e)=>0===e?"min":1===e&&q?"center":"max"))),568&t.$$.dirty[0]|524288&t.$$.dirty[1]&&n(20,p=K.map(((t,e)=>(_?[E*e/(q?2:1),0]:[0,O*e/(q?2:1)]).join(",")))),72&t.$$.dirty[0]&&n(19,g=_?"M-5,0 L 5,0 L 0,-7 Z":C?"M0,5 L7,0 L 0,-5 Z":"M0,-5 L-7,0 L 0,5 Z"),4168&t.$$.dirty[0]&&n(18,m=_?[0,l+7]:[C?-7:l+7,0]),1024&t.$$.dirty[0]|131072&t.$$.dirty[1]&&null!==Q&&(n(14,J=!Z),n(10,Z=!0),n(51,tt=Q)),1179648&t.$$.dirty[1]&&null===Q&&null!==tt&&(n(14,J=!1),n(10,Z=!1)),56&t.$$.dirty[0]|2097152&t.$$.dirty[1]){const t=_?et.x:et.y;n(53,rt=null!==t?Math.min(1,Math.max(0,t/(_?E:O))):null)}if(4325376&t.$$.dirty[1]&&n(13,b=null!==Q?Q:null!==rt?X(rt):null),8192&t.$$.dirty[0]|64&t.$$.dirty[1]&&n(17,y=null!==b?M(b):""),56&t.$$.dirty[0]|4325376&t.$$.dirty[1]){const t=null!==Q?function(t){return q?(W?t>u[1]:t<u[1])?.5*(t-u[0])/(u[1]-u[0]):.5+.5*(t-u[1])/(u[2]-u[1]):(t-u[0])/(u[1]-u[0])}(Q):null!==rt?rt:null;n(15,ot=null!==t?"transform: translate(".concat((_?[t*E,0]:[0,t*O]).map((t=>"".concat(t,"px"))),")"):null)}2064&t.$$.dirty[0]&&async function(){if(!ct)return;const t=R;n(0,R=!1),await D();const e=ct.getBoundingClientRect();n(16,ut.height=e.height,ut),n(16,ut.width=e.width,ut),!_&&C&&ct.setAttribute("transform","translate(".concat(e.width-l,",0)")),n(0,R=t),v(null)}()},[R,x,w,_,E,O,C,j,F,K,Z,ct,l,b,J,ot,ut,y,m,g,p,d,f,h,s,a,i,o,r,G,V,function(t,e){const n=W?1-t:t;return e(q?n<=.5?2*n*(k[1]-k[0])+k[0]:2*(n-.5)*(k[2]-k[1])+k[1]:n*(k[1]-k[0])+k[0])},st,function(){L&&n(14,J=!0)},function(t){L&&(n(14,J=!1),n(52,et.x=null,et),n(52,et.y=null,et),at(t))},async function(t){if(!L)return;const e=t.currentTarget.getBoundingClientRect();if(n(52,et.x=t.clientX-e.x,et),n(52,et.y=t.clientY-e.y,et),await D(),null===rt||null===b)return;const r=X(rt+(W?.05:-.05)),o=X(rt+(W?-.05:.05));it(new CustomEvent("mouseenter",{detail:{key:b,min:r,max:o}}))},k,M,A,S,N,L,z,P,I,U,B,H,Q,W,q,tt,et,rt,c,function(t){$[t?"unshift":"push"]((()=>{ct=t,n(11,ct)}))}]}class Ws extends K{constructor(t){super(),X(this,t,Ys,Bs,s,{title:1,colors:2,limits:36,format:37,labels:38,horizontal:3,width:4,height:5,noPadding:39,position:40,highlight:41,rtl:6,reverse:42,buffer:0,emotion:43,purifyHtml:7,themeData:44,blendMultiply:8,blendMultiplyBackground:45,translate:46,rendered:47,highlightedValue:48},null,[-1,-1,-1])}get rendered(){return this.$$.ctx[47]}}function qs(t){let e,n=t[4]&&Vs(t);return{c(){n&&n.c(),e=p("rect"),y(e,"class","legend-color"),y(e,"width",t[12]),y(e,"height",t[13]),x(e,"fill",t[6]),x(e,"mix-blend-mode",t[4]?"screen":null)},m(t,r){n&&n.m(t,r),u(t,e,r)},p(t,r){t[4]?n?n.p(t,r):(n=Vs(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),4096&r[0]&&y(e,"width",t[12]),8192&r[0]&&y(e,"height",t[13]),64&r[0]&&x(e,"fill",t[6]),16&r[0]&&x(e,"mix-blend-mode",t[4]?"screen":null)},d(t){n&&n.d(t),t&&h(e)}}}function Gs(t){let e,n,r,o,i,a;return{c(){e=p("rect"),y(e,"class","buffer"),y(e,"width",n=t[12]+t[0].size),y(e,"height",r=t[13]+t[0].size),y(e,"x",o=-t[0].size/2),y(e,"y",i=-t[0].size/2),y(e,"style",a=t[14]?"opacity: 0.2 !important;":""),x(e,"fill",t[0].color)},m(t,n){u(t,e,n)},p(t,s){4097&s[0]&&n!==(n=t[12]+t[0].size)&&y(e,"width",n),8193&s[0]&&r!==(r=t[13]+t[0].size)&&y(e,"height",r),1&s[0]&&o!==(o=-t[0].size/2)&&y(e,"x",o),1&s[0]&&i!==(i=-t[0].size/2)&&y(e,"y",i),16384&s[0]&&a!==(a=t[14]?"opacity: 0.2 !important;":"")&&y(e,"style",a),(16384&s[0]||16385&s[0])&&x(e,"fill",t[0].color)},d(t){t&&h(e)}}}function Vs(t){let e;return{c(){e=p("rect"),y(e,"width",t[12]),y(e,"height",t[13]),x(e,"fill",t[5])},m(t,n){u(t,e,n)},p(t,n){4096&n[0]&&y(e,"width",t[12]),8192&n[0]&&y(e,"height",t[13]),32&n[0]&&x(e,"fill",t[5])},d(t){t&&h(e)}}}function Xs(t){let e,n;function r(t,e){return t[0]?Zs:Ks}let o=r(t),i=o(t),a=t[15]>0&&Js(t);return{c(){i.c(),e=m(),a&&a.c(),n=m()},m(t,r){i.m(t,r),u(t,e,r),a&&a.m(t,r),u(t,n,r)},p(t,s){o===(o=r(t))&&i?i.p(t,s):(i.d(1),i=o(t),i&&(i.c(),i.m(e.parentNode,e))),t[15]>0?a?a.p(t,s):(a=Js(t),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(t){i.d(t),t&&h(e),a&&a.d(t),t&&h(n)}}}function Ks(t){let e,n;return{c(){e=p("text"),n=g(t[7]),y(e,"transform",t[18]),x(e,"text-anchor",t[3]?t[2]?"start":"end":""),x(e,"dominant-baseline",t[3]?"central":"")},m(r,o){u(r,e,o),c(e,n),t[36](e)},p(t,r){128&r[0]&&v(n,t[7]),262144&r[0]&&y(e,"transform",t[18]),12&r[0]&&x(e,"text-anchor",t[3]?t[2]?"start":"end":""),8&r[0]&&x(e,"dominant-baseline",t[3]?"central":"")},d(n){n&&h(e),t[36](null)}}}function Zs(t){let e,n;return{c(){e=p("text"),n=g(t[7]),y(e,"transform",t[18]),x(e,"text-anchor",t[3]?t[2]?"start":"end":""),x(e,"dominant-baseline",t[3]?"central":""),x(e,"fill",t[0].svgTextStyles.fill),x(e,"stroke",t[0].svgTextStyles.stroke),x(e,"stroke-width",t[0].svgTextStyles["stroke-width"]),x(e,"stroke-linejoin",t[0].svgTextStyles["stroke-linejoin"])},m(r,o){u(r,e,o),c(e,n),t[35](e)},p(t,r){128&r[0]&&v(n,t[7]),262144&r[0]&&y(e,"transform",t[18]),12&r[0]&&x(e,"text-anchor",t[3]?t[2]?"start":"end":""),8&r[0]&&x(e,"dominant-baseline",t[3]?"central":""),1&r[0]&&x(e,"fill",t[0].svgTextStyles.fill),1&r[0]&&x(e,"stroke",t[0].svgTextStyles.stroke),1&r[0]&&x(e,"stroke-width",t[0].svgTextStyles["stroke-width"]),1&r[0]&&x(e,"stroke-linejoin",t[0].svgTextStyles["stroke-linejoin"])},d(n){n&&h(e),t[35](null)}}}function Js(t){let e;return{c(){e=p("path"),y(e,"class","tick"),y(e,"d",t[22]()),x(e,"stroke",t[20]),x(e,"stroke-width",t[16])},m(t,n){u(t,e,n)},p(t,n){1048576&n[0]&&x(e,"stroke",t[20]),65536&n[0]&&x(e,"stroke-width",t[16])},d(t){t&&h(e)}}}function Qs(t){let n,r,o,a,s;function l(t,e){return t[0]?Gs:qs}let f=l(t),d=f(t),g=("center"===t[1]||t[9]>0)&&Xs(t);return{c(){n=p("g"),d.c(),r=m(),g&&g.c(),y(n,"class","swatch"),y(n,"aria-hidden","true"),y(n,"transform",o="translate(".concat(t[17].join(),")")),w(n,"highlight",t[14]),w(n,"buffer",t[0])},m(e,o){u(e,n,o),d.m(n,null),c(n,r),g&&g.m(n,null),a||(s=[b(n,"mouseenter",t[37]),b(n,"click",t[38]),b(n,"mousemove",t[33]),b(n,"mouseleave",t[34])],a=!0)},p(t,e){f===(f=l(t))&&d?d.p(t,e):(d.d(1),d=f(t),d&&(d.c(),d.m(n,r))),"center"===t[1]||t[9]>0?g?g.p(t,e):(g=Xs(t),g.c(),g.m(n,null)):g&&(g.d(1),g=null),131072&e[0]&&o!==(o="translate(".concat(t[17].join(),")"))&&y(n,"transform",o),16384&e[0]&&w(n,"highlight",t[14]),1&e[0]&&w(n,"buffer",t[0])},i:e,o:e,d(t){t&&h(n),d.d(),g&&g.d(),a=!1,i(s)}}}function tl(t,e,n){let r,o,i,a,s,l,c,u;const h=T();let{buffer:f}=e,{themeData:d}=e,{horizontal:p}=e,{labelPosition:g="center"}=e,{rtl:m=!1}=e,{rotateLabel:b=!1}=e,{parentWidth:y=0}=e,{chroma:v}=e,{blendMultiply:x=!1}=e,{blendMultiplyBackground:w=""}=e;if(x&&!w)throw new Error("Property 'blendMultiplyBackground' missing from legend");let k,M,A,{color:E}=e,{label:O}=e,{key:S}=e,{index:N}=e,{min:L}=e,{max:C}=e,{width:D}=e,{height:z}=e,{highlight:R=!1}=e;return t.$$set=t=>{"buffer"in t&&n(0,f=t.buffer),"themeData"in t&&n(23,d=t.themeData),"horizontal"in t&&n(24,p=t.horizontal),"labelPosition"in t&&n(1,g=t.labelPosition),"rtl"in t&&n(2,m=t.rtl),"rotateLabel"in t&&n(3,b=t.rotateLabel),"parentWidth"in t&&n(25,y=t.parentWidth),"chroma"in t&&n(26,v=t.chroma),"blendMultiply"in t&&n(4,x=t.blendMultiply),"blendMultiplyBackground"in t&&n(5,w=t.blendMultiplyBackground),"color"in t&&n(6,E=t.color),"label"in t&&n(7,O=t.label),"key"in t&&n(8,S=t.key),"index"in t&&n(9,N=t.index),"min"in t&&n(10,L=t.min),"max"in t&&n(11,C=t.max),"width"in t&&n(12,D=t.width),"height"in t&&n(13,z=t.height),"highlight"in t&&n(14,R=t.highlight)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(30,i="tick"===g),1082130432&t.$$.dirty[0]&&n(32,a=i?nt(d,"vis.base.legend.ruler.tickWidth",1):1),8388608&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(31,r=nt(d,"vis.base.legend.text.itemMarginBottom",a)),8388608&t.$$.dirty[0]&&n(29,o=nt(d,"vis.base.legend.swatch.marginRight",3)),8388608&t.$$.dirty[0]&&n(16,u=nt(d,"vis.base.legend.ruler.tickWidth",1)),50409988&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(17,k=!p&&m&&y?[y-D,N*(z+u)]:p?[N*(D+a),0]:[0,N*(z+r)]),25165824&t.$$.dirty[0]&&n(28,s=nt(d,"vis.base.legend.ruler.labelDistance."+(p?"horizontal":"vertical"),3)),75497472&t.$$.dirty[0]&&n(20,l=nt(d,"vis.base.legend.ruler.tickColor",function(t,e){const n=nt(t,"colors.background","#ffffff"),r=nt(t,"colors.chartContentBaseColor",e.contrast(n,"#000000")<5.5?"#f1f1f1":"#333333"),o={tickText:{secondary:nt(t,"colors.bgBlendRatios.tickText.secondary",e(n).luminance()<.5?.6:.4),primary:nt(t,"colors.bgBlendRatios.tickText.primary",.2)},series:nt(t,"colors.bgBlendRatios.series",0),value:nt(t,"colors.bgBlendRatios.value",.2),axis:nt(t,"colors.bgBlendRatios.axis",0),gridline:nt(t,"colors.bgBlendRatios.gridline",.82)};return{tickText:{secondary:e.mix(r,n,o.tickText.secondary).hex(),primary:e.mix(r,n,o.tickText.primary).hex()},series:e.mix(r,n,o.series).hex(),value:e.mix(r,n,o.value).hex(),axis:e.mix(r,n,o.axis).hex(),gridline:e.mix(r,n,o.gridline).hex(),fallbackBaseColor:r,blendColor:t=>e.mix(r,n,t).hex()}}(d,v).fallbackBaseColor||"#222")),1082130432&t.$$.dirty[0]&&n(15,c=i?nt(d,"vis.base.legend.ruler.tickLength",0):0),822128654&t.$$.dirty[0]){let t=[];b?n(18,M="translate(0, ".concat(z+s+c,") rotate(-90)")):"center"===g?t=p?[.5*D,z+o]:[D+o,.5*z]:"tick"===g&&(t=p?[0,z+s+c]:[m?-(c+s):D+s+c,0]),t.length&&n(18,M="translate(".concat(t.join(),")"))}},[f,g,m,b,x,w,E,O,S,N,L,C,D,z,R,c,u,k,M,A,l,h,function(){return"M".concat(p?.5*-u:m?D:0,",").concat(p?0:.5*-u).concat(p?"v":"h").concat((!p&&m?-1:1)*((p?z:D)+c))},d,p,y,v,function(){return!!A&&A.getBoundingClientRect().width>D+2},s,o,i,r,a,function(e){_.call(this,t,e)},function(e){_.call(this,t,e)},function(t){$[t?"unshift":"push"]((()=>{A=t,n(19,A)}))},function(t){$[t?"unshift":"push"]((()=>{A=t,n(19,A)}))},()=>h("mouseenter",{key:S,label:O,color:E,min:L,max:C}),()=>h("mouseenter",{key:S,label:O,color:E,min:L,max:C})]}class el extends K{constructor(t){super(),X(this,t,tl,Qs,s,{buffer:0,themeData:23,horizontal:24,labelPosition:1,rtl:2,rotateLabel:3,parentWidth:25,chroma:26,blendMultiply:4,blendMultiplyBackground:5,color:6,label:7,key:8,index:9,min:10,max:11,width:12,height:13,highlight:14,labelFits:27},null,[-1,-1])}get labelFits(){return this.$$.ctx[27]}}function nl(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t=>String(+t.toFixed(0)),o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"center",i=arguments.length>5&&void 0!==arguments[5]&&arguments[5]||!(!(arguments.length>6&&void 0!==arguments[6])||arguments[6]);arguments.length>4&&void 0!==arguments[4]&&arguments[4]&&(i=!i);const a=t.map(((a,s)=>{let l=n?n[s]:0===s?"< ".concat(r(e[1])):s===t.length-1?"≥ ".concat(r(e[s])):"".concat(r(e[s]),"–").concat(r(e[s+1]));return"tick"===o&&(l=s===(i?t.length-1:0)?"":"".concat(r(e[i?s+1:s]))),{color:a,min:0===s?-1/0:+e[s],max:s===t.length-1?1/0:+e[s+1],label:l,key:l||"swatch_".concat(s)}}));return i&&a.reverse(),a}function rl(t,e,n){const r=t.slice();return r[47]=e[n],r[48]=e,r[49]=n,r}function ol(t,e,n){const r=t.slice();return r[47]=e[n],r[49]=n,r}function il(t){let e,n;return e=new et({props:{title:t[1],buffer:t[32],className:["color-legend",t[2]?"horizontal":"vertical",t[29],t[31],t[30]].join(" "),ariaLabel:ms(t[19],{colors:t[9],title:t[1],format:t[12],swatches:t[23]}),width:t[2]?Bi(t[14]):void 0,purifyHtml:t[8],$$slots:{default:[ul]},$$scope:{ctx:t}}}),e.$on("mouseleave",t[35]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),2&n[1]&&(r.buffer=t[32]),1610612740&n[0]|1&n[1]&&(r.className=["color-legend",t[2]?"horizontal":"vertical",t[29],t[31],t[30]].join(" ")),8917506&n[0]&&(r.ariaLabel=ms(t[19],{colors:t[9],title:t[1],format:t[12],swatches:t[23]})),16388&n[0]&&(r.width=t[2]?Bi(t[14]):void 0),256&n[0]&&(r.purifyHtml=t[8]),530980997&n[0]|1048578&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function al(t){let e,n;return e=new $s({props:{title:t[1],horizontal:t[2],highlight:t[3],reverse:t[4],rtl:t[5],emotion:t[6],swatches:nl(t[9],t[10],t[11],t[12],t[4]===t[5]?t[4]:!t[4],t[5],t[2]),themeData:t[13],chroma:t[7],purifyHtml:t[8],width:t[2]?Bi(t[14]):"auto",height:t[2]?"auto":Bi(t[15]),buffer:t[0],highlightedKey:t[24]||"",position:t[16],blendMultiply:t[17],blendMultiplyBackground:t[18],translate:t[19],locale:t[20]}}),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),4&n[0]&&(r.horizontal=t[2]),8&n[0]&&(r.highlight=t[3]),16&n[0]&&(r.reverse=t[4]),32&n[0]&&(r.rtl=t[5]),64&n[0]&&(r.emotion=t[6]),7732&n[0]&&(r.swatches=nl(t[9],t[10],t[11],t[12],t[4]===t[5]?t[4]:!t[4],t[5],t[2])),8192&n[0]&&(r.themeData=t[13]),128&n[0]&&(r.chroma=t[7]),256&n[0]&&(r.purifyHtml=t[8]),16388&n[0]&&(r.width=t[2]?Bi(t[14]):"auto"),32772&n[0]&&(r.height=t[2]?"auto":Bi(t[15])),1&n[0]&&(r.buffer=t[0]),16777216&n[0]&&(r.highlightedKey=t[24]||""),65536&n[0]&&(r.position=t[16]),131072&n[0]&&(r.blendMultiply=t[17]),262144&n[0]&&(r.blendMultiplyBackground=t[18]),524288&n[0]&&(r.translate=t[19]),1048576&n[0]&&(r.locale=t[20]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function sl(t){let e,n,r=t[23],o=[];for(let e=0;e<r.length;e+=1)o[e]=ll(ol(t,r,e));const i=t=>W(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m()},m(t,r){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(427827332&n[0]|6&n[1]){let a;for(r=t[23],a=0;a<r.length;a+=1){const i=ol(t,r,a);o[a]?(o[a].p(i,n),Y(o[a],1)):(o[a]=ll(i),o[a].c(),Y(o[a],1),o[a].m(e.parentNode,e))}for(B(),a=r.length;a<o.length;a+=1)i(a);H()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)W(o[t]);n=!1},d(t){f(o,t),t&&h(e)}}}function ll(t){let e,n;return e=new el({props:{buffer:t[32],color:t[47].color,label:t[47].label,min:t[47].min,max:t[47].max,index:t[49],horizontal:t[2],width:t[28],height:t[27],themeData:t[13],key:t[47].key,highlight:t[24]===t[47].key,chroma:t[7]}}),e.$on("mouseenter",t[33]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};2&n[1]&&(r.buffer=t[32]),8388608&n[0]&&(r.color=t[47].color),8388608&n[0]&&(r.label=t[47].label),8388608&n[0]&&(r.min=t[47].min),8388608&n[0]&&(r.max=t[47].max),4&n[0]&&(r.horizontal=t[2]),268435456&n[0]&&(r.width=t[28]),134217728&n[0]&&(r.height=t[27]),8192&n[0]&&(r.themeData=t[13]),8388608&n[0]&&(r.key=t[47].key),25165824&n[0]&&(r.highlight=t[24]===t[47].key),128&n[0]&&(r.chroma=t[7]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function cl(t){let e,n,r=t[49];const o=()=>t[41](e,r),i=()=>t[41](null,r);let a={buffer:!1,color:t[47].color,label:t[47].label,min:t[47].min,max:t[47].max,index:t[49],horizontal:t[2],width:t[28],height:t[27],themeData:t[13],key:t[47].key,highlight:t[24]===t[47].key,chroma:t[7],blendMultiply:t[17],blendMultiplyBackground:t[18]};return e=new el({props:a}),o(),e.$on("mouseenter",t[33]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){r!==t[49]&&(i(),r=t[49],o());const a={};8388608&n[0]&&(a.color=t[47].color),8388608&n[0]&&(a.label=t[47].label),8388608&n[0]&&(a.min=t[47].min),8388608&n[0]&&(a.max=t[47].max),4&n[0]&&(a.horizontal=t[2]),268435456&n[0]&&(a.width=t[28]),134217728&n[0]&&(a.height=t[27]),8192&n[0]&&(a.themeData=t[13]),8388608&n[0]&&(a.key=t[47].key),25165824&n[0]&&(a.highlight=t[24]===t[47].key),128&n[0]&&(a.chroma=t[7]),131072&n[0]&&(a.blendMultiply=t[17]),262144&n[0]&&(a.blendMultiplyBackground=t[18]),e.$set(a)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){i(),V(e,t)}}}function ul(t){let e,n,r,o,i,a,s,l,d=t[0]&&sl(t),g=t[23],v=[];for(let e=0;e<g.length;e+=1)v[e]=cl(rl(t,g,e));const x=t=>W(v[t],1,1,(()=>{v[t]=null}));return{c(){e=p("svg"),n=p("g"),d&&d.c(),r=m();for(let t=0;t<v.length;t+=1)v[t].c();y(n,"class",""),w(n,"highlighted",null!==t[24]),y(e,"width",o=t[25].width),y(e,"height",i=t[25].height)},m(o,i){u(o,e,i),c(e,n),d&&d.m(n,null),c(n,r);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(n,null);t[42](n),a=!0,s||(l=b(e,"mouseleave",t[34]),s=!0)},p(t,s){if(t[0]?d?(d.p(t,s),1&s[0]&&Y(d,1)):(d=sl(t),d.c(),Y(d,1),d.m(n,r)):d&&(B(),W(d,1,1,(()=>{d=null})),H()),495329412&s[0]|4&s[1]){let e;for(g=t[23],e=0;e<g.length;e+=1){const r=rl(t,g,e);v[e]?(v[e].p(r,s),Y(v[e],1)):(v[e]=cl(r),v[e].c(),Y(v[e],1),v[e].m(n,null))}for(B(),e=g.length;e<v.length;e+=1)x(e);H()}(!a||16777216&s[0])&&w(n,"highlighted",null!==t[24]),(!a||33554432&s[0]&&o!==(o=t[25].width))&&y(e,"width",o),(!a||33554432&s[0]&&i!==(i=t[25].height))&&y(e,"height",i)},i(t){if(!a){Y(d);for(let t=0;t<g.length;t+=1)Y(v[t]);a=!0}},o(t){W(d),v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)W(v[t]);a=!1},d(n){n&&h(e),d&&d.d(),f(v,n),t[42](null),s=!1,l()}}}function hl(t){let e,n,r,o;const i=[al,il],a=[];function s(t,e){return t[22]?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=m()},m(t,n){a[e].m(t,n),u(t,r,n),o=!0},p(t,o){let l=e;e=s(t),e===l?a[e].p(t,o):(B(),W(a[l],1,1,(()=>{a[l]=null})),H(),n=a[e],n?n.p(t,o):(n=a[e]=i[e](t),n.c()),Y(n,1),n.m(r.parentNode,r))},i(t){o||(Y(n),o=!0)},o(t){W(n),o=!1},d(t){a[e].d(t),t&&h(r)}}}function fl(t,e,n){let r,o,i,a,s,l,c,u;const h=T();let f,{title:d=""}=e,{horizontal:p=!0}=e,{highlight:g=!1}=e,{reverse:m=!1}=e,{rtl:b=!1}=e,{emotion:y}=e,{chroma:v}=e,{purifyHtml:x}=e,{colors:w}=e,{breaks:k}=e,{labels:M}=e,{format:A=(t=>t.toFixed(0))}=e,{themeData:_={}}=e,{width:E=100}=e,{height:O=200}=e,{position:S="above"}=e,{noPadding:N=!1}=e,{buffer:L=!1}=e,{blendMultiply:C=!1}=e,{blendMultiplyBackground:z=""}=e,{translate:R}=e,{locale:P}=e;const j=new Promise((t=>{n(39,f=t)}));let I,{highlightedValue:F=null}=e;const{onMouseEnter:U,onMouseLeave:B,onLegendMouseLeave:H,onHighlight:Y}=xs(h,g);let W;Y((t=>{n(24,I=void 0!==t?t:null)}));const q={width:100,height:100};let G=!1;const V=[];return t.$$set=t=>{"title"in t&&n(1,d=t.title),"horizontal"in t&&n(2,p=t.horizontal),"highlight"in t&&n(3,g=t.highlight),"reverse"in t&&n(4,m=t.reverse),"rtl"in t&&n(5,b=t.rtl),"emotion"in t&&n(6,y=t.emotion),"chroma"in t&&n(7,v=t.chroma),"purifyHtml"in t&&n(8,x=t.purifyHtml),"colors"in t&&n(9,w=t.colors),"breaks"in t&&n(10,k=t.breaks),"labels"in t&&n(11,M=t.labels),"format"in t&&n(12,A=t.format),"themeData"in t&&n(13,_=t.themeData),"width"in t&&n(14,E=t.width),"height"in t&&n(15,O=t.height),"position"in t&&n(16,S=t.position),"noPadding"in t&&n(36,N=t.noPadding),"buffer"in t&&n(0,L=t.buffer),"blendMultiply"in t&&n(17,C=t.blendMultiply),"blendMultiplyBackground"in t&&n(18,z=t.blendMultiplyBackground),"translate"in t&&n(19,R=t.translate),"locale"in t&&n(20,P=t.locale),"highlightedValue"in t&&n(38,F=t.highlightedValue)},t.$$.update=()=>{var e;8193&t.$$.dirty[0]&&n(32,r=L&&ws(nt(_,"colors.background","white"))),73792&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(31,o=ds(y,_,S,N)),8256&t.$$.dirty[0]&&n(30,i=ps(y,_)),32&t.$$.dirty[0]&&n(29,a=b?"dir-rtl":"dir-ltr"),7732&t.$$.dirty[0]&&n(23,s=nl(w,k,M,A,m,b,p,"center")),8192&t.$$.dirty[0]&&n(40,l=nt(_,"vis.base.legend.ruler.thickness",13)),25092&t.$$.dirty[0]&&n(28,c=p?Math.floor(E/w.length)-1:nt(_,"vis.base.legend.swatch.width",20)),8196&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(27,u=p?l:nt(_,"vis.base.legend.swatch.height",20)),8388608&t.$$.dirty[0]|128&t.$$.dirty[1]&&n(24,I=(null===(e=s.find((t=>{if(null!==F&&t.min&&t.max)return F>=t.min&&F<t.max})))||void 0===e?void 0:e.key)||null),10502144&t.$$.dirty[0]&&async function(){if(!W||G)return;const t=L;n(0,L=!1),await D();const e=W.getBoundingClientRect();n(25,q.height=e.height,q),n(25,q.width=e.width,q),n(0,L=t),f(null)}(),8404992&t.$$.dirty[0]&&async function(){n(22,G=!1),await D();const t=V.filter((t=>!!t)),e=t.map((t=>t.labelFits()));n(22,G=p&&e.some((t=>t))||1===t.length)}(),4194304&t.$$.dirty[0]|256&t.$$.dirty[1]&&G&&f(null)},[L,d,p,g,m,b,y,v,x,w,k,M,A,_,E,O,S,C,z,R,P,W,G,s,I,q,V,u,c,a,i,o,r,U,B,H,N,j,F,f,l,function(t,e){$[t?"unshift":"push"]((()=>{V[e]=t,n(26,V)}))},function(t){$[t?"unshift":"push"]((()=>{W=t,n(21,W)}))}]}class dl extends K{constructor(t){super(),X(this,t,fl,hl,s,{title:1,horizontal:2,highlight:3,reverse:4,rtl:5,emotion:6,chroma:7,purifyHtml:8,colors:9,breaks:10,labels:11,format:12,themeData:13,width:14,height:15,position:16,noPadding:36,buffer:0,blendMultiply:17,blendMultiplyBackground:18,translate:19,locale:20,rendered:37,highlightedValue:38},null,[-1,-1])}get rendered(){return this.$$.ctx[37]}}function pl(t,e,n){const r=t.slice();return r[47]=e[n],r[48]=e,r[49]=n,r}function gl(t,e,n){const r=t.slice();return r[47]=e[n],r[49]=n,r}function ml(t){let e,n,r=t[12],o=[];for(let e=0;e<r.length;e+=1)o[e]=bl(gl(t,r,e));const i=t=>W(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m()},m(t,r){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(12810332&n[0]){let a;for(r=t[12],a=0;a<r.length;a+=1){const i=gl(t,r,a);o[a]?(o[a].p(i,n),Y(o[a],1)):(o[a]=bl(i),o[a].c(),Y(o[a],1),o[a].m(e.parentNode,e))}for(B(),a=r.length;a<o.length;a+=1)i(a);H()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)W(o[t]);n=!1},d(t){f(o,t),t&&h(e)}}}function bl(t){let e,n;return e=new el({props:{color:t[47].color,label:t[47].label,min:t[47].min,max:t[47].max,index:t[49],horizontal:t[2],width:t[17],height:t[16],buffer:t[22],themeData:t[6],key:t[47].key,labelPosition:"tick",rotateLabel:t[11],rtl:t[3],parentWidth:t[14].width,highlight:t[13]===t[47].key,chroma:t[4]}}),e.$on("mouseenter",t[23]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};4096&n[0]&&(r.color=t[47].color),4096&n[0]&&(r.label=t[47].label),4096&n[0]&&(r.min=t[47].min),4096&n[0]&&(r.max=t[47].max),4&n[0]&&(r.horizontal=t[2]),131072&n[0]&&(r.width=t[17]),65536&n[0]&&(r.height=t[16]),4194304&n[0]&&(r.buffer=t[22]),64&n[0]&&(r.themeData=t[6]),4096&n[0]&&(r.key=t[47].key),2048&n[0]&&(r.rotateLabel=t[11]),8&n[0]&&(r.rtl=t[3]),16384&n[0]&&(r.parentWidth=t[14].width),12288&n[0]&&(r.highlight=t[13]===t[47].key),16&n[0]&&(r.chroma=t[4]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function yl(t){let e,n,r=t[49];const o=()=>t[40](e,r),i=()=>t[40](null,r);let a={color:t[47].color,label:t[47].label,min:t[47].min,max:t[47].max,index:t[49],horizontal:t[2],width:t[17],height:t[16],buffer:!1,themeData:t[6],key:t[47].key,labelPosition:"tick",rotateLabel:t[11],rtl:t[3],parentWidth:t[14].width,highlight:t[13]===t[47].key,chroma:t[4],blendMultiply:t[8],blendMultiplyBackground:t[9]};return e=new el({props:a}),o(),e.$on("mouseenter",t[23]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){r!==t[49]&&(i(),r=t[49],o());const a={};4096&n[0]&&(a.color=t[47].color),4096&n[0]&&(a.label=t[47].label),4096&n[0]&&(a.min=t[47].min),4096&n[0]&&(a.max=t[47].max),4&n[0]&&(a.horizontal=t[2]),131072&n[0]&&(a.width=t[17]),65536&n[0]&&(a.height=t[16]),64&n[0]&&(a.themeData=t[6]),4096&n[0]&&(a.key=t[47].key),2048&n[0]&&(a.rotateLabel=t[11]),8&n[0]&&(a.rtl=t[3]),16384&n[0]&&(a.parentWidth=t[14].width),12288&n[0]&&(a.highlight=t[13]===t[47].key),16&n[0]&&(a.chroma=t[4]),256&n[0]&&(a.blendMultiply=t[8]),512&n[0]&&(a.blendMultiplyBackground=t[9]),e.$set(a)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){i(),V(e,t)}}}function vl(t){let e,n,r,o,i,a,s,l,d=t[0]&&ml(t),g=t[12],v=[];for(let e=0;e<g.length;e+=1)v[e]=yl(pl(t,g,e));const x=t=>W(v[t],1,1,(()=>{v[t]=null}));return{c(){e=p("svg"),n=p("g"),d&&d.c(),r=m();for(let t=0;t<v.length;t+=1)v[t].c();y(n,"class",""),w(n,"highlighted",null!==t[13]),y(e,"width",o=t[14].width),y(e,"height",i=t[14].height)},m(o,i){u(o,e,i),c(e,n),d&&d.m(n,null),c(n,r);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(n,null);t[41](n),a=!0,s||(l=b(e,"mouseleave",t[24]),s=!0)},p(t,s){if(t[0]?d?(d.p(t,s),1&s[0]&&Y(d,1)):(d=ml(t),d.c(),Y(d,1),d.m(n,r)):d&&(B(),W(d,1,1,(()=>{d=null})),H()),8649564&s[0]){let e;for(g=t[12],e=0;e<g.length;e+=1){const r=pl(t,g,e);v[e]?(v[e].p(r,s),Y(v[e],1)):(v[e]=yl(r),v[e].c(),Y(v[e],1),v[e].m(n,null))}for(B(),e=g.length;e<v.length;e+=1)x(e);H()}(!a||8192&s[0])&&w(n,"highlighted",null!==t[13]),(!a||16384&s[0]&&o!==(o=t[14].width))&&y(e,"width",o),(!a||16384&s[0]&&i!==(i=t[14].height))&&y(e,"height",i)},i(t){if(!a){Y(d);for(let t=0;t<g.length;t+=1)Y(v[t]);a=!0}},o(t){W(d),v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)W(v[t]);a=!1},d(n){n&&h(e),d&&d.d(),f(v,n),t[41](null),s=!1,l()}}}function xl(t){let e,n;return e=new et({props:{title:t[1],buffer:t[22],className:["color-legend","ruler",t[2]?"horizontal":"vertical",t[18],t[20],t[19]].join(" "),ariaLabel:t[21],width:t[2]?Bi(t[7]):void 0,purifyHtml:t[5],$$slots:{default:[vl]},$$scope:{ctx:t}}}),e.$on("mouseleave",t[25]),{c(){q(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),4194304&n[0]&&(r.buffer=t[22]),1835012&n[0]&&(r.className=["color-legend","ruler",t[2]?"horizontal":"vertical",t[18],t[20],t[19]].join(" ")),2097152&n[0]&&(r.ariaLabel=t[21]),132&n[0]&&(r.width=t[2]?Bi(t[7]):void 0),32&n[0]&&(r.purifyHtml=t[5]),4456285&n[0]|1048576&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function wl(t,e,n){let r,o,i,a,s,l,c,u,h;const f=T();let d,{title:p=""}=e,{horizontal:g=!0}=e,{highlight:m=!1}=e,{reverse:b=!1}=e,{rtl:y=!1}=e,{emotion:v}=e,{chroma:x}=e,{purifyHtml:w}=e,{colors:k}=e,{breaks:M}=e,{labels:A}=e,{format:_=(t=>t.toFixed(0))}=e,{themeData:E={}}=e,{width:O=100}=e,{height:S=200}=e,{position:N="above"}=e,{noPadding:L=!1}=e,{buffer:C=!1}=e,{blendMultiply:z=!1}=e,{blendMultiplyBackground:R=""}=e,{translate:P}=e;const j=new Promise((t=>{d=t}));let I,{highlightedValue:F=null}=e;const{onMouseEnter:U,onMouseLeave:B,onLegendMouseLeave:H,onHighlight:Y}=xs(f,m);let W;Y((t=>{n(13,I=void 0!==t?t:null)}));const q={width:100,height:100};let G=!1;const V=[];return t.$$set=t=>{"title"in t&&n(1,p=t.title),"horizontal"in t&&n(2,g=t.horizontal),"highlight"in t&&n(26,m=t.highlight),"reverse"in t&&n(27,b=t.reverse),"rtl"in t&&n(3,y=t.rtl),"emotion"in t&&n(28,v=t.emotion),"chroma"in t&&n(4,x=t.chroma),"purifyHtml"in t&&n(5,w=t.purifyHtml),"colors"in t&&n(29,k=t.colors),"breaks"in t&&n(30,M=t.breaks),"labels"in t&&n(31,A=t.labels),"format"in t&&n(32,_=t.format),"themeData"in t&&n(6,E=t.themeData),"width"in t&&n(7,O=t.width),"height"in t&&n(33,S=t.height),"position"in t&&n(34,N=t.position),"noPadding"in t&&n(35,L=t.noPadding),"buffer"in t&&n(0,C=t.buffer),"blendMultiply"in t&&n(8,z=t.blendMultiply),"blendMultiplyBackground"in t&&n(9,R=t.blendMultiplyBackground),"translate"in t&&n(36,P=t.translate),"highlightedValue"in t&&n(38,F=t.highlightedValue)},t.$$.update=()=>{var e;65&t.$$.dirty[0]&&n(22,r=C&&ws(nt(E,"colors.background","white"))),1744830478&t.$$.dirty[0]|35&t.$$.dirty[1]&&n(21,o=ms(P,{colors:k,title:p,format:_,swatches:nl(k,M,A,_,b,y,g,"center")})),268435520&t.$$.dirty[0]|24&t.$$.dirty[1]&&n(20,i=ds(v,E,N,L)),268435520&t.$$.dirty[0]&&n(19,a=ps(v,E)),8&t.$$.dirty[0]&&n(18,s=y?"dir-rtl":"dir-ltr"),1744830476&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(12,l=nl(k,M,A,_,b,y,g,"tick")),64&t.$$.dirty[0]&&n(39,c=nt(E,"vis.base.legend.ruler.thickness",13)),536871044&t.$$.dirty[0]|256&t.$$.dirty[1]&&n(17,u=g?Math.floor(O/k.length)-1:c),536870916&t.$$.dirty[0]|260&t.$$.dirty[1]&&n(16,h=g?c:Math.floor(S/k.length)-1),4096&t.$$.dirty[0]|128&t.$$.dirty[1]&&n(13,I=(null===(e=l.find((t=>{if(null!==F&&t.min&&t.max)return F>=t.min&&F<t.max})))||void 0===e?void 0:e.key)||null),7296&t.$$.dirty[0]&&async function(){if(!W)return;const t=C;n(0,C=!1),await D();const e=W.getBoundingClientRect();n(14,q.height=e.height,q),n(14,q.width=e.width,q),n(0,C=t),d(null)}(),4224&t.$$.dirty[0]&&async function(){n(11,G=!1),await D();const t=V.filter((t=>!!t)).map((t=>t.labelFits()));n(11,G=g&&t.some((t=>t)))}()},[C,p,g,y,x,w,E,O,z,R,W,G,l,I,q,V,h,u,s,a,i,o,r,U,B,H,m,b,v,k,M,A,_,S,N,L,P,j,F,c,function(t,e){$[t?"unshift":"push"]((()=>{V[e]=t,n(15,V)}))},function(t){$[t?"unshift":"push"]((()=>{W=t,n(10,W)}))}]}class kl extends K{constructor(t){super(),X(this,t,wl,xl,s,{title:1,horizontal:2,highlight:26,reverse:27,rtl:3,emotion:28,chroma:4,purifyHtml:5,colors:29,breaks:30,labels:31,format:32,themeData:6,width:7,height:33,position:34,noPadding:35,buffer:0,blendMultiply:8,blendMultiplyBackground:9,translate:36,rendered:37,highlightedValue:38},null,[-1,-1])}get rendered(){return this.$$.ctx[37]}}function Ml(t){return"string"!=typeof t?t:parseFloat(t.replace("px",""))}t.CategoryLegend=$s,t.ContinuousLegend=Ws,t.RangeLegend=dl,t.RulerLegend=kl,t.categoryLegendWrapper=function(t,e){const n=new $s({target:t,props:{...e,themeData:e.themeData||e.theme,swatches:e.swatches.map((t=>({...t,width:"width"in t?Ml(t.width):null})))}});return{on:function(t,e){n.$on(t,(t=>{e(t.detail)}))},highlight:t=>{n.$$set&&n.$$set({highlightedKey:t||""})},container:t}},t.colorLegendWrapper=function(t,e){var n;let r=null;switch(void 0===e.horizontal&&(e.horizontal=!0),function(t){return"function"==typeof t.colors?"continuous":t.ruler?"ruler":Array.isArray(t.colors)&&t.horizontal?"range":Array.isArray(t.colors)?"category":"winner"}(e)){case"continuous":r=new Ws({target:t,props:{...e,themeData:e.themeData||e.theme}});break;case"ruler":r=new kl({target:t,props:{...e,themeData:e.themeData||e.theme}});break;case"category":r=new $s({target:t,props:{...e,themeData:e.themeData||e.theme,swatches:nl(e.colors,e.breaks,e.labels,e.format,!1,e.rtl,e.horizontal),reverse:e.reverse,height:"auto"}});break;case"range":r=new dl({target:t,props:{...e,themeData:e.themeData||e.theme}});break;default:t.innerHTML="winner tk"}return{on:function(t,e){var n;null===(n=r)||void 0===n||n.$on(t,(t=>{e(t.detail)}))},highlight:t=>{var e;(null===(e=r)||void 0===e?void 0:e.$$set)&&r.$$set({highlightedValue:"number"==typeof t?t:null})},container:t,rendered:null===(n=r)||void 0===n?void 0:n.rendered}},t.highlightTimer=vs})(ti.exports);var ei=ti.exports;function ni(t){if("string"==typeof t){var e,n={},r=t.split(/([\.#])/g);for(t=r.shift();e=r.shift();)"."==e?n.class=n.class?n.class+" "+r.shift():r.shift():"#"==e&&(n.id=r.shift());return{tag:t,attr:n}}return t}function ri(){return null}const oi=/^(allowReorder|attributeName|attributeType|autoReverse|baseFrequency|baseProfile|calcMode|clipPathUnits|contentScriptType|contentStyleType|diffuseConstant|edgeMode|externalResourcesRequired|filterRes|filterUnits|glyphRef|gradientTransform|gradientUnits|kernelMatrix|kernelUnitLength|keyPoints|keySplines|keyTimes|lengthAdjust|limitingConeAngle|markerHeight|markerUnits|markerWidth|maskContentUnits|maskUnits|numOctaves|pathLength|patternContentUnits|patternTransform|patternUnits|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|referrerPolicy|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|specularConstant|specularExponent|spreadMethod|startOffset|stdDeviation|stitchTiles|surfaceScale|systemLanguage|tableValues|targetX|targetY|textLength|viewBox|viewTarget|xChannelSelector|yChannelSelector|zoomAndPan)$/;function ii(){for(var t=arguments,e=0,n=t.length;e<n;)"string"!=typeof t[e]&&"number"!=typeof t[e]||(t[e]=function(t){return function(e){return e[t]}}(t[e])),e++;return function(e){for(var n=0,r=t.length;n++<r;)e=t[n-1].call(this,e);return e}}function ai(t){return"function"==typeof t?function(e,n){return t(e)<t(n)?-1:t(e)>t(n)?1:t(e)>=t(n)?0:NaN}:function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:e[t]>=n[t]?0:NaN}}ii.not=function(t){return!t},ii.run=function(t){return t()},ii.objToFn=function(t,e){return 1==arguments.length&&(e=void 0),function(n){return void 0!==t[n]?t[n]:e}};var si="$";function li(){}function ci(t,e){var n=new li;if(t instanceof li)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,o=-1,i=t.length;if(null==e)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e(r=t[o],o,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function ui(){var t,e,n,r=[],o=[];function i(n,o,a,s){if(o>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,c,u,h=-1,f=n.length,d=r[o++],p=ci(),g=a();++h<f;)(u=p.get(l=d(c=n[h])+""))?u.push(c):p.set(l,[c]);return p.each((function(t,e){s(g,e,i(t,o,a,s))})),g}function a(t,n){if(++n>r.length)return t;var i,s=o[n-1];return null!=e&&n>=r.length?i=t.entries():(i=[],t.each((function(t,e){i.push({key:e,values:a(t,n)})}))),null!=s?i.sort((function(t,e){return s(t.key,e.key)})):i}return n={object:function(t){return i(t,0,hi,fi)},map:function(t){return i(t,0,di,pi)},entries:function(t){return a(i(t,0,di,pi),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return o[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function hi(){return{}}function fi(t,e,n){t[e]=n}function di(){return ci()}function pi(t,e,n){t.set(e,n)}function gi(){}li.prototype=ci.prototype={constructor:li,has:function(t){return si+t in this},get:function(t){return this[si+t]},set:function(t,e){return this[si+t]=e,this},remove:function(t){var e=si+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===si&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===si&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===si&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===si&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===si&&++t;return t},empty:function(){for(var t in this)if(t[0]===si)return!1;return!0},each:function(t){for(var e in this)e[0]===si&&t(this[e],e.slice(1),this)}};var mi=ci.prototype;gi.prototype={constructor:gi,has:mi.has,add:function(t){return this[si+(t+="")]=t,this},remove:mi.remove,clear:mi.clear,values:mi.keys,size:mi.size,empty:mi.empty,each:mi.each},it.prototype.translate=function(t,e){var n=this.node();return n?n.getBBox?this.attr("transform",(function(n,r){var o="function"==typeof t?t.call(this,n,r):t;return 0===e?o=[o,0]:1===e&&(o=[0,o]),"translate("+o[0]+","+o[1]+")"})):this.style("transform",(function(n,r){var o="function"==typeof t?t.call(this,n,r):t;return 0===e?o=[o,0]:1===e&&(o=[0,o]),"translate("+o[0]+"px,"+o[1]+"px)"})):this},it.prototype.append=function(t){var e,n;"function"==typeof t?e=t:(n=ni(t),e=i(n.tag));var r=this.select((function(){return this.appendChild(e.apply(this,arguments))}));if(n)for(var o in n.attr)r.attr(o,n.attr[o]);return r},it.prototype.insert=function(t,e){var n=ni(t),r=i(n.tag),o=null==e?ri:"function"==typeof e?e:s(e),a=this.select((function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)}));for(var l in n.attr)a.attr(l,n.attr[l]);return a},it.prototype.parent=function(){var t=[];return this.filter((function(){return!(t.indexOf(this.parentNode)>-1)&&(t.push(this.parentNode),!0)})).select((function(){return this.parentNode}))},it.prototype.selectAppend=function(t){var e,n=s(t),r=ni(t);for(var o in t=i(r.tag),e=this.select((function(){return n.apply(this,arguments)||this.appendChild(t.apply(this,arguments))})),r.attr)e.attr(o,r.attr[o]);return e},it.prototype.tspans=function(t,e){return this.selectAll("tspan").data((function(e,n){return("function"==typeof t?t.call(this,e,n):t).map((function(t){return{line:t,parent:e}}))})).enter().append("tspan").text((function(t){return t.line})).attr("x",0).attr("dy",(function(t,n){return n?("function"==typeof e?e.call(this,t.parent,t.line,n):e)||15:0}))},it.prototype.appendMany=function(t,e){if("string"==typeof e){console.warn("DEPRECATED: jetpack's appendMany order of arguments has changed. It's appendMany('div', data) from now on");var n=e;e=t,t=n}return this.selectAll(null).data(e).enter().append(t)},it.prototype.at=function(t,e){if("object"==typeof t){for(var n in t)this.attr(oi.test(n)?n:n.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),t[n]);return this}return 1==arguments.length?this.attr(t):this.attr(t,e)},it.prototype.st=function(t,e){if("object"==typeof t){for(var n in t)r(this,n,t[n]);return this}return 1==arguments.length?this.style(t):r(this,t,e);function r(t,e,n){e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();var r;return~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width margin-top margin-left margin-bottom margin-right font-size width stroke-width line-height margin padding border border-radius max-width min-width max-height min-height".indexOf(e)?t.style(e,"function"==typeof n?(r=n,function(){return o(r.apply(this,arguments))}):o(n)):t.style(e,n),t}function o(t){return t.match?t:t+"px"}},it.prototype.prop=it.prototype.property;var bi={exports:{}};bi.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",o="second",i="minute",a="hour",s="day",l="week",c="month",u="quarter",h="year",f="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},b=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},y={s:b,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+b(r,2,"0")+":"+b(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,c),i=n-o<0,a=e.clone().add(r+(i?-1:1),c);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:l,d:s,D:f,h:a,m:i,s:o,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",x={};x[v]=m;var w="$isDayjsObject",k=function(t){return t instanceof _||!(!t||!t[w])},M=function t(e,n,r){var o;if(!e)return v;if("string"==typeof e){var i=e.toLowerCase();x[i]&&(o=i),n&&(x[i]=n,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var s=e.name;x[s]=e,o=s}return!r&&o&&(v=o),o||!r&&v},A=function(t,e){if(k(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},T=y;T.l=M,T.i=k,T.w=function(t,e){return A(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function m(t){this.$L=M(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[w]=!0}var b=m.prototype;return b.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(T.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return T},b.isValid=function(){return!(this.$d.toString()===d)},b.isSame=function(t,e){var n=A(t);return this.startOf(e)<=n&&n<=this.endOf(e)},b.isAfter=function(t,e){return A(t)<this.startOf(e)},b.isBefore=function(t,e){return this.endOf(e)<A(t)},b.$g=function(t,e,n){return T.u(t)?this[e]:this.set(n,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,e){var n=this,r=!!T.u(e)||e,u=T.p(t),d=function(t,e){var o=T.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?o:o.endOf(s)},p=function(t,e){return T.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,b=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case h:return r?d(1,0):d(31,11);case c:return r?d(1,m):d(0,m+1);case l:var v=this.$locale().weekStart||0,x=(g<v?g+7:g)-v;return d(r?b-x:b+(6-x),m);case s:case f:return p(y+"Hours",0);case a:return p(y+"Minutes",1);case i:return p(y+"Seconds",2);case o:return p(y+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(t,e){var n,l=T.p(t),u="set"+(this.$u?"UTC":""),d=(n={},n[s]=u+"Date",n[f]=u+"Date",n[c]=u+"Month",n[h]=u+"FullYear",n[a]=u+"Hours",n[i]=u+"Minutes",n[o]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],p=l===s?this.$D+(e-this.$W):e;if(l===c||l===h){var g=this.clone().set(f,1);g.$d[d](p),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},b.set=function(t,e){return this.clone().$set(t,e)},b.get=function(t){return this[T.p(t)]()},b.add=function(r,u){var f,d=this;r=Number(r);var p=T.p(u),g=function(t){var e=A(d);return T.w(e.date(e.date()+Math.round(t*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===s)return g(1);if(p===l)return g(7);var m=(f={},f[i]=e,f[a]=n,f[o]=t,f)[p]||1,b=this.$d.getTime()+r*m;return T.w(b,this)},b.subtract=function(t,e){return this.add(-1*t,e)},b.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=T.z(this),i=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,h=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},f=function(t){return T.s(i%12||12,t,"0")},p=u||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return T.s(e.$y,4,"0");case"M":return s+1;case"MM":return T.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,c,3);case"MMMM":return h(c,s);case"D":return e.$D;case"DD":return T.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,l,2);case"ddd":return h(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(i);case"HH":return T.s(i,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(i,a,!0);case"A":return p(i,a,!1);case"m":return String(a);case"mm":return T.s(a,2,"0");case"s":return String(e.$s);case"ss":return T.s(e.$s,2,"0");case"SSS":return T.s(e.$ms,3,"0");case"Z":return o}return null}(t)||o.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(r,f,d){var p,g=this,m=T.p(f),b=A(r),y=(b.utcOffset()-this.utcOffset())*e,v=this-b,x=function(){return T.m(g,b)};switch(m){case h:p=x()/12;break;case c:p=x();break;case u:p=x()/3;break;case l:p=(v-y)/6048e5;break;case s:p=(v-y)/864e5;break;case a:p=v/n;break;case i:p=v/e;break;case o:p=v/t;break;default:p=v}return d?p:T.a(p)},b.daysInMonth=function(){return this.endOf(c).$D},b.$locale=function(){return x[this.$L]},b.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=M(t,e,!0);return r&&(n.$L=r),n},b.clone=function(){return T.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},m}(),E=_.prototype;return A.prototype=E,[["$ms",r],["$s",o],["$m",i],["$H",a],["$W",s],["$M",c],["$y",h],["$D",f]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),A.extend=function(t,e){return t.$i||(t(e,_,A),t.$i=!0),A},A.locale=M,A.isDayjs=k,A.unix=function(t){return A(1e3*t)},A.en=x[v],A.Ls=x,A.p={},A}();var yi=zo(bi.exports);var vi=function(t){return t},xi=zo(vi);var wi=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},ki="object"==typeof Do&&Do&&Do.Object===Object&&Do,Mi=ki,Ai="object"==typeof self&&self&&self.Object===Object&&self,Ti=Mi||Ai||Function("return this")(),_i=Ti.Symbol,Ei=_i,$i=Object.prototype,Oi=$i.hasOwnProperty,Si=$i.toString,Ni=Ei?Ei.toStringTag:void 0;var Li=function(t){var e=Oi.call(t,Ni),n=t[Ni];try{t[Ni]=void 0;var r=!0}catch(t){}var o=Si.call(t);return r&&(e?t[Ni]=n:delete t[Ni]),o},Ci=Object.prototype.toString;var Di=Li,zi=function(t){return Ci.call(t)},Ri=_i?_i.toStringTag:void 0;var Pi=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ri&&Ri in Object(t)?Di(t):zi(t)};var ji=function(t){return null!=t&&"object"==typeof t},Ii=Pi,Fi=ji;var Ui=function(t){return Fi(t)&&"[object Arguments]"==Ii(t)},Bi=ji,Hi=Object.prototype,Yi=Hi.hasOwnProperty,Wi=Hi.propertyIsEnumerable,qi=Ui(function(){return arguments}())?Ui:function(t){return Bi(t)&&Yi.call(t,"callee")&&!Wi.call(t,"callee")},Gi=qi,Vi=Array.isArray,Xi=zo(Vi),Ki=Gi,Zi=Vi,Ji=_i?_i.isConcatSpreadable:void 0;var Qi=wi,ta=function(t){return Zi(t)||Ki(t)||!!(Ji&&t&&t[Ji])};var ea=function t(e,n,r,o,i){var a=-1,s=e.length;for(r||(r=ta),i||(i=[]);++a<s;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,o,i):Qi(i,l):o||(i[i.length]=l)}return i},na=ea;var ra=zo((function(t){return(null==t?0:t.length)?na(t,1):[]})),oa=Pi,ia=ji;var aa=function(t){return ia(t)&&"[object Date]"==oa(t)};var sa=function(t){return function(e){return t(e)}},la={exports:{}};!function(t,e){var n=ki,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r&&n.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}(la,la.exports);var ca=la.exports,ua=aa,ha=sa,fa=ca&&ca.isDate,da=zo(fa?ha(fa):ua);var pa=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o};var ga=function(){this.__data__=[],this.size=0};var ma=function(t,e){return t===e||t!=t&&e!=e},ba=ma;var ya=function(t,e){for(var n=t.length;n--;)if(ba(t[n][0],e))return n;return-1},va=ya,xa=Array.prototype.splice;var wa=ya;var ka=ya;var Ma=ya;var Aa=ga,Ta=function(t){var e=this.__data__,n=va(e,t);return!(n<0)&&(n==e.length-1?e.pop():xa.call(e,n,1),--this.size,!0)},_a=function(t){var e=this.__data__,n=wa(e,t);return n<0?void 0:e[n][1]},Ea=function(t){return ka(this.__data__,t)>-1},$a=function(t,e){var n=this.__data__,r=Ma(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Oa(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Oa.prototype.clear=Aa,Oa.prototype.delete=Ta,Oa.prototype.get=_a,Oa.prototype.has=Ea,Oa.prototype.set=$a;var Sa=Oa,Na=Sa;var La=function(){this.__data__=new Na,this.size=0};var Ca=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Da=function(t){return this.__data__.get(t)};var za=function(t){return this.__data__.has(t)};var Ra=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Pa=zo(Ra),ja=Pi,Ia=Ra;var Fa,Ua=function(t){if(!Ia(t))return!1;var e=ja(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Ba=Ti["__core-js_shared__"],Ha=(Fa=/[^.]+$/.exec(Ba&&Ba.keys&&Ba.keys.IE_PROTO||""))?"Symbol(src)_1."+Fa:"";var Ya=function(t){return!!Ha&&Ha in t},Wa=Function.prototype.toString;var qa=function(t){if(null!=t){try{return Wa.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Ga=Ua,Va=Ya,Xa=Ra,Ka=qa,Za=/^\[object .+?Constructor\]$/,Ja=Function.prototype,Qa=Object.prototype,ts=Ja.toString,es=Qa.hasOwnProperty,ns=RegExp("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var rs=function(t,e){return null==t?void 0:t[e]},os=function(t){return!(!Xa(t)||Va(t))&&(Ga(t)?ns:Za).test(Ka(t))},is=rs;var as=function(t,e){var n=is(t,e);return os(n)?n:void 0},ss=as(Ti,"Map"),ls=as(Object,"create"),cs=ls;var us=function(){this.__data__=cs?cs(null):{},this.size=0};var hs=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},fs=ls,ds=Object.prototype.hasOwnProperty;var ps=function(t){var e=this.__data__;if(fs){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ds.call(e,t)?e[t]:void 0},gs=ls,ms=Object.prototype.hasOwnProperty;var bs=ls;var ys=us,vs=hs,xs=ps,ws=function(t){var e=this.__data__;return gs?void 0!==e[t]:ms.call(e,t)},ks=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=bs&&void 0===e?"__lodash_hash_undefined__":e,this};function Ms(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ms.prototype.clear=ys,Ms.prototype.delete=vs,Ms.prototype.get=xs,Ms.prototype.has=ws,Ms.prototype.set=ks;var As=Ms,Ts=Sa,_s=ss;var Es=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},$s=Es;var Os=function(t,e){var n=t.__data__;return $s(e)?n["string"==typeof e?"string":"hash"]:n.map},Ss=Os;var Ns=Os;var Ls=Os;var Cs=Os;var Ds=function(){this.size=0,this.__data__={hash:new As,map:new(_s||Ts),string:new As}},zs=function(t){var e=Ss(this,t).delete(t);return this.size-=e?1:0,e},Rs=function(t){return Ns(this,t).get(t)},Ps=function(t){return Ls(this,t).has(t)},js=function(t,e){var n=Cs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Is(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Is.prototype.clear=Ds,Is.prototype.delete=zs,Is.prototype.get=Rs,Is.prototype.has=Ps,Is.prototype.set=js;var Fs=Is,Us=Sa,Bs=ss,Hs=Fs;var Ys=Sa,Ws=La,qs=Ca,Gs=Da,Vs=za,Xs=function(t,e){var n=this.__data__;if(n instanceof Us){var r=n.__data__;if(!Bs||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hs(r)}return n.set(t,e),this.size=n.size,this};function Ks(t){var e=this.__data__=new Ys(t);this.size=e.size}Ks.prototype.clear=Ws,Ks.prototype.delete=qs,Ks.prototype.get=Gs,Ks.prototype.has=Vs,Ks.prototype.set=Xs;var Zs=Ks;var Js=Fs,Qs=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},tl=function(t){return this.__data__.has(t)};function el(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Js;++e<n;)this.add(t[e])}el.prototype.add=el.prototype.push=Qs,el.prototype.has=tl;var nl=el;var rl=function(t,e){return t.has(e)},ol=nl,il=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},al=rl;var sl=function(t,e,n,r,o,i){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=2&n?new ol:void 0;for(i.set(t,e),i.set(e,t);++h<s;){var p=t[h],g=e[h];if(r)var m=a?r(g,p,h,e,t,i):r(p,g,h,t,e,i);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!il(e,(function(t,e){if(!al(d,e)&&(p===t||o(p,t,n,r,i)))return d.push(e)}))){f=!1;break}}else if(p!==g&&!o(p,g,n,r,i)){f=!1;break}}return i.delete(t),i.delete(e),f},ll=Ti.Uint8Array;var cl=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var ul=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},hl=ll,fl=ma,dl=sl,pl=cl,gl=ul,ml=_i?_i.prototype:void 0,bl=ml?ml.valueOf:void 0;var yl=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new hl(t),new hl(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return fl(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=pl;case"[object Set]":var l=1&r;if(s||(s=gl),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var u=dl(s(t),s(e),r,o,i,a);return a.delete(t),u;case"[object Symbol]":if(bl)return bl.call(t)==bl.call(e)}return!1},vl=wi,xl=Vi;var wl=function(t,e,n){var r=e(t);return xl(t)?r:vl(r,n(t))};var kl=function(){return[]},Ml=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i},Al=kl,Tl=Object.prototype.propertyIsEnumerable,_l=Object.getOwnPropertySymbols,El=_l?function(t){return null==t?[]:(t=Object(t),Ml(_l(t),(function(e){return Tl.call(t,e)})))}:Al,$l=El;var Ol=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Sl={exports:{}};var Nl=function(){return!1};!function(t,e){var n=Ti,r=Nl,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;t.exports=s}(Sl,Sl.exports);var Ll=Sl.exports,Cl=/^(?:0|[1-9]\d*)$/;var Dl=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Cl.test(t))&&t>-1&&t%1==0&&t<e};var zl=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Rl=Pi,Pl=zl,jl=ji,Il={};Il["[object Float32Array]"]=Il["[object Float64Array]"]=Il["[object Int8Array]"]=Il["[object Int16Array]"]=Il["[object Int32Array]"]=Il["[object Uint8Array]"]=Il["[object Uint8ClampedArray]"]=Il["[object Uint16Array]"]=Il["[object Uint32Array]"]=!0,Il["[object Arguments]"]=Il["[object Array]"]=Il["[object ArrayBuffer]"]=Il["[object Boolean]"]=Il["[object DataView]"]=Il["[object Date]"]=Il["[object Error]"]=Il["[object Function]"]=Il["[object Map]"]=Il["[object Number]"]=Il["[object Object]"]=Il["[object RegExp]"]=Il["[object Set]"]=Il["[object String]"]=Il["[object WeakMap]"]=!1;var Fl=function(t){return jl(t)&&Pl(t.length)&&!!Il[Rl(t)]},Ul=sa,Bl=ca&&ca.isTypedArray,Hl=Bl?Ul(Bl):Fl,Yl=Ol,Wl=Gi,ql=Vi,Gl=Ll,Vl=Dl,Xl=Hl,Kl=Object.prototype.hasOwnProperty;var Zl=function(t,e){var n=ql(t),r=!n&&Wl(t),o=!n&&!r&&Gl(t),i=!n&&!r&&!o&&Xl(t),a=n||r||o||i,s=a?Yl(t.length,String):[],l=s.length;for(var c in t)!e&&!Kl.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vl(c,l))||s.push(c);return s},Jl=Object.prototype;var Ql=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Jl)};var tc=function(t,e){return function(n){return t(e(n))}},ec=tc(Object.keys,Object),nc=Ql,rc=ec,oc=Object.prototype.hasOwnProperty;var ic=function(t){if(!nc(t))return rc(t);var e=[];for(var n in Object(t))oc.call(t,n)&&"constructor"!=n&&e.push(n);return e},ac=Ua,sc=zl;var lc=function(t){return null!=t&&sc(t.length)&&!ac(t)},cc=Zl,uc=ic,hc=lc;var fc=function(t){return hc(t)?cc(t):uc(t)},dc=wl,pc=$l,gc=fc;var mc=function(t){return dc(t,gc,pc)},bc=mc,yc=Object.prototype.hasOwnProperty;var vc=function(t,e,n,r,o,i){var a=1&n,s=bc(t),l=s.length;if(l!=bc(e).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in e:yc.call(e,u)))return!1}var h=i.get(t),f=i.get(e);if(h&&f)return h==e&&f==t;var d=!0;i.set(t,e),i.set(e,t);for(var p=a;++c<l;){var g=t[u=s[c]],m=e[u];if(r)var b=a?r(m,g,u,e,t,i):r(g,m,u,t,e,i);if(!(void 0===b?g===m||o(g,m,n,r,i):b)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var y=t.constructor,v=e.constructor;y==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return i.delete(t),i.delete(e),d},xc=as(Ti,"DataView"),wc=as(Ti,"Promise"),kc=as(Ti,"Set"),Mc=xc,Ac=ss,Tc=wc,_c=kc,Ec=as(Ti,"WeakMap"),$c=Pi,Oc=qa,Sc="[object Map]",Nc="[object Promise]",Lc="[object Set]",Cc="[object WeakMap]",Dc="[object DataView]",zc=Oc(Mc),Rc=Oc(Ac),Pc=Oc(Tc),jc=Oc(_c),Ic=Oc(Ec),Fc=$c;(Mc&&Fc(new Mc(new ArrayBuffer(1)))!=Dc||Ac&&Fc(new Ac)!=Sc||Tc&&Fc(Tc.resolve())!=Nc||_c&&Fc(new _c)!=Lc||Ec&&Fc(new Ec)!=Cc)&&(Fc=function(t){var e=$c(t),n="[object Object]"==e?t.constructor:void 0,r=n?Oc(n):"";if(r)switch(r){case zc:return Dc;case Rc:return Sc;case Pc:return Nc;case jc:return Lc;case Ic:return Cc}return e});var Uc=Fc,Bc=Zs,Hc=sl,Yc=yl,Wc=vc,qc=Uc,Gc=Vi,Vc=Ll,Xc=Hl,Kc="[object Arguments]",Zc="[object Array]",Jc="[object Object]",Qc=Object.prototype.hasOwnProperty;var tu=function(t,e,n,r,o,i){var a=Gc(t),s=Gc(e),l=a?Zc:qc(t),c=s?Zc:qc(e),u=(l=l==Kc?Jc:l)==Jc,h=(c=c==Kc?Jc:c)==Jc,f=l==c;if(f&&Vc(t)){if(!Vc(e))return!1;a=!0,u=!1}if(f&&!u)return i||(i=new Bc),a||Xc(t)?Hc(t,e,n,r,o,i):Yc(t,e,l,n,r,o,i);if(!(1&n)){var d=u&&Qc.call(t,"__wrapped__"),p=h&&Qc.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return i||(i=new Bc),o(g,m,n,r,i)}}return!!f&&(i||(i=new Bc),Wc(t,e,n,r,o,i))},eu=tu,nu=ji;var ru=function t(e,n,r,o,i){return e===n||(null==e||null==n||!nu(e)&&!nu(n)?e!=e&&n!=n:eu(e,n,r,o,t,i))},ou=Zs,iu=ru;var au=function(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var s=n[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var l=(s=n[o])[0],c=t[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in t))return!1}else{var h=new ou;if(r)var f=r(c,u,l,t,e,h);if(!(void 0===f?iu(u,c,3,r,h):f))return!1}}return!0},su=Ra;var lu=function(t){return t==t&&!su(t)},cu=lu,uu=fc;var hu=function(t){for(var e=uu(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,cu(o)]}return e};var fu=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}},du=au,pu=hu,gu=fu;var mu=function(t){var e=pu(t);return 1==e.length&&e[0][2]?gu(e[0][0],e[0][1]):function(n){return n===t||du(n,t,e)}},bu=Pi,yu=ji;var vu=function(t){return"symbol"==typeof t||yu(t)&&"[object Symbol]"==bu(t)},xu=zo(vu),wu=Vi,ku=vu,Mu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Au=/^\w*$/;var Tu=function(t,e){if(wu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ku(t))||(Au.test(t)||!Mu.test(t)||null!=e&&t in Object(e))},_u=Fs;function Eu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Eu.Cache||_u),n}Eu.Cache=_u;var $u=Eu;var Ou=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Su=/\\(\\)?/g,Nu=function(t){var e=$u(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ou,(function(t,n,r,o){e.push(r?o.replace(Su,"$1"):n||t)})),e})),Lu=Nu,Cu=pa,Du=Vi,zu=vu,Ru=_i?_i.prototype:void 0,Pu=Ru?Ru.toString:void 0;var ju=function t(e){if("string"==typeof e)return e;if(Du(e))return Cu(e,t)+"";if(zu(e))return Pu?Pu.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n},Iu=ju;var Fu=function(t){return null==t?"":Iu(t)},Uu=Vi,Bu=Tu,Hu=Lu,Yu=Fu;var Wu=function(t,e){return Uu(t)?t:Bu(t,e)?[t]:Hu(Yu(t))},qu=vu;var Gu=function(t){if("string"==typeof t||qu(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},Vu=Wu,Xu=Gu;var Ku=function(t,e){for(var n=0,r=(e=Vu(e,t)).length;null!=t&&n<r;)t=t[Xu(e[n++])];return n&&n==r?t:void 0},Zu=Ku;var Ju=function(t,e,n){var r=null==t?void 0:Zu(t,e);return void 0===r?n:r};var Qu=function(t,e){return null!=t&&e in Object(t)},th=Wu,eh=Gi,nh=Vi,rh=Dl,oh=zl,ih=Gu;var ah=function(t,e,n){for(var r=-1,o=(e=th(e,t)).length,i=!1;++r<o;){var a=ih(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&oh(o)&&rh(a,o)&&(nh(t)||eh(t))},sh=Qu,lh=ah;var ch=function(t,e){return null!=t&&lh(t,e,sh)},uh=ru,hh=Ju,fh=ch,dh=Tu,ph=lu,gh=fu,mh=Gu;var bh=function(t,e){return dh(t)&&ph(e)?gh(mh(t),e):function(n){var r=hh(n,t);return void 0===r&&r===e?fh(n,t):uh(e,r,3)}};var yh=function(t){return function(e){return null==e?void 0:e[t]}},vh=Ku;var xh=function(t){return function(e){return vh(e,t)}},wh=yh,kh=xh,Mh=Tu,Ah=Gu;var Th=mu,_h=bh,Eh=vi,$h=Vi,Oh=function(t){return Mh(t)?wh(Ah(t)):kh(t)};var Sh=function(t){return"function"==typeof t?t:null==t?Eh:"object"==typeof t?$h(t)?_h(t[0],t[1]):Th(t):Oh(t)};var Nh=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===n(i[l],l,i))break}return e}},Lh=Nh(),Ch=fc;var Dh=function(t,e){return t&&Lh(t,e,Ch)},zh=lc;var Rh=function(t,e){return function(n,r){if(null==n)return n;if(!zh(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}(Dh),Ph=lc;var jh=pa,Ih=Sh,Fh=function(t,e){var n=-1,r=Ph(t)?Array(t.length):[];return Rh(t,(function(t,o,i){r[++n]=e(t,o,i)})),r},Uh=Vi;var Bh=zo((function(t,e){return(Uh(t)?jh:Fh)(t,Ih(e))}));var Hh=zo((function(t){return null==t}));function Yh(t,e){const n=ye(t.colors.background).l,r=n>50,o=ye(e);return o.l=r?Math.min(n-35,o.l):Math.max(n+50,o.l),o+""}function Wh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return t;const r=Array.isArray(e)?e:e.split(".");let o=t;for(let t=0;t<r.length&&null!=o;t++)o=o[r[t]];return null==o?n:o}function qh(t,e,n){const r=Wh(e,t);return r?n.reduce(((t,e)=>(r.accepts.includes(e.type())&&t.push(e),t)),[]):[]}function Gh(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value";t.style("left",(t=>e(Math[n?"max":"min"](0,t[r]))+"%")).style("right",(t=>100-e(Math[n?"min":"max"](0,t[r]))+"%"))}function Vh(t,e,n,r){t.selectAll("div.bc-bar-inner").style("left",(t=>n(t.value)+"%")),t.selectAll("div.bc-"+e.replace("-plot","")).each((function(t){const e=n(t._v1),r=n(t._v2);t._min=Math.min(e,r)+"%",t._max=100-Math.max(e,r)+"%"})).style(r?"right":"left",ii(r?"_max":"_min")).style(r?"left":"right",ii(r?"_min":"_max"))}function Xh(t){t.selectAll("div.bc-lbl-left").style("right",(t=>100-parseFloat(t._min)+"%")),t.selectAll("div.bc-lbl-right").style("left",(t=>100-parseFloat(t._max)+"%"))}function Kh(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"value";const i="bars-stacked"===e?".bc-bar-total.after":".bc-bar-label.value";t.selectAll("div".concat(i)).classed(r?"right":"left",(t=>t[o]<0)).classed(r?"left":"right",(t=>t[o]>=0)).style("position","absolute").style("text-align",(t=>t[o]>=0?r?"right":"left":r?"left":"right")).style("left",(function(t){const{width:e}=n.getElementBounds(this);return(r?t[o]<0:t[o]>=0)?"100%":-e+"px"}))}function Zh(t,e,n){t.style("left",(t=>e(t[t.value>0?"offsetPos":"offsetNeg"]+(t.value<0?n?0:t.value:n?t.value:0))+"%")).style("right",(t=>100-e(t[t.value>0?"offsetPos":"offsetNeg"]+(t.value<0?n?t.value:0:n?0:t.value))+"%"))}const Jh="--zero-baseline--";function Qh(t,e){const n=Wh(e,"colors.palette",[]);let r=(o=t.color,"number"==typeof o?n[o%n.length]:o).toLowerCase();var o;return r="rgba(".concat(Gt(r).r,",").concat(Gt(r).g,",").concat(Gt(r).b,", ").concat(Number(t.opacity),")"),r}const tf={horizontal:90,vertical:0,"diagonal-up":135,"diagonal-down":45};function ef(t){let{$bars:e,rangeOverlays:n,valueOverlays:r,barScale:o,barThickness:i,vis:a,rtl:s}=t;const l=a.theme(),c=a.colorMap();function u(t,e,n,r){const o=r.map(((e,r)=>t[r?"to":"from"]===Jh?0:n[e.name()])),i={type:"value"===e?"value":"solid"===t.pattern?"htmlRange":"svgRange",color:Qh(t,a.theme())};return"value"===e?{...i,value:o[0]}:{...i,fromValue:o[0],toValue:o[1]}}n.forEach(((t,n)=>{let r,o;if(t.from!==Jh){if(!a.dataset.hasColumn(t.from))return;if(r=a.dataset.column(t.from),"number"!==r.type())return}if(t.to!==Jh){if(!a.dataset.hasColumn(t.to))return;if(o=a.dataset.column(t.to),"number"!==o.type())return}if("solid"===t.pattern)e.selectAll("div.bc-bar-bg").filter((function(e){const n=t.from===Jh?0:e[r.name()],i=t.to===Jh?0:e[o.name()];return"number"==typeof n&&"number"==typeof i})).append("div.bc-bar-inner.dw-rect.bc-bar-overlay").datum((e=>u(t,"range",e,[r,o]))).style("background",(t=>c(t.color)));else{const a=e.selectAll("div.bc-bar-bg").filter((function(e){const n=t.from===Jh?0:e[r.name()],i=t.to===Jh?0:e[o.name()];return"number"==typeof n&&"number"==typeof i})).append("svg.bc-bar-inner.bc-bar-overlay").datum((e=>u(t,"range",e,[r,o])));!function(t){let{defs:e,id:n,stroke:r="black",strokeWidth:o=1,lineGap:i=10,patternType:a="horizontal",rotation:s=0,scale:l=1,flipV:c=!1}=t;const u=(i+o)*l;let h=tf[a]||0;c&&(h=180-h),e.append("pattern").attr("id",n).attr("patternTransform","rotate(".concat(h-s," 0 0)")).attr("patternUnits","userSpaceOnUse").attr("height",u).attr("width",u).append("line").attr("x1",u/2).attr("y1",0).attr("x2",u/2).attr("y2",u).attr("stroke",r).attr("stroke-width",o*l)}({defs:a.append("defs"),id:"fill-pattern-".concat(n),stroke:c(a.datum().color),strokeWidth:Wh(l,"vis.d3-bars.pattern.stroke-width",2),lineGap:Wh(l,"vis.d3-bars.pattern.line-gap",2),patternType:t.pattern,rotation:0,scale:1,flipV:!0}),a.append("rect").attr("width","100%").attr("height",i).attr("fill","url(#fill-pattern-".concat(n,")"))}})),r.forEach((t=>{let n;if(t.from!==Jh){if(!a.dataset.hasColumn(t.from))return;if(n=a.dataset.column(t.from),"number"!==n.type())return}e.selectAll("div.bc-bar-bg").filter((function(e){return"number"==typeof(t.from===Jh?0:e[n.name()])})).append("div.bc-bar-inner.dw-rect.bc-bar-overlay").datum((e=>u(t,"value",e,[n]))).style("width","2px").style("top","-1px").style("height","calc(100% + 2px)").style("background",c(Qh(t,a.theme())))})),nf(e.selectAll(".bc-bar-overlay"),o,s)}function nf(t,e,n){const r=(t,r)=>e(Math[n?"max":"min"](t,r)),o=(t,r)=>e(Math[n?"min":"max"](t,r));t.filter((t=>"value"===t.type)).style("left",(t=>"calc(".concat(e(t.value)+"%"," - ").concat(100===e(t.value)?"2px":"1px",")"))),t.filter((t=>"htmlRange"===t.type)).style("left",(t=>"".concat(r(t.fromValue,t.toValue),"%"))).style("right",(t=>"".concat(100-o(t.fromValue,t.toValue),"%"))),t.filter((t=>"svgRange"===t.type)).style("left",(t=>"".concat(r(t.fromValue,t.toValue),"%"))).style("width",(t=>"".concat(o(t.fromValue,t.toValue)-r(t.fromValue,t.toValue),"%")))}function rf(t){let{$chart:e,mode:n,barSpace:r,barScale:o,directLabels:i,chart:a,rtl:s,isValidValue:l}=t;const c="range-plot"===n||"arrow-plot"===n,u="bars"===n||"bars-grouped"===n,h="bars-stacked"===n;let f=0;if(c&&(r-=10),!(r<=0)&&(function t(){const[d,p]=function(){let t=0,f=0;const d=s?"right":"left";return e.selectAll(c||"bars"===n||h?".bc-row":".bc-bar-inner").each((function(e){const n=at(this);if(c){if(!l(e._v1)&&!l(e._v2))return;const[c,u]=["left","right"].map((t=>{const e=t+(t===d&&i?"-direct":"");return of(n,".bc-lbl-".concat(t),e,a)})),[h,p]=gt([e._v1,e._v2]),g=r*o(s?p:h)/100-c,m=r*o(s?h:p)/100+u;t=Math.min(t,g),f=Math.max(m-r,f)}if(u||h){const i=h?e.__stackTotalValue:e.value;if(!l(i))return;const c=".bc-bar-".concat(h?"total":"label"),u=of(n,c,"value",a),d=o(i)*r/100;s&&i>=0||!s&&i<0?t=Math.min(t,d-u):f=Math.max(f,d+u-r)}})),s?[f,-1*t]:[-1*t,f]}();if(Mt([d,p])>1){const e=o.range(),n=[e[0]+100*d/r*(s?-1:1),e[1]+100*p/r*(s?1:-1)];if(n[s?1:0]>n[s?0:1])return;o.range(n),f++<20&&t(),f=0}}(),u&&(Gh(e.selectAll(".bc-bar-inner:not(.bc-overlay)"),o,s),nf(e.selectAll(".bc-bar-overlay"),o,s)),h&&(Gh(e.selectAll("div.bc-stack-total-outer"),o,s,"__stackTotalValue"),Zh(e.selectAll(".bc-bar-inner"),o,s)),c)){const t=e.selectAll(".bc-row");Vh(t,n,o,s),Xh(t)}}function of(t,e,n,r){if(t.datum()["_".concat(n,"-w")])return t.datum()["_".concat(n,"-w")];const o=t.select(e).node();return t.datum()["_".concat(n,"-w")]=o?r.getElementBounds(o).width:0,t.datum()["_".concat(n,"-w")]}function af(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,o;if(void 0===e||isNaN(e)||null===e)return"";let i=n.format||"0.[00]";const a=n.multiply||1,s=n.prepend||"",l=n.append||"",c=null!==(r=n.minusChar)&&void 0!==r?r:"−",u=null!==(o=n.plusMinusChar)&&void 0!==o?o:"±";i.includes("%")&&Number.isFinite(e)&&(e*=.01),e*=a;const h=i.indexOf("(")>-1,f=i.indexOf(";")>-1;i=i.replace(/;/g,",");let d=t(h?e:Math.abs(e)).format(i);if(f){const n=t.options.currentLocale,r=t.locales[n].delimiters.thousands,o=i.includes("%")?e/.01:e;d=Math.abs(o)<1e4?d.replace(r,""):d}return s&&!h&&e<0&&sf.has(s.trim().toLowerCase())?"".concat(c).concat(s).concat(d.replace("+","")).concat(l):s&&e>=0&&sf.has(s.trim().toLowerCase())&&i.includes("+")?"".concat(0===e?u:"+").concat(s).concat(d.replace("+","")).concat(l):0===e&&i.includes("+")?"".concat(s).concat(d.replace("+",u)).concat(l):e<0&&!h?"".concat(s).concat(c).concat(d.replace("+","")).concat(l):"".concat(s).concat(d).concat(l)}const sf=new Set(["฿","₿","¢","$","€","eur","£","gbp","¥","yen","usd","cad","us$","ca$","can$"]),lf=/\.(0*)\[(0+)\]\s*$/,cf=/[\d\]]$/;function uf(t,e){if(!e)throw new Error("No format specified");const n=t.trim(),r=e.trim();if(!1===cf.test(r))return n;const o=function(t,e){const n=e.match(lf);if(!n)return 0;const r=n[2].length;let o=0;for(let e=0;e<r;e++)"0"===t.charAt(t.length-1-e)&&(o+=1);return""===n[1]&&o===r&&(o+=1),o}(n,r);if(0===o)return n;const i=n.slice(0,n.length-o),a=n.slice(-o);return"".concat(i,'<span class="decimals" aria-hidden="true">').concat(a,"</span>")}function hf(t,e,n){if(!n)return xi;const r=t.chart().get("metadata.data.column-format",{})[n.name()]||{},o=Wh(t.theme(),"vis.base.format.minusCharacter","−"),i=Wh(t.theme(),"vis.base.format.plusMinusCharacter","±"),a=Math.pow(10,-r["number-divisor"]||0),{numeral:s}=t.libraries(),l="number"===n.type()?function(n,l,c,u){let h=t.get(e,"1,000.[00]");const f=h;l&&c&&(h=h.replace("$","").replace("%",""));const d=l?"":r["number-prepend"]||"",p=l?"":r["number-append"]||"";u&&(h=function(t){const e=t.trim();if(lf.test(e))return e.replace(lf,".$1$2");return e}(h));const g=af(s,Number.isFinite(n)?n:NaN,{format:h,minusChar:o,plusMinusChar:i,multiply:a,prepend:d,append:p});return u?uf(g,f):g}:"date"===n.type()?function(n,r,o){let i=t.get(e)||"YYYY";if(i.includes("~~")){const[t,e]=i.split("~~");i=r?t:e}if(i.includes("|")){const[t,e]=i.split("|");i=o?e:t}return yi(n).format(i)}:xi;return function(t,e,r,o){return"date"===n.type()?da(t)?l(t,e,r):t:l(t,e,r,o)}}var ff=as,df=function(){try{var t=ff(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var pf=function(t,e,n){"__proto__"==e&&df?df(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},gf=pf,mf=ma,bf=Object.prototype.hasOwnProperty;var yf=function(t,e,n){var r=t[e];bf.call(t,e)&&mf(r,n)&&(void 0!==n||e in t)||gf(t,e,n)},vf=yf,xf=Wu,wf=Dl,kf=Ra,Mf=Gu;var Af=function(t,e,n,r){if(!kf(t))return t;for(var o=-1,i=(e=xf(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var l=Mf(e[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=kf(u)?u:wf(e[o+1])?[]:{})}vf(s,l,c),s=s[l]}return t},Tf=Af;var _f=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Tf(t,e,n,r)},Ef=zo(_f);const $f=t=>Array.isArray(t);function Of(t,e,n){if(!($f(e)?[...e]:e.split(".")).length)throw new Error("Key should not be empty");Ef(t,e,n,(t=>Pa(t)?t:{}))}const Sf=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Nf=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;var Lf=t=>{if(t.match(Sf)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(Nf)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return[e>>24&255,e>>16&255,e>>8&255,Math.round((255&e)/255*100)/100]}throw new Error("unknown hex color: ".concat(t))},Cf=zo(Lf),Df=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?e:t>n?n:t};const zf=Df;const Rf={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])Rf["[object ".concat(t,"]")]=t.toLowerCase();var Pf=function(t){return Rf[Object.prototype.toString.call(t)]||"object"};const jf=Pf;const If=Pf;const Ff=Math.PI;var Uf={clip_rgb:t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=zf(t[e],0,255)):3===e&&(t[e]=zf(t[e],0,1));return t},limit:Df,type:Pf,unpack:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.length>=3?Array.prototype.slice.call(t):"object"==jf(t[0])&&e?e.split("").filter((e=>void 0!==t[0][e])).map((e=>t[0][e])):t[0]},last:t=>{if(t.length<2)return null;const e=t.length-1;return"string"==If(t[e])?t[e].toLowerCase():null},PI:Ff,TWOPI:2*Ff,PITHIRD:Ff/3,DEG2RAD:Ff/180,RAD2DEG:180/Ff};const Bf={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},{unpack:Hf}=Uf,{pow:Yf}=Math,Wf=t=>(t/=255)<=.04045?t/12.92:Yf((t+.055)/1.055,2.4),qf=t=>t>Bf.t3?Yf(t,1/3):t/Bf.t2+Bf.t0,Gf=(t,e,n)=>{t=Wf(t),e=Wf(e),n=Wf(n);return[qf((.4124564*t+.3575761*e+.1804375*n)/Bf.Xn),qf((.2126729*t+.7151522*e+.072175*n)/Bf.Yn),qf((.0193339*t+.119192*e+.9503041*n)/Bf.Zn)]};var Vf=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[r,o,i]=Hf(e,"rgb"),[a,s,l]=Gf(r,o,i),c=116*s-16;return[c<0?0:c,500*(a-s),200*(s-l)]},Xf=zo(Vf);function Kf(t){return Xf(Cf(t))[0]}var Zf={exports:{}};
/**
   * chroma.js - JavaScript library for color conversions
   *
   * Copyright (c) 2011-2019, Gregor Aisch
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * 1. Redistributions of source code must retain the above copyright notice, this
   * list of conditions and the following disclaimer.
   *
   * 2. Redistributions in binary form must reproduce the above copyright notice,
   * this list of conditions and the following disclaimer in the documentation
   * and/or other materials provided with the distribution.
   *
   * 3. The name Gregor Aisch may not be used to endorse or promote products
   * derived from this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
   * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   *
   * -------------------------------------------------------
   *
   * chroma.js includes colors from colorbrewer2.org, which are released under
   * the following license:
   *
   * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
   * and The Pennsylvania State University.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing,
   * software distributed under the License is distributed on an
   * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   * either express or implied. See the License for the specific
   * language governing permissions and limitations under the License.
   *
   * ------------------------------------------------------
   *
   * Named colors are taken from X11 Color Names.
   * http://www.w3.org/TR/css3-color/#svg-color
   *
   * @preserve
   */!function(t,e){t.exports=function(){for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e=t,n=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},r={},o=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<i.length;o+=1){var a=i[o];r["[object "+a+"]"]=a.toLowerCase()}var s=function(t){return r[Object.prototype.toString.call(t)]||"object"},l=s,c=function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==l(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},u=s,h=function(t){if(t.length<2)return null;var e=t.length-1;return"string"==u(t[e])?t[e].toLowerCase():null},f=Math.PI,d={clip_rgb:n,limit:t,type:s,unpack:c,last:h,PI:f,TWOPI:2*f,PITHIRD:f/3,DEG2RAD:f/180,RAD2DEG:180/f},p={format:{},autodetect:[]},g=d.last,m=d.clip_rgb,b=d.type,y=p,v=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===b(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=g(t),o=!1;if(!r){o=!0,y.sorted||(y.autodetect=y.autodetect.sort((function(t,e){return e.p-t.p})),y.sorted=!0);for(var i=0,a=y.autodetect;i<a.length;i+=1){var s=a[i];if(r=s.test.apply(s,t))break}}if(!y.format[r])throw new Error("unknown format: "+t);var l=y.format[r].apply(null,o?t:t.slice(0,-1));n._rgb=m(l),3===n._rgb.length&&n._rgb.push(1)};v.prototype.toString=function(){return"function"==b(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var x=v,w=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(w.Color,[null].concat(t)))};w.Color=x,w.version="2.4.2";var k=w,M=d.unpack,A=Math.max,T=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=M(t,"rgb"),r=n[0],o=n[1],i=n[2],a=1-A(r/=255,A(o/=255,i/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-o-a)*s,(1-i-a)*s,a]},_=T,E=d.unpack,$=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=E(t,"cmyk"))[0],r=t[1],o=t[2],i=t[3],a=t.length>4?t[4]:1;return 1===i?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),o>=1?0:255*(1-o)*(1-i),a]},O=$,S=k,N=x,L=p,C=d.unpack,D=d.type,z=_;N.prototype.cmyk=function(){return z(this._rgb)},S.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(N,[null].concat(t,["cmyk"])))},L.format.cmyk=O,L.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=C(t,"cmyk"),"array"===D(t)&&4===t.length)return"cmyk"}});var R=d.unpack,P=d.last,j=function(t){return Math.round(100*t)/100},I=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=R(t,"hsla"),r=P(t)||"lsa";return n[0]=j(n[0]||0),n[1]=j(100*n[1])+"%",n[2]=j(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},F=I,U=d.unpack,B=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=U(t,"rgba"))[0],r=t[1],o=t[2];n/=255,r/=255,o/=255;var i,a,s=Math.min(n,r,o),l=Math.max(n,r,o),c=(l+s)/2;return l===s?(i=0,a=Number.NaN):i=c<.5?(l-s)/(l+s):(l-s)/(2-l-s),n==l?a=(r-o)/(l-s):r==l?a=2+(o-n)/(l-s):o==l&&(a=4+(n-r)/(l-s)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,i,c,t[3]]:[a,i,c]},H=B,Y=d.unpack,W=d.last,q=F,G=H,V=Math.round,X=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Y(t,"rgba"),r=W(t)||"rgb";return"hsl"==r.substr(0,3)?q(G(n),r):(n[0]=V(n[0]),n[1]=V(n[1]),n[2]=V(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},K=X,Z=d.unpack,J=Math.round,Q=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,o,i,a=(e=Z(e,"hsl"))[0],s=e[1],l=e[2];if(0===s)r=o=i=255*l;else{var c=[0,0,0],u=[0,0,0],h=l<.5?l*(1+s):l+s-l*s,f=2*l-h,d=a/360;c[0]=d+1/3,c[1]=d,c[2]=d-1/3;for(var p=0;p<3;p++)c[p]<0&&(c[p]+=1),c[p]>1&&(c[p]-=1),6*c[p]<1?u[p]=f+6*(h-f)*c[p]:2*c[p]<1?u[p]=h:3*c[p]<2?u[p]=f+(h-f)*(2/3-c[p])*6:u[p]=f;r=(t=[J(255*u[0]),J(255*u[1]),J(255*u[2])])[0],o=t[1],i=t[2]}return e.length>3?[r,o,i,e[3]]:[r,o,i,1]},tt=Q,et=tt,nt=p,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ot=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,at=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,st=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,lt=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ct=Math.round,ut=function(t){var e;if(t=t.toLowerCase().trim(),nt.format.named)try{return nt.format.named(t)}catch(t){}if(e=t.match(rt)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(ot)){for(var o=e.slice(1,5),i=0;i<4;i++)o[i]=+o[i];return o}if(e=t.match(it)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=ct(2.55*a[s]);return a[3]=1,a}if(e=t.match(at)){for(var l=e.slice(1,5),c=0;c<3;c++)l[c]=ct(2.55*l[c]);return l[3]=+l[3],l}if(e=t.match(st)){var u=e.slice(1,4);u[1]*=.01,u[2]*=.01;var h=et(u);return h[3]=1,h}if(e=t.match(lt)){var f=e.slice(1,4);f[1]*=.01,f[2]*=.01;var d=et(f);return d[3]=+e[4],d}};ut.test=function(t){return rt.test(t)||ot.test(t)||it.test(t)||at.test(t)||st.test(t)||lt.test(t)};var ht=ut,ft=k,dt=x,pt=p,gt=d.type,mt=K,bt=ht;dt.prototype.css=function(t){return mt(this._rgb,t)},ft.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(dt,[null].concat(t,["css"])))},pt.format.css=bt,pt.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===gt(t)&&bt.test(t))return"css"}});var yt=x,vt=k,xt=p,wt=d.unpack;xt.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=wt(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},vt.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(yt,[null].concat(t,["gl"])))},yt.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var kt=d.unpack,Mt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=kt(t,"rgb"),o=r[0],i=r[1],a=r[2],s=Math.min(o,i,a),l=Math.max(o,i,a),c=l-s,u=100*c/255,h=s/(255-c)*100;return 0===c?n=Number.NaN:(o===l&&(n=(i-a)/c),i===l&&(n=2+(a-o)/c),a===l&&(n=4+(o-i)/c),(n*=60)<0&&(n+=360)),[n,u,h]},At=Mt,Tt=d.unpack,_t=Math.floor,Et=function(){for(var t,e,n,r,o,i,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=Tt(a,"hcg"))[0],f=a[1],d=a[2];d*=255;var p=255*f;if(0===f)l=c=u=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var g=_t(h/=60),m=h-g,b=d*(1-f),y=b+p*(1-m),v=b+p*m,x=b+p;switch(g){case 0:l=(t=[x,v,b])[0],c=t[1],u=t[2];break;case 1:l=(e=[y,x,b])[0],c=e[1],u=e[2];break;case 2:l=(n=[b,x,v])[0],c=n[1],u=n[2];break;case 3:l=(r=[b,y,x])[0],c=r[1],u=r[2];break;case 4:l=(o=[v,b,x])[0],c=o[1],u=o[2];break;case 5:l=(i=[x,b,y])[0],c=i[1],u=i[2]}}return[l,c,u,a.length>3?a[3]:1]},$t=Et,Ot=d.unpack,St=d.type,Nt=k,Lt=x,Ct=p,Dt=At;Lt.prototype.hcg=function(){return Dt(this._rgb)},Nt.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Lt,[null].concat(t,["hcg"])))},Ct.format.hcg=$t,Ct.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ot(t,"hcg"),"array"===St(t)&&3===t.length)return"hcg"}});var zt=d.unpack,Rt=d.last,Pt=Math.round,jt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=zt(t,"rgba"),r=n[0],o=n[1],i=n[2],a=n[3],s=Rt(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var l="000000"+((r=Pt(r))<<16|(o=Pt(o))<<8|(i=Pt(i))).toString(16);l=l.substr(l.length-6);var c="0"+Pt(255*a).toString(16);switch(c=c.substr(c.length-2),s.toLowerCase()){case"rgba":return"#"+l+c;case"argb":return"#"+c+l;default:return"#"+l}},It=jt,Ft=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ut=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Bt=function(t){if(t.match(Ft)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(Ut)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},Ht=Bt,Yt=k,Wt=x,qt=d.type,Gt=p,Vt=It;Wt.prototype.hex=function(t){return Vt(this._rgb,t)},Yt.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Wt,[null].concat(t,["hex"])))},Gt.format.hex=Ht,Gt.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===qt(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var Xt=d.unpack,Kt=d.TWOPI,Zt=Math.min,Jt=Math.sqrt,Qt=Math.acos,te=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=Xt(t,"rgb"),o=r[0],i=r[1],a=r[2],s=Zt(o/=255,i/=255,a/=255),l=(o+i+a)/3,c=l>0?1-s/l:0;return 0===c?n=NaN:(n=(o-i+(o-a))/2,n/=Jt((o-i)*(o-i)+(o-a)*(i-a)),n=Qt(n),a>i&&(n=Kt-n),n/=Kt),[360*n,c,l]},ee=te,ne=d.unpack,re=d.limit,oe=d.TWOPI,ie=d.PITHIRD,ae=Math.cos,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=ne(t,"hsi"))[0],a=t[1],s=t[2];return isNaN(i)&&(i=0),isNaN(a)&&(a=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?r=1-((o=(1-a)/3)+(n=(1+a*ae(oe*i)/ae(ie-oe*i))/3)):i<2/3?o=1-((n=(1-a)/3)+(r=(1+a*ae(oe*(i-=1/3))/ae(ie-oe*i))/3)):n=1-((r=(1-a)/3)+(o=(1+a*ae(oe*(i-=2/3))/ae(ie-oe*i))/3)),[255*(n=re(s*n*3)),255*(r=re(s*r*3)),255*(o=re(s*o*3)),t.length>3?t[3]:1]},le=se,ce=d.unpack,ue=d.type,he=k,fe=x,de=p,pe=ee;fe.prototype.hsi=function(){return pe(this._rgb)},he.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(fe,[null].concat(t,["hsi"])))},de.format.hsi=le,de.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ce(t,"hsi"),"array"===ue(t)&&3===t.length)return"hsi"}});var ge=d.unpack,me=d.type,be=k,ye=x,ve=p,xe=H;ye.prototype.hsl=function(){return xe(this._rgb)},be.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ye,[null].concat(t,["hsl"])))},ve.format.hsl=tt,ve.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ge(t,"hsl"),"array"===me(t)&&3===t.length)return"hsl"}});var we=d.unpack,ke=Math.min,Me=Math.max,Ae=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=we(t,"rgb"))[0],a=t[1],s=t[2],l=ke(i,a,s),c=Me(i,a,s),u=c-l;return o=c/255,0===c?(n=Number.NaN,r=0):(r=u/c,i===c&&(n=(a-s)/u),a===c&&(n=2+(s-i)/u),s===c&&(n=4+(i-a)/u),(n*=60)<0&&(n+=360)),[n,r,o]},Te=Ae,_e=d.unpack,Ee=Math.floor,$e=function(){for(var t,e,n,r,o,i,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=_e(a,"hsv"))[0],f=a[1],d=a[2];if(d*=255,0===f)l=c=u=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var p=Ee(h/=60),g=h-p,m=d*(1-f),b=d*(1-f*g),y=d*(1-f*(1-g));switch(p){case 0:l=(t=[d,y,m])[0],c=t[1],u=t[2];break;case 1:l=(e=[b,d,m])[0],c=e[1],u=e[2];break;case 2:l=(n=[m,d,y])[0],c=n[1],u=n[2];break;case 3:l=(r=[m,b,d])[0],c=r[1],u=r[2];break;case 4:l=(o=[y,m,d])[0],c=o[1],u=o[2];break;case 5:l=(i=[d,m,b])[0],c=i[1],u=i[2]}}return[l,c,u,a.length>3?a[3]:1]},Oe=$e,Se=d.unpack,Ne=d.type,Le=k,Ce=x,De=p,ze=Te;Ce.prototype.hsv=function(){return ze(this._rgb)},Le.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ce,[null].concat(t,["hsv"])))},De.format.hsv=Oe,De.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Se(t,"hsv"),"array"===Ne(t)&&3===t.length)return"hsv"}});var Re={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Pe=Re,je=d.unpack,Ie=Math.pow,Fe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=je(t,"rgb"),r=n[0],o=n[1],i=n[2],a=He(r,o,i),s=a[0],l=a[1],c=116*l-16;return[c<0?0:c,500*(s-l),200*(l-a[2])]},Ue=function(t){return(t/=255)<=.04045?t/12.92:Ie((t+.055)/1.055,2.4)},Be=function(t){return t>Pe.t3?Ie(t,1/3):t/Pe.t2+Pe.t0},He=function(t,e,n){return t=Ue(t),e=Ue(e),n=Ue(n),[Be((.4124564*t+.3575761*e+.1804375*n)/Pe.Xn),Be((.2126729*t+.7151522*e+.072175*n)/Pe.Yn),Be((.0193339*t+.119192*e+.9503041*n)/Pe.Zn)]},Ye=Fe,We=Re,qe=d.unpack,Ge=Math.pow,Ve=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=qe(t,"lab"))[0],a=t[1],s=t[2];return r=(i+16)/116,n=isNaN(a)?r:r+a/500,o=isNaN(s)?r:r-s/200,r=We.Yn*Ke(r),n=We.Xn*Ke(n),o=We.Zn*Ke(o),[Xe(3.2404542*n-1.5371385*r-.4985314*o),Xe(-.969266*n+1.8760108*r+.041556*o),Xe(.0556434*n-.2040259*r+1.0572252*o),t.length>3?t[3]:1]},Xe=function(t){return 255*(t<=.00304?12.92*t:1.055*Ge(t,1/2.4)-.055)},Ke=function(t){return t>We.t1?t*t*t:We.t2*(t-We.t0)},Ze=Ve,Je=d.unpack,Qe=d.type,tn=k,en=x,nn=p,rn=Ye;en.prototype.lab=function(){return rn(this._rgb)},tn.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(en,[null].concat(t,["lab"])))},nn.format.lab=Ze,nn.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Je(t,"lab"),"array"===Qe(t)&&3===t.length)return"lab"}});var on=d.unpack,an=d.RAD2DEG,sn=Math.sqrt,ln=Math.atan2,cn=Math.round,un=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=on(t,"lab"),r=n[0],o=n[1],i=n[2],a=sn(o*o+i*i),s=(ln(i,o)*an+360)%360;return 0===cn(1e4*a)&&(s=Number.NaN),[r,a,s]},hn=un,fn=d.unpack,dn=Ye,pn=hn,gn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=fn(t,"rgb"),r=n[0],o=n[1],i=n[2],a=dn(r,o,i),s=a[0],l=a[1],c=a[2];return pn(s,l,c)},mn=gn,bn=d.unpack,yn=d.DEG2RAD,vn=Math.sin,xn=Math.cos,wn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=bn(t,"lch"),r=n[0],o=n[1],i=n[2];return isNaN(i)&&(i=0),[r,xn(i*=yn)*o,vn(i)*o]},kn=wn,Mn=d.unpack,An=kn,Tn=Ze,_n=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Mn(t,"lch"))[0],r=t[1],o=t[2],i=An(n,r,o),a=i[0],s=i[1],l=i[2],c=Tn(a,s,l);return[c[0],c[1],c[2],t.length>3?t[3]:1]},En=_n,$n=d.unpack,On=En,Sn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=$n(t,"hcl").reverse();return On.apply(void 0,n)},Nn=Sn,Ln=d.unpack,Cn=d.type,Dn=k,zn=x,Rn=p,Pn=mn;zn.prototype.lch=function(){return Pn(this._rgb)},zn.prototype.hcl=function(){return Pn(this._rgb).reverse()},Dn.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(zn,[null].concat(t,["lch"])))},Dn.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(zn,[null].concat(t,["hcl"])))},Rn.format.lch=En,Rn.format.hcl=Nn,["lch","hcl"].forEach((function(t){return Rn.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=Ln(e,t),"array"===Cn(e)&&3===e.length)return t}})}));var jn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},In=x,Fn=p,Un=d.type,Bn=jn,Hn=Ht,Yn=It;In.prototype.name=function(){for(var t=Yn(this._rgb,"rgb"),e=0,n=Object.keys(Bn);e<n.length;e+=1){var r=n[e];if(Bn[r]===t)return r.toLowerCase()}return t},Fn.format.named=function(t){if(t=t.toLowerCase(),Bn[t])return Hn(Bn[t]);throw new Error("unknown color name: "+t)},Fn.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Un(t)&&Bn[t.toLowerCase()])return"named"}});var Wn=d.unpack,qn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Wn(t,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},Gn=qn,Vn=d.type,Xn=function(t){if("number"==Vn(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Kn=k,Zn=x,Jn=p,Qn=d.type,tr=Gn;Zn.prototype.num=function(){return tr(this._rgb)},Kn.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Zn,[null].concat(t,["num"])))},Jn.format.num=Xn,Jn.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Qn(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var er=k,nr=x,rr=p,or=d.unpack,ir=d.type,ar=Math.round;nr.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ar)},nr.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:ar(e):e}))},er.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(nr,[null].concat(t,["rgb"])))},rr.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=or(t,"rgba");return void 0===n[3]&&(n[3]=1),n},rr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=or(t,"rgba"),"array"===ir(t)&&(3===t.length||4===t.length&&"number"==ir(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var sr=Math.log,lr=function(t){var e,n,r,o=t/100;return o<66?(e=255,n=o<6?0:-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*sr(n),r=o<20?0:.8274096064007395*(r=o-10)-254.76935184120902+115.67994401066147*sr(r)):(e=351.97690566805693+.114206453784165*(e=o-55)-40.25366309332127*sr(e),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*sr(n),r=255),[e,n,r,1]},cr=lr,ur=d.unpack,hr=Math.round,fr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=ur(t,"rgb"),o=r[0],i=r[2],a=1e3,s=4e4,l=.4;s-a>l;){var c=cr(n=.5*(s+a));c[2]/c[0]>=i/o?s=n:a=n}return hr(n)},dr=k,pr=x,gr=p,mr=fr;pr.prototype.temp=pr.prototype.kelvin=pr.prototype.temperature=function(){return mr(this._rgb)},dr.temp=dr.kelvin=dr.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(pr,[null].concat(t,["temp"])))},gr.format.temp=gr.format.kelvin=gr.format.temperature=lr;var br=d.unpack,yr=Math.cbrt,vr=Math.pow,xr=Math.sign,wr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=br(t,"rgb"),r=n[0],o=n[1],i=n[2],a=[Mr(r/255),Mr(o/255),Mr(i/255)],s=a[0],l=a[1],c=a[2],u=yr(.4122214708*s+.5363325363*l+.0514459929*c),h=yr(.2119034982*s+.6806995451*l+.1073969566*c),f=yr(.0883024619*s+.2817188376*l+.6299787005*c);return[.2104542553*u+.793617785*h-.0040720468*f,1.9779984951*u-2.428592205*h+.4505937099*f,.0259040371*u+.7827717662*h-.808675766*f]},kr=wr;function Mr(t){var e=Math.abs(t);return e<.04045?t/12.92:(xr(t)||1)*vr((e+.055)/1.055,2.4)}var Ar=d.unpack,Tr=Math.pow,_r=Math.sign,Er=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Ar(t,"lab"))[0],r=t[1],o=t[2],i=Tr(n+.3963377774*r+.2158037573*o,3),a=Tr(n-.1055613458*r-.0638541728*o,3),s=Tr(n-.0894841775*r-1.291485548*o,3);return[255*Or(4.0767416621*i-3.3077115913*a+.2309699292*s),255*Or(-1.2684380046*i+2.6097574011*a-.3413193965*s),255*Or(-.0041960863*i-.7034186147*a+1.707614701*s),t.length>3?t[3]:1]},$r=Er;function Or(t){var e=Math.abs(t);return e>.0031308?(_r(t)||1)*(1.055*Tr(e,1/2.4)-.055):12.92*t}var Sr=d.unpack,Nr=d.type,Lr=k,Cr=x,Dr=p,zr=kr;Cr.prototype.oklab=function(){return zr(this._rgb)},Lr.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Cr,[null].concat(t,["oklab"])))},Dr.format.oklab=$r,Dr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Sr(t,"oklab"),"array"===Nr(t)&&3===t.length)return"oklab"}});var Rr=d.unpack,Pr=kr,jr=hn,Ir=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Rr(t,"rgb"),r=n[0],o=n[1],i=n[2],a=Pr(r,o,i),s=a[0],l=a[1],c=a[2];return jr(s,l,c)},Fr=Ir,Ur=d.unpack,Br=kn,Hr=$r,Yr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Ur(t,"lch"))[0],r=t[1],o=t[2],i=Br(n,r,o),a=i[0],s=i[1],l=i[2],c=Hr(a,s,l);return[c[0],c[1],c[2],t.length>3?t[3]:1]},Wr=Yr,qr=d.unpack,Gr=d.type,Vr=k,Xr=x,Kr=p,Zr=Fr;Xr.prototype.oklch=function(){return Zr(this._rgb)},Vr.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Xr,[null].concat(t,["oklch"])))},Kr.format.oklch=Wr,Kr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=qr(t,"oklch"),"array"===Gr(t)&&3===t.length)return"oklch"}});var Jr=x,Qr=d.type;Jr.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Qr(t)?e?(this._rgb[3]=t,this):new Jr([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},x.prototype.clipped=function(){return this._rgb._clipped||!1};var to=x,eo=Re;to.prototype.darken=function(t){void 0===t&&(t=1);var e=this,n=e.lab();return n[0]-=eo.Kn*t,new to(n,"lab").alpha(e.alpha(),!0)},to.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},to.prototype.darker=to.prototype.darken,to.prototype.brighter=to.prototype.brighten,x.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],o=this[n]();if(r){var i=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(i>-1)return o[i];throw new Error("unknown channel "+r+" in mode "+n)}return o};var no=x,ro=d.type,oo=Math.pow,io=1e-7,ao=20;no.prototype.luminance=function(t){if(void 0!==t&&"number"===ro(t)){if(0===t)return new no([0,0,0,this._rgb[3]],"rgb");if(1===t)return new no([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n="rgb",r=ao,o=function(e,i){var a=e.interpolate(i,.5,n),s=a.luminance();return Math.abs(t-s)<io||!r--?a:s>t?o(e,a):o(a,i)},i=(e>t?o(new no([0,0,0]),this):o(this,new no([255,255,255]))).rgb();return new no(i.concat([this._rgb[3]]))}return so.apply(void 0,this._rgb.slice(0,3))};var so=function(t,e,n){return.2126*(t=lo(t))+.7152*(e=lo(e))+.0722*(n=lo(n))},lo=function(t){return(t/=255)<=.03928?t/12.92:oo((t+.055)/1.055,2.4)},co={},uo=x,ho=d.type,fo=co,po=function(t,e,n){void 0===n&&(n=.5);for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var i=r[0]||"lrgb";if(fo[i]||r.length||(i=Object.keys(fo)[0]),!fo[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==ho(t)&&(t=new uo(t)),"object"!==ho(e)&&(e=new uo(e)),fo[i](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))},go=x,mo=po;go.prototype.mix=go.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return mo.apply(void 0,[this,t,e].concat(n))};var bo=x;bo.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new bo([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};var yo=x,vo=Re;yo.prototype.saturate=function(t){void 0===t&&(t=1);var e=this,n=e.lch();return n[1]+=vo.Kn*t,n[1]<0&&(n[1]=0),new yo(n,"lch").alpha(e.alpha(),!0)},yo.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var xo=x,wo=d.type;xo.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),o=r[0],i=r[1],a=this[o]();if(i){var s=o.indexOf(i)-("ok"===o.substr(0,2)?2:0);if(s>-1){if("string"==wo(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else{if("number"!==wo(e))throw new Error("unsupported value for Color.set");a[s]=e}var l=new xo(a,o);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+i+" in mode "+o)}return a};var ko=x,Mo=function(t,e,n){var r=t._rgb,o=e._rgb;return new ko(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};co.rgb=Mo;var Ao=x,To=Math.sqrt,_o=Math.pow,Eo=function(t,e,n){var r=t._rgb,o=r[0],i=r[1],a=r[2],s=e._rgb,l=s[0],c=s[1],u=s[2];return new Ao(To(_o(o,2)*(1-n)+_o(l,2)*n),To(_o(i,2)*(1-n)+_o(c,2)*n),To(_o(a,2)*(1-n)+_o(u,2)*n),"rgb")};co.lrgb=Eo;var $o=x,Oo=function(t,e,n){var r=t.lab(),o=e.lab();return new $o(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};co.lab=Oo;var So=x,No=function(t,e,n,r){var o,i,a,s,l,c,u,h,f,d,p,g,m;return"hsl"===r?(a=t.hsl(),s=e.hsl()):"hsv"===r?(a=t.hsv(),s=e.hsv()):"hcg"===r?(a=t.hcg(),s=e.hcg()):"hsi"===r?(a=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",a=t.hcl(),s=e.hcl()):"oklch"===r&&(a=t.oklch().reverse(),s=e.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(l=(o=a)[0],u=o[1],f=o[2],c=(i=s)[0],h=i[1],d=i[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?g=Number.NaN:(g=c,1!=f&&0!=f||"hsv"==r||(p=h)):(g=l,1!=d&&0!=d||"hsv"==r||(p=u)):g=l+n*(c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l),void 0===p&&(p=u+n*(h-u)),m=f+n*(d-f),new So("oklch"===r?[m,p,g]:[g,p,m],r)},Lo=No,Co=function(t,e,n){return Lo(t,e,n,"lch")};co.lch=Co,co.hcl=Co;var Do=x,zo=function(t,e,n){var r=t.num(),o=e.num();return new Do(r+n*(o-r),"num")};co.num=zo;var Ro=No,Po=function(t,e,n){return Ro(t,e,n,"hcg")};co.hcg=Po;var jo=No,Io=function(t,e,n){return jo(t,e,n,"hsi")};co.hsi=Io;var Fo=No,Uo=function(t,e,n){return Fo(t,e,n,"hsl")};co.hsl=Uo;var Bo=No,Ho=function(t,e,n){return Bo(t,e,n,"hsv")};co.hsv=Ho;var Yo=x,Wo=function(t,e,n){var r=t.oklab(),o=e.oklab();return new Yo(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"oklab")};co.oklab=Wo;var qo=No,Go=function(t,e,n){return qo(t,e,n,"oklch")};co.oklch=Go;var Vo=x,Xo=d.clip_rgb,Ko=Math.pow,Zo=Math.sqrt,Jo=Math.PI,Qo=Math.cos,ti=Math.sin,ei=Math.atan2,ni=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var o=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=o})),t=t.map((function(t){return new Vo(t)})),"lrgb"===e)return ri(t,n);for(var i=t.shift(),a=i.get(e),s=[],l=0,c=0,u=0;u<a.length;u++)if(a[u]=(a[u]||0)*n[0],s.push(isNaN(a[u])?0:n[0]),"h"===e.charAt(u)&&!isNaN(a[u])){var h=a[u]/180*Jo;l+=Qo(h)*n[0],c+=ti(h)*n[0]}var f=i.alpha()*n[0];t.forEach((function(t,r){var o=t.get(e);f+=t.alpha()*n[r+1];for(var i=0;i<a.length;i++)if(!isNaN(o[i]))if(s[i]+=n[r+1],"h"===e.charAt(i)){var u=o[i]/180*Jo;l+=Qo(u)*n[r+1],c+=ti(u)*n[r+1]}else a[i]+=o[i]*n[r+1]}));for(var d=0;d<a.length;d++)if("h"===e.charAt(d)){for(var p=ei(c/s[d],l/s[d])/Jo*180;p<0;)p+=360;for(;p>=360;)p-=360;a[d]=p}else a[d]=a[d]/s[d];return f/=r,new Vo(a,e).alpha(f>.99999?1:f,!0)},ri=function(t,e){for(var n=t.length,r=[0,0,0,0],o=0;o<t.length;o++){var i=t[o],a=e[o]/n,s=i._rgb;r[0]+=Ko(s[0],2)*a,r[1]+=Ko(s[1],2)*a,r[2]+=Ko(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Zo(r[0]),r[1]=Zo(r[1]),r[2]=Zo(r[2]),r[3]>.9999999&&(r[3]=1),new Vo(Xo(r))},oi=k,ii=d.type,ai=Math.pow,si=function(t){var e="rgb",n=oi("#ccc"),r=0,o=[0,1],i=[],a=[0,0],s=!1,l=[],c=!1,u=0,h=1,f=!1,d={},p=!0,g=1,m=function(t){if((t=t||["#fff","#000"])&&"string"===ii(t)&&oi.brewer&&oi.brewer[t.toLowerCase()]&&(t=oi.brewer[t.toLowerCase()]),"array"===ii(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=oi(t[e]);i.length=0;for(var n=0;n<t.length;n++)i.push(n/(t.length-1))}return w(),l=t},b=function(t){if(null!=s){for(var e=s.length-1,n=0;n<e&&t>=s[n];)n++;return n-1}return 0},y=function(t){return t},v=function(t){return t},x=function(t,r){var o,c;if(null==r&&(r=!1),isNaN(t)||null===t)return n;c=r?t:s&&s.length>2?b(t)/(s.length-2):h!==u?(t-u)/(h-u):1,c=v(c),r||(c=y(c)),1!==g&&(c=ai(c,g)),c=a[0]+c*(1-a[0]-a[1]),c=Math.min(1,Math.max(0,c));var f=Math.floor(1e4*c);if(p&&d[f])o=d[f];else{if("array"===ii(l))for(var m=0;m<i.length;m++){var x=i[m];if(c<=x){o=l[m];break}if(c>=x&&m===i.length-1){o=l[m];break}if(c>x&&c<i[m+1]){c=(c-x)/(i[m+1]-x),o=oi.interpolate(l[m],l[m+1],c,e);break}}else"function"===ii(l)&&(o=l(c));p&&(d[f]=o)}return o},w=function(){return d={}};m(t);var k=function(t){var e=oi(x(t));return c&&e[c]?e[c]():e};return k.classes=function(t){if(null!=t){if("array"===ii(t))s=t,o=[t[0],t[t.length-1]];else{var e=oi.analyze(o);s=0===t?[e.min,e.max]:oi.limits(e,"e",t)}return k}return s},k.domain=function(t){if(!arguments.length)return o;u=t[0],h=t[t.length-1],i=[];var e=l.length;if(t.length===e&&u!==h)for(var n=0,r=Array.from(t);n<r.length;n+=1){var a=r[n];i.push((a-u)/(h-u))}else{for(var s=0;s<e;s++)i.push(s/(e-1));if(t.length>2){var c=t.map((function(e,n){return n/(t.length-1)})),f=t.map((function(t){return(t-u)/(h-u)}));f.every((function(t,e){return c[e]===t}))||(v=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var n=(t-f[e])/(f[e+1]-f[e]);return c[e]+n*(c[e+1]-c[e])})}}return o=[u,h],k},k.mode=function(t){return arguments.length?(e=t,w(),k):e},k.range=function(t,e){return m(t),k},k.out=function(t){return c=t,k},k.spread=function(t){return arguments.length?(r=t,k):r},k.correctLightness=function(t){return null==t&&(t=!0),f=t,w(),y=f?function(t){for(var e=x(0,!0).lab()[0],n=x(1,!0).lab()[0],r=e>n,o=x(t,!0).lab()[0],i=e+(n-e)*t,a=o-i,s=0,l=1,c=20;Math.abs(a)>.01&&c-- >0;)r&&(a*=-1),a<0?(s=t,t+=.5*(l-t)):(l=t,t+=.5*(s-t)),o=x(t,!0).lab()[0],a=o-i;return t}:function(t){return t},k},k.padding=function(t){return null!=t?("number"===ii(t)&&(t=[t,t]),a=t,k):a},k.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===e)r=[k(.5)];else if(e>1){var i=o[0],a=o[1]-i;r=li(0,e,!1).map((function(t){return k(i+t/(e-1)*a)}))}else{t=[];var c=[];if(s&&s.length>2)for(var u=1,h=s.length,f=1<=h;f?u<h:u>h;f?u++:u--)c.push(.5*(s[u-1]+s[u]));else c=o;r=c.map((function(t){return k(t)}))}return oi[n]&&(r=r.map((function(t){return t[n]()}))),r},k.cache=function(t){return null!=t?(p=t,k):p},k.gamma=function(t){return null!=t?(g=t,k):g},k.nodata=function(t){return null!=t?(n=oi(t),k):n},k};function li(t,e,n){for(var r=[],o=t<e,i=n?o?e+1:e-1:e,a=t;o?a<i:a>i;o?a++:a--)r.push(a);return r}var ci=x,ui=si,hi=function(t){for(var e=[1,1],n=1;n<t;n++){for(var r=[1],o=1;o<=e.length;o++)r[o]=(e[o]||0)+e[o-1];e=r}return e},fi=function(t){var e,n,r,o,i,a,s;if(2===(t=t.map((function(t){return new ci(t)}))).length)e=t.map((function(t){return t.lab()})),i=e[0],a=e[1],o=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(a[e]-i[e])}));return new ci(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),i=n[0],a=n[1],s=n[2],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*a[e]+t*t*s[e]}));return new ci(e,"lab")};else if(4===t.length){var l;r=t.map((function(t){return t.lab()})),i=r[0],a=r[1],s=r[2],l=r[3],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]}));return new ci(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var c,u,h;c=t.map((function(t){return t.lab()})),h=t.length-1,u=hi(h),o=function(t){var e=1-t,n=[0,1,2].map((function(n){return c.reduce((function(r,o,i){return r+u[i]*Math.pow(e,h-i)*Math.pow(t,i)*o[n]}),0)}));return new ci(n,"lab")}}return o},di=function(t){var e=fi(t);return e.scale=function(){return ui(e)},e},pi=k,gi=function(t,e,n){if(!gi[n])throw new Error("unknown blend mode "+n);return gi[n](t,e)},mi=function(t){return function(e,n){var r=pi(n).rgb(),o=pi(e).rgb();return pi.rgb(t(r,o))}},bi=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},yi=function(t){return t},vi=function(t,e){return t*e/255},xi=function(t,e){return t>e?e:t},wi=function(t,e){return t>e?t:e},ki=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Mi=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},Ai=function(t,e){return 255*(1-(1-e/255)/(t/255))},Ti=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t};gi.normal=mi(bi(yi)),gi.multiply=mi(bi(vi)),gi.screen=mi(bi(ki)),gi.overlay=mi(bi(Mi)),gi.darken=mi(bi(xi)),gi.lighten=mi(bi(wi)),gi.dodge=mi(bi(Ti)),gi.burn=mi(bi(Ai));for(var _i=gi,Ei=d.type,$i=d.clip_rgb,Oi=d.TWOPI,Si=Math.pow,Ni=Math.sin,Li=Math.cos,Ci=k,Di=function(t,e,n,r,o){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=[0,1]);var i,a=0;"array"===Ei(o)?i=o[1]-o[0]:(i=0,o=[o,o]);var s=function(s){var l=Oi*((t+120)/360+e*s),c=Si(o[0]+i*s,r),u=(0!==a?n[0]+s*a:n)*c*(1-c)/2,h=Li(l),f=Ni(l);return Ci($i([255*(c+u*(-.14861*h+1.78277*f)),255*(c+u*(-.29227*h-.90649*f)),255*(c+u*(1.97294*h)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===Ei(n=t)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(t){return null==t?o:("array"===Ei(t)?(o=t,i=t[1]-t[0]):(o=[t,t],i=0),s)},s.scale=function(){return Ci.scale(s)},s.hue(n),s},zi=x,Ri="0123456789abcdef",Pi=Math.floor,ji=Math.random,Ii=function(){for(var t="#",e=0;e<6;e++)t+=Ri.charAt(Pi(16*ji()));return new zi(t,"hex")},Fi=s,Ui=Math.log,Bi=Math.pow,Hi=Math.floor,Yi=Math.abs,Wi=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Fi(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Fi(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return qi(n,t,e)},n},qi=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==Fi(t)&&(t=Wi(t));var r=t.min,o=t.max,i=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,o];var a=[];if("c"===e.substr(0,1)&&(a.push(r),a.push(o)),"e"===e.substr(0,1)){a.push(r);for(var s=1;s<n;s++)a.push(r+s/n*(o-r));a.push(o)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*Ui(r),c=Math.LOG10E*Ui(o);a.push(r);for(var u=1;u<n;u++)a.push(Bi(10,l+u/n*(c-l)));a.push(o)}else if("q"===e.substr(0,1)){a.push(r);for(var h=1;h<n;h++){var f=(i.length-1)*h/n,d=Hi(f);if(d===f)a.push(i[d]);else{var p=f-d;a.push(i[d]*(1-p)+i[d+1]*p)}}a.push(o)}else if("k"===e.substr(0,1)){var g,m=i.length,b=new Array(m),y=new Array(n),v=!0,x=0,w=null;(w=[]).push(r);for(var k=1;k<n;k++)w.push(r+k/n*(o-r));for(w.push(o);v;){for(var M=0;M<n;M++)y[M]=0;for(var A=0;A<m;A++)for(var T=i[A],_=Number.MAX_VALUE,E=void 0,$=0;$<n;$++){var O=Yi(w[$]-T);O<_&&(_=O,E=$),y[E]++,b[A]=E}for(var S=new Array(n),N=0;N<n;N++)S[N]=null;for(var L=0;L<m;L++)null===S[g=b[L]]?S[g]=i[L]:S[g]+=i[L];for(var C=0;C<n;C++)S[C]*=1/y[C];v=!1;for(var D=0;D<n;D++)if(S[D]!==w[D]){v=!0;break}w=S,++x>200&&(v=!1)}for(var z={},R=0;R<n;R++)z[R]=[];for(var P=0;P<m;P++)z[g=b[P]].push(i[P]);for(var j=[],I=0;I<n;I++)j.push(z[I][0]),j.push(z[I][z[I].length-1]);j=j.sort((function(t,e){return t-e})),a.push(j[0]);for(var F=1;F<j.length;F+=2){var U=j[F];isNaN(U)||-1!==a.indexOf(U)||a.push(U)}}return a},Gi={analyze:Wi,limits:qi},Vi=x,Xi=function(t,e){t=new Vi(t),e=new Vi(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Ki=x,Zi=Math.sqrt,Ji=Math.pow,Qi=Math.min,ta=Math.max,ea=Math.atan2,na=Math.abs,ra=Math.cos,oa=Math.sin,ia=Math.exp,aa=Math.PI,sa=function(t,e,n,r,o){void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=1);var i=function(t){return 360*t/(2*aa)},a=function(t){return 2*aa*t/360};t=new Ki(t),e=new Ki(e);var s=Array.from(t.lab()),l=s[0],c=s[1],u=s[2],h=Array.from(e.lab()),f=h[0],d=h[1],p=h[2],g=(l+f)/2,m=(Zi(Ji(c,2)+Ji(u,2))+Zi(Ji(d,2)+Ji(p,2)))/2,b=.5*(1-Zi(Ji(m,7)/(Ji(m,7)+Ji(25,7)))),y=c*(1+b),v=d*(1+b),x=Zi(Ji(y,2)+Ji(u,2)),w=Zi(Ji(v,2)+Ji(p,2)),k=(x+w)/2,M=i(ea(u,y)),A=i(ea(p,v)),T=M>=0?M:M+360,_=A>=0?A:A+360,E=na(T-_)>180?(T+_+360)/2:(T+_)/2,$=1-.17*ra(a(E-30))+.24*ra(a(2*E))+.32*ra(a(3*E+6))-.2*ra(a(4*E-63)),O=_-T;O=na(O)<=180?O:_<=T?O+360:O-360,O=2*Zi(x*w)*oa(a(O)/2);var S=f-l,N=w-x,L=1+.015*Ji(g-50,2)/Zi(20+Ji(g-50,2)),C=1+.045*k,D=1+.015*k*$,z=30*ia(-Ji((E-275)/25,2)),R=-2*Zi(Ji(k,7)/(Ji(k,7)+Ji(25,7)))*oa(2*a(z)),P=Zi(Ji(S/(n*L),2)+Ji(N/(r*C),2)+Ji(O/(o*D),2)+R*(N/(r*C))*(O/(o*D)));return ta(0,Qi(100,P))},la=x,ca=function(t,e,n){void 0===n&&(n="lab"),t=new la(t),e=new la(e);var r=t.get(n),o=e.get(n),i=0;for(var a in r){var s=(r[a]||0)-(o[a]||0);i+=s*s}return Math.sqrt(i)},ua=x,ha=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(ua,[null].concat(t))),!0}catch(t){return!1}},fa=k,da=si,pa={cool:function(){return da([fa.hsl(180,1,.9),fa.hsl(250,.7,.4)])},hot:function(){return da(["#000","#f00","#ff0","#fff"]).mode("rgb")}},ga={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ma=0,ba=Object.keys(ga);ma<ba.length;ma+=1){var ya=ba[ma];ga[ya.toLowerCase()]=ga[ya]}var va=ga,xa=k;xa.average=ni,xa.bezier=di,xa.blend=_i,xa.cubehelix=Di,xa.mix=xa.interpolate=po,xa.random=Ii,xa.scale=si,xa.analyze=Gi.analyze,xa.contrast=Xi,xa.deltaE=sa,xa.distance=ca,xa.limits=Gi.limits,xa.valid=ha,xa.scales=pa,xa.colors=jn,xa.brewer=va;var wa=xa;return wa}()}(Zf);var Jf=zo(Zf.exports);function Qf(t,e){const n=Wh(t,"colors.background","#ffffff"),r=Wh(t,"colors.chartContentBaseColor",e.contrast(n,"#000000")<5.5?"#f1f1f1":"#333333"),o={tickText:{secondary:Wh(t,"colors.bgBlendRatios.tickText.secondary",e(n).luminance()<.5?.6:.4),primary:Wh(t,"colors.bgBlendRatios.tickText.primary",.2)},series:Wh(t,"colors.bgBlendRatios.series",0),value:Wh(t,"colors.bgBlendRatios.value",.2),axis:Wh(t,"colors.bgBlendRatios.axis",0),gridline:Wh(t,"colors.bgBlendRatios.gridline",.82)};return{tickText:{secondary:e.mix(r,n,o.tickText.secondary).hex(),primary:e.mix(r,n,o.tickText.primary).hex()},series:e.mix(r,n,o.series).hex(),value:e.mix(r,n,o.value).hex(),axis:e.mix(r,n,o.axis).hex(),gridline:e.mix(r,n,o.gridline).hex(),fallbackBaseColor:r,blendColor:t=>e.mix(r,n,t).hex()}}function td(t){return Qf(t,Jf)}var ed=tc(Object.getPrototypeOf,Object),nd=Pi,rd=ed,od=ji,id=Function.prototype,ad=Object.prototype,sd=id.toString,ld=ad.hasOwnProperty,cd=sd.call(Object);var ud=function(t){if(!od(t)||"[object Object]"!=nd(t))return!1;var e=rd(t);if(null===e)return!0;var n=ld.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&sd.call(n)==cd},hd=ji,fd=ud;var dd=zo((function(t){return hd(t)&&1===t.nodeType&&!fd(t)}));var pd=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1},gd=function(t){return t!=t},md=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1};var bd=function(t,e,n){return e==e?md(t,e,n):pd(t,gd,n)};var yd=function(t,e){return!!(null==t?0:t.length)&&bd(t,e,0)>-1};var vd=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1};var xd=kc,wd=function(){},kd=xd&&1/ul(new xd([,-0]))[1]==1/0?function(t){return new xd(t)}:wd,Md=nl,Ad=yd,Td=vd,_d=rl,Ed=kd,$d=ul;var Od=function(t,e,n){var r=-1,o=Ad,i=t.length,a=!0,s=[],l=s;if(n)a=!1,o=Td;else if(i>=200){var c=e?null:Ed(t);if(c)return $d(c);a=!1,o=_d,l=new Md}else l=e?[]:s;t:for(;++r<i;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),s.push(u)}else o(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s},Sd=Od;var Nd=zo((function(t){return t&&t.length?Sd(t):[]})),Ld=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Cd}(t)}(t)};var Cd="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Dd(t,e){return!1!==e.clone&&e.isMergeableObject(t)?Id((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function zd(t,e,n){return t.concat(e).map((function(t){return Dd(t,n)}))}function Rd(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function Pd(t,e){try{return e in t}catch(t){return!1}}function jd(t,e,n){var r={};return n.isMergeableObject(t)&&Rd(t).forEach((function(e){r[e]=Dd(t[e],n)})),Rd(e).forEach((function(o){(function(t,e){return Pd(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(Pd(t,o)&&n.isMergeableObject(e[o])?r[o]=function(t,e){if(!e.customMerge)return Id;var n=e.customMerge(t);return"function"==typeof n?n:Id}(o,n)(t[o],e[o],n):r[o]=Dd(e[o],n))})),r}function Id(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||zd,n.isMergeableObject=n.isMergeableObject||Ld,n.cloneUnlessOtherwiseSpecified=Dd;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):jd(t,e,n):Dd(e,n)}Id.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return Id(t,n,e)}),{})};var Fd=zo(Id);function Ud(t,e){if(!(e={tickPosition:"x"===t?"bottom":"left",gridLines:!0,tickLines:!1,tickLabels:!0,baseLine:["zero"],fitLabels:[],tickLabelsInside:!1,tickLabelFormat:"auto",tickLabelUnit:["",""],tickLabelMultiply:1,secondary:!1,className:!1,minusChar:"−",plusMinusChar:"±",translate:t=>t,rtl:!1,...e}).scale)throw new Error("you need to provide a D3 scale for the grid");if(!e.scaleType)throw new Error("you need to specify the scale type");if(!e.aboveChart||!e.belowChart)throw new Error("you need to provide container elements for the axis");if(!e.plotSize||!Xi(e.plotSize))throw new Error("you need to provide the plot size");if(!e.theme)throw new Error("you need to pass theme data");if(!Xi(e.tickLabelUnit)||2!==e.tickLabelUnit.length)throw new Error("tickLabelUnit must be an array of 2 strings (prepend/append)");e.baseLine&&"string"==typeof e.baseLine&&(e.baseLine=[e.baseLine]),e.baseLine&&"boolean"==typeof e.baseLine&&(e.baseLine=e.baseLine?["zero"]:[]),e.baseLine||(e.baseLine=[]),e.customFormatFunction&&(e.baseLine=e.baseLine.filter((t=>"zero"!==t)));const n=new Set(["zero",..."x"===t?["left","right"]:["top","bottom"]]);e.baseLine&&Xi(e.baseLine)&&(e.baseLine.forEach((t=>{if(!n.has(t))throw new Error("baseLine only accepts: ".concat(Array.from(n).join(", ")))})),e.baseLine=Nd(e.baseLine)),e.aboveChart=Hd(e.aboveChart),e.belowChart=Hd(e.belowChart);const r=Bd("x"===t?"horizontal":"vertical",e);return Wh(r,"tickLines.forceOn")&&e.gridLines&&!e.tickLines&&(e.tickLines=!0),{options:e,themeOpts:r}}function Bd(t,e){const{theme:n,secondary:r}=e,{fallbackBaseColor:o}=td(n),i=Wh(n,"colors.background","#ffffff"),a=Wh(n,"vis.base.grid",{}),s=[Wh(a,"general"),Wh(a,t)];r?s.push(Wh(a,"secondary")):s.push(Wh(a,"primary"));let l=s.reduce((function(t,e){return e?Fd(t,e):t}),{});return l=Fd(function(t,e,n){let{secondary:r}=n;const o=Wh(t,"colors.background","#ffffff"),i=Kf(o)<50,{fallbackBaseColor:a}=td(t);return{tickLines:{aboveChart:!0,color:a,blendBaseColorWithBg:r?i?.95:.82:0,width:1,length:5,lengthInside:20,distance:0},gridLines:{aboveChart:!1,major:{blendBaseColorWithBg:i?.95:.82,width:1},minor:{opacity:.5,width:1}},baseLine:{aboveChart:!0,blendBaseColorWithBg:0,width:1,strokeLinecap:"square"},tickLabels:{buffer:10,aboveChart:!0,blendBaseColorWithBg:r?i?.7:.4:.2,distance:5}}}(n,0,{secondary:r,horizontal:"horizontal"===t}),l),Of(l,"gridLines.minor",Fd(Wh(l,"gridLines.major",{}),Wh(l,"gridLines.minor",{}))),["gridLines.major","gridLines.minor","baseLine","tickLines","tickLabels"].forEach((t=>{const{color:n,blendBaseColorWithBg:r}=Wh(l,t);n||Of(l,"".concat(t,".color"),e.chroma.mix(o,i,r))})),l}function Hd(t){if(dd(t))return at(t);if("function"==typeof t.node)return at(t.node());throw new Error("provided container element needs to be DOM element or D3 selection")}var Yd={exports:{}};!function(t,e){t.exports=function(t,e){var n=e.prototype,r=n.format;n.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return r.bind(this)(t);var o=this.$utils(),i=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return o.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return o.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return o.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return r.bind(this)(i)}}}(Yd);var Wd=zo(Yd.exports),qd={exports:{}};!function(t,e){var n;t.exports=(n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},function(t,e,r){var o=e.prototype,i=o.format;r.en.formats=n,o.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var e=this.$locale().formats,r=function(t,e){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,o){var i=o&&o.toUpperCase();return r||e[o]||n[o]||e[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))}(t,void 0===e?{}:e);return i.call(this,r)}})}(qd);var Gd=zo(qd.exports);yi.extend(Wd),yi.extend(Gd);const Vd=t=>(e,n)=>da(e)?t(e,n):e;function Xd(t){let{normalizeDatesToEn:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.format())return xi;const n=(t,n)=>{if(!e)return yi(t).format(n);const r=yi.locale();yi.locale("en");const o=yi(t).format(n);return yi.locale(r),o};switch(t.precision()){case"year":return Vd((t=>t.getFullYear()));case"half":return Vd((t=>t.getFullYear()+" H"+(t.getMonth()/6+1)));case"quarter":return Vd((t=>t.getFullYear()+" Q"+(t.getMonth()/3+1)));case"month":return Vd((t=>n(t,"MMM YY")));case"week":return Vd((t=>function(t){const e=t.getUTCDay(),n=new Date(t.valueOf());n.setDate(n.getDate()-(e+6)%7+3);const r=n.getUTCFullYear(),o=Math.floor((n.getTime()-new Date(r,0,1,-6).getTime())/864e5);return[r,1+Math.floor(o/7),e>0?e:7]}(t).slice(0,2).join(" W")));case"day":return Vd(((t,e)=>n(t,e?"dddd, MMMM DD, YYYY":"l")));case"day-minutes":return Vd(((t,e)=>n(t,"MMM DD"+(e?", YYYY":"")).replace(/ /g,"&nbsp;")+" - "+n(t,"LT").replace(" ","&nbsp;")));case"day-seconds":return Vd(((t,e)=>(e?n(t,"MMM DD, YYYY").replace(/ /g,"&nbsp;")+" - ":"")+n(t,"LTS").replace(" ","&nbsp;")));default:return}}function Kd(t,e){return Math.abs(t-e)<1e-6}function Zd(t,e){const n=e["number-format"]||"-",r=Number(e["number-divisor"]||0),o=(e["number-append"]||"").replace(/ /g," "),i=(e["number-prepend"]||"").replace(/ /g," ");return function(e,a,s){if(isNaN(e))return e;const l=n;let c=0;var u,h;0!==r&&"-"===l&&(c=1),"s"===l.substr(0,1)&&(c=Math.max(0,(u=e,h=+l.substr(1),0===u?0:Math.round(h-Math.ceil(Math.log(Math.abs(u))/Math.LN10))))),s&&(c=0),"-"===l&&(c=Kd(e,Math.round(e))?0:Kd(e,.1*Math.round(10*e))?1:Kd(e,.01*Math.round(100*e))?2:Kd(e,.001*Math.round(1e3*e))?3:Kd(e,1e-4*Math.round(1e4*e))?4:Kd(e,1e-5*Math.round(1e5*e))?5:6),"n"===l[0]&&(c=Number(l.substr(1,l.length)));let f="0,0";for(let t=0;t<c;t++)0===t&&(f+="."),f+="0";return af(t,e,{format:f,prepend:a?i:"",append:a?o:"",multiply:Math.pow(10,-1*r)})}}const Jd=t=>t;function Qd(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"date"===e.type()?Xd(e.type(!0),o):"number"===e.type()?Zd(t,Wh(n,"data.column-format.".concat(r),{})):Jd}function tp(t,e,n){return e===n?"0":t.dataset.hasColumn(e)?t.dataset.column(e).title():""}function ep(t){return!xu(t)&&isFinite(t)&&!isNaN(parseFloat(t))}function np(t){return e=>t?da(e):ep(e)}function rp(t,e){return Object.keys(t).filter((t=>e.includes(t))).map((e=>t[e])).filter(ep).reduce(((t,e)=>t+e),0)}function op(t){return ip(t.map((t=>({...t,data:[t.data]}))))}function ip(t){t=t.sort(((t,e)=>t.start-e.start));for(const[e,n]of t.entries()){const r=t.slice(e+1).find((t=>t.start<n.end));if(r){if(r.start===n.start){const[o,i]=[n,r].sort(((t,e)=>t.end-e.end)),a=[{...o,data:[...n.data,...r.data]},{...i,start:o.end}];t.splice(e,2,...a)}else{const o=[{...n,end:r.start},{...n,start:r.start}];t.splice(e,1,...o)}return ip(t)}}return t.sort(((t,e)=>t.start-e.start))}function ap(t,e){return"before"===e?t.select(".bc-bar-total.before").node().offsetWidth:0}function sp(t){let{overlays:e,barData:n,labelData:{padding:r,width:o},labelColor:i,getElementBounds:a,themeBackground:s,invertLuminance:l,labelAlign:c,outsidePositions:u,cm:h,chroma:f}=t;const d=function(t){let{overlays:e,barData:{color:n,bbox:{left:r,right:o}},labelColor:i,invertLuminance:a,themeBackground:s,getElementBounds:l,cm:c,chroma:u}=t;const h=e.map(((t,e)=>{const n=l(t);return{start:n.left,end:n.right,data:{color:at(t).datum().color,i:e}}})),f={start:r,end:o,data:{color:n,bar:!0,i:-1}};return op([...h,f]).map((t=>{const e=t.data.slice(0).sort(((t,e)=>t.i-e.i)),n=e[0].bar;let r=s;for(;e.length;){const t=e.shift(),n=u(c(t.color)),o=n.alpha(),i=n.alpha(1).hex();r=u.mix(r,i,o,"rgb").hex()}return{start:t.start,end:t.end,inside:n,requireInvert:fe(r).l<a,labelContrast:u.contrast(r,i)}}))}({overlays:e,barData:n,labelColor:i,themeBackground:s,invertLuminance:l,getElementBounds:a,cm:h,chroma:f}),p={labelPadding:r,labelWidth:o,barData:n};if(o+2*r<=n.bbox.width){const t=d.filter((t=>t.inside));"right"===c&&t.reverse();const e=lp({segments:t,inside:!0,side:c},p);if(e)return e}const g={left:d.filter((t=>t.start<=n.bbox.left)).reverse(),right:d.filter((t=>t.end>=n.bbox.right))};for(const t of u){const e=lp({segments:g[t],side:t},p);if(e)return e}}function lp(t,e){let{segments:n,inside:r,side:o}=t,{labelPadding:i,labelWidth:a,barData:s}=e;for(const t of n){const e=t["left"===o?"start":"end"],l=e+("right"===(r?"left"===o?"right":"left":o)?i:-(i+a)),c={start:l,end:l+a},u=s[r?"bbox":"barbgBbox"];if(c.end+i>u.right)continue;if(c.start-i<u.left)continue;const h=n.filter((t=>Math.max(c.start,t.start)<Math.min(c.end,t.end)));if(r?!h.find((t=>t.requireInvert!==h[0].requireInvert)):!h.find((t=>t.end-t.start>2&&t.labelContrast<4.5)))return{inside:r,outsidePosition:!r&&o,requireInvert:r&&h[0].requireInvert,buffer:!r&&!!h.length,labelOffset:Math.abs(e-s.bbox[o])}}}var cp,up={exports:{}};
/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */function hp(){return cp||(cp=1,function(t,e){t.exports=function(){const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:o}=Object;let{freeze:i,seal:a,create:s}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;i||(i=function(t){return t}),a||(a=function(t){return t}),l||(l=function(t,e,n){return t.apply(e,n)}),c||(c=function(t,e){return new t(...e)});const u=w(Array.prototype.forEach),h=w(Array.prototype.pop),f=w(Array.prototype.push),d=w(String.prototype.toLowerCase),p=w(String.prototype.toString),g=w(String.prototype.match),m=w(String.prototype.replace),b=w(String.prototype.indexOf),y=w(String.prototype.trim),v=w(RegExp.prototype.test),x=k(TypeError);function w(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return l(t,e,r)}}function k(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return c(t,n)}}function M(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;e&&e(t,null);let i=r.length;for(;i--;){let e=r[i];if("string"==typeof e){const t=o(e);t!==e&&(n(r)||(r[i]=t),e=t)}t[e]=!0}return t}function A(e){const n=s(null);for(const[r,i]of t(e))void 0!==o(e,r)&&(n[r]=i);return n}function T(t,e){for(;null!==t;){const n=o(t,e);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}t=r(t)}function n(t){return console.warn("fallback value for",t),null}return n}const _=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),E=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),S=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=i(["#text"]),C=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),D=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j=a(/<%[\w\W]*|[\w\W]*%>/gm),I=a(/\${[\w\W]*}/gm),F=a(/^data-[\-\w.\u00B7-\uFFFF]/),U=a(/^aria-[\-\w]+$/),B=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=a(/^(?:\w+script|data):/i),Y=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W=a(/^html$/i);var q=Object.freeze({__proto__:null,MUSTACHE_EXPR:P,ERB_EXPR:j,TMPLIT_EXPR:I,DATA_ATTR:F,ARIA_ATTR:U,IS_ALLOWED_URI:B,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:Y,DOCTYPE_NAME:W});const G=function(){return"undefined"==typeof window?null:window},V=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();const n=t=>X(t);if(n.version="3.0.6",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;let{document:r}=e;const o=r,a=o.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:w,Element:k,NodeFilter:P,NamedNodeMap:j=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:I,DOMParser:F,trustedTypes:U}=e,H=k.prototype,Y=T(H,"cloneNode"),K=T(H,"nextSibling"),Z=T(H,"childNodes"),J=T(H,"parentNode");if("function"==typeof c){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let Q,tt="";const{implementation:et,createNodeIterator:nt,createDocumentFragment:rt,getElementsByTagName:ot}=r,{importNode:it}=o;let at={};n.isSupported="function"==typeof t&&"function"==typeof J&&et&&void 0!==et.createHTMLDocument;const{MUSTACHE_EXPR:st,ERB_EXPR:lt,TMPLIT_EXPR:ct,DATA_ATTR:ut,ARIA_ATTR:ht,IS_SCRIPT_OR_DATA:ft,ATTR_WHITESPACE:dt}=q;let{IS_ALLOWED_URI:pt}=q,gt=null;const mt=M({},[..._,...E,...$,...S,...L]);let bt=null;const yt=M({},[...C,...D,...z,...R]);let vt=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xt=null,wt=null,kt=!0,Mt=!0,At=!1,Tt=!0,_t=!1,Et=!1,$t=!1,Ot=!1,St=!1,Nt=!1,Lt=!1,Ct=!0,Dt=!1;const zt="user-content-";let Rt=!0,Pt=!1,jt={},It=null;const Ft=M({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ut=null;const Bt=M({},["audio","video","img","source","image","track"]);let Ht=null;const Yt=M({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wt="http://www.w3.org/1998/Math/MathML",qt="http://www.w3.org/2000/svg",Gt="http://www.w3.org/1999/xhtml";let Vt=Gt,Xt=!1,Kt=null;const Zt=M({},[Wt,qt,Gt],p);let Jt=null;const Qt=["application/xhtml+xml","text/html"],te="text/html";let ee=null,ne=null;const re=r.createElement("form"),oe=function(t){return t instanceof RegExp||t instanceof Function},ie=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ne||ne!==t){if(t&&"object"==typeof t||(t={}),t=A(t),Jt=Jt=-1===Qt.indexOf(t.PARSER_MEDIA_TYPE)?te:t.PARSER_MEDIA_TYPE,ee="application/xhtml+xml"===Jt?p:d,gt="ALLOWED_TAGS"in t?M({},t.ALLOWED_TAGS,ee):mt,bt="ALLOWED_ATTR"in t?M({},t.ALLOWED_ATTR,ee):yt,Kt="ALLOWED_NAMESPACES"in t?M({},t.ALLOWED_NAMESPACES,p):Zt,Ht="ADD_URI_SAFE_ATTR"in t?M(A(Yt),t.ADD_URI_SAFE_ATTR,ee):Yt,Ut="ADD_DATA_URI_TAGS"in t?M(A(Bt),t.ADD_DATA_URI_TAGS,ee):Bt,It="FORBID_CONTENTS"in t?M({},t.FORBID_CONTENTS,ee):Ft,xt="FORBID_TAGS"in t?M({},t.FORBID_TAGS,ee):{},wt="FORBID_ATTR"in t?M({},t.FORBID_ATTR,ee):{},jt="USE_PROFILES"in t&&t.USE_PROFILES,kt=!1!==t.ALLOW_ARIA_ATTR,Mt=!1!==t.ALLOW_DATA_ATTR,At=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Tt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,_t=t.SAFE_FOR_TEMPLATES||!1,Et=t.WHOLE_DOCUMENT||!1,St=t.RETURN_DOM||!1,Nt=t.RETURN_DOM_FRAGMENT||!1,Lt=t.RETURN_TRUSTED_TYPE||!1,Ot=t.FORCE_BODY||!1,Ct=!1!==t.SANITIZE_DOM,Dt=t.SANITIZE_NAMED_PROPS||!1,Rt=!1!==t.KEEP_CONTENT,Pt=t.IN_PLACE||!1,pt=t.ALLOWED_URI_REGEXP||B,Vt=t.NAMESPACE||Gt,vt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&oe(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&oe(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(vt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_t&&(Mt=!1),Nt&&(St=!0),jt&&(gt=M({},[...L]),bt=[],!0===jt.html&&(M(gt,_),M(bt,C)),!0===jt.svg&&(M(gt,E),M(bt,D),M(bt,R)),!0===jt.svgFilters&&(M(gt,$),M(bt,D),M(bt,R)),!0===jt.mathMl&&(M(gt,S),M(bt,z),M(bt,R))),t.ADD_TAGS&&(gt===mt&&(gt=A(gt)),M(gt,t.ADD_TAGS,ee)),t.ADD_ATTR&&(bt===yt&&(bt=A(bt)),M(bt,t.ADD_ATTR,ee)),t.ADD_URI_SAFE_ATTR&&M(Ht,t.ADD_URI_SAFE_ATTR,ee),t.FORBID_CONTENTS&&(It===Ft&&(It=A(It)),M(It,t.FORBID_CONTENTS,ee)),Rt&&(gt["#text"]=!0),Et&&M(gt,["html","head","body"]),gt.table&&(M(gt,["tbody"]),delete xt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Q=t.TRUSTED_TYPES_POLICY,tt=Q.createHTML("")}else void 0===Q&&(Q=V(U,a)),null!==Q&&"string"==typeof tt&&(tt=Q.createHTML(""));i&&i(t),ne=t}},ae=M({},["mi","mo","mn","ms","mtext"]),se=M({},["foreignobject","desc","title","annotation-xml"]),le=M({},["title","style","font","a","script"]),ce=M({},E);M(ce,$),M(ce,O);const ue=M({},S);M(ue,N);const he=function(t){let e=J(t);e&&e.tagName||(e={namespaceURI:Vt,tagName:"template"});const n=d(t.tagName),r=d(e.tagName);return!!Kt[t.namespaceURI]&&(t.namespaceURI===qt?e.namespaceURI===Gt?"svg"===n:e.namespaceURI===Wt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(ce[n]):t.namespaceURI===Wt?e.namespaceURI===Gt?"math"===n:e.namespaceURI===qt?"math"===n&&se[r]:Boolean(ue[n]):t.namespaceURI===Gt?!(e.namespaceURI===qt&&!se[r])&&!(e.namespaceURI===Wt&&!ae[r])&&!ue[n]&&(le[n]||!ce[n]):!("application/xhtml+xml"!==Jt||!Kt[t.namespaceURI]))},fe=function(t){f(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},de=function(t,e){try{f(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!bt[t])if(St||Nt)try{fe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},pe=function(t){let e=null,n=null;if(Ot)t="<remove></remove>"+t;else{const e=g(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===Jt&&Vt===Gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const o=Q?Q.createHTML(t):t;if(Vt===Gt)try{e=(new F).parseFromString(o,Jt)}catch(t){}if(!e||!e.documentElement){e=et.createDocument(Vt,"template",null);try{e.documentElement.innerHTML=Xt?tt:o}catch(t){}}const i=e.body||e.documentElement;return t&&n&&i.insertBefore(r.createTextNode(n),i.childNodes[0]||null),Vt===Gt?ot.call(e,Et?"html":"body")[0]:Et?e.documentElement:i},ge=function(t){return nt.call(t.ownerDocument||t,t,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,null)},me=function(t){return t instanceof I&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof j)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},be=function(t){return"function"==typeof w&&t instanceof w},ye=function(t,e,r){at[t]&&u(at[t],(t=>{t.call(n,e,r,ne)}))},ve=function(t){let e=null;if(ye("beforeSanitizeElements",t,null),me(t))return fe(t),!0;const r=ee(t.nodeName);if(ye("uponSanitizeElement",t,{tagName:r,allowedTags:gt}),t.hasChildNodes()&&!be(t.firstElementChild)&&v(/<[/\w]/g,t.innerHTML)&&v(/<[/\w]/g,t.textContent))return fe(t),!0;if(!gt[r]||xt[r]){if(!xt[r]&&we(r)){if(vt.tagNameCheck instanceof RegExp&&v(vt.tagNameCheck,r))return!1;if(vt.tagNameCheck instanceof Function&&vt.tagNameCheck(r))return!1}if(Rt&&!It[r]){const e=J(t)||t.parentNode,n=Z(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r)e.insertBefore(Y(n[r],!0),K(t))}return fe(t),!0}return t instanceof k&&!he(t)?(fe(t),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!v(/<\/no(script|embed|frames)/i,t.innerHTML)?(_t&&3===t.nodeType&&(e=t.textContent,u([st,lt,ct],(t=>{e=m(e,t," ")})),t.textContent!==e&&(f(n.removed,{element:t.cloneNode()}),t.textContent=e)),ye("afterSanitizeElements",t,null),!1):(fe(t),!0)},xe=function(t,e,n){if(Ct&&("id"===e||"name"===e)&&(n in r||n in re))return!1;if(Mt&&!wt[e]&&v(ut,e));else if(kt&&v(ht,e));else if(!bt[e]||wt[e]){if(!(we(t)&&(vt.tagNameCheck instanceof RegExp&&v(vt.tagNameCheck,t)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(t))&&(vt.attributeNameCheck instanceof RegExp&&v(vt.attributeNameCheck,e)||vt.attributeNameCheck instanceof Function&&vt.attributeNameCheck(e))||"is"===e&&vt.allowCustomizedBuiltInElements&&(vt.tagNameCheck instanceof RegExp&&v(vt.tagNameCheck,n)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(n))))return!1}else if(Ht[e]);else if(v(pt,m(n,dt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==b(n,"data:")||!Ut[t])if(At&&!v(ft,m(n,dt,"")));else if(n)return!1;return!0},we=function(t){return t.indexOf("-")>0},ke=function(t){ye("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bt};let o=e.length;for(;o--;){const i=e[o],{name:a,namespaceURI:s,value:l}=i,c=ee(a);let f="value"===a?l:y(l);if(r.attrName=c,r.attrValue=f,r.keepAttr=!0,r.forceKeepAttr=void 0,ye("uponSanitizeAttribute",t,r),f=r.attrValue,r.forceKeepAttr)continue;if(de(a,t),!r.keepAttr)continue;if(!Tt&&v(/\/>/i,f)){de(a,t);continue}_t&&u([st,lt,ct],(t=>{f=m(f,t," ")}));const d=ee(t.nodeName);if(xe(d,c,f)){if(!Dt||"id"!==c&&"name"!==c||(de(a,t),f=zt+f),Q&&"object"==typeof U&&"function"==typeof U.getAttributeType)if(s);else switch(U.getAttributeType(d,c)){case"TrustedHTML":f=Q.createHTML(f);break;case"TrustedScriptURL":f=Q.createScriptURL(f)}try{s?t.setAttributeNS(s,a,f):t.setAttribute(a,f),h(n.removed)}catch(t){}}}ye("afterSanitizeAttributes",t,null)},Me=function t(e){let n=null;const r=ge(e);for(ye("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)ye("uponSanitizeShadowNode",n,null),ve(n)||(n.content instanceof l&&t(n.content),ke(n));ye("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,i=null,a=null,s=null;if(Xt=!t,Xt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!be(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!n.isSupported)return t;if($t||ie(e),n.removed=[],"string"==typeof t&&(Pt=!1),Pt){if(t.nodeName){const e=ee(t.nodeName);if(!gt[e]||xt[e])throw x("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof w)r=pe("\x3c!----\x3e"),i=r.ownerDocument.importNode(t,!0),1===i.nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?r=i:r.appendChild(i);else{if(!St&&!_t&&!Et&&-1===t.indexOf("<"))return Q&&Lt?Q.createHTML(t):t;if(r=pe(t),!r)return St?null:Lt?tt:""}r&&Ot&&fe(r.firstChild);const c=ge(Pt?t:r);for(;a=c.nextNode();)ve(a)||(a.content instanceof l&&Me(a.content),ke(a));if(Pt)return t;if(St){if(Nt)for(s=rt.call(r.ownerDocument);r.firstChild;)s.appendChild(r.firstChild);else s=r;return(bt.shadowroot||bt.shadowrootmode)&&(s=it.call(o,s,!0)),s}let h=Et?r.outerHTML:r.innerHTML;return Et&&gt["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&v(W,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),_t&&u([st,lt,ct],(t=>{h=m(h,t," ")})),Q&&Lt?Q.createHTML(h):h},n.setConfig=function(){ie(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),$t=!0},n.clearConfig=function(){ne=null,$t=!1},n.isValidAttribute=function(t,e,n){ne||ie({});const r=ee(t),o=ee(e);return xe(r,o,n)},n.addHook=function(t,e){"function"==typeof e&&(at[t]=at[t]||[],f(at[t],e))},n.removeHook=function(t){if(at[t])return h(at[t])},n.removeHooks=function(t){at[t]&&(at[t]=[])},n.removeAllHooks=function(){at={}},n}var K=X();return K}()}(up)),up.exports}function fp(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}window.DOMPurify||(window.DOMPurify=hp().default||hp());var dp=ma,pp=lc,gp=Dl,mp=Ra;var bp=function(t,e,n){if(!mp(n))return!1;var r=typeof e;return!!("number"==r?pp(n)&&gp(e,n.length):"string"==r&&e in n)&&dp(n[e],t)},yp=Object.prototype.hasOwnProperty;var vp=function(t,e){return null!=t&&yp.call(t,e)},xp=vp,wp=ah;var kp=function(t,e){return null!=t&&wp(t,e,xp)},Mp=zo(kp);function Ap(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}var Tp=4.7421875,_p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Ep(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,o=t-1;r>1;)o*=r,r--;return 0===o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Ep(1-t));if(t>=171.35)return 1/0;if(t>85){var i=t*t,a=i*t,s=a*t,l=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*i)-139/(51840*a)-571/(2488320*s)+163879/(209018880*l)+5246819/(75246796800*l*t))}--t,n=_p[0];for(var c=1;c<_p.length;++c)n+=_p[c]/(t+c);return e=t+Tp+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}var $p=1/3;var Op=Object.freeze({__proto__:null,add:function(t,e){return Number(t)+Number(e)},sub:function(t,e){return t-e},mul:function(t,e){return t*e},div:function(t,e){return t/e},mod:function(t,e){return t%e},concat:function(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e},equal:function(t,e){return t===e},notEqual:function(t,e){return t!==e},greaterThan:function(t,e){return t>e},lessThan:function(t,e){return t<e},greaterThanEqual:function(t,e){return t>=e},lessThanEqual:function(t,e){return t<=e},andOperator:function(t,e){return Boolean(t&&e)},orOperator:function(t,e){return Boolean(t||e)},inOperator:function(t,e){return Ap(e,t)},sinh:function(t){return(Math.exp(t)-Math.exp(-t))/2},cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},tanh:function(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},asinh:function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},atanh:function(t){return Math.log((1+t)/(1-t))/2},log10:function(t){return Math.log(t)*Math.LOG10E},neg:function(t){return-t},not:function(t){return!t},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},random:function(t){return Math.random()*(t||1)},factorial:function(t){return Ep(t+1)},gamma:Ep,stringOrArrayLength:function(t){return Array.isArray(t)?t.length:String(t).length},hypot:function(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,o=Math.abs(arguments[n]);e<o?(t=t*(r=e/o)*r+1,e=o):t+=o>0?(r=o/e)*r:o}return e===1/0?1/0:e*Math.sqrt(t)},condition:function(t,e,n){return t?e:n},roundTo:function(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))},setVar:function(t,e,n){return n&&(n[t]=e),e},arrayIndex:function(t,e){return t[0|e]},max:function(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)},min:function(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)},arrayMap:function(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))},arrayFold:function(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)},arrayFilter:function(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))},stringOrArrayIndexOf:function(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)},arrayJoin:function(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)},sign:function(t){return(t>0)-(t<0)||+t},cbrt:function(t){return t<0?-Math.pow(-t,$p):Math.pow(t,$p)},expm1:function(t){return Math.exp(t)-1},log1p:function(t){return Math.log(1+t)},log2:function(t){return Math.log(t)/Math.LN2},sum:function(t){if(!Array.isArray(t))throw new Error("Sum argument is not an array");return t.reduce((function(t,e){return t+Number(e)}),0)}}),Sp="INUMBER",Np="IOP1",Lp="IOP2",Cp="IOP3",Dp="IVAR",zp="IVARNAME",Rp="IFUNCALL",Pp="IFUNDEF",jp="IEXPR",Ip="IEXPREVAL",Fp="IMEMBER",Up="IENDSTATEMENT",Bp="IARRAY";function Hp(t,e){this.type=t,this.value=null!=e?e:0}function Yp(t){return new Hp(Np,t)}function Wp(t){return new Hp(Lp,t)}function qp(t,e,n){var r,o,i,a,s,l,c=[];if(Vp(t))return Xp(t,n);for(var u=t.length,h=0;h<u;h++){var f=t[h],d=f.type;if(d===Sp||d===zp)c.push(f.value);else if(d===Lp)o=c.pop(),r=c.pop(),"and"===f.value?c.push(!!r&&!!qp(o,e,n)):"or"===f.value?c.push(!!r||!!qp(o,e,n)):"="===f.value?(a=e.binaryOps[f.value],c.push(a(r,qp(o,e,n),n))):(a=e.binaryOps[f.value],c.push(a(Xp(r,n),Xp(o,n))));else if(d===Cp)i=c.pop(),o=c.pop(),r=c.pop(),"?"===f.value?c.push(qp(r?o:i,e,n)):(a=e.ternaryOps[f.value],c.push(a(Xp(r,n),Xp(o,n),Xp(i,n))));else if(d===Dp){if(/^__proto__|prototype|constructor$/.test(f.value))throw new Error("prototype access detected");if(f.value in e.functions)c.push(e.functions[f.value]);else if(f.value in e.unaryOps&&e.parser.isOperatorEnabled(f.value))c.push(e.unaryOps[f.value]);else{var p=n[f.value];if(void 0===p)throw new Error("undefined variable: "+f.value);c.push(p)}}else if(d===Np)r=c.pop(),a=e.unaryOps[f.value],c.push(a(Xp(r,n)));else if(d===Rp){for(l=f.value,s=[];l-- >0;)s.unshift(Xp(c.pop(),n));if(!(a=c.pop()).apply||!a.call)throw new Error(a+" is not a function");c.push(a.apply(void 0,s))}else if(d===Pp)c.push(function(){for(var t=c.pop(),r=[],o=f.value;o-- >0;)r.unshift(c.pop());var i=c.pop(),a=function(){for(var o=Object.assign({},n),i=0,a=r.length;i<a;i++)o[r[i]]=arguments[i];return qp(t,e,o)};return Object.defineProperty(a,"name",{value:i,writable:!1}),n[i]=a,a}());else if(d===jp)c.push(Gp(f,e));else if(d===Ip)c.push(f);else if(d===Fp)r=c.pop(),c.push(r[f.value]);else if(d===Up)c.pop();else{if(d!==Bp)throw new Error("invalid Expression");for(l=f.value,s=[];l-- >0;)s.unshift(c.pop());c.push(s)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:Xp(c[0],n)}function Gp(t,e,n){return Vp(t)?t:{type:Ip,value:function(n){return qp(t.value,e,n)}}}function Vp(t){return t&&t.type===Ip}function Xp(t,e){return Vp(t)?t.value(e):t}Hp.prototype.toString=function(){switch(this.type){case Sp:case Np:case Lp:case Cp:case Dp:case zp:case Up:return this.value;case Rp:return"CALL "+this.value;case Pp:return"DEF "+this.value;case Bp:return"ARRAY "+this.value;case Fp:return"."+this.value;default:return"Invalid Instruction"}};var Kp="TEOF",Zp="TOP",Jp="TNUMBER",Qp="TSTRING",tg="TPAREN",eg="TBRACKET",ng="TCOMMA",rg="TNAME",og="TSEMICOLON";function ig(t,e,n){this.type=t,this.value=e,this.index=n}function ag(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}ig.prototype.toString=function(){return this.type+": "+this.value},ag.prototype.newToken=function(t,e,n){return new ig(t,e,null!=n?n:this.pos)},ag.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},ag.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},ag.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(Kp,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},ag.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var o=this.expression.substring(e+1,r);this.current=this.newToken(Qp,this.unescape(o),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},ag.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(tg,t),this.pos++,!0)},ag.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken(eg,t),this.pos++,!0)},ag.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(ng,","),this.pos++,!0)},ag.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(og,";"),this.pos++,!0)},ag.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken(Jp,this.consts[r]),this.pos+=r.length,!0}return!1},ag.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(Zp,r),this.pos+=r.length,!0}return!1},ag.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var o=this.expression.substring(t,e);return this.current=this.newToken(rg,o),this.pos+=o.length,!0}return!1},ag.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var sg=/^[0-9a-f]{4}$/i;function lg(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess,this.restrictMemberAccess=new Set(n.restrictMemberAccess||[])}ag.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var o=t.substring(e+1,e+5);sg.test(o)||this.parseError("Illegal escape sequence: \\u"+o),n+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var i=t.indexOf("\\",e);n+=t.substring(e,i<0?t.length:i),e=i}return n},ag.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},ag.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,o=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!e.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(Jp,parseInt(this.expression.substring(o,n),t)),this.pos=n),r},ag.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,o=n,i=!1,a=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!i&&"."===t);)"."===t?i=!0:a=!0,n++,e=a;if(e&&(o=n),"e"===t||"E"===t){n++;for(var s=!0,l=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;l=!0,s=!1}else s=!1;n++}l||(n=o)}return e?(this.current=this.newToken(Jp,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=o,e},ag.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(Zp,e);else if("∙"===e||"•"===e)this.current=this.newToken(Zp,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Zp,">="),this.pos++):this.current=this.newToken(Zp,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Zp,"<="),this.pos++):this.current=this.newToken(Zp,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Zp,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Zp,"=="),this.pos++):this.current=this.newToken(Zp,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Zp,"!="),this.pos++):this.current=this.newToken(Zp,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},ag.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},ag.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},ag.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},lg.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},lg.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?Ap(e,t.value):"function"==typeof e?e(t):t.value===e)},lg.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},lg.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},lg.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},lg.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},lg.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept(rg)||this.accept(Zp,(function(t){return t.value in e})))t.push(new Hp(Dp,this.current.value));else if(this.accept(Jp))t.push(new Hp(Sp,this.current.value));else if(this.accept(Qp))t.push(new Hp(Sp,this.current.value));else if(this.accept(tg,"("))this.parseExpression(t),this.expect(tg,")");else{if(!this.accept(eg,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(eg,"]"))t.push(new Hp(Bp,0));else{var n=this.parseArrayList(t);t.push(new Hp(Bp,n))}}},lg.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},lg.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},lg.prototype.parseUntilEndStatement=function(t,e){return!!this.accept(og)&&(!this.nextToken||this.nextToken.type===Kp||this.nextToken.type===tg&&")"===this.nextToken.value||e.push(new Hp(Up)),this.nextToken.type!==Kp&&this.parseExpression(e),t.push(new Hp(jp,e)),!0)},lg.prototype.parseArrayList=function(t){for(var e=0;!this.accept(eg,"]");)for(this.parseExpression(t),++e;this.accept(ng);)this.parseExpression(t),++e;return e},lg.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(Zp,"=");){var e=t.pop(),n=[],r=t.length-1;if(e.type!==Rp){if(e.type!==Dp&&e.type!==Fp)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new Hp(zp,e.value)),t.push(new Hp(jp,n)),t.push(Wp("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=e.value+1;o<i;o++){var a=r-o;t[a].type===Dp&&(t[a]=new Hp(zp,t[a].value))}this.parseVariableAssignmentExpression(n),t.push(new Hp(jp,n)),t.push(new Hp(Pp,e.value))}}},lg.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(Zp,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(Zp,":"),this.parseConditionalExpression(n),t.push(new Hp(jp,e)),t.push(new Hp(jp,n)),t.push(new Hp(Cp,"?"))}},lg.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(Zp,"or");){var e=[];this.parseAndExpression(e),t.push(new Hp(jp,e)),t.push(Wp("or"))}},lg.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(Zp,"and");){var e=[];this.parseComparison(e),t.push(new Hp(jp,e)),t.push(Wp("and"))}};var cg=["==","!=","<","<=",">=",">","in"];lg.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(Zp,cg);){var e=this.current;this.parseAddSub(t),t.push(Wp(e.value))}};var ug=["+","-","||"];lg.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(Zp,ug);){var e=this.current;this.parseTerm(t),t.push(Wp(e.value))}};var hg=["*","/","%"];lg.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(Zp,hg);){var e=this.current;this.parseFactor(t),t.push(Wp(e.value))}},lg.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(Zp,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===tg&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if(this.nextToken.type===og||this.nextToken.type===ng||this.nextToken.type===Kp||this.nextToken.type===tg&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(Yp(n.value))}else this.parseExponential(t)},lg.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(Zp,"^");)this.parseFactor(t),t.push(Wp("^"))},lg.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(Zp,"!");)t.push(Yp("!"))},lg.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(Zp,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(Yp(n.value))}else for(this.parseMemberExpression(t);this.accept(tg,"(");)if(this.accept(tg,")"))t.push(new Hp(Rp,0));else{var r=this.parseArgumentList(t);t.push(new Hp(Rp,r))}},lg.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(tg,")");)for(this.parseExpression(t),++e;this.accept(ng);)this.parseExpression(t),++e;return e},lg.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(Zp,".")||this.accept(eg,"[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');if(this.restrictMemberAccess.has(this.nextToken.value))throw new Error('access to member "'+this.nextToken.value+'" is not permitted');this.expect(rg),t.push(new Hp(Fp,this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect(eg,"]"),t.push(Wp("["))}}};const{add:fg,sub:dg,mul:pg,div:gg,mod:mg,equal:bg,notEqual:yg,greaterThan:vg,lessThan:xg,greaterThanEqual:wg,lessThanEqual:kg,andOperator:Mg,orOperator:Ag,log10:Tg,neg:_g,not:Eg,trunc:$g,random:Og,stringOrArrayLength:Sg,condition:Ng,roundTo:Lg,arrayIndex:Cg,max:Dg,min:zg,sum:Rg,arrayMap:Pg,arrayFold:jg,arrayFilter:Ig,sign:Fg,log1p:Ug,log2:Bg}=Op;function Hg(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function Yg(t){return t.trim()}Hg.prototype.evaluate=function(t){return t=t||{},qp(this.tokens,this,t)},Hg.prototype.variables=function(){return(this.tokens||[]).filter((t=>"IVAR"===t.type)).map((t=>t.value))};const Wg=new Set(["__proto__","prototype","constructor"]);function qg(t){this.options=t||{},this.unaryOps={SIN:Math.sin,COS:Math.cos,TAN:Math.tan,ASIN:Math.asin,ACOS:Math.acos,ATAN:Math.atan,SQRT:Math.sqrt,LOG:Math.log,LOG2:Math.log2||Bg,LN:Math.log,LOG10:Math.log10||Tg,LG:Math.log10||Tg,LOG1P:Math.log1p||Ug,ABS:Math.abs,CEIL:Math.ceil,FLOOR:Math.floor,ISNULL:t=>null===t,TRUNC:Math.trunc||$g,"-":_g,"+":Number,EXP:Math.exp,NOT:Eg,LENGTH:Sg,"!":Eg,SIGN:Math.sign||Fg,TEXT:t=>e(t)?t.toISOString():String(t),NUMBER:Number},this.binaryOps={"+":fg,"-":dg,"*":pg,"/":gg,"%":mg,"^":Math.pow,"==":bg,"!=":yg,">":vg,"<":xg,">=":wg,"<=":kg,and:Mg,or:Ag,in:(t,e)=>Array.isArray(e)?e.includes(t):String(e).includes(t),"[":Cg},this.ternaryOps={"?":Ng};const e=t=>t instanceof Date&&!isNaN(t),n=t=>{if(e(t))return t;try{const n=new Date(t);return e(n)?n:null}catch(t){return null}};function r(t){return(1===arguments.length&&Array.isArray(t)?t:Array.from(arguments)).slice(0).filter((t=>!isNaN(t)&&Number.isFinite(t)))}let o=/\w*/g,i=/\w\S*/g;const a=/[\\^$*+?.()|[\]{}]/g;try{o=new RegExp("\\p{L}*","ug"),i=new RegExp("[\\p{L}\\p{N}]\\S*","ug")}catch(t){}this.functions={IF:Ng,RANDOM:Og,MIN(){const t=r.apply(this,arguments);return zg(t)},MAX(){return Dg(r.apply(this,arguments))},SUM(){return Rg(r.apply(this,arguments))},MEAN(){const t=r.apply(this,arguments);return Rg(t)/t.length},MEDIAN(){const t=r.apply(this,arguments).sort(((t,e)=>t-e)),e=Math.floor(t.length/2);return t.length%2==1?t[e]:.5*(t[e-1]+t[e])},POW:Math.pow,ATAN2:Math.atan2,ROUND:Lg,CONCAT(){return Array.from(arguments).join("")},TRIM:Yg,SUBSTR:(t,e,n)=>t.substr(e,n),REPLACE:(t,e,n)=>t.replace(new RegExp(String(e).replace(a,"\\$&"),"g"),n),REPLACE_REGEX:(t,e,n)=>t.replace(new RegExp(e,"g"),n),SPLIT:(t,e)=>String(t).split(e),LOWER:t=>String(t).toLowerCase(),UPPER:t=>String(t).toUpperCase(),PROPER:t=>String(t).replace(o,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),TITLE:t=>String(t).replace(i,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),SORT(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Wg.has(n))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to SORT is not an array");return t.slice(0).sort(((t,r)=>((t="string"==typeof n?t[n]:"function"==typeof n?n(t):t)>(r="string"==typeof n?r[n]:"function"==typeof n?n(r):r)?1:t<r?-1:0)*(e?1:-1)))},SLICE(t,e,n){if(!Array.isArray(t))throw new Error("First argument to SLICE is not an array");return t.slice(e,n)},JOIN(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw new Error("First argument to JOIN is not an array");return n?[t.slice(0,t.length-1).join(e),t[t.length-1]].join(n):t.join(e)},MAP:Pg,FOLD:jg,FILTER:Ig,PLUCK(t,e){if(Wg.has(e))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to PLUCK is not an array");return t.map((t=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:null))},INDEXOF:(t,e)=>(Array.isArray(t)||(t=String(t)),t.indexOf(e)),FIND(t,e){if(!Array.isArray(t))throw new Error("First argument to FIND is not an array");if("function"!=typeof e)throw new Error("Second argument to FIND is not a function");const n=t.length;for(let r=0;r<n;r++)if(e(t[r]))return t[r];return null},RANGE(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},EVERY(t,e){if(!Array.isArray(t))throw new Error("First argument to EVERY is not an array");if("function"!=typeof e)throw new Error("Second argument to EVERY is not a function");const n=t.length;let r=!0;for(let o=0;o<n;o++)if(r=r&&e(t[o]),!r)return!1;return!0},SOME(t,e){if(!Array.isArray(t))throw new Error("First argument to SOME is not an array");if("function"!=typeof e)throw new Error("Second argument to SOME is not a function");const n=t.length;let r=!1;for(let o=0;o<n;o++)if(r=r||e(t[o]),r)return!0;return!1},DATE(){return arguments.length>1&&(arguments[1]=arguments[1]-1),new Date(...arguments)},YEAR:t=>(t=n(t))?t.getFullYear():null,MONTH:t=>(t=n(t))?t.getMonth()+1:null,DAY:t=>(t=n(t))?t.getDate():null,WEEKDAY:t=>(t=n(t))?t.getDay():null,HOURS:t=>(t=n(t))?t.getHours():null,MINUTES:t=>(t=n(t))?t.getMinutes():null,SECONDS:t=>(t=n(t))?t.getSeconds():null,DATEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/864e5:null),TIMEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/1e3:null)},this.unaryOps.LOWER=this.functions.LOWER,this.unaryOps.UPPER=this.functions.UPPER,this.unaryOps.PROPER=this.functions.PROPER,this.unaryOps.TITLE=this.functions.TITLE,this.unaryOps.TRIM=this.functions.TRIM,this.unaryOps.YEAR=this.functions.YEAR,this.unaryOps.MONTH=this.functions.MONTH,this.unaryOps.DAY=this.functions.DAY,this.unaryOps.WEEKDAY=this.functions.WEEKDAY,this.unaryOps.HOURS=this.functions.HOURS,this.unaryOps.MINUTES=this.functions.MINUTES,this.unaryOps.SECONDS=this.functions.SECONDS,this.consts={E:Math.E,PI:Math.PI,TRUE:!0,FALSE:!1,NA:Number.NaN,NULL:Number.NaN}}qg.prototype.parse=function(t){var e=[],n=new lg(this,new ag(this,t),{allowMemberAccess:!0,restrictMemberAccess:Wg});return n.parseExpression(e),n.expect(Kp,"EOF"),new Hg(e,this)},qg.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Gg=new qg;qg.parse=function(t){return Gg.parse(t)},qg.evaluate=function(t,e){return Gg.parse(t).evaluate(e)},qg.keywords=["ABS","ACOS","ACOSH","and","ASIN","ASINH","ATAN","ATAN2","ATANH","CBRT","CEIL","CONCAT","COS","COSH","DATEDIFF","DAY","E","EVERY","EXP","EXPM1","FIND","FLOOR","HOURS","IF","in","INDEXOF","ISNULL","JOIN","LENGTH","LN","LOG","LOG10","LOG1P","LOG2","LOWER","MAP","MAX","MEAN","MEDIAN","MIN","MINUTES","MONTH","NOT","NOT","or","PI","PLUCK","POW","PROPER","RANDOM","RANGE","REPLACE","REPLACE_REGEX","ROUND","SECONDS","SIGN","SIN","SINH","SLICE","SOME","SORT","SPLIT","SQRT","SUBSTR","SUM","TAN","TANH","TIMEDIFF","TITLE","TRIM","TRUNC","UPPER","WEEKDAY","YEAR"];var Vg={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",AND:"logical",OR:"logical",NOT:"logical",IN:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};qg.prototype.isOperatorEnabled=function(t){var e=function(t){return Object.prototype.hasOwnProperty.call(Vg,t)?Vg[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};const Xg="%UNDEFINED%",Kg={color:{prop:"color"},fontWeight:{prop:"font-weight"},fontStretch:{prop:"font-stretch"},typeface:{prop:"font-family"},textTransform:{prop:"text-transform"},letterSpacing:{tsf:t=>Zg(t),prop:"letter-spacing"},fontSize:{prop:"font-size",tsf:t=>Zg(t)},lineHeight:{prop:"line-height",tsf:t=>{return(e=t)===Xg?e:e>3?"".concat(e,"px"):String(e);var e}},underlined:{prop:"text-decoration",tsf:t=>t?"underline":"none"},cursive:{prop:"font-style",tsf:t=>t?"italic":"normal"}};function Zg(t){return t===Xg?t:Number.isFinite(t)?"".concat(t,"px"):t}function Jg(t,e,n){if(2===t.version){for(const n of["chart","bodyCenter","bodyTop","body"])if(Mp(t,["blocks",n,"styles","typography",e]))return Wh(t,["blocks",n,"styles","typography",e]);return n}return Wh(t,"typography.chart.".concat(e),n)}const Qg={a:9,A:10,b:9,B:10,c:8,C:10,d:9,D:11,e:9,E:9,f:5,F:8,g:9,G:11,h:9,H:11,i:4,I:4,j:4,J:4,k:8,K:9,l:4,L:8,m:14,M:12,n:9,N:10,o:9,O:11,p:9,P:8,q:9,Q:11,r:6,R:10,s:7,S:9,t:5,T:9,u:9,U:10,v:8,V:10,w:11,W:14,x:8,X:10,y:8,Y:9,z:7,Z:10,".":4,"!":4,"|":4,",":4,":":5,";":5,"-":5,"+":12," ":4};var tm={exports:{}};!function(t,e){var n,r;t.exports=(n="week",r="year",function(t,e,o){var i=e.prototype;i.week=function(t){if(void 0===t&&(t=null),null!==t)return this.add(7*(t-this.week()),"day");var e=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var i=o(this).startOf(r).add(1,r).date(e),a=o(this).endOf(n);if(i.isBefore(a))return 1}var s=o(this).startOf(r).date(e).startOf(n).subtract(1,"millisecond"),l=this.diff(s,n,!0);return l<0?o(this).startOf("week").week():Math.ceil(l)},i.weeks=function(t){return void 0===t&&(t=null),this.week(t)}})}(tm);var em=zo(tm.exports);const nm=(t,e)=>{const n=e.prototype,r=n.format;n.format=function(t){const e=t||"YYYY-MM-DDTHH:mm:ssZ",n=this.$locale().seasonSeparator||"-",o=e.replace(/(\[[^\]]+])|BB|B/g,((t,e)=>{const r=this.$y,o=r+1,i="B"===t,a=i?[String(r).slice(-2),2]:[r,4],s=[String(o).slice(-2),2];return e||"".concat(i?"'":"").concat(this.$utils().s(...a,"0")).concat(n).concat(i?"'":"").concat(this.$utils().s(...s,"0"))}));return r.bind(this)(o)}};function rm(t,e,n,r){const o=Wh(e,"ticks.major",{}),i=Wh(e,"ticks.minor",{});let a=o.values;const s=e.scale.domain(),l=e.scale.range(),c=o.spacing||80,u=Math.abs(l[1]-l[0])/c,{scale:h,scaleType:f}=e;if("text"===f&&e.customFormatFunction){const t=xt(0,s[1],s[1]),e=Math.max(1,Math.round(t.length/u)),n=t.filter((t=>t%e==0));return{ticksMajor:r?n:t,ticksMinor:[]}}a&&a.length||(a=r?function(t,e,n,r){const{scale:o,theme:i,scaleType:a}=e,s=Wh(n,"tickLabels.fontSize",Jg(i,"fontSize",12)),l=Wh(n,"tickLabels.buffer",10),c=u(t,r);return c;function u(t,r,i){const c=om(a,o,o.domain(),r).sort(((t,e)=>o(t)-o(e)));if(Math.round(r)>1&&c.length>1){if(i&&c.length===i.length)return u(t,r-1,c);{const{tickFormat:i,multiFormat:a}=cm(t,e,c,n),h=c.map(((t,e)=>{let n=i(t,0===e,e===c.length-1);return a||(n=[n]),Math.max(...n.map((t=>function(t){if(!t)return 0;const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:14)/14;return t.split("").reduce(((t,e)=>t+(Qg[e]||Qg.a)),0)*e}(t,s))))}));let f=l,d=null;if(c.forEach(((t,e)=>{const n=o(t);d&&(f=Math.min(n-h[e]/2-d,f)),d=n+h[e]/2})),f<l)return u(t,r-1,c)}}return c}}(t,e,n,u):om(f,h,s,u),"number"!==e.scaleType&&"log"!==e.scaleType||"0o"!==e.tickLabelFormat||(a=a.filter((t=>t%1==0)))),"text"!==e.scaleType&&(a=a.filter("date"===e.scaleType?t=>t.getTime()>=Math.min(s[0].getTime(),s[1].getTime())&&t.getTime()<=Math.max(s[0].getTime(),s[1].getTime()):t=>t>=Math.min(s[0],s[1])&&t<=Math.max(s[0],s[1])));let d=!!Xi(i.values)&&i.values;if(!d&&i.count){d=[];for(let t=0;t<a.length-1;t++){const e=Math.min(a[t],a[t+1]),n=Math.max(a[t],a[t+1]),r=xt(e,n,i.count).filter((t=>t>e&&t<n));d.push.apply(d,r)}}return{ticksMajor:a,ticksMinor:d}}function om(t,e,n,r){const o=Math.round(r);switch(t){case"text":{const t=e.domain(),n=Math.max(1,Math.round(t.length/r));return t.filter(((t,e)=>e%n==0))}case"log":{const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const n=t[0]<0&&t[1]<0;n&&(t=[-1*t[0],-1*t[1]]);const r=t[1]<t[0];r&&(t=t.slice(0).reverse());if(t[0]<0||t[1]<0)return[];let o=1;e+=2;let i=am(t,o);if(i[0].num>e)for(;i[0].num>e;)o*=10,i=am(t,o);else if(i[i.length-1].num<e){const n=xt(t[0],t[1],e-2);return r&&n.reverse(),n}e-=2;const a=i.map((e=>({...e,ticks:e.ticks.filter((e=>e>=t[0]&&e<=t[1]))}))).map((t=>({...t,diff:Math.abs(t.ticks.length-e)}))).sort(((t,e)=>t.diff-e.diff))[0].ticks;r&&a.reverse();return n?a.map((t=>-1*t)):a}(n,o);return t.length>1?t:e.ticks(o)}default:return e.ticks(o)}}yi.extend(Wd),yi.extend(em),yi.extend(Gd),yi.extend(nm);const im=[[10],[5,4,5],[3,10/3],[2,2.5,2],[1.5,2,5/3,2]];function am(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return im.map((n=>{let r=Math.pow(10,Math.floor(Math.log(t[0])/Math.LN10)),o=0;const i=[r];for(;r<t[1];)r*=n[o]*e,i.push(r),o=(o+1)%n.length;return{ticks:i,num:i.length}}))}const sm=/^[^0-9 .,|-]+$/;function lm(t,e,n){let r=null;t.each((function(){if(this){const i=this.getBoundingClientRect();t=i,o=this,r&&e(r,t)?n?(at(o).selectAll("tspan").each((function(t){o.innerHTML===t.line&&t.line.length>5&&t.line&&sm.test(t.line)&&(o.innerHTML=t.line.substr(0,3)+"…")})),t=o.getBoundingClientRect(),e(r,t)?at(o).style("display","none"):t.width>0&&t.height>0&&(r=t)):at(o).style("display","none"):t.width>0&&t.height>0&&(r=t)}var t,o}))}function cm(t,e){let{scale:n,scaleType:r,tickLabelFormat:o,tickLabelUnit:i,tickLabelMultiply:a,minusChar:s,plusMinusChar:l,customFormatFunction:c}=e,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],h=arguments.length>3?arguments[3]:void 0,f=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(o&&"auto"!==o||("date"===r?o=function(t,e){const n=Math.abs(t[1].getTime()-t[0].getTime()),r=e&&e.length>0;let o=r,i=r,a=r,s=r,l=r,c=r;r&&e.forEach((t=>{o=o&&0===t.getMonth()&&1===t.getDate()&&0===t.getHours()&&0===t.getMinutes(),i=i&&pm.has(t.getMonth())&&1===t.getDate()&&0===t.getHours()&&0===t.getMinutes(),a=a&&1===t.getDate()&&0===t.getHours()&&0===t.getMinutes(),s=s&&0===t.getDay()&&0===t.getHours()&&0===t.getMinutes(),l=l&&0===t.getHours()&&0===t.getMinutes(),c=c&&0===t.getMinutes()}));return o?"YYYY":i||a?n>5*dm?"YY|MMM":"YYYY|MMM":s?n>2*fm?"MMM|D":"MMMM|D":l?n>dm?"MMM YYYY|D":n>fm?"MMM|D":"D.M.":c?n<hm?"h a":"MMM D|h a":n<hm?"LT":"MMM D|LT"}(n.domain(),u):"number"!==r&&"log"!==r||(o=function(t){const e=Math.abs(t[1]-t[0]);return e<1?"0,0.00[0]":e<3?"0,0.0[0]":e<1e4?"0,0.[0]":e>1e6||Math.abs(t[0])>1e5||Math.abs(t[1])>1e5?"0,0.[0]a":"0,0"}(n.domain()))),"number"===r||"log"===r){const e=Wh(h,"tickLabels.units","all");return{multiFormat:!1,tickFormat(n,r,c){const u=f||"all"===e||"first"===e&&r||"last"===e&&c;return af(t,n,{multiply:a,format:u?o:o.replace(/[%$]/g,""),prepend:u?i[0]:"",append:u?i[1]:"",minusChar:s,plusMinusChar:l})}}}if("date"===r){let t;if(f&&(o=o.replace(/\w+/g,(t=>um[t]||t))),o.indexOf("~~")>-1){const e=o.split("~~");t=t=>yi(t).format(e[0]),o=e[1]}const e=o.split("|"),n=e.length>1,r=n?function(t,e){const n=new Array(t.length);return t=t.filter(((t,n)=>!n||Nd(e.map(t)).length>1)),e=>{let r;const o=[];for(let i=0,a=t.length;i<a;i++)if(r=t[i](e),r!==n[i]){n[i]=r;for(let t=i+1;t<a;t++)n[t]=void 0;o.unshift(r)}return o}}(e.map((t=>e=>yi(e).format(t))),u):t=>yi(t).format(o);return{multiFormat:n,tickFormat:function(e,o,i){return t&&o?n?[t(e)]:t(e):r(e,o,i)}}}return{multiFormat:!0,keepOrder:!0,tickFormat:t=>("number"==typeof t&&c&&(t=c(t)),(t||"").split(/(?:\n|<br>|<br\/>)/i))}}const um={YY:"YYYY",M:"MMMM",MM:"MMMM",MMM:"MMMM",DD:"D",dd:"dddd",ddd:"dddd"};const hm=864e5,fm=30*hm,dm=365*hm,pm=new Set([0,3,6,9]);function gm(t,e,n,r,o,i){const{scale:a,scaleType:s,translate:l}=r,{tickFormat:c}=cm(t,r,i,o,!0),u=c(a.domain()[0]),h=c(a.domain()[1]),f="text"===s?"category":"date"===s?"datetime":"number";e.at({role:"graphics-axis","aria-orientation":"x"===n?"horizontal":"vertical","aria-valuemin":u,"aria-valuemax":h,"aria-datatype":f,"aria-label":l("accessibility / xy-grid / axis-".concat(n,"-").concat(s)).replace("%from%",u).replace("%to%",h)+("log"===s?" ".concat(l("accessibility / xy-grid / axis-log")):"")})}function mm(t,e){let{gridLines:n}=t,{css:r}=e;return r("\n    line.major {\n        ".concat(vm(n.major),"\n    }\n    line.minor {\n        ").concat(vm(n.minor),"\n    }\n"))}function bm(t,e){let{tickLines:n}=t,{css:r}=e;return r("\n    line {\n        ".concat(vm(n),"\n    }\n    ").concat(n.hideZero?"line.is-zero { display: none }":"","\n"))}function ym(t,e){let{baseLine:n}=t,{css:r}=e;return r("\n    line {\n        ".concat(vm(n),"\n    }\n"))}function vm(t){return"dotted"===t.strokeDasharray&&(t.strokeDasharray="".concat(t.width," ").concat(t.width)),wm(t,[["color","stroke"],["opacity","opacity"],["width","stroke-width"],["strokeLinecap","stroke-linecap"],["strokeDasharray","stroke-dasharray"]])+(!1!==t.crisp?"\nshape-rendering: crispEdges;":"")}function xm(t){return wm(t,[["color","fill"],["opacity","opacity"],["fontSize","font-size",void 0,"px"],["letterSpacing","letter-spacing"],["fontWeight","font-weight"],["fontStyle","font-style"],["typeface","font-family"],["textTransform","text-transform"]])}function wm(t,e){return e.filter((e=>{const n=e[0],r=e[2];return void 0!==t[n]||r})).map((e=>{let[n,r,o,i]=e;return"".concat(r,": ").concat(void 0===t[n]?o:t[n]).concat(i||"",";")})).join("\n")}var km=function(t){return function(e){return null==t?void 0:t[e]}},Mm=km({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Am=Fu,Tm=Mm,_m=/&(?:amp|lt|gt|quot|#39);/g,Em=RegExp(_m.source);var $m=function(t){return(t=Am(t))&&Em.test(t)?t.replace(_m,Tm):t},Om=zo($m);function Sm(t){let{options:e,themeOpts:n,ticksMajor:r}=t;const{tickPosition:o,plotSize:i,scale:a,tickLines:s,aboveChart:l,belowChart:c,className:u,rtl:h}=e,f=(Wh(n,"tickLines.aboveChart")?l:c).attr("dir",h?"rtl":"ltr").selectAppend("g.x-tick-lines".concat(u?"."+u:"")).html("").translate("bottom"===o?[0,i[1]]:[0,0]);if(!s)return f.remove();f.node().classList.add(bm(n,e.emotion)),f.selectAll("line").remove();const d="bottom"===o?1:-1,p=Wh(n,"tickLines.distance"),g=Wh(n,"tickLines.length"),m=Wh(n,"tickLines.strokeLinecap"),b=Wh(n,"tickLines.width");return f.appendMany("line.x-tick-line",r).translate((t=>[a(t),p*d])).classed("is-zero",(t=>0===t)).attr("y1",(()=>g*d)),{left:.5*b,right:.5*b,height:p+g+("square"===m||"round"===m?.5*b:0)}}function Nm(t){let{options:e,themeOpts:n,ticksMajor:r,numeral:o}=t;const{tickPosition:i,plotSize:a,scale:s,tickLines:l,tickLabels:c,aboveChart:u,belowChart:h,className:f,fitLabels:d,scaleType:p,theme:g,rtl:m}=e,b=(Wh(n,"tickLabels.aboveChart")?u:h).selectAppend("g.x-tick-labels".concat(f?"."+f:"",".").concat(p,"-axis")).html("");if(!c)return b.remove();b.node().classList.add(function(t,e){let{tickLabels:n}=t,{css:r}=e;return r("\n    text {\n        text-anchor: middle;\n    }\n    ".concat(n.hideZero?"text.is-zero { display: none }":"","\n    text tspan {\n        ").concat(xm(n),"\n    }\n"))}(n,e.emotion)),b.selectAll("text").remove();const y=(l?Wh(n,"tickLines.distance")+Wh(n,"tickLines.length"):0)+Wh(n,"tickLabels.distance");b.translate("bottom"===i?[0,a[1]+y]:[0,-y-3]);const v=Wh(n,"tickLabels.fontSize",Jg(g,"fontSize",12));r=r.sort(((t,e)=>s(t)-s(e))),m&&r.reverse();const{tickFormat:x,multiFormat:w,keepOrder:k}=cm(o,e,r,n);gm(o,b,"x",e,n,r);let M=b.appendMany("text.x-tick-label.".concat(i),r).translate((t=>[s(t),"bottom"===i?v:0])).attr("y",0).attr("aria-hidden","true").classed("dw-bold","bold"===Wh(n,"tickLabels.fontWeight")).classed("dw-italic","italic"===Wh(n,"tickLabels.fontStyle")).classed("is-zero",(t=>0===t)).classed("first",((t,e)=>m?e===r.length-1:0===e)).classed("last",((t,e)=>m?0===e:e===r.length-1)).tspans(((t,e)=>{const n=0===e,o=e===r.length-1,a=w?x(t,n,o):[x(t,n,o)];return k||"top"!==i||a.reverse(),a.map(Om)}),v+3).parent().attr("y",((t,e,n)=>{const r=at(n[0]).selectAll("tspan").size();return"top"===i?(r-1)*(v+3)*-1:0}));if(d.length){const t=u.parent().node().getBoundingClientRect();d.forEach((e=>{const n=b.select(".x-tick-label.".concat(e)),r=n.node();if(!r)return;const o=r.getBoundingClientRect(),i=o.x<t.x,a=t.x+t.width<o.x+o.width;"first"===e&&i&&n.style("text-anchor",m?"end":"start"),"last"===e&&a&&n.style("text-anchor",m?"start":"end")}))}m&&(M=function(t){return"string"==typeof t?new ot([document.querySelectorAll(t)],[document.documentElement]):new ot([null==t?[]:t],rt)}(M.nodes().reverse())),lm(M,((t,e)=>t.x+t.width+4>e.x),!0);const A=b.node().getBBox(),T=Math.max(-1*A.x,0);return{left:T,right:A.width+(T>0?0:A.x)-e.plotSize[0]-T,height:b.node().getBoundingClientRect().height+y+Wh(n,"tickLabels.extraSpace",1)}}function Lm(t){let{options:e,themeOpts:n,ticksMajor:r,ticksMinor:o}=t;const{plotSize:i,scale:a,baseLine:s,gridLines:l,aboveChart:c,belowChart:u,className:h}=e,f=(Wh(n,"gridLines.aboveChart")?c:u).selectAppend("g.x-grid-lines".concat(h?"."+h:"")).html("");if(!l)return f.remove();f.node().classList.add(mm(n,e.emotion)),f.selectAll("line").remove(),o.length&&f.appendMany("line.x-grid-line.minor",o).translate((t=>[a(t),0])).attr("y1",i[1]),r.length&&f.appendMany("line.x-grid-line.major",r.filter((t=>!s.includes("zero")||0!==t))).classed("is-zero",(t=>0===t)).translate((t=>[a(t),0])).attr("y1",i[1])}function Cm(t){let{options:e,themeOpts:n,ticksMajor:r}=t;const{plotSize:o,scale:i,aboveChart:a,belowChart:s,baseLine:l,className:c}=e,u=(Wh(n,"baseLine.aboveChart")?a:s).selectAppend("g.x-base-lines".concat(c?"."+c:"")).html("");u.node().classList.add(ym(n,e.emotion)),u.selectAll("line").remove(),u.appendMany("line",l.filter((t=>"zero"!==t||r.includes(0)))).translate((t=>["zero"===t?i(0):"left"===t?0:o[0],0])).attr("y1",o[1]);const h=Wh(n,"baseLine.width");return{left:l.includes("left")?h:0,right:l.includes("right")?h:0}}function Dm(t){let{options:e,themeOpts:n,ticksMajor:r}=t;const{tickPosition:o,plotSize:i,scale:a,tickLines:s,aboveChart:l,belowChart:c,className:u,tickLabelsInside:h}=e,f=(Wh(n,"tickLines.aboveChart")?l:c).selectAppend("g.y-tick-lines".concat(u?"."+u:"")).html("").translate("right"===o?[i[0],0]:[0,0]);if(!s)return f.remove();f.node().classList.add(bm(n,e.emotion)),f.selectAll("line").remove();const d="right"===o?1:-1,p=Wh(n,"tickLines.length".concat(h?"Inside":""),Wh(n,"tickLines.length")),g=h?-p:Wh(n,"tickLines.distance"),m=Wh(n,"tickLines.strokeLinecap"),b=Wh(n,"tickLines.width");return f.appendMany("line.y-tick-line",r).classed("is-zero",(t=>0===t)).translate((t=>[g*d,a(t)])).attr("x2",(()=>p*d)),{top:.5*b,bottom:.5*b,width:g+p+("square"===m||"round"===m?.5*b:0)}}function zm(t){let{options:e,themeOpts:n,ticksMajor:r,numeral:o}=t;const{tickPosition:i,plotSize:a,scale:s,tickLines:l,tickLabels:c,aboveChart:u,belowChart:h,className:f,tickLabelsInside:d,scaleType:p,theme:g,rtl:m}=e,b=(Wh(n,"tickLabels.aboveChart")?u:h).attr("dir",m?"rtl":"ltr").selectAppend("g.y-tick-labels".concat(f?"."+f:"",".").concat(p,"-axis")).html("");if(b.selectAll("text").remove(),!c)return b.remove();b.node().classList.add(function(t,e){let{tickLabels:n,rtl:r}=t,{css:o}=e;return o("\n    text {}\n    ".concat(n.hideZero?"text.is-zero { display: none }":"","\n    text tspan {\n        ").concat(xm(n),"\n    }\n    text.right {\n        text-anchor: ").concat(r?"end":"start",";\n    }\n    text.right.inside {\n        text-anchor: ").concat(r?"start":"end",";\n    }\n    text.left {\n        text-anchor: ").concat(r?"start":"end",";\n    }\n    text.left.inside {\n        text-anchor: ").concat(r?"end":"start",";\n    }\n"))}({...n,rtl:m},e.emotion));const y=d?0:(l?Wh(n,"tickLines.distance")+Wh(n,"tickLines.length"):0)+Wh(n,"tickLabels.distance");b.translate("right"===i?[a[0]+y,0]:[-y,0]);const v=Wh(n,"tickLabels.fontSize",Jg(g,"fontSize",12));r=r.sort(((t,e)=>s(e)-s(t)));const{tickFormat:x,multiFormat:w,keepOrder:k}=cm(o,e,r,n),M=n.tickLabels.hideZero&&0===r[r.length-1],A=n.tickLabels.hideZero&&0===r[0];gm(o,b,"y",e,n,r);const T=b.appendMany("text.y-tick-label.".concat(i),r).classed("inside",!!d).attr("aria-hidden",!0).translate((t=>[0,s(t)+Math.floor(v*(d?0:.4))-(d?5:0)])).classed("dw-bold","bold"===Wh(n,"tickLabels.fontWeight")).classed("dw-italic","italic"===Wh(n,"tickLabels.fontStyle")).classed("is-zero",(t=>0===t)).tspans((function(t,e){const n=e===(A?1:0),o=e===r.length-(M?2:1),a=w?x(t,o,n):[x(t,o,n)];return k||"top"!==i||a.reverse(),a.map(Om)}),v+3).attr("x","left"===i&&d?0:-1).parent().attr("y",((t,e,n)=>{const r=at(n[0]).selectAll("tspan").size();return d?(r-1)*(v+3)*-1:(r-1)*(v+3)*-.5}));lm(T,((t,e)=>t.y<e.y+e.height));const _=b.node().getBBox(),E=Math.max(-1*_.y,0),$=_.height+(E>0?0:_.y)-e.plotSize[1]-E,O=b.node().getBoundingClientRect().width;return{top:E,bottom:$,width:d?0:O+y+Wh(n,"tickLabels.extraSpace",1),labelWidth:d?O:0}}function Rm(t){let{options:e,themeOpts:n,ticksMajor:r,ticksMinor:o}=t;const{plotSize:i,scale:a,baseLine:s,gridLines:l,aboveChart:c,belowChart:u,className:h}=e,f=(Wh(n,"gridLines.aboveChart")?c:u).selectAppend("g.y-grid-lines".concat(h?"."+h:"")).html("");if(!l)return f.remove();f.node().classList.add(mm(n,e.emotion)),f.selectAll("line").remove(),o.length&&f.appendMany("line.y-grid-line.minor",o).translate((t=>[0,a(t)])).attr("x2",i[0]),r.length&&f.appendMany("line.y-grid-line.major",r.filter((t=>!s.includes("zero")||0!==t))).classed("is-zero",(t=>0===t)).translate((t=>[0,a(t)])).attr("x2",i[0])}function Pm(t){let{options:e,themeOpts:n,ticksMajor:r}=t;const{plotSize:o,scale:i,scaleType:a,aboveChart:s,belowChart:l,baseLine:c,className:u}=e,h=(Wh(n,"baseLine.aboveChart")?s:l).selectAppend("g.y-base-lines".concat(u?"."+u:"")).html("");h.node().classList.add(ym(n,e.emotion)),h.selectAll("line").remove();let f=!1;if(["number","log"].includes(a)&&c.includes("zero")&&!r.includes(0)){const[t,n]=e.scale.domain();Math.min(t,n)<=0&&Math.max(t,n)>=0&&(f=!0)}h.appendMany("line",c.filter((t=>"zero"!==t||r.includes(0)||f))).translate((t=>[0,"zero"===t?i(0):"top"===t?0:o[1]])).attr("x1",o[0]);const d=Wh(n,"baseLine.width");return{top:c.includes("top")?d:0,bottom:c.includes("bottom")?d:0}}function jm(t){const{scaleType:e,barScale:n,justBaseline:r,colFmt:o,theme:i,xTicks:a,plotSize:s,numeral:l,stackPercentages:c}=t,u=!c&&o["number-divisor"]||0;return function(t){let{numeral:e,...n}=t;const{options:r,themeOpts:o}=Ud("x",n),{ticksMinor:i,ticksMajor:a}=rm(e,r,o,!0),s=[Sm,Nm,Lm,Cm],l={top:0,left:0,right:0,bottom:0},c=r.tickPosition;return s.forEach((t=>{const n=t({options:r,themeOpts:o,ticksMajor:a,ticksMinor:i,numeral:e});n&&n.height>l[c]&&(l[c]=n.height),n&&n.left>l.left&&(l.left=n.left),n&&n.right>l.right&&(l.right=n.right)})),l}({...t,scale:("date"===e?Ao:cn)().domain(n.domain()).range(n.range().map((t=>s[0]/100*t))),className:"grid-x",gridLines:!r&&"lines",tickLabels:!r,tickLines:!1,secondary:!0,tickLabelUnit:[o["number-prepend"]||"",o["number-append"]||""],tickLabelMultiply:Math.pow(10,-u),minusChar:Wh(i,"vis.base.format.minusCharacter","−"),plusMinusChar:Wh(i,"vis.base.format.plusMinusCharacter","±"),baseLine:["zero"],ticks:{major:{values:!r&&a.length?a:void 0}},numeral:l})}function Im(t){const{yTicks:e,plotSize:n,visId:r,numeral:o}=t;if(!r.includes("bar"))return function(t){let{numeral:e,...n}=t;const{options:r,themeOpts:o}=Ud("y",n),{ticksMinor:i,ticksMajor:a}=rm(e,r),s=[Dm,zm,Rm,Pm],l={top:0,left:0,right:0,bottom:0,labelWidth:0},c=r.tickPosition;return s.forEach((t=>{const n=t({options:r,themeOpts:o,ticksMajor:a,ticksMinor:i,numeral:e});n&&n.width>l[c]&&(l[c]=n.width),n&&n.top>l.top&&(l.top=n.top),n&&n.bottom>l.bottom&&(l.bottom=n.bottom),n&&n.labelWidth>l.labelWidth&&(l.labelWidth=n.labelWidth)})),l}({...t,scale:cn().range([0,n[1]]).domain([0,n[1]]),className:"grid-y",gridLines:"lines",scaleType:"number",tickLabels:!1,tickLines:!1,baseLine:!1,tickLabelFormat:"0",ticks:{major:{values:e}},numeral:o})}var Fm,Um={"bars-grouped":function(){const{themeStyleHelpers:t,visTheme:e}=this,{getObjProp:n,UNDEFINED_STYLE:r}=t,o=Wh(e,"labels.rowLabels.verticalAlignment");return"\n    &:not(.bc-label-block) .bc-row {\n        align-items: ".concat("top"===o?"flex-start":r,";\n    }\n    .bc-bar-bg + .bc-bar-bg {\n        margin-top: ").concat(Zg(n(e,"bars.barSpacing")),";\n    }\n    ")},"bars-split":function(){const{themeStyleHelpers:t,visTheme:e}=this,{typography:n}=t;return"\n    .label.bc-split, .label.bc-split span {\n        ".concat(n(Wh(e,"labels.splitLabels")),"\n    }\n    &.bc-dir-rtl .bc-mirror-bars .bc-split:first-child .bc-bar-label {\n        padding-left: ").concat(Zg(e.labels.rowLabels.padding),";\n    }\n    &:not(.bc-dir-rtl) .bc-mirror-bars .bc-split:first-child .bc-bar-label {\n        padding-right: ").concat(Zg(e.labels.rowLabels.padding),";\n    }")},"bars-stacked":function(){const{themeStyleHelpers:t,visTheme:e,themeBackground:n}=this,{typography:r,getObjProp:o}=t,i=Wh(e,"bars.borders",{}),a=Wh(e,"labels.totalLabels",{}),s=Wh(e,"labels.totalLabels.absoluteValues",{});return"\n    .bc-bar-total, .bc-bar-total span {\n        ".concat(r(a),"\n    }\n    .label.bc-bar-label > span > span.absolute {\n        ").concat(r(s),"\n        opacity: ").concat(s.opacity,";\n        margin-left: ").concat(o(s,"paddingLeft"),";\n    }\n    .bc-bar-total.before.left {\n        padding-left: ").concat(Zg(a.before.paddingLeft),";\n        padding-right: ").concat(Zg(a.before.paddingRight),";\n    }\n    .bc-bar-total.before.right {\n        padding-right: ").concat(Zg(a.before.paddingLeft),";\n        padding-left: ").concat(Zg(a.before.paddingRight),";\n    }\n    .bc-bar-total.after.right, .bc-bar-total.after.force-padding {\n        padding-left: ").concat(Zg(a.after.paddingLeft),";\n    }\n    .bc-bar-total.after.left, .bc-bar-total.after.force-padding {\n        padding-right: ").concat(Zg(a.after.paddingLeft),";\n    }\n    .bc-bar-inner.border-right, .bc-bar-inner.border-left {\n        border-color: ").concat(n,";\n    }\n    .bc-bar-inner.border-right {\n        border-width: 0px ").concat(Zg(o(i,"width"))," 0px 0px;\n    }\n    .bc-bar-inner.border-left {\n        border-width: 0px 0px 0px ").concat(Zg(o(i,"width")),";\n    }\n    ")},"arrow-plot":function(){const{visTheme:t,vis:e}=this,n=e.get("thick-arrows"),{arrowHeadSize:r,width:o,borderRadius:i}=t.arrows[n?"thick":"default"];return"\n    .bc-arrow:not(.bc-arrow-none) {\n        height: ".concat(Zg(o),";\n        top: ").concat(Zg(-.5*o),";\n        border-radius: ").concat(Zg(i),";\n    }\n\n    .bc-arrow:not(.bc-arrow-none) > div {\n        height: ").concat(Zg(r),";\n        width: ").concat(Zg(r),";\n        border-top-width: ").concat(Zg(o),";\n        border-right-width: ").concat(Zg(o),";\n        border-radius: ").concat(Zg(i),";\n    }\n\n    .bc-arrow-right > div, .bc-arrow-left > div {\n        top: ").concat(Zg(-.5*r),";\n    }\n\n    .bc-arrow-none {\n        top: ").concat(Zg(-5*r/6),";\n    }\n\n    .bc-arrow-none > div {\n        height: ").concat(Zg(5*r/3),";\n        border-right-width: ").concat(Zg(o),";\n        left: ").concat(Zg(-.5*o),";\n    }\n    ")},"dot-plot":function(){const{visTheme:t,themeStyleHelpers:e}=this,{typography:n}=e,r=t.circles.size,o=t.rangeBar;return"\n    .label.bc-bar-label, .label.bc-bar-label span {\n        ".concat(n(t.labels.barLabels),"\n    }\n    .bc-bar-inner {\n        width: ").concat(Zg(r),";\n        height: ").concat(Zg(r),";\n        top: ").concat(Zg(-.5*r),";\n        margin-left: ").concat(Zg(-.5*r),";\n    }\n    .bc-row {\n        min-height: ").concat(Zg(r),";\n    }\n    .label.bc-bar-label {\n        line-height: ").concat(Zg(r),";\n        left: ").concat(Zg(r+5),";\n    }\n    &.bc-dir-rtl .label.bc-bar-label {\n        left: ").concat(Zg(-r-5),";\n    }\n    .bc-dot-diff {\n        background: ").concat(o.color,";\n        opacity: ").concat(o.opacity,";\n        height: ").concat(Zg(o.height),";\n        top: ").concat(Zg(-.5*o.height),";\n    }\n    ")},"range-plot":function(){const{themeStyleHelpers:t,vis:e,themeBackground:n,visTheme:r}=this,{getObjProp:o,UNDEFINED_STYLE:i}=t,a=e.get("range-ends",{enabled:!0,shape:"circle"}),s=r.rangeEnds.circles.size,{width:l,height:c}=r.rangeEnds.lines,u=r.rangeEnds.circles.outline||{},h="line"===a.shape?l:s,f="line"===a.shape?c:s,d=5+(a.enabled?h/2:0);return"\n    .bc-bar-inner {\n        top: ".concat(Zg(-f/2),";\n        width: ").concat(Zg(h),";\n        height: ").concat(Zg(f),";\n        margin-left: ").concat(Zg(.5*-h),";\n    }\n    .bc-bar-inner.dw-circle {\n        border-style: ").concat(u.width?"solid":"none",";\n        border-width: ").concat(Zg(o(u,"width")),";\n        border-color: ").concat(o(u,"color"),";\n        background: ").concat(o(u,"fill",n),";\n    }\n    .bc-row {\n        min-height: ").concat(a.enabled?Zg(f):i,";\n    }\n    .bc-range-label.bc-lbl-left {\n        padding-right: ").concat(Zg(d),";\n    }\n    .bc-range-label.bc-lbl-right {\n        padding-left: ").concat(Zg(d),";\n    }\n    .bc-range.dw-rect {\n        opacity: ").concat(r.rangeBar.opacity,";\n        height: ").concat(Zg(r.rangeBar.height),";\n        top: ").concat(Zg(-r.rangeBar.height/2),";\n    }\n    ")}};function Bm(){const{themeStyleHelpers:t,visTheme:e,theme:n}=this,{typography:r}=t,o=n.colors.background;return"\n    .label.bc-group-title,\n    .label.bc-group-title span,\n    .bc-compact-group-label,\n    .bc-compact-group-label span {\n        ".concat(r(Wh(e,"labels.groupTitles")),"\n    }\n    .label.bc-row-label,\n    .label.bc-row-label span {\n        ").concat(r(Wh(e,"labels.rowLabels")),"\n    }\n    .bc-direct-key-col span {\n        ").concat(r(Wh(e,"labels.directKeyLabels")),"\n    }\n\n    &.bc-labels-left .bc-row-label {\n        padding-right: ").concat(Zg(e.labels.rowLabels.padding),";\n    }\n    &.bc-labels-right .bc-row-label {\n        padding-left: ").concat(Zg(e.labels.rowLabels.padding),";\n    }\n\n    .bc-bar-label.label.value.buffer span {\n        text-shadow: ").concat(o," 1px 1px 0px, ").concat(o," 0px 1px 0px, ").concat(o," -1px 1px 0px, ").concat(o," 1px -1px 0px, ").concat(o," 0px -1px 0px, ").concat(o," -1px -1px 0px, ").concat(o," 1px 0px 0px, ").concat(o," 0px 0px 0px, ").concat(o," -1px 0px 0px;\n    }\n")}function Hm(){const{themeStyleHelpers:t,visTheme:e,vis:n,chroma:r}=this,o=n.get("thick"),{typography:i,getObjProp:a}=t,s=Wh(e,"labels",{}),l=Wh(e,"labels.rowLabels",{}),c=Wh(e,"rowDivider",{}),u=Wh(e,"bars",{}),h=u.barThickness[o?"thick":"default"],f=u.rowSpacing[o?"thick":"default"],d=u.barBackground.opacity,p=u.barBackground.color,g="rgba(".concat([...r(p).rgb(),d].join(","),")");return"\n    .label.bc-bar-label,\n    .label.bc-bar-label > span {\n        ".concat(i(s.barLabels),"\n    }\n    .label.bc-bar-label {\n        padding: 0 ").concat(Zg(s.barLabels.padding),";\n    }\n    .label.bc-bar-label, .label.bc-bar-total {\n        line-height: ").concat(Zg(h),";\n    }\n\n    .bc-bar-bg {\n        height: ").concat(Zg(h),";\n    }\n\n    &.bc-color-bg .bc-bar-bg {\n        background: ").concat(g,";\n    }\n\n    &:not(.bc-hr) .bc-row + .bc-row {\n        margin-top: ").concat(Zg(f),";\n    }\n\n    &.bc-hr .bc-row + .bc-row {\n        border-top: ").concat(Zg(c.width),";\n        margin-top: ").concat(Zg(c.margin),";\n        padding-top: ").concat(Zg(c.margin),";\n        border-top-style: ").concat(c.style,";\n        border-top-color: ").concat(c.color,";\n    }\n\n    &.bc-label-block .bc-row + .bc-row {\n        margin-top: ").concat(Zg(a(l,"block.marginTop")),";\n    }\n\n    &.bc-label-block .bc-row-label {\n        margin-bottom: ").concat(Zg(l.block.marginBottom),";\n    }\n    ")}function Ym(){return"\n    &:not(.bc-hr) .bc-row + .bc-row {\n        margin-top: ".concat(Zg(this.visTheme.spacings.rowHeight),";\n    }")}function Wm(){const{visTheme:t}=this;return"\n    .bc-range-label.bc-lbl-left .bc-direct-lbl {\n        padding-right: ".concat(Zg(t.labels.barLabels.padding),";\n    }\n    .bc-range-label.bc-lbl-right .bc-direct-lbl {\n        padding-left: ").concat(Zg(t.labels.barLabels.padding),";\n    }\n    .label.bc-direct-lbl + .bc-range-value {\n        padding-left: ").concat(Zg(t.labels.barLabels.padding),";\n    }")}function qm(t,e,n){const r=function(t){const e=Wh(t,"colors.background","#ffffff"),n=Kf(e),r=td(t),{axis:o,fallbackBaseColor:i}=r,a=4,s=10,l=6;return{"d3-bars":{rowDivider:{width:1,margin:5,style:"dotted",color:ze(e,i)(n<30?.2:.15)},bars:{barThickness:{default:20,thick:27},rowSpacing:{default:a,thick:a},barBackground:{opacity:n<30?.1:.05,color:o}},labels:{groupTitles:{fontWeight:700},rowLabels:{padding:5,lineHeight:1.2,block:{marginBottom:a}},barLabels:{padding:5}}},"d3-bars-stacked":{labels:{totalLabels:{absoluteValues:{opacity:.75},fontWeight:700,before:{paddingLeft:10,paddingRight:5},after:{paddingLeft:5}}}},"d3-dot-plot":{circles:{size:s},spacings:{rowHeight:a},rangeBar:{height:l,opacity:n<60?.5:.2,color:ze(e,i)(n<30?.5:.6)}},"d3-range-plot":{rangeBar:{height:l,opacity:n<60?.8:.5},rangeEnds:{circles:{size:s},lines:{height:s,width:2}}},"d3-arrow-plot":{arrows:{default:{width:2,borderRadius:2,arrowHeadSize:6},thick:{width:3,borderRadius:2,arrowHeadSize:8}}}}}(t),o=[Fd(r["d3-bars"],Wh(t,"vis.d3-bars",{}))];if(["range-plot","arrow-plot"].includes(e)){const e=Fd(r["d3-dot-plot"],Wh(t,"vis.d3-dot-plot",{}));o.push({labels:{rowLabels:Wh(e,"labels.rowLabels",{})},spacings:Wh(e,"spacings",{})})}return"bars"!==e&&o.push(Fd(Wh(r,n,{}),Wh(t,"vis.".concat(n),{}))),o.reduce((function(t,e){return Fd(t,e)}),{})}class Gm{constructor(t){this.target=t,this.previousStyle=void 0}update(t){let{vis:e,theme:n}=t;this.vis=e,this.theme=n,this.type=e.type(),this.emotion=e.chart().emotion,this.chroma=e.libraries().chroma,this.themeStyleHelpers=function(t,e){const n=function(t){let e="";for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(const n of t)e+=n+(r.length?r.shift():"");return e.split("\n").filter((t=>t)).filter((t=>!t.includes(Xg))).join("\n")};function r(t,e,n){return Wh(t,e,void 0===n?Xg:n)}return{getProp:(t,n)=>r(e,t,n),getObjProp:r,typography:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(Kg).filter((n=>{let[r]=n;return Mp(t,r)||Mp(e,r)})).map((n=>{let[r,{prop:o,tsf:i=xi}]=n;const a=Wh(t,r,e[r]);return"".concat(o,": ").concat(i(a),";")})).join("\n")},css:function(){return t.css(n(...arguments))},cssTemplate:n,UNDEFINED_STYLE:Xg}}(this.emotion,n),this.isBarType=!["dot-plot","range-plot","arrow-plot"].includes(this.type),this.themeBackground=Wh(n,"colors.background","#ffffff"),this.visTheme=qm(n,this.type,this.vis.id);const r=this.styles;this.previousStyle!==r&&(this.previousStyle&&this.target.classList.remove(this.previousStyle),this.target.classList.add(r),this.previousStyle=r)}get styles(){const{type:t,themeStyleHelpers:e}=this,{css:n}=e,r=Um[t]||(()=>"");return n(Fm||(o=["\n            ","\n        "],i||(i=o.slice(0)),Fm=Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(i)}}))),[this.commonStyles,r.bind(this)()].join("\n"));var o,i}get commonStyles(){const t=[Bm.bind(this)];return this.isBarType?t.push(Hm.bind(this)):t.push(Ym.bind(this)),["range-plot","arrow-plot"].includes(this.type)&&t.push(Wm.bind(this)),t.map((t=>t())).join("\n")}}function Vm(t){let{row:e,barColumns:n,timeScale:r,barScale:o,mode:i}=t;const a=np(r),s=[e[n[0]],e[n[1]]],l=!s.find((t=>!a(t))),c=!a(s[0])&&a(s[1])?s[1]:s[0],u=a(s[0])&&!a(s[1])?s[0]:s[1],h=o(c),f=o(u);return{_v1:c,_v2:u,_diff:l?u-c:null,_change:l?(u-c)/c:null,_min:Math.min(h,f)+"%",_max:100-Math.max(h,f)+"%",_bar0min:h<f,_direction:"range-plot"===i?h<f?"end":"start":h<f?"right":h>f?"left":"none"}}function Xm(t){let{metadata:e,dataset:n,columnName:r,returnKeyLabelMap:o=!1}=t;const i=n.column(r),a=Qd(null,i,e,r),s=[],l={};i.each(((t,e)=>{const n=String(a(t));s.push(n),l[n]=i.raw(e)||""}));const c=Nd(s);return o?{keys:c,keyLabelMap:l}:c}function Km(t){let{chart:e,$group:n,$groupcontent:r,mode:o,barColumns:i,allNegative:a,rtl:s,stackTotalsPosition:l,barScale:c,independentScales:u,mirrorBars:h,blockLabels:f,isBarTypeWithGrid:d,displayGridLines:p,extendGrid:g,outsideLabels:m}=t;const b=[];return n.each((function(t){const n=at(this);if("bars-split"===o)b.push(...function(t){let{chart:e,$el:n,group:r,barColumns:o,barScale:i,independentScales:a,mirrorBars:s}=t;const l=n.selectAll(".bc-row"),c=l.size(),u=at(l.nodes()[0]),h=at(l.nodes()[c-1]),f=e.getElementBounds(u.select(".bc-bar-bg").node()).top,d=e.getElementBounds(h.select(".bc-bar-bg").node()).bottom,p=f,g=Math.abs(d-f),m=[];return o.forEach(((t,n)=>{const o=u.selectAll(".bc-bar-bg").nodes()[n],{left:l,width:c}=e.getElementBounds(o),h=r.origKey?"".concat(r.origKey,"__").concat(t):t,f=a?i[t].copy():i.copy();s&&0===n&&f.range([f.range()[1],f.range()[0]]),m.push({name:h,x:l,y:p,width:c,height:g,xScale:f})})),m}({chart:e,$el:n,group:t,barColumns:i,barScale:c,independentScales:u,mirrorBars:h}));else{const o=function(t){let{chart:e,$el:n,$groupcontent:r,allNegative:o,rtl:i,stackTotalsPosition:a,barScale:s,blockLabels:l,isBarTypeWithGrid:c,displayGridLines:u,extendGrid:h,outsideLabels:f}=t;const d=e.getElementBounds(n.select(".bc-row .bc-bars").node());let p=d.left;const g=d.width;let m=g;if(a&&!l||f){const t=s.range();if(i&&t.reverse(),p+=g*(t[0]/100),m=g*((t[1]-t[0])/100),"before"===a){const t=ap(r,a);m-=t,(!o&&!i||o&&i)&&(p+=t)}}let b=0,y=0;if(c){const t=n.selectAll(".bc-bar-bg"),r=t.size(),o=e.getElementBounds(t.nodes()[0]).top,i=e.getElementBounds(t.nodes()[r-1]).bottom,a=u?h:0;b=o-a,y=Math.abs(i-o)+2*a}else{const t=n.select(".bc-group-content-inner"),r=e.getElementBounds(t.node());b=r.top,y=r.height}return{x:p,y:b,width:m,height:y}}({chart:e,$el:n,$groupcontent:r,allNegative:a,rtl:s,stackTotalsPosition:l,barScale:c,blockLabels:f,isBarTypeWithGrid:d,displayGridLines:p,extendGrid:g,outsideLabels:m});t.origKey&&(o.name=t.origKey),o.xScale=function(t){let{barScale:e,blockLabels:n,stackTotalsPosition:r,rtl:o,outsideLabels:i}=t;const a=e.copy();(r&&!n||i)&&a.range(o?[100,0]:[0,100]);return a}({barScale:c,blockLabels:f,stackTotalsPosition:l,rtl:s,outsideLabels:m}),b.push(o)}})),b}var Zm=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t},Jm=/\s/;var Qm=function(t){for(var e=t.length;e--&&Jm.test(t.charAt(e)););return e},tb=Qm,eb=/^\s+/;var nb=function(t){return t?t.slice(0,tb(t)+1).replace(eb,""):t},rb=nb,ob=Ra,ib=vu,ab=/^[-+]0x[0-9a-f]+$/i,sb=/^0b[01]+$/i,lb=/^0o[0-7]+$/i,cb=parseInt;var ub=function(t){if("number"==typeof t)return t;if(ib(t))return NaN;if(ob(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ob(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=rb(t);var n=sb.test(t);return n||lb.test(t)?cb(t.slice(2),n?2:8):ab.test(t)?NaN:+t},hb=Zm,fb=ub;var db=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=fb(n))==n?n:0),void 0!==e&&(e=(e=fb(e))==e?e:0),hb(fb(t),e,n)},pb=zo(db);function gb(){}function mb(t){return t()}function bb(){return Object.create(null)}function yb(t){t.forEach(mb)}function vb(t){return"function"==typeof t}function xb(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function wb(t){return wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(t)}function kb(t){var e=function(t,e){if("object"!==wb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==wb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===wb(e)?e:String(e)}function Mb(t,e,n){return(e=kb(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ab="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Tb(t,e){t.appendChild(e)}function _b(t,e,n){const r=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!r.getElementById(e)){const t=Sb("style");t.id=e,t.textContent=n,function(t,e){Tb(t.head||t,e),e.sheet}(r,t)}}function Eb(t,e,n){t.insertBefore(e,n||null)}function $b(t){t.parentNode&&t.parentNode.removeChild(t)}function Ob(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Sb(t){return document.createElement(t)}function Nb(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Lb(t){return document.createTextNode(t)}function Cb(){return Lb(" ")}function Db(){return Lb("")}function zb(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Rb(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Pb(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function jb(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ib(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Fb(t,e,n){t.classList.toggle(e,!!n)}class Ub{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Mb(this,"is_svg",!1),Mb(this,"e",void 0),Mb(this,"n",void 0),Mb(this,"t",void 0),Mb(this,"a",void 0),this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=Nb(e.nodeName):this.e=Sb(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)Eb(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach($b)}}let Bb;function Hb(t){Bb=t}function Yb(){if(!Bb)throw new Error("Function called outside component initialization");return Bb}function Wb(t){Yb().$$.after_update.push(t)}function qb(){const t=Yb();return function(e,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.$$.callbacks[e];if(o){const i=function(t,e){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function Gb(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const Vb=[],Xb=[];let Kb=[];const Zb=[],Jb=Promise.resolve();let Qb=!1;function ty(){Qb||(Qb=!0,Jb.then(iy))}function ey(t){Kb.push(t)}function ny(t){Zb.push(t)}const ry=new Set;let oy=0;function iy(){if(0!==oy)return;const t=Bb;do{try{for(;oy<Vb.length;){const t=Vb[oy];oy++,Hb(t),ay(t.$$)}}catch(t){throw Vb.length=0,oy=0,t}for(Hb(null),Vb.length=0,oy=0;Xb.length;)Xb.pop()();for(let t=0;t<Kb.length;t+=1){const e=Kb[t];ry.has(e)||(ry.add(e),e())}Kb.length=0}while(Vb.length);for(;Zb.length;)Zb.pop()();Qb=!1,ry.clear(),Hb(t)}function ay(t){if(null!==t.fragment){t.update(),yb(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ey)}}const sy=new Set;let ly;function cy(){ly={r:0,c:[],p:ly}}function uy(){ly.r||yb(ly.c),ly=ly.p}function hy(t,e){t&&t.i&&(sy.delete(t),t.i(e))}function fy(t,e,n,r){if(t&&t.o){if(sy.has(t))return;sy.add(t),ly.c.push((()=>{sy.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function dy(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function py(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function gy(t){t&&t.c()}function my(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),ey((()=>{const e=t.$$.on_mount.map(mb).filter(vb);t.$$.on_destroy?t.$$.on_destroy.push(...e):yb(e),t.$$.on_mount=[]})),o.forEach(ey)}function by(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];Kb.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),Kb=e}(n.after_update),yb(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yy(t,e,n,r,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const l=Bb;Hb(t);const c=t.$$={fragment:null,ctx:[],props:i,update:gb,not_equal:o,bound:bb(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:bb(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(function(e,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&o(c.ctx[e],c.ctx[e]=r)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](r),u&&function(t,e){-1===t.$$.dirty[0]&&(Vb.push(t),ty(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],c.update(),u=!0,yb(c.before_update),c.fragment=!!r&&r(c.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);c.fragment&&c.fragment.l(t),t.forEach($b)}else c.fragment&&c.fragment.c();e.intro&&hy(t.$$.fragment),my(t,e.target,e.anchor),iy()}Hb(l)}class vy{constructor(){Mb(this,"$$",void 0),Mb(this,"$$set",void 0)}$destroy(){by(this,1),this.$destroy=gb}$on(t,e){if(!vb(e))return gb;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function xy(){const t=window.getSelection();t&&t.removeAllRanges()}function wy({start:t,end:e,bounds:n,type:r,move:o}){const i="x"===r?n.x:n.y,a="x"===r?n.x+n.width:n.y+n.height;return function(t,e,n,r){return t>=n&&e<=r}(t,e,i,a)||function(t,e,n){return t>e&&n<0}(e,a,o)||function(t,e,n){return t<e&&n>0}(t,i,o)}function ky(t){_b(t,"svelte-gqfmpf",".resizers.svelte-gqfmpf.svelte-gqfmpf{width:100%;height:100%;position:absolute;top:0;left:0;pointer-events:none}.resizer.svelte-gqfmpf.svelte-gqfmpf{position:absolute;display:flex;align-items:center;justify-content:center;pointer-events:auto}.resizer.x.svelte-gqfmpf.svelte-gqfmpf{top:0;width:5px;height:100%;cursor:ew-resize}.resizer.y.svelte-gqfmpf.svelte-gqfmpf{height:5px;width:100%;left:0;cursor:ns-resize}.resizer.drag.svelte-gqfmpf.svelte-gqfmpf{cursor:grab}.resizer.drag.svelte-gqfmpf.svelte-gqfmpf:active{cursor:grabbing}.resizer-inner.svelte-gqfmpf.svelte-gqfmpf{position:absolute;border-radius:2px;background:rgba(255, 0, 221, 0.35);opacity:0;transition:opacity 0.2s}.resizer.x.svelte-gqfmpf .resizer-inner.svelte-gqfmpf{width:5px;height:50%;min-height:10px;max-height:40px}.resizer.y.svelte-gqfmpf .resizer-inner.svelte-gqfmpf{height:5px;width:50%;min-width:10px;max-width:40px}.text:hover .resizer-inner.svelte-gqfmpf.svelte-gqfmpf,.range-annotation:hover .resizer-inner.svelte-gqfmpf.svelte-gqfmpf{opacity:1}")}function My(t,e,n){const r=t.slice();return r[21]=e[n],r}function Ay(t){let e,n,r,o,i,a,s;function l(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[18](t[21],...n)}return{c(){e=Sb("div"),n=Sb("div"),r=Cb(),Pb(n,"class","resizer-inner svelte-gqfmpf"),Pb(e,"class",o="resizer "+t[7]+" svelte-gqfmpf"),Pb(e,"style",i=t[8](t[21],t[6],t[1],t[2])),Fb(e,"drag","line"===t[0].display),Ib(e,"display",_y(t[21],t[3],t[4])?"none":null)},m(t,o){Eb(t,e,o),Tb(e,n),Tb(e,r),a||(s=zb(e,"mousedown",l),a=!0)},p(n,r){t=n,128&r&&o!==(o="resizer "+t[7]+" svelte-gqfmpf")&&Pb(e,"class",o),102&r&&i!==(i=t[8](t[21],t[6],t[1],t[2]))&&Pb(e,"style",i),129&r&&Fb(e,"drag","line"===t[0].display);(126&r||102&r)&&Ib(e,"display",_y(t[21],t[3],t[4])?"none":null)},d(t){t&&$b(e),a=!1,s()}}}function Ty(t){let e,n=dy(t[5]),r=[];for(let e=0;e<n.length;e+=1)r[e]=Ay(My(t,n,e));return{c(){e=Sb("div");for(let t=0;t<r.length;t+=1)r[t].c();Pb(e,"class","resizers svelte-gqfmpf")},m(t,n){Eb(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,o){let[i]=o;if(1023&i){let o;for(n=dy(t[5]),o=0;o<n.length;o+=1){const a=My(t,n,o);r[o]?r[o].p(a,i):(r[o]=Ay(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:gb,o:gb,d(t){t&&$b(e),Ob(r,t)}}}function _y(t,e,n){return e&&("t"===t||"l"===t)||n&&("b"===t||"r"===t)}function Ey(t,e,n){let r,o,i,{annotation:a}=e,{type:s}=e,{index:l}=e,{repeatedIndex:c}=e,{activeResizer:u}=e,{resizing:h=!1}=e,{noOffsetAtEventStart:f=!1}=e,{orientation:d}=e,{lineOverPlotStart:p=!1}=e,{lineOverPlotEnd:g=!1}=e,{rangeOverPlotStart:m=!1}=e,{rangeOverPlotEnd:b=!1}=e;const y=qb();let v;const x={l:"left",r:"right",t:"top",b:"bottom"};function w(t,e){t.stopPropagation(),xy(),y("selectAnnotation",{type:s,index:l,repeatedIndex:c,id:a.id}),void 0===a.width&&y("setWidth"),n(10,u=e),n(11,h=!0),n(12,f=0===a.dx&&0===a.dy)}return t.$$set=t=>{"annotation"in t&&n(0,a=t.annotation),"type"in t&&n(13,s=t.type),"index"in t&&n(14,l=t.index),"repeatedIndex"in t&&n(15,c=t.repeatedIndex),"activeResizer"in t&&n(10,u=t.activeResizer),"resizing"in t&&n(11,h=t.resizing),"noOffsetAtEventStart"in t&&n(12,f=t.noOffsetAtEventStart),"orientation"in t&&n(16,d=t.orientation),"lineOverPlotStart"in t&&n(1,p=t.lineOverPlotStart),"lineOverPlotEnd"in t&&n(2,g=t.lineOverPlotEnd),"rangeOverPlotStart"in t&&n(3,m=t.rangeOverPlotStart),"rangeOverPlotEnd"in t&&n(4,b=t.rangeOverPlotEnd)},t.$$.update=()=>{65537&t.$$.dirty&&n(5,v="y"===d?"line"===a.display?["t"]:["t","b"]:"line"===a.display?["l"]:["l","r"]),65536&t.$$.dirty&&n(7,r="y"===d?"y":"x"),1&t.$$.dirty&&n(17,o=a.strokeWidth||1),131073&t.$$.dirty&&n(6,i="line"===a.display?o:1)},[a,p,g,m,b,v,i,r,function(t,e,n,r){let o=e/2+2.5;return n&&(o-=e),r&&(o+=e),"".concat(x[t],": -").concat(o,"px")},w,u,h,f,s,l,c,d,o,(t,e)=>w(e,t)]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class $y extends vy{constructor(t){super(),yy(this,t,Ey,Ty,xb,{annotation:0,type:13,index:14,repeatedIndex:15,activeResizer:10,resizing:11,noOffsetAtEventStart:12,orientation:16,lineOverPlotStart:1,lineOverPlotEnd:2,rangeOverPlotStart:3,rangeOverPlotEnd:4},ky)}}const Oy=Math.cos(.25*Math.PI),Sy=Math.sin(.25*Math.PI);function Ny(t){let[e,n]=t;return[e*Oy-n*Sy,e*Sy+n*Oy]}function Ly(t){let[e,n]=t;return[e*Oy+n*Sy,n*Oy-e*Sy]}function Cy(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=r?1:0,i=(n-t[o])/(e[o]-t[o]);if(i<0||i>1)return null;const a=r?0:1;return t[a]+i*(e[a]-t[a])}function Dy(t,e,n,r,o,i,a){if(r!==i&&o!==a)throw new Error("only horizontal and vertical lines are supported");const s=o===a,l=function(t,e,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const i=o?1:0;let a=t[i]-2*e[i]+n[i];a||(a=.1);const s=2*(e[i]-t[i]),l=t[i]-r,c=(-s+Math.sqrt(s*s-4*a*l))/(2*a),u=(-s-Math.sqrt(s*s-4*a*l))/(2*a),h=o?0:1,f=[];if(c>=0&&c<=1){const i=Math.pow(1-c,2)*t[h]+2*(1-c)*c*e[h]+c*c*n[h];f.push(o?[i,r,c]:[r,i,c])}if(u>=0&&u<=1){const i=Math.pow(1-u,2)*t[h]+2*(1-u)*u*e[h]+u*u*n[h];f.push(o?[i,r,u]:[r,i,u])}return f}(t,e,n,s?o:r,s);return l.filter((t=>{let[e,n]=t;return s?e>=r&&e<=i:n>=o&&n<=a}))}function zy(t,e,n,r){const o=Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+r*r*n[0],i=Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+r*r*n[1];return[t,[(1-r)*t[0]+r*e[0],(1-r)*t[1]+r*e[1]],[o,i],[o,i],[(1-r)*e[0]+r*n[0],(1-r)*e[1]+r*n[1]],n]}function Ry(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e){let{source:n,sourcePadding:r,targetPadding:o,circle:i,circleRadius:a}=e;return e=>{i&&a&&(o+=a),r>0&&(n={...n},n.x-=r,n.y-=r,n.width+=2*r,n.height+=2*r);let s=n.x+.5*n.width,l=n.y+.5*n.height,c=0,u=0,[h,f]=function(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.25,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=n-t,s=r-e,l=s,c=-a,u=.5*(t+n),h=.5*(e+r),f=Math.sqrt(l*l+c*c),d=Math.sqrt(a*a+s*s)*o/f*(i?-1:1);return[u+l*d,h+c*d]}(s,l,c,u,.3,t);const d=function(t,e,n,r,o,i,a){const s=[[r,o,r+i,o],[r+i,o,r+i,o+a],[r,o+a,r+i,o+a],[r,o,r,o+a]],l=[];for(const r of s){const o=Dy(t,e,n,...r);for(const t of o)l.push(t)}return l}([s,l],[h,f],[c,u],n.x,n.y,n.width,n.height);if(d.length>0){const t=d.map((t=>{let[,,e]=t;return e})).sort(((t,e)=>e-t)),[,,,e,n]=zy([s,l],[h,f],[c,u],t[0]);[s,l]=e,[h,f]=n}if(o>0){const t=function(t,e,n,r){let o,i,a=0,s=1,l=20;do{if(o=.5*(a+s),i=c(o),Math.abs(i-r)<.1)return o;i>r?a=o:s=o}while(l-- >0);return o;function c(r){const o=(1-r)**2*t[0]+2*(1-r)*r*e[0]+r*r*n[0],i=(1-r)**2*t[1]+2*(1-r)*r*e[1]+r*r*n[1];return Math.sqrt((o-n[0])**2+(i-n[1])**2)}}([s,l],[h,f],[c,u],o),[,e,n]=zy([s,l],[h,f],[c,u],t);[h,f]=e,[c,u]=n}e.attr("d","M ".concat(s,",").concat(l," Q ").concat(h,",").concat(f," ").concat(c,",").concat(u))}}}const Py=function(t){let{source:e,sourcePadding:n,targetPadding:r,circle:o,circleRadius:i}=t;return t=>{o&&i&&(r+=i),n&&(e={...e},e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n);let a=e.x+.5*e.width,s=e.y+.5*e.height,l=0,c=0,u=!0,h=-a,f=-s;const d=e.height/e.width;if(2*Math.abs(a)<e.width)a=0,l=0,c=r*(s>0?1:-1),s+=.5*e.height*(s<0?1:-1),u=!1;else if(2*Math.abs(s)<e.height)s=0,c=0,l=r*(a>0?1:-1),a+=.5*e.width*(a<0?1:-1),u=!1;else{const[t,n]=Ny([-.5*e.width,0]),[r,o]=Ny([.5*e.width,0]),[i,l]=Ny([0,-.5*e.height]),[c,u]=Ny([0,.5*e.height]),[p,g]=Ny([-a,-s]);let m,b;if(a>0&&s>0&&p>=t&&p<=i){const[r,o]=Ny([-.5*e.width,-.5*e.height]),a=Cy(p<r?[t,n]:[i,l],[r,o],p,!1);[m,b]=Ly([p,a])}else if(a<0&&s<0&&p>=c&&p<=r){const[t,n]=Ny([.5*e.width,.5*e.height]),i=Cy(p<t?[c,u]:[r,o],[t,n],p,!1);[m,b]=Ly([p,i])}else if(a>0&&s<0&&g>=n&&g<=u){const[r,o]=Ny([-.5*e.width,.5*e.height]),i=Cy(g<o?[t,n]:[c,u],[r,o],g,!0);[m,b]=Ly([i,g])}else if(a<0&&s>0&&g>=l&&g<=o){const[t,n]=Ny([.5*e.width,-.5*e.height]),a=Cy(g<n?[i,l]:[r,o],[t,n],g,!0);[m,b]=Ly([a,g])}else Math.abs(f/h)<d?(m=.5*e.width*(h>0?1:-1),b=.5*e.width*f/h*(h>0?1:-1)):(m=.5*e.height*h/f*(f>0?1:-1),b=.5*e.height*(f>0?1:-1));a+=m,s+=b}if(r>0&&u){h=-a,f=-s;const t=Math.atan2(f,h);l=-Math.cos(t)*r,c=-Math.sin(t)*r}t.attr("d","M ".concat(a,",").concat(s," L ").concat(l,",").concat(c)),t.classed("crisp",a.toFixed(1)===l.toFixed(1)||s.toFixed(1)===c.toFixed(1))}},jy=Ry(!0),Iy=Ry(!1);var Fy=Object.freeze({__proto__:null,straight:Py,curveLeft:jy,curveRight:Iy});function Uy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={sourcePadding:0,targetPadding:4,arrowHead:!1,type:"straight",circle:!1,circleRadius:15,strokeWidth:1,color:"black",...t},function(e){return e.each((function(e){const n={...t,...e},r=at(this).append("g.callout-line").attr("aria-hidden",!0);n.arrowHead&&(n.targetPadding+=n.strokeWidth,n.circleRadius+=n.strokeWidth);const o=r.append("path").style("stroke-width",n.strokeWidth).style("stroke",n.color).call(Fy[n.type](n));var i;n.arrowHead&&function(t,e,n,r,o){const i=By[n];if(!e.getTotalLength)return;const a=e.getTotalLength();if(0===a)return;const s=e.getPointAtLength(a),l=e.getPointAtLength(a-10),c=Math.min(1,a/i.minLen/r),[u,h]=[s.x-l.x,s.y-l.y],f=Math.atan2(h,u)/Math.PI*180,d=t.append("path.callout-line-arrow-head").attr("d",i.path).attr("transform","translate(".concat(s.x,", ").concat(s.y,") rotate(").concat(f,") scale(").concat(r*c,") ")).classed("callout-line-arrow-head-stroke",i.strokes);i.strokes?d.style("stroke",o).style("fill","none").style("stroke-width",1/c):d.style("fill",o).style("stroke","none")}(r,o.node(),n.arrowHead,n.strokeWidth,n.color),n.circle&&r.append("circle").style("stroke",n.color).style("stroke-width",n.strokeWidth).style("stroke-dasharray","dashed"===n.circleStyle?(i=n.strokeWidth,"".concat(2+i,", ").concat(4+i)):void 0).attr("r",n.circleRadius-(n.arrowHead?n.strokeWidth:0))}))}}const By={triangle:{viewBox:"-10 -10 20 20",markerWidth:20,markerHeight:20,minLen:20,path:"M-8.75,-3.75 L 1,0 L -8.75,3.75"},lines:{viewBox:"-10 -10 20 20",markerWidth:20,markerHeight:20,minLen:15,path:"M-4.75,-3.75 L 0,0 L -4.75,3.75",strokes:!0}};var Hy=Math.ceil,Yy=Math.max;var Wy=ub,qy=1/0;var Gy=function(t,e,n,r){for(var o=-1,i=Yy(Hy((e-t)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=t,t+=n;return a},Vy=bp,Xy=function(t){return t?(t=Wy(t))===qy||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Ky=zo(function(t){return function(e,n,r){return r&&"number"!=typeof r&&Vy(e,n,r)&&(n=r=void 0),e=Xy(e),void 0===n?(n=e,e=0):n=Xy(n),r=void 0===r?e<n?1:-1:Xy(r),Gy(e,n,r,t)}}());function Zy(t,e){return`translate(${Math.round(t)}px, ${Math.round(e)}px);`}function Jy(t){return!0===t||void 0===t}function Qy(t){return!(!Jy(t.showDesktop)||!1!==t.showMobile)}function tv(t){return!1===t.showDesktop&&!1===t.showMobile}function ev(t,e=1){const n=Gt(t);return n.opacity=e,n.formatRgb()}function nv(t,e){return{x:0,y:0,width:t,height:e}}const rv=180/Math.PI;function ov(t,e){return Math.atan(t/e)*rv}function iv(t){_b(t,"svelte-1j9q1i5",".callout-line path{stroke:#222;fill:none}.callout-line path.crisp{shape-rendering:crispEdges}.callout-line circle{stroke:#222;fill:none}.callout-line-arrow-head{fill:#222}.callout-line-arrow-head.callout-line-arrow-head-stroke{stroke:#222;fill:none}")}class av extends vy{constructor(t){super(),yy(this,t,null,null,xb,{},iv)}}function sv(t){_b(t,"svelte-k3ilzm",".text-annotation.svelte-k3ilzm.svelte-k3ilzm{position:relative;z-index:2;pointer-events:auto}.text.svelte-k3ilzm.svelte-k3ilzm{left:0px;position:absolute;white-space:pre-line;line-height:1.2;outline-color:rgba(0, 0, 0, 0)}.dw-bold.svelte-k3ilzm.svelte-k3ilzm{font-weight:700}.italic.svelte-k3ilzm.svelte-k3ilzm{font-style:italic}.underline.svelte-k3ilzm.svelte-k3ilzm{-webkit-text-decoration:underline;text-decoration:underline}.num.svelte-k3ilzm.svelte-k3ilzm{display:flex;justify-content:center;align-items:center;font-size:12px;border-radius:50%;width:20px;height:20px}.connector-line.svelte-k3ilzm.svelte-k3ilzm{left:0px;position:absolute;direction:ltr;pointer-events:none}svg.svelte-k3ilzm.svelte-k3ilzm{position:absolute;overflow:visible}.reference-point.svelte-k3ilzm.svelte-k3ilzm,.offset-point.svelte-k3ilzm.svelte-k3ilzm{left:0px;position:absolute;width:5px;height:5px;background:rgba(255, 0, 221, 0.95);z-index:1}.reference-point.hollow.svelte-k3ilzm.svelte-k3ilzm{background:rgba(255, 0, 221, 0.1);border:1px solid rgba(255, 0, 221, 0.95);border-radius:50%;left:-1px;top:-1px;z-index:auto}.reference-point.svelte-k3ilzm.svelte-k3ilzm::before{content:'';position:absolute;top:-5px;left:-5px;width:calc(100% + 9px);height:calc(100% + 9px);cursor:grab}.edit-mode.svelte-k3ilzm:not(.key) .text.svelte-k3ilzm{cursor:grab}.edit-mode.svelte-k3ilzm:not(.key) .text .text-inner.svelte-k3ilzm:after{outline:1px none rgba(255, 0, 221, 0);transition:outline-color 0.2s, outline-style 0.2s}.edit-mode.svelte-k3ilzm:not(.key):not(.selected) .text:hover .text-inner.svelte-k3ilzm:after{outline:1px dotted rgba(255, 0, 221, 0.95)}.edit-mode.svelte-k3ilzm:not(.key) .text.svelte-k3ilzm::before{content:'';z-index:-1;position:absolute;top:-10px;left:-10px;width:calc(100% + 20px);height:calc(100% + 20px);cursor:grab}.edit-mode.selected.svelte-k3ilzm .text.svelte-k3ilzm{outline-style:solid}.edit-mode.svelte-k3ilzm .text-background.svelte-k3ilzm{position:relative}.edit-mode.selected.svelte-k3ilzm:not(.editable) .text-inner.svelte-k3ilzm::after{background:rgba(255, 0, 221, 0.1)}.edit-mode.svelte-k3ilzm:not(.selected):hover .text-inner.svelte-k3ilzm::after,.edit-mode.selected.editable.svelte-k3ilzm:hover .text-inner.svelte-k3ilzm::after{background:rgba(255, 0, 221, 0.05)}.edit-mode.svelte-k3ilzm .text:hover .text-inner.svelte-k3ilzm::after,.edit-mode.selected.svelte-k3ilzm .text .text-inner.svelte-k3ilzm::after{outline:1px solid rgba(255, 0, 221, 0.95)}.edit-mode.editable.svelte-k3ilzm:hover .text-inner.svelte-k3ilzm:hover:after{background:transparent !important}.edit-mode.svelte-k3ilzm .text-inner.svelte-k3ilzm:after{content:'';width:100%;height:100%;position:absolute;left:0;top:0;pointer-events:none}.edit-mode.selected.editable.svelte-k3ilzm .text.svelte-k3ilzm{background:transparent}.edit-mode.selected.editable.svelte-k3ilzm .text-inner.svelte-k3ilzm{background:rgba(255, 255, 255, 0.9);cursor:text}.edit-mode.not-editable.svelte-k3ilzm.svelte-k3ilzm:not(.key){-webkit-user-select:none;user-select:none;cursor:grab}.edit-mode.svelte-k3ilzm .text-inner.svelte-k3ilzm{outline:0}.edit-mode.dragging.svelte-k3ilzm.svelte-k3ilzm,.edit-mode.dragging.svelte-k3ilzm .text.svelte-k3ilzm::before,.edit-mode.dragging.selected.svelte-k3ilzm .text-inner.svelte-k3ilzm,.edit-mode.dragging.svelte-k3ilzm .reference-point.svelte-k3ilzm::before{cursor:grabbing}.edit-mode.svelte-k3ilzm .helper.svelte-k3ilzm{left:0px;position:absolute;direction:ltr}.edit-mode.svelte-k3ilzm .helper-line.svelte-k3ilzm{stroke:rgba(255, 0, 221, 0.95);stroke-dasharray:2, 2;fill:none}.edit-mode.svelte-k3ilzm .num.text.svelte-k3ilzm{outline:0}.edit-mode.selected.svelte-k3ilzm .num .text-inner.svelte-k3ilzm{background:transparent}.edit-mode.selected.dragging.out-of-bounds.svelte-k3ilzm.svelte-k3ilzm{display:block !important;opacity:0.25}")}function lv(t){let e,n,r,o,i,a,s,l,c,u,h,f,d=t[0].connectorLine&&t[0].connectorLine.enabled&&cv(t),p=t[17]&&uv(t),g=t[35]&&hv(t),m=t[32]&&fv(t);function b(t,e){return t[8]?pv:dv}let y=b(t),v=y(t),x=t[8]&&!t[18]&&wv(t);return{c(){e=Sb("div"),d&&d.c(),n=Cb(),p&&p.c(),r=Cb(),g&&g.c(),o=Cb(),m&&m.c(),i=Cb(),a=Sb("div"),v.c(),s=Cb(),x&&x.c(),Pb(a,"class","text svelte-k3ilzm"),Pb(a,"style",l=t[36](t[0])),Fb(a,"dw-bold",t[0].bold||t[18]),Fb(a,"italic",t[0].italic&&!t[18]),Fb(a,"underline",t[0].underline&&!t[18]),Fb(a,"dw-circle",t[18]),Fb(a,"num",t[18]),Pb(e,"role","listitem"),Pb(e,"class","text-annotation svelte-k3ilzm"),Pb(e,"data-annotation-id",c=t[0].id),Fb(e,"hide",t[37]),Fb(e,"edit-mode",t[8]),Fb(e,"selected",t[14]),Fb(e,"editable",t[1]&&t[14]),Fb(e,"not-editable",!t[1]||!t[14]),Fb(e,"key",t[18]),Fb(e,"dragging",t[2]),Fb(e,"resizing",t[5]),Fb(e,"out-of-bounds",t[13])},m(l,c){Eb(l,e,c),d&&d.m(e,null),Tb(e,n),p&&p.m(e,null),Tb(e,r),g&&g.m(e,null),Tb(e,o),m&&m.m(e,null),Tb(e,i),Tb(e,a),v.m(a,null),Tb(a,s),x&&x.m(a,null),t[90](a),u=!0,h||(f=[zb(a,"mousedown",Rb(t[38])),zb(a,"click",t[39]),zb(a,"contextmenu",t[40])],h=!0)},p(t,h){t[0].connectorLine&&t[0].connectorLine.enabled?d?d.p(t,h):(d=cv(t),d.c(),d.m(e,n)):d&&(d.d(1),d=null),t[17]?p?p.p(t,h):(p=uv(t),p.c(),p.m(e,r)):p&&(p.d(1),p=null),t[35]?g?g.p(t,h):(g=hv(t),g.c(),g.m(e,o)):g&&(g.d(1),g=null),t[32]?m?m.p(t,h):(m=fv(t),m.c(),m.m(e,i)):m&&(m.d(1),m=null),y===(y=b(t))&&v?v.p(t,h):(v.d(1),v=y(t),v&&(v.c(),v.m(a,s))),t[8]&&!t[18]?x?(x.p(t,h),262400&h[0]&&hy(x,1)):(x=wv(t),x.c(),hy(x,1),x.m(a,null)):x&&(cy(),fy(x,1,1,(()=>{x=null})),uy()),(!u||1&h[0]|32&h[1]&&l!==(l=t[36](t[0])))&&Pb(a,"style",l),(!u||262145&h[0])&&Fb(a,"dw-bold",t[0].bold||t[18]),(!u||262145&h[0])&&Fb(a,"italic",t[0].italic&&!t[18]),(!u||262145&h[0])&&Fb(a,"underline",t[0].underline&&!t[18]),(!u||262144&h[0])&&Fb(a,"dw-circle",t[18]),(!u||262144&h[0])&&Fb(a,"num",t[18]),(!u||1&h[0]&&c!==(c=t[0].id))&&Pb(e,"data-annotation-id",c),(!u||64&h[1])&&Fb(e,"hide",t[37]),(!u||256&h[0])&&Fb(e,"edit-mode",t[8]),(!u||16384&h[0])&&Fb(e,"selected",t[14]),(!u||16386&h[0])&&Fb(e,"editable",t[1]&&t[14]),(!u||16386&h[0])&&Fb(e,"not-editable",!t[1]||!t[14]),(!u||262144&h[0])&&Fb(e,"key",t[18]),(!u||4&h[0])&&Fb(e,"dragging",t[2]),(!u||32&h[0])&&Fb(e,"resizing",t[5]),(!u||8192&h[0])&&Fb(e,"out-of-bounds",t[13])},i(t){u||(hy(x),u=!0)},o(t){fy(x),u=!1},d(n){n&&$b(e),d&&d.d(),p&&p.d(),g&&g.d(),m&&m.d(),v.d(),x&&x.d(),t[90](null),h=!1,yb(f)}}}function cv(t){let e,n,r;return{c(){e=Sb("div"),n=Nb("svg"),Pb(n,"width",t[24]),Pb(n,"height",t[25]),Pb(n,"class","svelte-k3ilzm"),Pb(e,"class","connector-line svelte-k3ilzm"),Pb(e,"aria-hidden","true"),Pb(e,"style",r="transform: ".concat(Zy(t[11],t[12])))},m(r,o){Eb(r,e,o),Tb(e,n),t[80](n)},p(t,o){16777216&o[0]&&Pb(n,"width",t[24]),33554432&o[0]&&Pb(n,"height",t[25]),6144&o[0]&&r!==(r="transform: ".concat(Zy(t[11],t[12])))&&Pb(e,"style",r)},d(n){n&&$b(e),t[80](null)}}}function uv(t){let e,n,r,o;return{c(){e=Sb("div"),n=Nb("svg"),r=Nb("path"),Pb(r,"class","helper-line svelte-k3ilzm"),Pb(r,"d",o=t[30](t[0])),Pb(n,"width",t[28]),Pb(n,"height",t[29]),Pb(n,"class","svelte-k3ilzm"),Pb(e,"class","helper svelte-k3ilzm")},m(o,i){Eb(o,e,i),Tb(e,n),Tb(n,r),t[81](n)},p(t,e){1073741825&e[0]&&o!==(o=t[30](t[0]))&&Pb(r,"d",o),268435456&e[0]&&Pb(n,"width",t[28]),536870912&e[0]&&Pb(n,"height",t[29])},d(n){n&&$b(e),t[81](null)}}}function hv(t){let e,n,r,o;return{c(){e=Sb("div"),Pb(e,"class","reference-point svelte-k3ilzm"),Pb(e,"style",n="transform: ".concat(t[33]())),Fb(e,"hollow",t[34])},m(n,i){Eb(n,e,i),r||(o=zb(e,"mousedown",Rb(t[41])),r=!0)},p(t,r){4&r[1]&&n!==(n="transform: ".concat(t[33]()))&&Pb(e,"style",n),8&r[1]&&Fb(e,"hollow",t[34])},d(t){t&&$b(e),r=!1,o()}}}function fv(t){let e,n;return{c(){e=Sb("div"),Pb(e,"class","offset-point svelte-k3ilzm"),Pb(e,"style",n="transform: ".concat(t[31]()))},m(t,n){Eb(t,e,n)},p(t,r){1&r[1]&&n!==(n="transform: ".concat(t[31]()))&&Pb(e,"style",n)},d(t){t&&$b(e)}}}function dv(t){let e;function n(t,e){return t[18]?mv:gv}let r=n(t),o=r(t);return{c(){e=Sb("span"),o.c(),Pb(e,"class","export-text")},m(n,r){Eb(n,e,r),o.m(e,null),t[85](e)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(n){n&&$b(e),o.d(),t[85](null)}}}function pv(t){let e;function n(t,e){return t[18]?yv:bv}let r=n(t),o=r(t);return{c(){o.c(),e=Db()},m(t,n){o.m(t,n),Eb(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){t&&$b(e),o.d(t)}}}function gv(t){let e,n,r=t[6](t[0].text)+"";return{c(){e=new Ub(!1),n=Db(),e.a=n},m(t,o){e.m(r,t,o),Eb(t,n,o)},p(t,n){65&n[0]&&r!==(r=t[6](t[0].text)+"")&&e.p(r)},d(t){t&&($b(n),e.d())}}}function mv(t){let e,n=t[7].num+"";return{c(){e=Lb(n)},m(t,n){Eb(t,e,n)},p(t,r){128&r[0]&&n!==(n=t[7].num+"")&&jb(e,n)},d(t){t&&$b(e)}}}function bv(t){let e;function n(t,e){return t[1]&&t[14]?xv:vv}let r=n(t),o=r(t);return{c(){e=Sb("div"),o.c(),Pb(e,"class","text-background svelte-k3ilzm")},m(t,n){Eb(t,e,n),o.m(e,null)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&$b(e),o.d()}}}function yv(t){let e,n,r=t[7].num+"";return{c(){e=Sb("span"),n=Lb(r)},m(t,r){Eb(t,e,r),Tb(e,n)},p(t,e){128&e[0]&&r!==(r=t[7].num+"")&&jb(n,r)},d(t){t&&$b(e)}}}function vv(t){let e,n=t[6](t[0].text)+"";return{c(){e=Sb("span"),Pb(e,"class","text-inner text-edit svelte-k3ilzm")},m(r,o){Eb(r,e,o),e.innerHTML=n,t[84](e)},p(t,r){65&r[0]&&n!==(n=t[6](t[0].text)+"")&&(e.innerHTML=n)},d(n){n&&$b(e),t[84](null)}}}function xv(t){let e,n,r,o=t[6](t[27])+"";return{c(){e=Sb("span"),Pb(e,"contenteditable",""),Pb(e,"class","text-inner text-edit svelte-k3ilzm"),void 0===t[26]&&ey((()=>t[83].call(e)))},m(i,a){Eb(i,e,a),e.innerHTML=o,t[82](e),void 0!==t[26]&&(e.innerHTML=t[26]),n||(r=[zb(e,"input",t[83]),zb(e,"input",t[42]),zb(e,"blur",t[43])],n=!0)},p(t,n){134217792&n[0]&&o!==(o=t[6](t[27])+"")&&(e.innerHTML=o),67108864&n[0]&&t[26]!==e.innerHTML&&(e.innerHTML=t[26])},d(o){o&&$b(e),t[82](null),n=!1,yb(r)}}}function wv(t){let e,n,r,o,i;function a(e){t[86](e)}function s(e){t[87](e)}function l(e){t[88](e)}let c={type:"text",annotation:t[0],index:t[9],repeatedIndex:t[10]};return void 0!==t[3]&&(c.noOffsetAtEventStart=t[3]),void 0!==t[4]&&(c.activeResizer=t[4]),void 0!==t[5]&&(c.resizing=t[5]),e=new $y({props:c}),Xb.push((()=>py(e,"noOffsetAtEventStart",a))),Xb.push((()=>py(e,"activeResizer",s))),Xb.push((()=>py(e,"resizing",l))),e.$on("selectAnnotation",t[89]),e.$on("setWidth",t[45]),{c(){gy(e.$$.fragment)},m(t,n){my(e,t,n),i=!0},p(t,i){const a={};1&i[0]&&(a.annotation=t[0]),512&i[0]&&(a.index=t[9]),1024&i[0]&&(a.repeatedIndex=t[10]),!n&&8&i[0]&&(n=!0,a.noOffsetAtEventStart=t[3],ny((()=>n=!1))),!r&&16&i[0]&&(r=!0,a.activeResizer=t[4],ny((()=>r=!1))),!o&&32&i[0]&&(o=!0,a.resizing=t[5],ny((()=>o=!1))),e.$set(a)},i(t){i||(hy(e.$$.fragment,t),i=!0)},o(t){fy(e.$$.fragment,t),i=!1},d(t){by(e,t)}}}function kv(t){let e,n,r,o,i,a;e=new av({});let s=!t[20]&&!t[19]&&lv(t);return{c(){gy(e.$$.fragment),n=Cb(),s&&s.c(),r=Db()},m(l,c){my(e,l,c),Eb(l,n,c),s&&s.m(l,c),Eb(l,r,c),o=!0,i||(a=zb(window,"keydown",t[44]),i=!0)},p(t,e){t[20]||t[19]?s&&(cy(),fy(s,1,1,(()=>{s=null})),uy()):s?(s.p(t,e),1572864&e[0]&&hy(s,1)):(s=lv(t),s.c(),hy(s,1),s.m(r.parentNode,r))},i(t){o||(hy(e.$$.fragment,t),hy(s),o=!0)},o(t){fy(e.$$.fragment,t),fy(s),o=!1},d(t){t&&($b(n),$b(r)),by(e,t),s&&s.d(t),i=!1,a()}}}function Mv(t,e,n){let r,o,i,a,s,l,c,u,h,f,d,p,g,m,b,y,v,x,w,k,M,A,T,_,E,$,O;var S;let N,L,{annotation:C}=e,{dataToPx:D}=e,{pxToData:z}=e,{bounds:R}=e,{theme:P}=e,{cm:j}=e,{chroma:I}=e,{purifyHtml:F}=e,{key:U}=e,{rtl:B=!1}=e,{mirrorX:H=!1}=e,{isMobileWidth:Y=!1}=e,W=0,q=0,G=0,V=0,X=0;function K(){N&&N.offsetWidth&&N.offsetHeight&&(n(62,G=N.offsetWidth),n(63,V=N.offsetHeight),n(64,X=L&&L.offsetWidth||pt&&pt.offsetWidth||0),function(){if(!C.connectorLine||!C.connectorLine.enabled)return;const t=at(J);t.selectAll("*").remove();const{circle:e,circleRadius:r,stroke:o,inheritColor:a,targetPadding:s}=C.connectorLine,[l,c]=b(C,{useInnerText:!0});let h=l-W;B&&d&&(h-=p);const g=c-q,m=a&&u&&!f?u:Jg(P,"color",i),y={curveLeft:H?"curveRight":"curveLeft",curveRight:H?"curveLeft":"curveRight",straight:"straight"},v=f?G:X,x=Object.assign(Object.assign({},C.connectorLine),{circle:e,circleRadius:r,source:{x:h,y:g,width:v,height:V},sourcePadding:nt(),targetPadding:f?0:s,strokeWidth:f?1:o,color:m,type:y[C.connectorLine.type]}),w=Uy(x);t.call(w);const k=J.getBBox();n(24,rt=Math.max(Math.ceil(k.width),1)),n(25,ot=Math.max(Math.ceil(k.height),1));const M=t.select(".callout-line").select("path").attr("d");(function(t,e){const n=t.replace("M","").replace("Q","").trim().replace(/ /g,",").split(",");let r=Math.max(Math.abs(Number(n[0])),Math.abs(Number(n[1])))-e;return isNaN(r)&&(r=0),r})(M,s)<10||et(5)||function(t,e,n){if(!t||!n)return;const r=e.indexOf("M ")+2,o=e.indexOf(" ",r),i=e.substring(r,o).split(",").map((t=>parseInt(t,10)));return Math.pow(i[0]-0,2)+Math.pow(i[1]-0,2)<Math.pow(n,2)}(e,M,r)?(t.selectAll("*").remove(),gt&&it("updateEditorState",{hideConnectorLine:!0})):gt&&it("updateEditorState",{hideConnectorLine:!1})}())}var Z;Wb((()=>{st?K():(ty(),Jb).then(K)})),Z=()=>{const t=new ResizeObserver((()=>{K()}));N&&t.observe(N)},Yb().$$.on_mount.push(Z);let J,Q=!1;function tt(){let t=ov(C.dy,C.dx)+90;return C.dx<0&&(t+=180),function(t){switch(!0){case t>337.5||t<=22.5:return"bc";case t>22.5&&t<=67.5:return"bl";case t>67.5&&t<=112.5:return"ml";case t>112.5&&t<=157.5:return"tl";case t>157.5&&t<=202.5:return"tc";case t>202.5&&t<=247.5:return"tr";case t>247.5&&t<=292.5:return"mr";case t>292.5&&t<=337.5:return"br";default:return"mc"}}(t)}function et(t){const[e,n]=b(C,{useInnerText:!0});let r=e,o=e+X;B&&d&&(r-=p,o-=p);return W>r-t&&W<o+t&&q>n-t&&q<n+V+t}function nt(){if(!f)return 4;const t=tt();if(!!(t.includes("c")||t.includes("m")))return 0;const e=(G*Math.sqrt(2)-G)/2;return-Math.sqrt(Math.pow(e,2)/2)}let rt=1,ot=1;const it=qb();let{editMode:st=!1}=e,{isEditable:lt=!1}=e,{editorState:ct}=e,{index:ut}=e,{repeatedIndex:ht}=e,ft=!1;function dt(){ft||it("updateAnnotation",{annotation:C,type:"text"})}let pt,gt=!1;let{moveX:mt=0}=e,{moveY:bt=0}=e,{dragging:yt=!1}=e,{noOffsetAtEventStart:vt}=e,{forceOffsetDrag:xt}=e,{forceAnchorDrag:wt}=e,{forceAnchorDragTemp:kt}=e;let Mt,At,{activeResizer:Tt}=e,{resizing:_t=!1}=e,Et=C.text;let $t=1,Ot=1;return t.$$set=t=>{"annotation"in t&&n(0,C=t.annotation),"dataToPx"in t&&n(51,D=t.dataToPx),"pxToData"in t&&n(52,z=t.pxToData),"bounds"in t&&n(53,R=t.bounds),"theme"in t&&n(54,P=t.theme),"cm"in t&&n(55,j=t.cm),"chroma"in t&&n(56,I=t.chroma),"purifyHtml"in t&&n(6,F=t.purifyHtml),"key"in t&&n(7,U=t.key),"rtl"in t&&n(57,B=t.rtl),"mirrorX"in t&&n(58,H=t.mirrorX),"isMobileWidth"in t&&n(59,Y=t.isMobileWidth),"editMode"in t&&n(8,st=t.editMode),"isEditable"in t&&n(1,lt=t.isEditable),"editorState"in t&&n(46,ct=t.editorState),"index"in t&&n(9,ut=t.index),"repeatedIndex"in t&&n(10,ht=t.repeatedIndex),"moveX"in t&&n(47,mt=t.moveX),"moveY"in t&&n(48,bt=t.moveY),"dragging"in t&&n(2,yt=t.dragging),"noOffsetAtEventStart"in t&&n(3,vt=t.noOffsetAtEventStart),"forceOffsetDrag"in t&&n(49,xt=t.forceOffsetDrag),"forceAnchorDrag"in t&&n(50,wt=t.forceAnchorDrag),"forceAnchorDragTemp"in t&&n(60,kt=t.forceAnchorDragTemp),"activeResizer"in t&&n(4,Tt=t.activeResizer),"resizing"in t&&n(5,_t=t.resizing)},t.$$.update=()=>{if(8388608&t.$$.dirty[1]&&n(79,r={mobile:Wh(P,"vis.base.annotations.mobile",{}),desktop:Wh(P,"vis.base.annotations.text",{})}),8388608&t.$$.dirty[1]&&n(76,o=Wh(P,"colors.background","#ffffff")),41943040&t.$$.dirty[1]&&n(69,i=Qf(P,I).fallbackBaseColor),147456&t.$$.dirty[2]&&n(74,a=Wh(r.mobile,"icons.background",ev(o,.7))),131200&t.$$.dirty[2]&&n(75,s=Wh(r.mobile,"icons.outline","1px solid ".concat(i))),131072&t.$$.dirty[2]&&n(78,l=r.desktop.color),134217728&t.$$.dirty[1]&&n(66,c=H?-1:1),1&t.$$.dirty[0]&&n(0,C.dx=+C.dx||0,C),1&t.$$.dirty[0]&&n(0,C.dy=+C.dy||0,C),16397&t.$$.dirty[0]|540999680&t.$$.dirty[1]|24&t.$$.dirty[2]&&gt&&yt&&(mt||bt)&&!ft){if(vt&&!xt||wt||kt){let[t,e]=D(C.x,C.y,C._plot);t+=mt,e+=bt;const{x:r,y:o,plot:i,validPosition:a}=z(t,e,C.showInAllPlots?C._plot:void 0);n(46,ct.draggingOutOfBounds=!1===a,ct),!C.showInAllPlots&&i&&(C.plot!==i&&n(46,ct.plotHasUpdated=!0,ct),n(0,C.plot=i,C)),n(0,C.x=r,C),n(0,C.y=o,C)}else n(0,C.dx+=mt*c,C),n(0,C.dy+=bt,C);xt&&vt&&!C.connectorLine.enabled&&!et(20)&&(n(0,C.connectorLine.enabled=!0,C),n(0,C.connectorLine.type="curveLeft",C)),n(47,mt=0),n(48,bt=0),dt()}if(17413&t.$$.dirty[0]|3178496&t.$$.dirty[1]&&!yt&&gt&&!0===ct.draggingOutOfBounds&&(!C.showInAllPlots||ht===ct.activeRepeatedAnnotationIndex)){const t=D(C.x,C.y,C._plot),{x:e,y:r}=z(t[0],t[1],C._plot,!0);n(0,C=Object.assign(Object.assign({},C),{x:e,y:r})),n(46,ct.draggingOutOfBounds=!1,ct),dt()}if(16441&t.$$.dirty[0]|141754368&t.$$.dirty[1]&&gt&&_t&&(mt||bt)){let t=mt/R.width*100,e=0;if(C.align.includes("c")?(e+=mt/2,"l"===Tt&&(t=-t)):C.align.includes(H?"r":"l")?"l"===Tt&&(e+=mt,t=-t):C.align.includes(H?"l":"r")&&("l"===Tt&&(t=-t),"r"===Tt&&(e+=mt)),vt){const t=D(C.x,C.y,C._plot);let r=t[0];r+=e;const{x:o,y:i}=z(r,t[1]);n(0,C.x=o,C),n(0,C.y=i,C)}else n(0,C.dx+=e,C);n(0,C.width+=t,C),n(0,C.width=Math.max(5,C.width),C),n(47,mt=0),dt()}if(1&t.$$.dirty[0]|16777216&t.$$.dirty[1]|65536&t.$$.dirty[2]&&n(70,u=C.color?j(C.color):j(l,{noInvert:!0})),1&t.$$.dirty[0]|1048576&t.$$.dirty[1]&&n(11,[W,q]=D(C.x,C.y,C._plot),W,(n(12,q),n(51,D),n(0,C),n(14,gt),n(2,yt),n(47,mt),n(48,bt),n(65,ft),n(3,vt),n(49,xt),n(50,wt),n(60,kt),n(52,z),n(66,c),n(46,ct),n(10,ht),n(5,_t),n(53,R),n(4,Tt),n(58,H))),2048&t.$$.dirty[0]&&n(20,g=void 0===W),4096&t.$$.dirty[0]&&n(19,m=void 0===q),1579009&t.$$.dirty[0]|6291456&t.$$.dirty[1]&&R&&!g&&!m){const{validPosition:t}=z(W,q,C._plot);!1===t&&void 0!==C._plot?n(13,Q=!0):n(13,Q=!1)}var e;if(8193&t.$$.dirty[0]|268435456&t.$$.dirty[1]&&n(37,h=tv(C)||!(!Jy((e=C).showMobile)||!1!==e.showDesktop||Y)||Qy(C)&&Y||Q),128&t.$$.dirty[0]&&n(18,f=U&&U.render),262144&t.$$.dirty[0]|5&t.$$.dirty[2]&&n(71,d=!f&&X>G),5&t.$$.dirty[2]&&(p=X-G),1&t.$$.dirty[0]&&n(67,w=0===C.dx&&0===C.dy),268288&t.$$.dirty[0]|134217728&t.$$.dirty[1]|567&t.$$.dirty[2]&&n(72,b=function(t){let{useInnerText:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[n,r]=[W,q],o=t.align;f||(n+=t.dx*c,r+=t.dy),f&&!w&&([n,r]=function(t,e){const n=C.connectorLine.circle?Math.max(0,C.connectorLine.circleRadius):0,r=22+n,o=(27+n)*c,i=tt(),[a,s]={br:[-r,-r],bc:[-o,0],bl:[-r,r],mr:[0,-o],mc:[-o-.5*V,0],ml:[0,o],tr:[r,-r],tc:[o,0],tl:[r,r]}[i];return[t+=s,e+=a]}(n,r),o="mc");const i={l:H?"r":"l",c:"c",r:H?"l":"r"}[o.charAt(1)],a=o.charAt(0);return n-=(!e||d||f?G:X)*{l:0,c:.5,r:1}[i],r-=V*{t:0,m:.5,b:1}[a],[n,r]}),1024&t.$$.dirty[2]&&n(73,y=t=>{const[e,n]=b(t);return Zy(e,n)}),262144&t.$$.dirty[0]|63744&t.$$.dirty[2]&&n(36,x=t=>{const e=[];return f?(e.push("border: ".concat(s)),e.push("background-color: ".concat(a))):(e.push(...v(t)),u&&e.push("color: ".concat(u)),t.bg&&o&&e.push("text-shadow: ".concat(function(t,e,n){const r=[],o=Ky(-t,t+1);return o.forEach((t=>{o.forEach((o=>{(t||o)&&r.push(t+"px "+o+"px "+(t&&o?0:e)+"px "+n)}))})),r.join(", ")}(2,2,o)))),e.push("transform: ".concat(y(t))),e.join("; ")}),1025&t.$$.dirty[0]|32768&t.$$.dirty[1]&&function(t,e,r){n(65,ft=!!t.showInAllPlots&&void 0!==e&&e!==r.activeRepeatedAnnotationIndex)}(C,ht,ct),32768&t.$$.dirty[1]&&function(t){n(14,gt=t.selectedTextAnnotations.includes(C.id))}(ct),32770&t.$$.dirty[0]&&!lt&&pt&&pt.blur(),1857537&t.$$.dirty[0]|3&t.$$.dirty[2]&&gt){const t={x:W,y:q,invalidX:g,invalidY:m,width:G,height:V,mobileFallback:f,text:C.text,plot:C._plot};it("updateEditorState",{selectedAnnotationProps:t})}if(1&t.$$.dirty[0]&&n(68,k="mc"===C.align),278784&t.$$.dirty[0]|96&t.$$.dirty[2]&&n(35,M=st&&gt&&!f&&!(w&&k)),278784&t.$$.dirty[0]|32&t.$$.dirty[2]&&n(34,A=st&&gt&&!f&&!w),6144&t.$$.dirty[0]&&n(33,T=()=>{let[t,e]=[W,q];return t-=2.5,e-=2.5,Zy(t,e)}),278784&t.$$.dirty[0]|96&t.$$.dirty[2]&&n(32,_=st&&gt&&!f&&!w&&!k),6145&t.$$.dirty[0]|16&t.$$.dirty[2]&&n(31,E=()=>{let[t,e]=[W,q];return t-=2.5,e-=2.5,t+=C.dx*c,e+=C.dy,Zy(t,e)}),32833&t.$$.dirty[0]){pt&&pt===document.activeElement||(n(26,Mt=F(C.text)),n(27,Et=C.text))}if(278785&t.$$.dirty[0]|1073741824&t.$$.dirty[1]|32&t.$$.dirty[2]&&n(17,$=st&&gt&&!(null===n(61,S=C.connectorLine)||void 0===S?void 0:S.enabled)&&!w&&!f),6144&t.$$.dirty[0]|16&t.$$.dirty[2]&&n(30,O=t=>{const[e,n]=[W,q];return"M ".concat(e,",").concat(n," L").concat(e+t.dx*c,",").concat(n+t.dy)}),196608&t.$$.dirty[0]&&At&&$){const t=At.getBBox();n(28,$t=Math.max(Math.ceil(t.width),1)),n(29,Ot=Math.max(Math.ceil(t.height),1))}},n(77,v=t=>{const e=[];return t.width&&e.push("width: ".concat(function(t){const e=R.width*(t.width/100);return"".concat(e,"px")}(t))),e.push("font-size: ".concat(t.size||14,"px")),e.push("min-height: ".concat(t.size||14,"px")),e.push("text-align: ".concat(function(t){return t.align?{l:H?"right":"left",c:"center",r:H?"left":"right"}[t.align.charAt(1)]:"center"}(t))),e}),[C,lt,yt,vt,Tt,_t,F,U,st,ut,ht,W,q,Q,gt,pt,At,$,f,m,g,N,L,J,rt,ot,Mt,Et,$t,Ot,O,E,_,T,A,M,x,h,function(t){if(!st)return;xy(),it("selectAnnotation",{type:"text",index:ut,repeatedIndex:ht,id:C.id});const e=t.target,r=e.parentNode,o="true"===e.contentEditable||"true"===r.contentEditable;f||o&&gt||(n(47,mt=0),n(48,bt=0),n(2,yt=!0),n(49,xt=t.ctrlKey),xt&&it("updateEditorState",{forceOffsetDrag:!0}),n(3,vt=0===C.dx&&0===C.dy))},function(t){st&&t.preventDefault()},function(t){st&&t.preventDefault()},function(){st&&(xy(),it("selectAnnotation",{type:"text",index:ut,repeatedIndex:ht,id:C.id}),n(2,yt=!0),n(50,wt=!0))},function(){n(0,C.text=Mt.slice&&"&nbsp;"===Mt.slice(-6)&&"&nbsp;&nbsp;"!==Mt.slice(-12)?"".concat(Mt.slice(0,-6)," "):Mt,C),dt()},function(){xy()},function(t){if(!st||f)return;const e="ArrowUp"===t.key||"ArrowDown"===t.key||"ArrowLeft"===t.key||"ArrowRight"===t.key;if("Escape"===t.key&&gt&&lt)pt.blur(),n(1,lt=!1);else if("Escape"===t.key&&gt)it("selectAnnotation",null);else if(e&&gt&&!lt){t.preventDefault();const e="ArrowLeft"===t.key?-1:"ArrowRight"===t.key?1:0,r="ArrowUp"===t.key?-1:"ArrowDown"===t.key?1:0;if(t.ctrlKey)n(0,C.dx+=e*c,C),n(0,C.dy+=r,C);else{let[t,o]=D(C.x,C.y,C._plot);t+=e,o+=r;const{x:i,y:a,validPosition:s}=z(t,o);(void 0===C._plot||!0===s)&&(n(0,C.x=i,C),n(0,C.y=a,C))}}dt()},function(){n(0,C.width=G/R.width*100,C),dt()},ct,mt,bt,xt,wt,D,z,R,P,j,I,B,H,Y,kt,S,G,V,X,ft,c,w,k,i,u,d,b,y,a,s,o,v,l,r,function(t){Xb[t?"unshift":"push"]((()=>{J=t,n(23,J)}))},function(t){Xb[t?"unshift":"push"]((()=>{At=t,n(16,At)}))},function(t){Xb[t?"unshift":"push"]((()=>{pt=t,n(15,pt)}))},function(){Mt=this.innerHTML,n(26,Mt),n(15,pt),n(6,F),n(0,C),n(14,gt),n(2,yt),n(47,mt),n(48,bt),n(65,ft),n(3,vt),n(49,xt),n(50,wt),n(60,kt),n(51,D),n(52,z),n(66,c),n(46,ct),n(10,ht),n(5,_t),n(53,R),n(4,Tt),n(58,H)},function(t){Xb[t?"unshift":"push"]((()=>{pt=t,n(15,pt)}))},function(t){Xb[t?"unshift":"push"]((()=>{L=t,n(22,L)}))},function(t){vt=t,n(3,vt)},function(t){Tt=t,n(4,Tt)},function(t){_t=t,n(5,_t)},function(e){Gb.call(this,t,e)},function(t){Xb[t?"unshift":"push"]((()=>{N=t,n(21,N)}))}]}class Av extends vy{constructor(t){super(),yy(this,t,Mv,kv,xb,{annotation:0,dataToPx:51,pxToData:52,bounds:53,theme:54,cm:55,chroma:56,purifyHtml:6,key:7,rtl:57,mirrorX:58,isMobileWidth:59,editMode:8,isEditable:1,editorState:46,index:9,repeatedIndex:10,moveX:47,moveY:48,dragging:2,noOffsetAtEventStart:3,forceOffsetDrag:49,forceAnchorDrag:50,forceAnchorDragTemp:60,activeResizer:4,resizing:5},sv,[-1,-1,-1,-1])}}function Tv(t){_b(t,"svelte-f85b34",".create-mode .range-annotation{pointer-events:none !important}.range-annotation.svelte-f85b34.svelte-f85b34{position:absolute;top:0px;left:0px;pointer-events:none}.range-annotation.edit-mode.svelte-f85b34.svelte-f85b34{display:flex;justify-content:center;align-items:center;pointer-events:auto;z-index:1}.range-annotation.edit-mode.svelte-f85b34:hover .dot.svelte-f85b34{opacity:1 !important}.range-annotation.edit-mode.range.svelte-f85b34.svelte-f85b34{z-index:1;background:transparent !important;border:1px solid transparent;box-sizing:border-box}.range-annotation.edit-mode.range.x.svelte-f85b34.svelte-f85b34{border-width:0 1px 0 1px}.range-annotation.edit-mode.range.x.start-out-of-bounds.svelte-f85b34.svelte-f85b34{border-left-width:0 !important}.range-annotation.edit-mode.range.x.end-out-of-bounds.svelte-f85b34.svelte-f85b34{border-right-width:0 !important}.range-annotation.edit-mode.range.y.svelte-f85b34.svelte-f85b34{border-width:1px 0 1px 0}.range-annotation.edit-mode.range.y.start-out-of-bounds.svelte-f85b34.svelte-f85b34{border-top-width:0 !important}.range-annotation.edit-mode.range.y.end-out-of-bounds.svelte-f85b34.svelte-f85b34{border-bottom-width:0 !important}.range-annotation.edit-mode.selected.svelte-f85b34.svelte-f85b34{z-index:2}.range-annotation.edit-mode.selected.svelte-f85b34 .dot.svelte-f85b34{opacity:1}.range-annotation.edit-mode.selected.range.svelte-f85b34.svelte-f85b34{z-index:2;border:1px solid rgba(255, 0, 221, 0.95)}.range-annotation.edit-mode.selected.range.x.svelte-f85b34.svelte-f85b34{border-width:0 1px 0 1px}.range-annotation.edit-mode.selected.range.y.svelte-f85b34.svelte-f85b34{border-width:1px 0 1px 0}.range-annotation.edit-mode.selected.line.svelte-f85b34.svelte-f85b34{border-color:rgba(255, 0, 221, 0.95) !important}.range-annotation.edit-mode.range.svelte-f85b34 .dot-drag.svelte-f85b34{width:20px;height:20px;cursor:grab;display:flex;align-items:center;justify-content:center}.range-annotation.edit-mode.dragging.svelte-f85b34 .dot-drag.svelte-f85b34{cursor:grabbing}.range-annotation.edit-mode.range.svelte-f85b34 .dot-drag .dot.svelte-f85b34{width:5px;height:5px;background:rgba(255, 0, 221, 0.95);opacity:0;transition:opacity 0.2s}.range-annotation.x.svelte-f85b34.svelte-f85b34{height:100%}.range-annotation.y.svelte-f85b34.svelte-f85b34{width:100%}.range-annotation.range.svelte-f85b34.svelte-f85b34{z-index:-1}.range-annotation.line.svelte-f85b34.svelte-f85b34{z-index:1;border-width:0;background:transparent;-webkit-transform:scale(1)}.range-annotation.line.x.svelte-f85b34.svelte-f85b34{height:100%;width:0px}.range-annotation.line.y.svelte-f85b34.svelte-f85b34{width:100%;height:0px}.create-mode .range-annotation{pointer-events:none}")}function _v(t){let e,n,r,o,i,a,s=t[5]&&$v(t);return{c(){e=Sb("div"),o=Cb(),s&&s.c(),i=Db(),Pb(e,"class",n="range-annotation dw-rect range "+t[0].type+" svelte-f85b34"),Pb(e,"style",r=t[16](t[0],t[4]))},m(t,n){Eb(t,e,n),Eb(t,o,n),s&&s.m(t,n),Eb(t,i,n),a=!0},p(t,o){(!a||1&o[0]&&n!==(n="range-annotation dw-rect range "+t[0].type+" svelte-f85b34"))&&Pb(e,"class",n),(!a||65553&o[0]&&r!==(r=t[16](t[0],t[4])))&&Pb(e,"style",r),t[5]?s?(s.p(t,o),32&o[0]&&hy(s,1)):(s=$v(t),s.c(),hy(s,1),s.m(i.parentNode,i)):s&&(cy(),fy(s,1,1,(()=>{s=null})),uy())},i(t){a||(hy(s),a=!0)},o(t){fy(s),a=!1},d(t){t&&($b(e),$b(o),$b(i)),s&&s.d(t)}}}function Ev(t){let e,n,r,o,i,a,s=t[5]&&Ov(t);return{c(){e=Sb("div"),s&&s.c(),Pb(e,"class",n="range-annotation dw-line line "+t[0].type+" svelte-f85b34"),Pb(e,"style",r=t[15](t[0],t[4])),Fb(e,"edit-mode",t[5]),Fb(e,"no-edit-mode",!t[5]),Fb(e,"selected",t[8])},m(n,r){Eb(n,e,r),s&&s.m(e,null),o=!0,i||(a=zb(e,"mousedown",Rb(t[31])),i=!0)},p(t,i){t[5]?s?(s.p(t,i),32&i[0]&&hy(s,1)):(s=Ov(t),s.c(),hy(s,1),s.m(e,null)):s&&(cy(),fy(s,1,1,(()=>{s=null})),uy()),(!o||1&i[0]&&n!==(n="range-annotation dw-line line "+t[0].type+" svelte-f85b34"))&&Pb(e,"class",n),(!o||32785&i[0]&&r!==(r=t[15](t[0],t[4])))&&Pb(e,"style",r),(!o||33&i[0])&&Fb(e,"edit-mode",t[5]),(!o||33&i[0])&&Fb(e,"no-edit-mode",!t[5]),(!o||257&i[0])&&Fb(e,"selected",t[8])},i(t){o||(hy(s),o=!0)},o(t){fy(s),o=!1},d(t){t&&$b(e),s&&s.d(),i=!1,a()}}}function $v(t){let e,n,r,o,i,a,s,l,c,u,h;function f(e){t[35](e)}function d(e){t[36](e)}let p={type:"range",annotation:t[0],index:t[6],repeatedIndex:t[7],orientation:t[0].type,rangeOverPlotStart:t[11],rangeOverPlotEnd:t[12]};return void 0!==t[3]&&(p.activeResizer=t[3]),void 0!==t[1]&&(p.resizing=t[1]),o=new $y({props:p}),Xb.push((()=>py(o,"activeResizer",f))),Xb.push((()=>py(o,"resizing",d))),o.$on("selectAnnotation",t[37]),{c(){e=Sb("div"),n=Sb("div"),n.innerHTML='<div class="dot svelte-f85b34"></div>',r=Cb(),gy(o.$$.fragment),Pb(n,"class","dot-drag svelte-f85b34"),Pb(e,"style",s=t[16](t[0],t[4])),Pb(e,"class",l="range-annotation edit-mode range "+t[0].type+" svelte-f85b34"),Fb(e,"edit-mode",t[5]),Fb(e,"no-edit-mode",!t[5]),Fb(e,"selected",t[8]),Fb(e,"dragging",t[2]),Fb(e,"start-out-of-bounds",t[11]),Fb(e,"end-out-of-bounds",t[12])},m(i,a){Eb(i,e,a),Tb(e,n),Tb(e,r),my(o,e,null),c=!0,u||(h=zb(n,"mousedown",Rb(t[18])),u=!0)},p(t,n){const r={};1&n[0]&&(r.annotation=t[0]),64&n[0]&&(r.index=t[6]),128&n[0]&&(r.repeatedIndex=t[7]),1&n[0]&&(r.orientation=t[0].type),2048&n[0]&&(r.rangeOverPlotStart=t[11]),4096&n[0]&&(r.rangeOverPlotEnd=t[12]),!i&&8&n[0]&&(i=!0,r.activeResizer=t[3],ny((()=>i=!1))),!a&&2&n[0]&&(a=!0,r.resizing=t[1],ny((()=>a=!1))),o.$set(r),(!c||65553&n[0]&&s!==(s=t[16](t[0],t[4])))&&Pb(e,"style",s),(!c||1&n[0]&&l!==(l="range-annotation edit-mode range "+t[0].type+" svelte-f85b34"))&&Pb(e,"class",l),(!c||33&n[0])&&Fb(e,"edit-mode",t[5]),(!c||33&n[0])&&Fb(e,"no-edit-mode",!t[5]),(!c||257&n[0])&&Fb(e,"selected",t[8]),(!c||5&n[0])&&Fb(e,"dragging",t[2]),(!c||2049&n[0])&&Fb(e,"start-out-of-bounds",t[11]),(!c||4097&n[0])&&Fb(e,"end-out-of-bounds",t[12])},i(t){c||(hy(o.$$.fragment,t),c=!0)},o(t){fy(o.$$.fragment,t),c=!1},d(t){t&&$b(e),by(o),u=!1,h()}}}function Ov(t){let e,n,r,o;function i(e){t[32](e)}function a(e){t[33](e)}let s={type:"line",annotation:t[0],index:t[6],repeatedIndex:t[7],orientation:t[0].type,lineOverPlotStart:t[13],lineOverPlotEnd:t[14]};return void 0!==t[3]&&(s.activeResizer=t[3]),void 0!==t[1]&&(s.resizing=t[1]),e=new $y({props:s}),Xb.push((()=>py(e,"activeResizer",i))),Xb.push((()=>py(e,"resizing",a))),e.$on("selectAnnotation",t[34]),{c(){gy(e.$$.fragment)},m(t,n){my(e,t,n),o=!0},p(t,o){const i={};1&o[0]&&(i.annotation=t[0]),64&o[0]&&(i.index=t[6]),128&o[0]&&(i.repeatedIndex=t[7]),1&o[0]&&(i.orientation=t[0].type),8192&o[0]&&(i.lineOverPlotStart=t[13]),16384&o[0]&&(i.lineOverPlotEnd=t[14]),!n&&8&o[0]&&(n=!0,i.activeResizer=t[3],ny((()=>n=!1))),!r&&2&o[0]&&(r=!0,i.resizing=t[1],ny((()=>r=!1))),e.$set(i)},i(t){o||(hy(e.$$.fragment,t),o=!0)},o(t){fy(e.$$.fragment,t),o=!1},d(t){by(e,t)}}}function Sv(t){let e,n,r,o,i,a;const s=[Ev,_v],l=[];function c(t,e){return"line"!==t[0].display||t[10]?t[10]||t[9]?-1:1:0}return~(e=c(t))&&(n=l[e]=s[e](t)),{c(){n&&n.c(),r=Db()},m(n,s){~e&&l[e].m(n,s),Eb(n,r,s),o=!0,i||(a=zb(window,"keydown",t[17]),i=!0)},p(t,o){let i=e;e=c(t),e===i?~e&&l[e].p(t,o):(n&&(cy(),fy(l[i],1,1,(()=>{l[i]=null})),uy()),~e?(n=l[e],n?n.p(t,o):(n=l[e]=s[e](t),n.c()),hy(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||(hy(n),o=!0)},o(t){fy(n),o=!1},d(t){t&&$b(r),~e&&l[e].d(t),i=!1,a()}}}function Nv(t,e,n){return!t.showInAllPlots||t.showInAllPlots&&e===n.activeRepeatedAnnotationIndex}function Lv(t,e,n){let r,o,i,a,s,l,c,u,{annotation:h}=e,{dataToPx:f}=e,{pxToData:d}=e,{bounds:p}=e,{theme:g}=e,{cm:m}=e,{editMode:b=!1}=e,{editorState:y}=e,{index:v}=e,{repeatedIndex:x}=e,{moveX:w=0}=e,{moveY:k=0}=e,{resizing:M=!1}=e,{dragging:A=!1}=e,{activeResizer:T}=e,{forceAnchorDragTemp:_}=e,E=!1;const $=qb();function O(t,e){const{color:n,opacity:r,display:o}=t,i=function(t){const{color:e,opacity:n,display:r}=t,{color:o,opacity:i}=y.defaults[r]||{};return Gt(String(e)).toString()===Gt(String(o)).toString()&&i===n}(t),a=Wh(e,"vis.base.annotations.".concat(o),{}),s=i&&a.color&&"opacity"in a?ev(a.color,a.opacity):ev(n,r/100);return m(s,{noInvert:i})}function S(t){const e="x"===t?p.x:p.y;return{plotStart:e,plotEnd:e+("x"===t?p.width:p.height),plotOtherAxisStart:"x"===t?p.y:p.x,plotOtherAxisSize:"x"===t?p.height:p.width}}let N=!1,L=!1,C=!1,D=!1;function z(){h.showInAllPlots&&x!==y.activeRepeatedAnnotationIndex||$("updateAnnotation",{annotation:h,index:v,type:"range",id:h.id})}return t.$$set=t=>{"annotation"in t&&n(0,h=t.annotation),"dataToPx"in t&&n(21,f=t.dataToPx),"pxToData"in t&&n(22,d=t.pxToData),"bounds"in t&&n(23,p=t.bounds),"theme"in t&&n(4,g=t.theme),"cm"in t&&n(24,m=t.cm),"editMode"in t&&n(5,b=t.editMode),"editorState"in t&&n(25,y=t.editorState),"index"in t&&n(6,v=t.index),"repeatedIndex"in t&&n(7,x=t.repeatedIndex),"moveX"in t&&n(19,w=t.moveX),"moveY"in t&&n(20,k=t.moveY),"resizing"in t&&n(1,M=t.resizing),"dragging"in t&&n(2,A=t.dragging),"activeResizer"in t&&n(3,T=t.activeResizer),"forceAnchorDragTemp"in t&&n(26,_=t.forceAnchorDragTemp)},t.$$.update=()=>{if(33554432&t.$$.dirty[0]&&function(t){n(8,E=1===t.selectedRangeAnnotations.length&&t.selectedRangeAnnotations[0]===h.id)}(y),116916619&t.$$.dirty[0]&&E&&Nv(h,x,y)&&M&&(w||k)){if(["l","r"].includes(T)){const t=f(h.x0,0,h._plot)[0],e=f(h.x1,0,h._plot)[0];let r="x0";"l"===T&&"line"===h.display?r="x0":"l"===T?r=t>e?"x1":"x0":"r"===T&&(r=t>e?"x0":"x1");let[o]=f(h[r],0,h._plot),i=f(h["x1"===r?"x0":"x1"],0,h._plot)[0];o-i>0!=o+w-i>0&&n(3,T="l"===T?"r":"l"),o+=w;const a=p.x,s=p.x+p.width;if(o>=a&&o<=s){const{x:t}=d(o,p.y);if(n(0,h[r]=t,h),_&&(i-=w,i>=a&&i<=s)){const{x:t}=d(i,p.y);n(0,h["x1"===r?"x0":"x1"]=t,h)}}}else{const t=f(0,h.y0,h._plot)[1],e=f(0,h.y1,h._plot)[1];let r="y0";"t"===T&&"line"===h.display?r="y0":"t"===T?r=t<e?"y0":"y1":"b"===T&&(r=t<e?"y1":"y0");let o=f(0,h[r],h._plot)[1];const i=f(0,h["y1"===r?"y0":"y1"],h._plot)[1];o-i>0!=o+k-i>0&&n(3,T="t"===T?"b":"t"),o+=k;const a=p.y,s=p.y+p.height;if(o>=a&&o<=s){const{y:t}=d(p.x,o);n(0,h[r]=t,h)}}n(19,w=0),n(20,k=0),z()}if(49807749&t.$$.dirty[0]&&E&&Nv(h,x,y)&&A&&(w||k)){const t=h.type;if("x"===t){let[e,r]=f(h.x0,0,h._plot),[o,i]=f(h.x1,0,h._plot);e+=w,o+=w;if(wy({start:Math.min(e,o),end:Math.max(e,o),bounds:p,type:t,move:w})){const{x:t}=d(e,p.y),{x:r}=d(o,p.y);n(0,h.x0=t,h),n(0,h.x1=r,h)}}else{let[e,r]=f(0,h.y0,h._plot),[o,i]=f(0,h.y1,h._plot);r+=k,i+=k;if(wy({start:Math.min(r,i),end:Math.max(r,i),bounds:p,type:t,move:k})){const{y:t}=d(p.x,r),{y:e}=d(p.x,i);n(0,h.y0=t,h),n(0,h.y1=e,h)}}n(19,w=0),n(20,k=0),z()}if(2097153&t.$$.dirty[0]&&n(28,[r,o]=function(t,e){return["x"===t.type?e(t.x0,0,t._plot)[0]:e(0,t.y0,t._plot)[1],"x"===t.type?e(t.x1,0,t._plot)[0]:e(0,t.y1,t._plot)[1]]}(h,f),r,(n(27,o),n(0,h),n(21,f),n(8,E),n(7,x),n(25,y),n(1,M),n(19,w),n(20,k),n(3,T),n(23,p),n(22,d),n(26,_),n(2,A))),268435456&t.$$.dirty[0]&&n(10,i=void 0===r),134217728&t.$$.dirty[0]&&n(9,a=void 0===o),402653184&t.$$.dirty[0]&&n(30,s=Math.min(r,o)),402653184&t.$$.dirty[0]&&n(29,l=Math.max(r,o)),1610612736&t.$$.dirty[0]&&n(16,c=(t,e)=>{const{type:r}=t,o=[],{plotStart:i,plotEnd:a,plotOtherAxisStart:c,plotOtherAxisSize:u}=S(r),h=Math.max(s,i),f=Math.min(l-s,a-s,l-i);return n(11,N=s<i),n(12,L=l>a),f>=0?(o.push("".concat("x"===r?"left":"top",": ").concat(h,"px")),o.push("".concat("x"===r?"width":"height",": ").concat(f,"px")),o.push("".concat("x"===r?"top":"left",": ").concat(c,"px")),o.push("".concat("x"===r?"height":"width",": ").concat(u,"px"))):o.push("display: none"),o.push("background-color: ".concat(O(t,e))),o.join("; ")}),268435456&t.$$.dirty[0]&&n(15,u=(t,e)=>{const{type:o,strokeWidth:i,strokeType:a}=t,s=i||1,l=[],{plotStart:c,plotEnd:u,plotOtherAxisStart:h,plotOtherAxisSize:f}=S(o),d=r-s/2;if(r<=u&&r>=c){l.push("".concat("x"===o?"left":"top",": ").concat(d,"px")),l.push("".concat("x"===o?"top":"left",": ").concat(h,"px")),l.push("".concat("x"===o?"height":"width",": ").concat(f,"px")),l.push("".concat("x"===o?"border-left-width":"border-top-width",": ").concat(s,"px"));const t=r+s/2-s,e=r-s/2+s,i=-5;if(n(13,C=!1),n(14,D=!1),t<c){const e=Number((c-t).toFixed(1)),r="x"===o?"0 ".concat(i,"px 0 ").concat(e,"px"):"".concat(e,"px 0 ").concat(i,"px 0");l.push("clip-path: inset(".concat(r,")")),n(13,C=!0)}if(e>u){const t=Number((e-u).toFixed(1)),r="x"===o?"0 ".concat(t,"px 0 ").concat(i,"px"):"".concat(i,"px 0 ").concat(t,"px 0");l.push("clip-path: inset(".concat(r,")")),n(14,D=!0)}}else l.push("display: none");return l.push("border-color: ".concat(O(t,e))),l.push("border-style: ".concat(a||"solid")),l.join("; ")}),411043585&t.$$.dirty[0]&&E){const t={start:r,end:o,invalidStart:i,invalidEnd:a,bounds:p,plot:h._plot};$("updateEditorState",{selectedAnnotationProps:t})}},[h,M,A,T,g,b,v,x,E,a,i,N,L,C,D,u,c,function(t){b&&"Escape"===t.key&&E&&$("selectAnnotation",null)},function(){b&&($("selectAnnotation",{type:"range",index:v,repeatedIndex:x,id:h.id}),n(2,A=!0))},w,k,f,d,p,m,y,_,o,r,l,s,function(e){Gb.call(this,t,e)},function(t){T=t,n(3,T),n(8,E),n(0,h),n(7,x),n(25,y),n(1,M),n(19,w),n(20,k),n(21,f),n(23,p),n(22,d),n(26,_),n(2,A)},function(t){M=t,n(1,M)},function(e){Gb.call(this,t,e)},function(t){T=t,n(3,T),n(8,E),n(0,h),n(7,x),n(25,y),n(1,M),n(19,w),n(20,k),n(21,f),n(23,p),n(22,d),n(26,_),n(2,A)},function(t){M=t,n(1,M)},function(e){Gb.call(this,t,e)}]}class Cv extends vy{constructor(t){super(),yy(this,t,Lv,Sv,xb,{annotation:0,dataToPx:21,pxToData:22,bounds:23,theme:4,cm:24,editMode:5,editorState:25,index:6,repeatedIndex:7,moveX:19,moveY:20,resizing:1,dragging:2,activeResizer:3,forceAnchorDragTemp:26},Tv,[-1,-1])}}var Dv=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},zv=yf,Rv=pf;var Pv=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var s=e[i],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),o?Rv(n,s,l):zv(n,s,l)}return n},jv=Pv,Iv=fc;var Fv=function(t,e){return t&&jv(e,Iv(e),t)};var Uv=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Bv=Ra,Hv=Ql,Yv=Uv,Wv=Object.prototype.hasOwnProperty;var qv=function(t){if(!Bv(t))return Yv(t);var e=Hv(t),n=[];for(var r in t)("constructor"!=r||!e&&Wv.call(t,r))&&n.push(r);return n},Gv=Zl,Vv=qv,Xv=lc;var Kv=function(t){return Xv(t)?Gv(t,!0):Vv(t)},Zv=Pv,Jv=Kv;var Qv=function(t,e){return t&&Zv(e,Jv(e),t)},tx={exports:{}};!function(t,e){var n=Ti,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}(tx,tx.exports);var ex=tx.exports;var nx=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},rx=Pv,ox=$l;var ix=function(t,e){return rx(t,ox(t),e)},ax=wi,sx=ed,lx=$l,cx=kl,ux=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ax(e,lx(t)),t=sx(t);return e}:cx,hx=Pv,fx=ux;var dx=function(t,e){return hx(t,fx(t),e)},px=wl,gx=ux,mx=Kv;var bx=function(t){return px(t,mx,gx)},yx=Object.prototype.hasOwnProperty;var vx=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&yx.call(t,"index")&&(n.index=t.index,n.input=t.input),n},xx=ll;var wx=function(t){var e=new t.constructor(t.byteLength);return new xx(e).set(new xx(t)),e},kx=wx;var Mx=function(t,e){var n=e?kx(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Ax=/\w*$/;var Tx=function(t){var e=new t.constructor(t.source,Ax.exec(t));return e.lastIndex=t.lastIndex,e},_x=_i?_i.prototype:void 0,Ex=_x?_x.valueOf:void 0;var $x=wx;var Ox=wx,Sx=Mx,Nx=Tx,Lx=function(t){return Ex?Object(Ex.call(t)):{}},Cx=function(t,e){var n=e?$x(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Dx=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return Ox(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return Sx(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Cx(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Nx(t);case"[object Symbol]":return Lx(t)}},zx=Ra,Rx=Object.create,Px=function(){function t(){}return function(e){if(!zx(e))return{};if(Rx)return Rx(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),jx=Px,Ix=ed,Fx=Ql;var Ux=function(t){return"function"!=typeof t.constructor||Fx(t)?{}:jx(Ix(t))},Bx=Uc,Hx=ji;var Yx=function(t){return Hx(t)&&"[object Map]"==Bx(t)},Wx=sa,qx=ca&&ca.isMap,Gx=qx?Wx(qx):Yx,Vx=Uc,Xx=ji;var Kx=function(t){return Xx(t)&&"[object Set]"==Vx(t)},Zx=sa,Jx=ca&&ca.isSet,Qx=Jx?Zx(Jx):Kx,tw=Zs,ew=Dv,nw=yf,rw=Fv,ow=Qv,iw=ex,aw=nx,sw=ix,lw=dx,cw=mc,uw=bx,hw=Uc,fw=vx,pw=Dx,gw=Ux,mw=Vi,bw=Ll,yw=Gx,vw=Ra,xw=Qx,ww=fc,kw=Kv,Mw="[object Arguments]",Aw="[object Function]",Tw="[object Object]",_w={};_w[Mw]=_w["[object Array]"]=_w["[object ArrayBuffer]"]=_w["[object DataView]"]=_w["[object Boolean]"]=_w["[object Date]"]=_w["[object Float32Array]"]=_w["[object Float64Array]"]=_w["[object Int8Array]"]=_w["[object Int16Array]"]=_w["[object Int32Array]"]=_w["[object Map]"]=_w["[object Number]"]=_w[Tw]=_w["[object RegExp]"]=_w["[object Set]"]=_w["[object String]"]=_w["[object Symbol]"]=_w["[object Uint8Array]"]=_w["[object Uint8ClampedArray]"]=_w["[object Uint16Array]"]=_w["[object Uint32Array]"]=!0,_w["[object Error]"]=_w[Aw]=_w["[object WeakMap]"]=!1;var Ew=function t(e,n,r,o,i,a){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=i?r(e,o,i,a):r(e)),void 0!==s)return s;if(!vw(e))return e;var h=mw(e);if(h){if(s=fw(e),!l)return aw(e,s)}else{var f=hw(e),d=f==Aw||"[object GeneratorFunction]"==f;if(bw(e))return iw(e,l);if(f==Tw||f==Mw||d&&!i){if(s=c||d?{}:gw(e),!l)return c?lw(e,ow(s,e)):sw(e,rw(s,e))}else{if(!_w[f])return i?e:{};s=pw(e,f,l)}}a||(a=new tw);var p=a.get(e);if(p)return p;a.set(e,s),xw(e)?e.forEach((function(o){s.add(t(o,n,r,o,e,a))})):yw(e)&&e.forEach((function(o,i){s.set(i,t(o,n,r,i,e,a))}));var g=h?void 0:(u?c?uw:cw:c?kw:ww)(e);return ew(g||e,(function(o,i){g&&(o=e[i=o]),nw(s,i,t(o,n,r,i,e,a))})),s},$w=Ew;var Ow=zo((function(t){return $w(t,5)})),Sw=ru;var Nw=zo((function(t,e){return Sw(t,e)}));let Lw=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[t]];return e};function Cw(){return Lw(10)}const{document:Dw}=Ab;function zw(t){_b(t,"svelte-16allph","body{overflow-x:hidden}.annotations-inner.svelte-16allph.svelte-16allph{width:100%;height:100%;pointer-events:none}.annotations-inner.editing.svelte-16allph.svelte-16allph{pointer-events:auto}.annotations-inner.create-mode.svelte-16allph.svelte-16allph{cursor:crosshair;-webkit-user-select:none;user-select:none}.annotations-inner.create-mode.svelte-16allph .text-annotation,.annotations-inner.create-mode.svelte-16allph .text-annotation .resizer,.annotations-inner.create-mode.svelte-16allph .range-annotation,.annotations-inner.create-mode.svelte-16allph .range-annotation .resizer{pointer-events:none}.create-rect.svelte-16allph.svelte-16allph{z-index:1}.create-rect.text.svelte-16allph.svelte-16allph{position:absolute;outline:1px solid rgba(255, 0, 221, 0.95);background:rgba(255, 0, 221, 0.1)}.create-rect.range.svelte-16allph.svelte-16allph{position:absolute;background:rgba(0, 0, 0, 0.1)}.annotation-keys{display:flex;flex-direction:column;gap:5px;width:100%;margin-top:10px}.annotation-keys.hide{display:none}.annotation-keys .key{display:flex;align-items:baseline}.annotation-keys .num{flex:0 0 auto;display:flex;justify-content:center;align-items:center;font-size:12px;border-radius:50%;width:20px;height:20px}.annotation-keys.dir-rtl .num{margin-left:5px}.annotation-keys:not(.dir-rtl) .num{margin-right:5px}.annotation-keys .num.dw-bold{font-weight:700}.annotation-plot.svelte-16allph.svelte-16allph{position:absolute;width:100%;height:100%;box-sizing:border-box;border:1px dashed rgba(255, 0, 221, 0);transition:border-color 200ms}.annotation-plot.show-bounds.svelte-16allph.svelte-16allph{border-color:rgba(255, 0, 221, 0.5);transition-delay:100ms}.annotations-inner.creating.svelte-16allph .annotation-plot.svelte-16allph:not(.create-plot){cursor:default}.enter-plot.svelte-16allph.svelte-16allph{background:rgba(255, 0, 221, 0.1)}")}function Rw(t,e,n){const r=t.slice();return r[88]=e[n],r}function Pw(t,e,n){const r=t.slice();return r[88]=e[n],r}function jw(t,e,n){const r=t.slice();return r[93]=e[n],r}function Iw(t){let e,n=dy(t[11]),r=[];for(let e=0;e<n.length;e+=1)r[e]=Fw(jw(t,n,e));return{c(){e=Sb("div");for(let t=0;t<r.length;t+=1)r[t].c();Pb(e,"class","annotation-plots")},m(t,n){Eb(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,o){if(1574913&o[0]|3&o[1]){let i;for(n=dy(t[11]),i=0;i<n.length;i+=1){const a=jw(t,n,i);r[i]?r[i].p(a,o):(r[i]=Fw(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&$b(e),Ob(r,t)}}}function Fw(t){let e;return{c(){e=Sb("div"),Pb(e,"class","annotation-plot svelte-16allph"),Fb(e,"create-plot",t[19]&&t[20]&&t[93].name===t[20].name),Fb(e,"enter-plot",t[0].plotHasUpdated&&t[0].selectedAnnotationProps.plot===t[93].name),Fb(e,"show-bounds",t[32][t[93].name]),Fb(e,"assigned-plot",t[31]===t[93].name),Ib(e,"width","".concat(t[93].width,"px")),Ib(e,"height","".concat(t[93].height,"px")),Ib(e,"left","".concat(t[93].x,"px")),Ib(e,"top","".concat(t[93].y,"px")),Ib(e,"opacity","1")},m(t,n){Eb(t,e,n)},p(t,n){1574912&n[0]&&Fb(e,"create-plot",t[19]&&t[20]&&t[93].name===t[20].name),2049&n[0]&&Fb(e,"enter-plot",t[0].plotHasUpdated&&t[0].selectedAnnotationProps.plot===t[93].name),2048&n[0]|2&n[1]&&Fb(e,"show-bounds",t[32][t[93].name]),2048&n[0]|1&n[1]&&Fb(e,"assigned-plot",t[31]===t[93].name),2048&n[0]&&Ib(e,"width","".concat(t[93].width,"px")),2048&n[0]&&Ib(e,"height","".concat(t[93].height,"px")),2048&n[0]&&Ib(e,"left","".concat(t[93].x,"px")),2048&n[0]&&Ib(e,"top","".concat(t[93].y,"px"))},d(t){t&&$b(e)}}}function Uw(t){let e,n,r,o,i,a,s,l,c,u,h;function f(e){t[60](e)}function d(e){t[61](e)}function p(e){t[62](e)}function g(e){t[63](e)}function m(e){t[64](e)}function b(e){t[65](e)}function y(e){t[66](e)}function v(e){t[67](e)}function x(e){t[68](e)}let w={annotation:t[88],dataToPx:t[2],pxToData:t[3],bounds:t[88]._bounds,theme:t[4],cm:t[5],chroma:t[7],purifyHtml:t[8],key:t[14][t[88]._index],rtl:t[9],mirrorX:t[10],isMobileWidth:t[22],editMode:t[12],editorState:t[0],forceAnchorDragTemp:t[28],index:t[88]._index,repeatedIndex:t[88]._repeatedIndex};return void 0!==t[25]&&(w.noOffsetAtEventStart=t[25]),void 0!==t[30]&&(w.isEditable=t[30]),void 0!==t[17]&&(w.dragging=t[17]),void 0!==t[27]&&(w.forceAnchorDrag=t[27]),void 0!==t[26]&&(w.forceOffsetDrag=t[26]),void 0!==t[15]&&(w.moveX=t[15]),void 0!==t[16]&&(w.moveY=t[16]),void 0!==t[18]&&(w.resizing=t[18]),void 0!==t[29]&&(w.activeResizer=t[29]),e=new Av({props:w}),Xb.push((()=>py(e,"noOffsetAtEventStart",f))),Xb.push((()=>py(e,"isEditable",d))),Xb.push((()=>py(e,"dragging",p))),Xb.push((()=>py(e,"forceAnchorDrag",g))),Xb.push((()=>py(e,"forceOffsetDrag",m))),Xb.push((()=>py(e,"moveX",b))),Xb.push((()=>py(e,"moveY",y))),Xb.push((()=>py(e,"resizing",v))),Xb.push((()=>py(e,"activeResizer",x))),e.$on("selectAnnotation",t[36]),e.$on("updateEditorState",t[38]),e.$on("updateAnnotation",t[37]),{c(){gy(e.$$.fragment)},m(t,n){my(e,t,n),h=!0},p(t,h){const f={};16&h[1]&&(f.annotation=t[88]),4&h[0]&&(f.dataToPx=t[2]),8&h[0]&&(f.pxToData=t[3]),16&h[1]&&(f.bounds=t[88]._bounds),16&h[0]&&(f.theme=t[4]),32&h[0]&&(f.cm=t[5]),128&h[0]&&(f.chroma=t[7]),256&h[0]&&(f.purifyHtml=t[8]),16384&h[0]|16&h[1]&&(f.key=t[14][t[88]._index]),512&h[0]&&(f.rtl=t[9]),1024&h[0]&&(f.mirrorX=t[10]),4194304&h[0]&&(f.isMobileWidth=t[22]),4096&h[0]&&(f.editMode=t[12]),1&h[0]&&(f.editorState=t[0]),268435456&h[0]&&(f.forceAnchorDragTemp=t[28]),16&h[1]&&(f.index=t[88]._index),16&h[1]&&(f.repeatedIndex=t[88]._repeatedIndex),!n&&33554432&h[0]&&(n=!0,f.noOffsetAtEventStart=t[25],ny((()=>n=!1))),!r&&1073741824&h[0]&&(r=!0,f.isEditable=t[30],ny((()=>r=!1))),!o&&131072&h[0]&&(o=!0,f.dragging=t[17],ny((()=>o=!1))),!i&&134217728&h[0]&&(i=!0,f.forceAnchorDrag=t[27],ny((()=>i=!1))),!a&&67108864&h[0]&&(a=!0,f.forceOffsetDrag=t[26],ny((()=>a=!1))),!s&&32768&h[0]&&(s=!0,f.moveX=t[15],ny((()=>s=!1))),!l&&65536&h[0]&&(l=!0,f.moveY=t[16],ny((()=>l=!1))),!c&&262144&h[0]&&(c=!0,f.resizing=t[18],ny((()=>c=!1))),!u&&536870912&h[0]&&(u=!0,f.activeResizer=t[29],ny((()=>u=!1))),e.$set(f)},i(t){h||(hy(e.$$.fragment,t),h=!0)},o(t){fy(e.$$.fragment,t),h=!1},d(t){by(e,t)}}}function Bw(t){let e,n,r,o,i,a,s;function l(e){t[70](e)}function c(e){t[71](e)}function u(e){t[72](e)}function h(e){t[73](e)}function f(e){t[74](e)}let d={annotation:t[88],dataToPx:t[2],pxToData:t[3],bounds:t[88]._bounds,theme:t[4],cm:t[5],editMode:t[12],editorState:t[0],forceAnchorDragTemp:t[28],index:t[88]._index,repeatedIndex:t[88]._repeatedIndex};return void 0!==t[17]&&(d.dragging=t[17]),void 0!==t[15]&&(d.moveX=t[15]),void 0!==t[16]&&(d.moveY=t[16]),void 0!==t[18]&&(d.resizing=t[18]),void 0!==t[29]&&(d.activeResizer=t[29]),e=new Cv({props:d}),Xb.push((()=>py(e,"dragging",l))),Xb.push((()=>py(e,"moveX",c))),Xb.push((()=>py(e,"moveY",u))),Xb.push((()=>py(e,"resizing",h))),Xb.push((()=>py(e,"activeResizer",f))),e.$on("selectAnnotation",t[36]),e.$on("updateEditorState",t[38]),e.$on("updateAnnotation",t[37]),{c(){gy(e.$$.fragment)},m(t,n){my(e,t,n),s=!0},p(t,s){const l={};8&s[1]&&(l.annotation=t[88]),4&s[0]&&(l.dataToPx=t[2]),8&s[0]&&(l.pxToData=t[3]),8&s[1]&&(l.bounds=t[88]._bounds),16&s[0]&&(l.theme=t[4]),32&s[0]&&(l.cm=t[5]),4096&s[0]&&(l.editMode=t[12]),1&s[0]&&(l.editorState=t[0]),268435456&s[0]&&(l.forceAnchorDragTemp=t[28]),8&s[1]&&(l.index=t[88]._index),8&s[1]&&(l.repeatedIndex=t[88]._repeatedIndex),!n&&131072&s[0]&&(n=!0,l.dragging=t[17],ny((()=>n=!1))),!r&&32768&s[0]&&(r=!0,l.moveX=t[15],ny((()=>r=!1))),!o&&65536&s[0]&&(o=!0,l.moveY=t[16],ny((()=>o=!1))),!i&&262144&s[0]&&(i=!0,l.resizing=t[18],ny((()=>i=!1))),!a&&536870912&s[0]&&(a=!0,l.activeResizer=t[29],ny((()=>a=!1))),e.$set(l)},i(t){s||(hy(e.$$.fragment,t),s=!0)},o(t){fy(e.$$.fragment,t),s=!1},d(t){by(e,t)}}}function Hw(t){let e,n,r;return{c(){e=Sb("div"),Pb(e,"class",n="create-rect "+t[0].createMode+" svelte-16allph"),Pb(e,"style",r=t[33](t[20]))},m(t,n){Eb(t,e,n)},p(t,o){1&o[0]&&n!==(n="create-rect "+t[0].createMode+" svelte-16allph")&&Pb(e,"class",n),1048576&o[0]|4&o[1]&&r!==(r=t[33](t[20]))&&Pb(e,"style",r)},d(t){t&&$b(e)}}}function Yw(t){let e,n,r,o,i,a,s,l,c,u;ey(t[59]);let h=t[12]&&t[11]&&t[11].length&&Iw(t),f=dy(t[35]),d=[];for(let e=0;e<f.length;e+=1)d[e]=Uw(Pw(t,f,e));const p=t=>fy(d[t],1,1,(()=>{d[t]=null}));let g=dy(t[34]),m=[];for(let e=0;e<g.length;e+=1)m[e]=Bw(Rw(t,g,e));const b=t=>fy(m[t],1,1,(()=>{m[t]=null}));let y=t[12]&&t[19]&&Hw(t);return{c(){e=Cb(),n=Sb("div"),h&&h.c(),r=Cb(),o=Sb("div");for(let t=0;t<d.length;t+=1)d[t].c();i=Cb(),a=Sb("div");for(let t=0;t<m.length;t+=1)m[t].c();s=Cb(),y&&y.c(),Pb(o,"class","text-annotations"),Pb(o,"aria-label",t[6]),Pb(o,"role","list"),Pb(a,"class","range-annotations"),Pb(n,"data-uid",t[1]),Pb(n,"class","annotations-inner svelte-16allph"),Fb(n,"editing",t[21]),Fb(n,"create-mode",!!t[0].createMode),Fb(n,"creating",t[19])},m(f,p){Eb(f,e,p),Eb(f,n,p),h&&h.m(n,null),Tb(n,r),Tb(n,o);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(o,null);t[69](o),Tb(n,i),Tb(n,a);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(a,null);var g;Tb(n,s),y&&y.m(n,null),t[75](n),l=!0,c||(u=[zb(window,"keydown",t[39]),zb(window,"mousedown",t[40]),zb(window,"mousemove",t[41]),zb(window,"mouseup",t[42]),zb(window,"resize",t[59]),zb(Dw.body,"mouseleave",t[43]),zb(n,"mousedown",(g=t[44],function(t){return t.preventDefault(),g.call(this,t)}))],c=!0)},p(t,e){if(t[12]&&t[11]&&t[11].length?h?h.p(t,e):(h=Iw(t),h.c(),h.m(n,r)):h&&(h.d(1),h=null),2118637501&e[0]|240&e[1]){let n;for(f=dy(t[35]),n=0;n<f.length;n+=1){const r=Pw(t,f,n);d[n]?(d[n].p(r,e),hy(d[n],1)):(d[n]=Uw(r),d[n].c(),hy(d[n],1),d[n].m(o,null))}for(cy(),n=f.length;n<d.length;n+=1)p(n);uy()}if((!l||64&e[0])&&Pb(o,"aria-label",t[6]),805802045&e[0]|232&e[1]){let n;for(g=dy(t[34]),n=0;n<g.length;n+=1){const r=Rw(t,g,n);m[n]?(m[n].p(r,e),hy(m[n],1)):(m[n]=Bw(r),m[n].c(),hy(m[n],1),m[n].m(a,null))}for(cy(),n=g.length;n<m.length;n+=1)b(n);uy()}t[12]&&t[19]?y?y.p(t,e):(y=Hw(t),y.c(),y.m(n,null)):y&&(y.d(1),y=null),(!l||2&e[0])&&Pb(n,"data-uid",t[1]),(!l||2097152&e[0])&&Fb(n,"editing",t[21]),(!l||1&e[0])&&Fb(n,"create-mode",!!t[0].createMode),(!l||524288&e[0])&&Fb(n,"creating",t[19])},i(t){if(!l){for(let t=0;t<f.length;t+=1)hy(d[t]);for(let t=0;t<g.length;t+=1)hy(m[t]);l=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)fy(d[t]);m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)fy(m[t]);l=!1},d(r){r&&($b(e),$b(n)),h&&h.d(),Ob(d,r),t[69](null),Ob(m,r),y&&y.d(),t[75](null),c=!1,yb(u)}}}function Ww(t){let{type:e,createPlot:n,createX:r,createY:o,moveX:i,moveY:a}=t;const s="x"===e?i:a,l="x"===e?r:o,c="x"===e?n.x:n.y,u=c+("x"===e?n.width:n.height),h=s<0?l+s:l,f=Math.max(h,c),d=s<0?l:l+s;return{rangeStart:f,rangeSize:Math.min(d-f,u-f,d-c)}}function qw(t,e,n){let r,o,i,a,s,l,c,u,{uid:h=null}=e,{textAnnotations:f=[]}=e,{rangeAnnotations:d=[]}=e,{dataToPx:p}=e,{pxToData:g}=e,{theme:m}=e,{cm:b=(t=>t)}=e,{visWidth:y}=e,{visHeight:v}=e,{annotationKeysSel:x=null}=e,{ariaLabel:w=""}=e,{chroma:k}=e,{purifyHtml:M}=e,{rtl:A=!1}=e,{mirrorX:T=!1}=e,{plots:_=null}=e,{allowedRangeAnnotationOrientations:E=["x","y"]}=e,{repeatRangeOnSave:$=!1}=e;function O(t,e,n,r){return null===e?nv(n,r):t._plot?e.find((e=>e.name===t._plot)):e[0]}function S(t,e,n,r){const o=t.map(((t,e)=>Object.assign(Object.assign({},t),{_index:e}))),i=e?o.flatMap((t=>t.showInAllPlots?function(t,e){return e.map(((e,n)=>Object.assign(Object.assign({},t),{_plot:e.name,_repeatedIndex:n})))}(t,e):Object.assign(Object.assign({},t),{_plot:t.plot}))):o;return i.map((t=>Object.assign(Object.assign({},t),{_bounds:O(t,e,n,r)}))).filter((t=>!!t._bounds))}function N(t){let{textAnnotation:e,isMobileWidth:n,dataToPx:r}=t;return n&&e.mobileFallback&&!Qy(e)&&!tv(e)&&function(t,e){const[n,r]=e(t.x,t.y);return void 0!==n&&void 0!==r}(e,r)}let L,C,D=[],{editMode:z=!1}=e,{editorState:R={defaults:{},selectedTextAnnotations:[],selectedRangeAnnotations:[],createMode:!1,disableControls:!1,hideConnectorLine:!1,forceOffsetDrag:!1,width:null,height:null,dataToPx:null,pxToData:null,plotHasUpdated:!1,draggingOutOfBounds:!1,activeRepeatedAnnotationIndex:null,messages:{disableControls:""},selectedAnnotationProps:{id:null,plot:null,x:null,y:null,dx:null,dy:null,invalidX:!1,invalidY:!1,width:null,height:null,mobileFallback:!1,text:null,start:null,end:null,invalidStart:!1,invalidEnd:!1,bounds:{}}}}=e;Wb((()=>{R&&C&&(_&&_.length?(n(0,R.width=_[0].width,R),n(0,R.height=_[0].height,R)):(n(0,R.width=C.offsetWidth,R),n(0,R.height=C.offsetHeight,R)))}));let P,j,I,F,U,B=0,H=0,Y=!1,W=!1,q=!1,G=!1,V=0,X=0,K=null,Z=!1,J=null;function Q(){n(25,P=!1),n(26,j=!1),n(27,I=!1),n(28,F=!1),n(0,R.forceOffsetDrag=!1,R),n(17,Y=!1),W=!1,n(18,q=!1),n(0,R.plotHasUpdated=!1,R)}function tt(){n(15,B=0),n(16,H=0),n(19,G=!1),n(54,V=0),n(55,X=0),n(20,K=null),n(0,R.createMode=!1,R)}const et=qb();let nt=!1;const rt=document.querySelector(".dw-chart-body"),ot={};return t.$$set=t=>{"uid"in t&&n(1,h=t.uid),"textAnnotations"in t&&n(45,f=t.textAnnotations),"rangeAnnotations"in t&&n(46,d=t.rangeAnnotations),"dataToPx"in t&&n(2,p=t.dataToPx),"pxToData"in t&&n(3,g=t.pxToData),"theme"in t&&n(4,m=t.theme),"cm"in t&&n(5,b=t.cm),"visWidth"in t&&n(47,y=t.visWidth),"visHeight"in t&&n(48,v=t.visHeight),"annotationKeysSel"in t&&n(49,x=t.annotationKeysSel),"ariaLabel"in t&&n(6,w=t.ariaLabel),"chroma"in t&&n(7,k=t.chroma),"purifyHtml"in t&&n(8,M=t.purifyHtml),"rtl"in t&&n(9,A=t.rtl),"mirrorX"in t&&n(10,T=t.mirrorX),"plots"in t&&n(11,_=t.plots),"allowedRangeAnnotationOrientations"in t&&n(50,E=t.allowedRangeAnnotationOrientations),"repeatRangeOnSave"in t&&n(51,$=t.repeatRangeOnSave),"editMode"in t&&n(12,z=t.editMode),"editorState"in t&&n(0,R=t.editorState)},t.$$.update=()=>{if(2048&t.$$.dirty[0]|212992&t.$$.dirty[1]&&n(58,r=S(f,_,y,v)),2048&t.$$.dirty[0]|753664&t.$$.dirty[1]&&n(57,o=S(d.filter((t=>{let{type:e}=t;return E.includes(e)})),_,y,v)),134217728&t.$$.dirty[1]&&n(35,i=[...r].reverse()),67108864&t.$$.dirty[1]&&n(34,a=[...o].reverse()),8192&t.$$.dirty[0]&&n(22,s=u<=450),144&t.$$.dirty[0]&&n(56,l=Qf(m,k).fallbackBaseColor),4211204&t.$$.dirty[0]|33832960&t.$$.dirty[1]&&x&&(n(14,D=function(t){let{textAnnotations:e,isMobileWidth:n,dataToPx:r}=t,o=0;return e.map((t=>{const e=N({textAnnotation:t,isMobileWidth:n,dataToPx:r});return e&&o++,{render:e,num:e?o:null}}))}({textAnnotations:f,isMobileWidth:s,dataToPx:p})),x.classed("hide",!0).html(""),x.classed("dir-rtl",A),s)){let t=!1;f.forEach(((e,n)=>{const r=D[n];r.render&&(t=!0,null==x||x.append("div.key").html(function(t,e,n){return'<div style="border: 1px solid '.concat(t,'" class="num dw-circle dw-bold"><span class="export-text">').concat(e.num,'</span></div><span class="text export-text">').concat(M(n.text),"</span>")}(l,r,e)))})),x.classed("hide",!t)}5&t.$$.dirty[0]&&R&&n(0,R.dataToPx=p,R),9&t.$$.dirty[0]&&R&&n(0,R.pxToData=g,R),98305&t.$$.dirty[0]|25690112&t.$$.dirty[1]&&n(33,c=t=>{if(!t)return;const e=[];if("text"===R.createMode){if(Math.abs(B)<1)return;return e.push("top: ".concat(H>0?X:X+H,"px")),e.push("height: ".concat(H>0?H:-H,"px")),e.push("left: ".concat(B>0?V:V+B,"px")),e.push("width: ".concat(B>0?B:-B,"px")),e.join("; ")}if("range"===R.createMode){if(Math.abs(B)<1&&Math.abs(H)<1)return;if(Math.abs(H)>Math.abs(B)&&E.includes("y")){const{rangeStart:n,rangeSize:r}=Ww({type:"y",createPlot:t,createX:V,createY:X,moveX:B,moveY:H});e.push("top: ".concat(n,"px")),e.push("height: ".concat(r,"px")),e.push("left: ".concat(t.x,"px")),e.push("width: ".concat(t.width,"px"))}else{const{rangeStart:n,rangeSize:r}=Ww({type:"x",createPlot:t,createX:V,createY:X,moveX:B,moveY:H});e.push("left: ".concat(n,"px")),e.push("width: ".concat(r,"px")),e.push("top: ".concat(t.y,"px")),e.push("height: ".concat(t.height,"px"))}}return e.join("; ")}),4097&t.$$.dirty[0]|49152&t.$$.dirty[1]&&z&&et("update",{rangeAnnotations:Ow(d),textAnnotations:Ow(f),editorState:Ow(R)}),3014657&t.$$.dirty[0]&&(n(21,nt=Y||q||G||!!R.createMode),rt&&(nt?rt.classList.add("editing-annotations"):rt.classList.remove("editing-annotations"))),395265&t.$$.dirty[0]&&_&&_.forEach((t=>{const e=R.selectedRangeAnnotations.length>0&&(q||Y)&&R.selectedAnnotationProps&&(R.selectedAnnotationProps.plot===t.name||null!==R.activeRepeatedAnnotationIndex&&R.activeRepeatedAnnotationIndex>=0),r=R.selectedTextAnnotations.length>0&&Y;n(32,ot[t.name]=!!R.createMode||r||e,ot)}))},[R,h,p,g,m,b,w,k,M,A,T,_,z,u,D,B,H,Y,q,G,K,nt,s,L,C,P,j,I,F,U,Z,J,ot,c,a,i,function(t){if(null===t.detail)return n(0,R.selectedTextAnnotations=[],R),n(0,R.selectedRangeAnnotations=[],R),n(0,R.activeRepeatedAnnotationIndex=null,R),void n(30,Z=!1);if(n(0,R.activeRepeatedAnnotationIndex=t.detail.repeatedIndex,R),"text"===t.detail.type){const e=R.selectedTextAnnotations,r=e.length>1;(e[0]!==t.detail.id||r)&&(n(30,Z=!1),n(0,R.selectedTextAnnotations=[t.detail.id],R),n(0,R.selectedRangeAnnotations=[],R))}else n(0,R.selectedRangeAnnotations=[t.detail.id],R),n(0,R.selectedTextAnnotations=[],R)},function(t){const{annotation:e,type:r}=t.detail,o=Ow(e);if(delete o._index,delete o._bounds,delete o._plot,delete o._repeatedIndex,"text"===r){const t=f.findIndex((t=>t.id===e.id));Nw(f[t],o)||n(45,f[t]=o,f)}else{const t=d.findIndex((t=>t.id===e.id));Nw(d[t],o)||n(46,d[t]=o,d)}},function(t){const[e,r]=Object.entries(t.detail)[0];n(0,R[e]=r,R)},function(t){z&&"Escape"===t.key&&G&&tt()},function(){z&&(n(0,R.selectedTextAnnotations=[],R),n(0,R.selectedRangeAnnotations=[],R),n(0,R.activeRepeatedAnnotationIndex=null,R))},function(t){z&&((Y||G||q&&["l","r"].includes(U))&&(n(15,B+=t.movementX),t.movementX&&(n(30,Z=!1),W=!0)),(Y||G||q&&["t","b"].includes(U))&&(n(16,H+=t.movementY),t.movementY&&(n(30,Z=!1),W=!0)),n(28,F=!1),t.ctrlKey&&!P&&n(28,F=!0))},function(t){if(z){if(!W){const e=t.target,r=e.parentNode;n(30,Z=e.classList.contains("text-edit")||r.classList&&r.classList.contains("text-edit"))}if(W&&R.plotHasUpdated&&n(31,J=R.selectedAnnotationProps.plot),Q(),G&&K){const t=function(t){if("text"===R.createMode){const{x:e,y:r}=g(V,X),o=function(t,e){const n=t*(T?-1:1)<0,r=e<0;if(n&&r)return"br";if(n&&!r)return"tr";if(!n&&r)return"bl";return"tl"}(B,H),i=Math.abs(B/t.width*100),a=Object.assign(Object.assign({},Ow(R.defaults.text)),{x:e,y:r,align:o,width:i,id:Cw()});return null!==_&&(a.plot=t.name),Math.abs(B)<10&&Math.abs(H)<10&&(a.width=25,a.align="mc",a.dy=X-t.y<100?50:-50,a.connectorLine.enabled=!0),s&&(a.mobileFallback=!1),f.unshift(a),n(45,f),a.id}{const e=Math.min(Math.max(V+B,t.x),t.x+t.width),r=Math.min(Math.max(X+H,t.y),t.y+t.height),{x:o,y:i}=g(V,X),{x:a,y:s}=g(e,r),l=E.length>1?Math.abs(B)>Math.abs(H)?"x":"y":E[0];let c="range";("x"===l&&Math.abs(B)<10||"y"===l&&Math.abs(H)<10)&&(c="line");const u=Object.assign(Object.assign(Object.assign(Object.assign({},Ow(R.defaults[c])),E.includes("x")&&{x0:o,x1:a}),E.includes("y")&&{y0:i,y1:s}),{type:l,display:c,id:Cw()});return null!==_&&(u.plot=t.name),$&&(u.showInAllPlots=!0),d.unshift(u),n(46,d),u.id}}(K);!function(t){if("text"===R.createMode){n(0,R.selectedTextAnnotations=[t],R),n(0,R.selectedRangeAnnotations=[],R);const e=f.find((e=>e.id===t));if(e&&N({textAnnotation:e,isMobileWidth:s,dataToPx:p}))return;n(30,Z=!0),setTimeout((()=>{const e=L.querySelector('[data-annotation-id="'.concat(t,'"]'));if(e){const t=e.querySelector(".text-edit");t.focus(),function(t){const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(e))}(t)}}))}"range"===R.createMode&&(n(0,R.selectedTextAnnotations=[],R),n(0,R.selectedRangeAnnotations=[t],R))}(t),tt()}}},function(){z&&(Y||q)&&Q()},function(t){if(z&&R.createMode&&!1===G){if(n(19,G=!0),null===_)n(20,K=nv(y,v));else{const e=t.target,r=[...e.parentElement.children].indexOf(e);n(20,K=_[r])}n(54,V=t.offsetX+K.x),n(55,X=t.offsetY+K.y)}},f,d,y,v,x,E,$,function(t){let{textAnnotations:e,rangeAnnotations:r,editorState:o}=t;void 0===e||Nw(f,e)||n(45,f=e),void 0===r||Nw(d,r)||n(46,d=r),void 0===o||Nw(R,o)||n(0,R=o)},tt,V,X,l,o,r,function(){n(13,u=window.innerWidth)},function(t){P=t,n(25,P)},function(t){Z=t,n(30,Z)},function(t){Y=t,n(17,Y)},function(t){I=t,n(27,I)},function(t){j=t,n(26,j)},function(t){B=t,n(15,B)},function(t){H=t,n(16,H)},function(t){q=t,n(18,q)},function(t){U=t,n(29,U)},function(t){Xb[t?"unshift":"push"]((()=>{L=t,n(23,L)}))},function(t){Y=t,n(17,Y)},function(t){B=t,n(15,B)},function(t){H=t,n(16,H)},function(t){q=t,n(18,q)},function(t){U=t,n(29,U)},function(t){Xb[t?"unshift":"push"]((()=>{C=t,n(24,C)}))}]}class Gw extends vy{constructor(t){super(),yy(this,t,qw,Yw,xb,{uid:1,textAnnotations:45,rangeAnnotations:46,dataToPx:2,pxToData:3,theme:4,cm:5,visWidth:47,visHeight:48,annotationKeysSel:49,ariaLabel:6,chroma:7,purifyHtml:8,rtl:9,mirrorX:10,plots:11,allowedRangeAnnotationOrientations:50,repeatRangeOnSave:51,editMode:12,editorState:0,setAnnotationState:52,stopCreatingAnnotation:53},zw,[-1,-1,-1,-1])}get setAnnotationState(){return this.$$.ctx[52]}get stopCreatingAnnotation(){return this.$$.ctx[53]}}function Vw(t){let{vis:e,$chart:n,mode:r,barColumns:o,size:i,annotationLayer:a,annotationPlots:s,timeScale:l,groupedData:c}=t;const u=e.chart().inEditor(),h=e.chart().flags().isEditingAllowed,f=u&&h?function(){const{results:t}=window.parent.dw.backend.hooks.call("get-annotation-controls");if(t&&t.length)return t[t.length-1];return}():null,d=fp(e.get("text-annotations",[])),p=fp(e.get("range-annotations",[]));if(!d.length&&!p.length&&!u)return a;const g=s.length>1,m=n.append("div.annotations");g?m.style("left","0").style("top","0"):m.style("left","".concat(s[0].x,"px")).style("top","".concat(s[0].y,"px")).style("width","".concat(s[0].width,"px")).style("height","".concat(s[0].height,"px"));const b=n.append("div.annotation-keys"),y=s.map(((t,e)=>cn().range(s[e].xScale.range().map((t=>s[e].width/100*t))).domain(s[e].xScale.domain()))),v=n.selectAll(".bc-group-content-inner"),x=[];v.each((function(t,n){x.push(at(this).selectAll(".bc-row .bc-bars").nodes().map((t=>{const i=e.chart().getElementBounds(t),a="bars-split"===r?o.length*n:n,l=i.top-s[a].y;return{center:Math.round(i.height/2+l),height:i.height}})))}));const w=x.map((t=>t.map((t=>t.center)))),k=(t,e)=>{var n;const i=Kw(r,c,o,e),a=c[i].values,s=w[i],l=t.index;let u=(null===(n=a.find((t=>t.origRowIndex===l)))||void 0===n?void 0:n.rowIndex)||0;return u=Math.min(Math.max(0,Math.round(Xw(u,0))),s.length-1),s[u]+Xw(t.offset,0)};k.invert=(t,e)=>{var n;const i=Kw(r,c,o,e),a=c[i].values,s=w[i],l=s.map((e=>Math.abs(e-t))),u=At(l),h=l.indexOf(u),f=Math.round(t-s[h]);return{index:(null===(n=a.find((t=>t.rowIndex===h)))||void 0===n?void 0:n.origRowIndex)||0,offset:f}};const M=(t,e,n)=>{const r=s.findIndex((n=>t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height));if(-1===r&&n){const n=s.map(((n,r)=>{const o={left:Math.abs(n.x-t),right:Math.abs(n.x+n.width-t),top:Math.abs(n.y-e),bottom:Math.abs(n.y+n.height-e)};return{index:r,distance:Math.min(o.left,o.right)+Math.min(o.top,o.bottom)}}));return n.sort(((t,e)=>t.distance-e.distance)),n[0].index}return r};if(a)try{a.$destroy()}catch(t){}return a=new Gw({target:m.node(),props:{textAnnotations:d,rangeAnnotations:p,dataToPx:(t,e,n,r)=>{let o;var i;g&&(o=Math.max(0,s.findIndex((t=>{let{name:e}=t;return e===n})))),t=l?da(i=t)?i:dw.column("x",[i],"date").val(0):t;return[y[o||0](t),k(e,o)].map(((t,e)=>{const n=isNaN(+t)?void 0:+t.toFixed(1);if(void 0===n)return;if(r)return n;let i=0;if(g){const t=s[o];i=0===e?t.x:t.y}return n+i}))},pxToData:(t,e,n,r)=>{let o,i,a,c;g&&(i=M(t,e),a=n?s.findIndex((t=>t.name===n)):i,c=n?a:M(t,e,!0),o=s[c]||s[0],t-=o.x,e-=o.y,r&&(t=pb(t,0,Math.floor(o.width)),e=pb(e,0,Math.floor(o.height))));const u=y[c||0].invert(t),h={x:t=l?nr("%Y/%m/%d %H:%M")(u):u.toFixed(4),y:e=k.invert(e,c)};return g&&(h.plot=o.name,h.validPosition=-1!==i&&i===a),h},plots:g?s:null,theme:e.theme(),cm:e.colorMap(),chroma:e.libraries().chroma,purifyHtml:dw.utils.purifyHtml,rtl:"rtl"===e.textDirection,mirrorX:"rtl"===e.textDirection,annotationKeysSel:b,visWidth:g?i[0]:s[0].width,visHeight:g?i[1]:s[0].height,allowedRangeAnnotationOrientations:["x"],repeatRangeOnSave:!0}}),f&&(a.$set({editMode:!0}),f.syncAnnotationLayer(a)),a}function Xw(t,e){return t=Number(t),isNaN(t)&&(t=e),t}function Kw(t,e,n,r){return"bars-split"===t?e.length>1?Math.floor(r/n.length):0:r||0}var Zw=Sh,Jw=Od;var Qw=zo((function(t,e){return t&&t.length?Jw(t,Zw(e)):[]}));function tk(t,e){return _o(t,{selectedColor:e})()}function ek(t,e,n){const r=Pa(t),o=n.getAutoColor(r?t.column:t,e);return r&&(t._color=n.getAutoColor(t.column,e)),o}function nk(t,e){if(e.dataset.hasColumn(t))return e.dataset.column(t).title()}function rk(t){let{colorKeys:e,colorCategories:n,useAutoColor:r,useCustomColors:o,palette:i,cm:a,vis:s,getDefaultLabel:l=xi}=t,c=Wh(n,"categoryOrder",[...e]).filter((t=>e.includes(t)));c.length&&e.length===c.length||(c=[...e]);const u=e.reduce(((t,e,n)=>(r&&(t[e]=ek(e,n,s)),t)),{});return Qw(Object.entries({...o?n.map:{},...u}).map((t=>{let[r,o]=t;const u=a(function(t,e){return"number"==typeof t?e[t%e.length]:t}(o,i)),h=Wh(n,"categoryLabels",{})[r]||l(r,s)||r,f=c.indexOf(r),d=e.includes(r);return(u||0===u)&&d?{color:u,label:h,key:r,order:f}:void 0})).filter((t=>t)).sort(((t,e)=>t.order-e.order)),(t=>"".concat(t.color,"---").concat(t.label)))}const ok=/:([a-z]{2}(?:-[a-z]{2,3})?):/gi;dw.visualization.register("d3-bars","base",(function(t){let{target:e}=t;yi.extend(Wd),yi.extend(em),yi.extend(Gd),yi.extend(nm);const n=new Gm(e);let r,o=!0;return{type:function(){return"bars"},render:function(t){var e;const i=this,a=i.chart(),s=i.size(),l=i.dataset,c=i.theme(),u=Wh(c,"colors.palette",[]),{numeral:h}=i.libraries(),f=a.flags();i.__keyLabelMap={},function(t,e){let{visualize:n={},axes:r={}}=e;if(void 0!==n["color-bars"]&&(n["base-color"]=n["color-bars"],delete n["color-bars"]),void 0!==n["color-bars2"]&&void 0===n["base-color2"]&&(n["base-color2"]=n["color-bars2"],delete n["color-bars2"]),"d3-range-plot"===t&&(void 0!==n["range-start-color"]&&(n["base-color"]=n["range-start-color"],delete n["range-start-color"]),void 0!==n["range-end-color"]&&void 0===n["base-color2"]&&(n["base-color2"]=n["range-end-color"],delete n["range-end-color"])),void 0!==n["hide-value-labels"]&&(n["show-value-labels"]=!n["hide-value-labels"],delete n["hide-value-labels"]),"hide"!==n["value-label-visibility"]||"d3-bars-stacked"!==t&&"d3-bars-grouped"!==t||(n["show-value-labels"]=!1,n["value-label-visibility"]="always"),"show"!==n["value-label-visibility"]||"d3-bars-stacked"!==t&&"d3-bars-grouped"!==t||(n["show-value-labels"]=!0,n["value-label-visibility"]="always"),"hide"===n["value-label-visibility"]&&"d3-dot-plot"===t&&(n["show-value-labels"]=!1,n["value-label-visibility"]="hover"),void 0!==n["hide-category-labels"]&&(n["show-category-labels"]=!n["hide-category-labels"],delete n["hide-category-labels"]),void 0!==n["hide-group-labels"]&&(n["show-group-labels"]=!n["hide-group-labels"],delete n["hide-group-labels"]),void 0===n["group-by-column"]&&r.groups&&"--"!==r.groups&&(n["group-by-column"]=!0),void 0!==n["resort-bars"]&&(n["sort-bars"]=n["resort-bars"],!0===n["resort-bars"]&&void 0!==n["sort-asc"]&&(n["reverse-order"]=n["sort-asc"]),delete n["resort-bars"],delete n["sort-asc"]),"string"==typeof n["sort-bars"]&&"d3-bars"===t)switch(n["sort-bars"]){case"keep":n["sort-bars"]=!1,n["reverse-order"]=!1;break;case"desc":n["sort-bars"]=!0,n["reverse-order"]=!1;break;case"asc":n["sort-bars"]=!0,n["reverse-order"]=!0}if("none"!==n["range-value-labels"]||"d3-range-plot"!==t&&"d3-arrow-plot"!==t||(n["show-value-labels"]=!1,n["range-value-labels"]="start"),"string"==typeof n["sort-arrows"]&&("keep"===n["sort-arrows"]?n["sort-range"]={enabled:!1,by:"start"}:n["sort-range"]={enabled:!0,by:n["sort-arrows"]},delete n["sort-arrows"]),"string"==typeof n["range-ends"]&&("line"===n["range-ends"]||"circle"===n["range-ends"]?n["range-ends"]={enabled:!0,shape:n["range-ends"]}:n["range-ends"]={enabled:!1,shape:"circle"}),n["custom-colors"]&&(n["color-category"]=n["color-category"]||{categoryLabels:{},categoryOrder:[],excludeFromKey:[],map:{},palette:[]},Object.keys(n["custom-colors"]).length&&void 0===n["color-by-column"]&&(n["color-category"].map=n["custom-colors"],n["color-by-column"]=!0),Object.keys(n["custom-colors"]).length&&!Object.keys(n["color-category"].map||{}).length&&(n["color-category"].map=n["custom-colors"]),delete n["custom-colors"]),n["color-category"]&&(n["color-category"].categoryLabels||(n["color-category"].categoryLabels={}),n["color-category"].map||(n["color-category"].map={})),n["color-key"]&&Object.keys(n["color-key"]).length&&(!n["color-category"]||"object"!=typeof n["color-category"].categoryLabels||!Object.keys(n["color-category"].categoryLabels).length)){void 0===n["color-by-column"]&&(n["color-by-column"]=!0),n["color-category"]=n["color-category"]||{categoryOrder:[],excludeFromKey:[],map:{},palette:[]};const t=Object.keys(n["color-key"]);n["color-category"].categoryLabels=t.reduce(((t,e)=>(t[e]=n["color-key"][e].label,t)),{}),delete n["color-key"]}Array.isArray(n.overlays)||(n.overlays=[]),"highlight-range"in n&&"boolean"!=typeof n["highlight-range"]&&("string"==typeof n["highlight-range"]&&(n["custom-lines"]=n["highlight-range"]),delete n["highlight-range"])}(a.get("type"),a.get("metadata"));const d=a.createPostEvent(),{chroma:p}=i.libraries();var g=i.colorMap();if(i.get("replace-flags.enabled")&&at(t).append("link").at({type:"text/css","data-uid":"flags-css",rel:"stylesheet",href:"//static.dwcdn.net/css/flag-icons/flag-icon.min.css"}),!0===o){const t=a.locales.dayjs;t&&yi.locale(t),o=!1}const m="rtl"===i.textDirection,b={left:m?"right":"left",right:m?"left":"right"},y=i.type();let v=!1;const x=i.axes(!0).labels.type(),w=qh("groups",i.meta.axes,l.columns()).length>("date"===x?0:1),k=i.get("group-by-column",!1)&&w?i.axes().groups:null,M="range-plot"===y||"arrow-plot"===y,A="bars-split"===y?i.axes().colors:i.axes().colors||i.axes().labels,T=i.axes().colors?Qd(h,i.axes(!0).colors,i.chart().getMetadata(),i.axes().colors):t=>t,_=function(t,e){const n="d3-bars"===t?e.bars:"d3-bars-bullet"===t?[e.bars,e.bars2]:["d3-range-plot","d3-arrow-plot"].includes(t)?[e.start,e.end]:"d3-dot-plot"===t?e["dots-multiple"]:e["bars-multiple"];return Xi(n)?n:[n]}(a.get("type"),i.axes());if(!i.dataset.hasColumn(_[0])||(M||"bars-bullet"===y)&&!i.dataset.hasColumn(_[1]))return i.showError(i.chart().translate("insufficient-data".concat("dot-plot"===y?"-dot-plot":M?"-range-arrow":"-bars"),!0).replace("%chartid%",a.get("id"))),void i.renderingComplete();const E=i.get("show-value-labels",!0)&&"bars-bullet"!==y,$=i.get("value-label-visibility");var O=i.axes().labels,S=i.dataset.column(O),N=i.get("rules")&&"dot-plot"!==y&&"range-plot"!==y&&"arrow-plot"!==y,L=i.get("background")&&("bars"===y||"bars-split"===y||"bars-grouped"===y),C=i.get("thick")&&"dot-plot"!==y&&!M;const D=i.get("thick-arrows",!1)&&"arrow-plot"===y;var z="bars-stacked"===y&&i.get("stack-percentages",!1),R=z?function(t){return null===t?"":h(.01*t).format(t<5?"0.[0]%":"0%")}:"bars"===y||"dot-plot"===y||M||"bars-bullet"===y?hf(i,"value-label-format",i.dataset.column(_[0])):null;const P=i.get("stack-show-absolute"),j=hf(i,"value-label-format",i.dataset.column(_[0]));var I=function(){if(z)return function(t){const e=h(.01*t.value).format(t.value<5?"0.[0]%":"0%");if(P){const n=j(t.valueOriginal);return"".concat(e,' <span class="absolute">(').concat(n,")</span>")}return e};if(E||"dot-plot"===y||M||"bars-bullet"===y){var t={};return _.forEach((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t[e]=hf(i,"value-label-format",i.dataset.column(e))})),function(e,n){let r="bars"===y?e[k]:e.row[k];r=null===r?"":r;const o=!k||0===Ct.map((t=>t.key)).indexOf(r),i="bars-stacked"===y||"bars-grouped"===y?0===e.row.rowIndex&&0===n:"bars-split"===y?0===e.row.rowIndex:0===n;return t[e.column||_[0]](e.value,!!xt&&(!i&&o||!o),xt)}}return function(t){return t.value}}(),F=i.get("label-alignment","left"),U=M&&"direct"===F,B=i.get("block-labels",!1)&&("bars"===y||"bars-stacked"===y||"bars-grouped"===y),H=i.get("mirror-bars",!1)&&"bars-split"===y&&2===_.length,Y=i.get("independent-scales")&&!H&&"bars-split"===y,W=i.get("compact-group-labels")&&("bars-split"===y||"dot-plot"===y),q=i.get("show-group-labels",!0),G=i.get("custom-range",[]).filter((function(t){return""!==t}));const V="date"===S.type()?hf(i,"date-label-format",S):i.get("replace-flags.enabled")?t=>ne(t,i.get("replace-flags.style","4x3")):xi;var X="bars-split"!==y&&i.get("show-color-key",!0)?i.get("color-key",{}):null;const K=i.get("color-by-column",!1),Z=Wh(c,"vis.base.legend.position","top");var J="bars-stacked"===y||"dot-plot"===y||"bars-grouped"===y,Q=("bars-stacked"===y||"bars"===y||"bars-grouped"===y)&&i.get("force-grid",!1)&&!B||"dot-plot"===y||"bars-bullet"===y||M,tt=(i.get("custom-grid-lines")||"").trim(),et="bars"===y&&i.get("swap-labels"),nt="bars"===y&&!i.get("show-category-labels",!0),rt=i.get("value-label-alignment","left"),ot=i.get("tick-position",M||"dot-plot"===y?"bottom":"top");const it=i.get("color-category",{map:{},excludeFromKey:[]}),st=i.get("overlays",[]),ct="bars"===y&&st.some((t=>"value"===t.type&&t.labelDirectly))||M&&i.get("show-".concat("range-plot"===y?"color":"arrow","-key"));ct&&(ot="bottom");const ut=st.filter((t=>!t.invisible&&"value"===t.type)).reverse(),ht=st.filter((t=>!t.invisible&&"range"===t.type)).reverse();!function(t,e,n){const r=Wh(t,"colors.background","#ffffff"),o=Bd("horizontal",{theme:t,visId:e,chroma:n});"d3-bars-stacked"===e&&o.gridLines.aboveChart&&["gridLines.major","baseLine"].forEach((e=>{Of(t,"vis.base.grid.horizontal.".concat(e,".color"),r),Of(t,"vis.base.grid.horizontal.".concat(e,".opacity"),.4),Of(t,"vis.base.grid.horizontal.".concat(e,".style.strokeDasharray"),"none")}))}(c,i.id,p);const ft=Wh(c,"vis.d3-bars.axes.showBaseline",!1),dt=Wh(c,"vis.d3-bars.axes.gridlines.extendGrid",0),pt=Wh(c,"vis.d3-bars.groups.spaceBetween",25),mt=Wh(c,"vis.d3-bars.labels.groupTitles.paddingBottom",5),bt=Wh(c,"vis.d3-bars.labels.barLabels.outside",!1)&&E&&"right"===rt&&!et&&("bars"===y||"bars-grouped"===y),yt=Wh(c,"vis.d3-bars.labels.barLabels.padding",5),vt=Wh(c,"vis.d3-bars.labels.rowLabels.padding",5),xt=y.includes("bars")&&"firstOnly"===Wh(c,"vis.d3-bars.labels.barLabels.units","all"),wt=Wh(c,"vis.d3-bars-grouped.labels.rowLabels.verticalAlignment","middle"),kt=Number(C?Wh(c,"vis.d3-bars.bars.barThickness.thick",27):Wh(c,"vis.d3-bars.bars.barThickness.default",20)),Tt=Kf(c.colors.background)<60,_t=Wh(c,"vis.base.labels.invertLuminance",70);("bars-stacked"===y||"bars-grouped"===y||"bars-split"===y||"dot-plot"===y)&&function(){const t=i.get("base-color",0),e=it.map||{},n=i.get("color-by-column",!1),r={selectedColor:t,keys:i.colorKeys(),customColors:n?e:{}};i.getAutoColor=_o(c,r)}();var Et=tt.length?tt.split(",").map(Number):[];if(M){var $t=i.axes(!0);"date"===$t.start.type()&&"date"===$t.end.type()&&(v=!0,Et=tt.length?dw.column("end",tt.split(","),"date").values().filter(da):[],G=dw.column("end",G,"date").values())}if("dot-plot"===y){const t=($t=i.axes(!0))["dots-multiple"].filter((t=>"number"===t.type())).length;$t["dots-multiple"].filter((t=>"date"===t.type())).length>t&&(v=!0,Et=tt.length?dw.column("dots-multiple",tt.split(","),"date").values():[],G=dw.column("dots-multiple",G,"date").values())}const Ot=np(v);if(v||(G=G.map((t=>+t)).filter(ep)),"dot-plot"===y||M||(G=G.concat(0)),i.get("show-color-key",!0))if(X={},J)_.forEach((function(t,e){X[t]={color:ek(i.dataset.column(t).name(),e,i),label:i.dataset.column(t).title()}}));else{const t=Object.keys(i.get("color-category.categoryLabels",{})),e=i.get("color-key.bars.color",tk(c,i.get("base-color",0)));t.forEach((t=>{X[t]={color:it.map[t]||e,label:it.categoryLabels[t]}}))}const St=at(t),Nt=i.dataset.list().map(((t,e)=>({...t,_row:e}))),Lt={groupByColumn:i.get("group-by-column",!1),sortBars:i.get("sort-bars",!1),sortBy:i.get("sort-by"),sortRange:i.get("sort-range",!1),reverseOrder:i.get("reverse-order",!1)},Ct=function(t){let{barColumns:e,chartAxes:n,data:r,dataset:o,groupedVisualizeProps:i,visType:a,visAxes:s}=t;const l=["d3-range-plot","d3-arrow-plot"].includes(a),c=o.hasColumn(n.labels)?o.column(n.labels).type():"text",u=qh("groups",s,o.columns()).length>("date"===c?0:1),h=i.groupByColumn&&u?n.groups:null;if(h){const t=o.column(h).values(!0);r.forEach(((e,n)=>{e.origGroupedByValue=t[n]}))}const f=h?ui().key(ii(h)).entries(r):[{key:"",values:r}];f.forEach((t=>{"null"===t.key&&(t.key=""),t.origKey=t.values[0].origGroupedByValue||""}));const d=i.sortBars,p="d3-bars"===a?n.bars:i.sortBy,g=i.sortRange,m=function(t,e,n){switch(t){case"start":return n[0];case"end":return n[1];case"diff":return e.forEach((t=>{t.__diff=t[n[1]]-t[n[0]]})),"__diff";case"change":return e.forEach((t=>{t.__change=(t[n[1]]-t[n[0]])/t[n[0]]})),"__change"}}(g.by,r,e),b=i.reverseOrder,y=t=>isNaN(t[p])?-Number.MAX_VALUE:t[p];return f.forEach((function(t){var e;t.values.forEach(((t,e)=>{t.origRowIndex=e})),l?g.enabled&&t.values.sort(ai((t=>t[m]))):d&&t.values.sort("function"==typeof(e=y)?function(t,n){return e(n)<e(t)?-1:e(n)>e(t)?1:e(n)>=e(t)?0:NaN}:function(t,n){return n[e]<t[e]?-1:n[e]>t[e]?1:n[e]>=t[e]?0:NaN}),b&&t.values.reverse(),t.values.forEach(((t,e)=>{t.rowIndex=e}))})),f}({barColumns:_,chartAxes:i.axes(),data:Nt,dataset:i.dataset,groupedVisualizeProps:Lt,visType:a.get("type"),visAxes:i.meta.axes});z&&Nt.forEach((function(t){var e=0;_.forEach((function(n){e+=t[n]})),t.__origValues={},_.forEach((function(n){t.__origValues[n]=t[n],t[n]*=100/e}))}));let Dt=ra(_.map((function(t){return Bh(Nt,t)}))).filter(Ot),zt=!1,Rt=!1;"bars-stacked"===y&&(Dt=[At(Nt.map((t=>_.reduce(((e,n)=>t[n]<0?t[n]+e:e),0)))),Mt(Nt.map((t=>_.reduce(((e,n)=>t[n]>0?t[n]+e:e),0))))],Rt=Mt(Dt)<=0,zt=!Nt.every((t=>_.map((e=>Math.sign(t[e]))).filter((t=>0!==t)).every(((t,e,n)=>t===n[0])))));const Pt=i.get("totals-labels",!1)&&"bars-stacked"===y;let jt=!1;Pt&&!zt&&(jt=i.get("totals-labels-position","before"));const It="diverging"===i.get("value-label-mode","left"),Ft="range-plot"===y?i.get("range-ends",{enabled:!0,shape:"circle"}):{};n.update({vis:i,theme:c}),St.classed("bc-hr",N).classed("bc-dir-rtl",m).classed("bc-color-bg",L).classed("bc-label-block",B).classed("stack-totals-before","before"===jt).classed("stack-totals-after","after"===jt).classed("bc-label-align-left",F===b.left).classed("bc-label-align-right",F===b.right).classed("bc-mirror-bars",H).classed("bc-stacked-diverging",It).classed("bc-grid-lines",Q).classed("bc-hide-dots",!Ft.enabled||"line"===Ft.shape).classed("bc-range-end-lines","line"===Ft.shape).classed("bc-range-end-none",!1===Ft.enabled).classed("bc-thick",C).classed("bc-thicker-arrows",D).classed("bc-direct-labels",U).classed("bc-grid-bottom","bottom"===ot).classed("bc-grid-top","top"===ot).classed("hidden-labels",nt).classed("mixed-positive-negative",zt).classed("all-negative",Rt).classed("bc-labels-left",m?Rt:!Rt).classed("bc-labels-right",m?!Rt:Rt),It&&St.classed("bc-stacked-diverging-"+_.length,!0);const Ut="ontouchstart"in window||navigator.msMaxTouchPoints,Bt=ei.highlightTimer((t=>{t?(St.selectAll(".bc-bar-inner").classed("focus",(e=>t&&e.column===t)).classed("unfocus",(e=>t&&e.column!==t)),St.selectAll(".bc-dot-diff").classed("unfocus",!0),St.selectAll(".bc-bar-total.after").classed("focus",!1),St.selectAll(".bc-bar-total.after").classed("unfocus",!0),Me&&Me.highlight(t),d("highlight.set",{column:t})):(St.selectAll(".bc-bar-inner").classed("focus",!1).classed("unfocus",!1),Me&&Me.highlight(),St.selectAll(".bc-dot-diff").classed("unfocus",!1),St.selectAll(".bc-bar-total.after").classed("unfocus",!1),d("highlight.clear"))}),Ut?0:300);var Ht;"bars-bullet"===y&&(Ht={inner:tk(c,i.get("base-color2",1)),outer:tk(c,i.get("base-color",0))}),Dt=Dt.filter(Ot);var Yt=Dt.concat(Et);("dot-plot"!==y&&!M||"custom"===i.get("range-extent","nice"))&&(Yt=Yt.concat(G)),"bars"===y&&ut.concat(ht).forEach((t=>{("value"===t.type?["from"]:["from","to"]).forEach((e=>{if(t[e]===Jh&&(Yt=Yt.concat(0)),!i.dataset.hasColumn(t[e]))return;const n=i.dataset.column(t[e]);"number"===n.type()&&(Yt=Yt.concat(n.range()))}))}));var Wt=v?Ao():cn();Wt.domain(gt(Yt)).range([0,100]);const qt=Qd(h,i.axes(!0).labels,i.chart().getMetadata(),i.axes().labels);("dot-plot"===y||M)&&(Wt.range([800/s[0],100-800/s[0]]),"nice"===i.get("range-extent","nice")&&Wt.nice());const Vt={series:[],rows:[]},Xt=i.get("highlighted-series",[]);Nt.forEach((t=>{const e=""+qt(t[O]);Xt.includes(e)&&Vt.rows.push(e)})),l.columns().forEach((t=>{Xt.includes(t.name())&&Vt.series.push(t.name())})),St.classed("bc-with-row-highlight",Vt.rows.length);var Kt=St.append("div.bc-groups").selectAll("div.bc-group").data(Ct).enter().append("div.bc-group");Kt.filter(((t,e)=>e>0)).style("margin-top",pt+"px"),St.selectAll("div.bc-groups").classed(Ct.length>1?"grouped-bars":"","bc-groups"),Y?(Wt={},_.forEach((function(t){Wt[t]=cn().domain(gt(Bh(Nt,t).concat(G))).range(m?[100,0]:[0,100])}))):m&&Wt.range(Wt.range().reverse()),W||Kt.filter(((t,e)=>ct&&!e||!!t.key)).append("div.bc-group-title.group-title.chart-text.label").attr("data-column",k).attr("data-row",(function(t){return Bh(t.values,"_row").join(",")})).style("margin-bottom",q&&k?mt+"px":"0px").append("span").html(q?t=>i.get("replace-flags.enabled")?ne(t.key,i.get("replace-flags.style","4x3")):t.key:"");var Zt=Kt.append("div.bc-group-content").classed("overlay-marker",ut.length).append("div.bc-group-content-inner");if(Zt.on("mouseleave",(()=>{Bt.clear()})),"bars-split"===y){const t=Wh(c,"vis.d3-bars-split.labels.splitLabels.useBarColor");var Jt=Zt.append("div.bc-split-label");W?Jt.append("div.bc-row-label.label.bc-compact-group-label.row-label.chart-text").attr("data-column",k).attr("data-row",(function(t){return Bh(t.values,"_row").join(",")})).append("span").html(ii("key")):Jt.append("div.bc-row-label.row-label.chart-text.label").append("span"),Jt.append("div.bc-bars").selectAll("div.bc-split").data(_).enter().append("div.bc-split.label").style("width",100/_.length+"%").classed("highlighted-series",(function(t){return i.get("highlighted-series",[]).indexOf(t)>-1})).attr("data-column",(function(t){return t})).attr("data-row","-1").append("span").html((function(t){return i.dataset.column(t).title()})).style("color",t&&!A?function(t,e){return g(ek(t,e,i))}:null)}var Qt,te,ee=Zt.selectAll("div.bc-row").data(ii("values")).enter().append("div.bc-row").each((t=>{jt&&(t.__stackTotalValue=rp(t,_))})).classed("bc-row-highlight",(function(t){var e=""+qt(t[O]);return Vt.rows.indexOf(e)>-1})).classed("first-row",((t,e)=>0===e)).classed("last-row",(function(t,e){return e===at(this.parentElement).data()[0].values.length-1})).classed("row-divider",(function(t,e){if(0!==e)return"bars-split"===y||"bars-stacked"===y||"bars-grouped"===y||"bars-bullet"===y||"bars"===y}));if(et)E&&ee.append("div.bc-row-label.row-label.chart-text.label").append("span").html(ii(_[0],R));else if(!nt&&(ee.append("div.bc-row-label.row-label.chart-text.label").classed("dw-bold",B&&"bars-grouped"===y).attr("data-column",O).attr("data-row",ii("_row")).append("span").html((function(t,e,n){O&&(t=t[O]);const r=Array.from(n.slice(0,e)).map((t=>t.innerText)),o=V(t,0===e,!1);return r.includes(o)?V(t,0===e,!0):o})),"bars-grouped"===y&&"top"===wt)){const t=(kt-parseFloat(getComputedStyle(ee.select(".bc-row-label").node()).lineHeight))/2;ee.select(".bc-row-label").style("margin-top","".concat(t,"px"))}function ne(t,e){const n=t.match(ok),r=["flag-icon"];return"4x3"!==e&&r.push("flag-icon-squared"),"circle"===e&&r.push("flag-icon-circle"),n&&n.forEach((function(e){let n=e.substr(1,e.length-2).toLowerCase();"uk"===n&&(n="gb"),t=t.replace(e,'<span class="'+r.join(" ")+" flag-icon-"+n+'"></span>')})),t}function re(t){const e=i.type(),n=l.column(A),r="bars"===e||"arrow-plot"===e?t._row:t.row._row,o="text"===n.type()?n.raw(r):T(n.val(r)),a=it.map&&it.map[o],s=tk(c,i.get("base-color",0));return t._color=function(t){const e=i.theme().colors.palette;return"number"==typeof t?e[t%e.length]:t}(K&&a?a:s),t._color}if("bars"===y){const t=(Qt=ee.append("div.bc-bars")).append("div.bc-bar-bg.dw-rect").filter((function(t){return t.value=t[_[0]],!isNaN(t.value)}));t.append("div.bc-bar-inner.dw-rect").style("background",ii(re,g)),te=t.append("div.bc-bar-inner.value-labels").style("background","transparent"),Gh(t.selectAll(".bc-bar-inner"),Wt,m)}else if("bars-split"===y)te=(Qt=ee.append("div.bc-bars").selectAll("div.bc-split").data((function(t){return _.map((function(e){return{column:e,value:t[e],row:t}}))})).enter().append("div.bc-split").style("width",100/_.length+"%").append("div.bc-split-inner")).append("div.bc-bar-bg.dw-rect").filter((function(t){return!isNaN(t.value)})).append("div.bc-bar-inner.dw-rect").each((function(t){var e=Y?Wt[t.column]:Wt;t.__left=e(Math[m?"max":"min"](0,t.value))+"%",t.__right=100-e(Math[m?"min":"max"](0,t.value))+"%"})).style("left",((t,e)=>H&&!e?t.__right:t.__left)).style("right",((t,e)=>H&&!e?t.__left:t.__right)).style("background",(function(t,e){return g(A?re(t):ek(t,e,i))})).attr("title",I),St.selectAll(".bc-split").style("padding-right",i.get("space-between-cols",10)+"px"),St.selectAll(".bc-bars").style("margin-right",-1*i.get("space-between-cols",10)+"px");else if("bars-stacked"===y){ee.on("mousemove",(function(){const t=at(this),[e]=lt(t.node()),n=t.selectAll(".bc-bar-inner").filter((function(){const{left:t,right:n}=a.getElementBounds(this);return e>=t&&e<=n}));n.empty()?Bt.clear():Bt.set(n.datum().column)}));const t=Wh(c,"vis.d3-bars-stacked.bars.borders.width");Qt=ee.append("div.bc-bars"),Rt&&!B&&Qt.lower();const e=(t,e)=>{const n=z?rp(t.__origValues,_):t.__stackTotalValue;return z&&(e=!0),j(n,!1,!1,e)};if(te=Qt.append("div.bc-bar-bg.dw-rect").selectAll("div.bc-bar-inner").data((function(e){var n=0,r=0;return _.map((function(o,i){const a=e[o],s=n,l=r;n+=!Ot(a)||a<0?0:a,r+=!Ot(a)||a>0?0:a;const c=_.slice(i+1),u=!c.length,h=!u&&c.some((t=>Ot(e[t]))),f=t&&a&&!u&&h;let d=b.right;return Ot(a)&&ep(a)&&a<0&&(d=b.left),{column:o,row:e,valueOriginal:e.__origValues?e.__origValues[o]:null,value:a,offsetPos:s,offsetNeg:l,...!!f&&{border:d}}})).filter((function(t){return!isNaN(t.value)}))})).enter().append("div.bc-bar-inner.dw-rect").style("background",(function(t,e){return g(ek(t,e,i))})).classed("border-left",(t=>"left"===t.border)).classed("border-right",(t=>"right"===t.border)).attr("data-column",ii("column")),"after"===jt){const t=Qt.append("div.bc-stack-total-outer");t.append("div.label.bc-bar-total.after").classed("force-padding",(t=>!B&&!Rt&&t.__stackTotalValue<0)).append("span.export-text").html((t=>e(t,!1))),Gh(t,Wt,m,"__stackTotalValue"),Kh(ee,y,a,m,"__stackTotalValue")}if("before"===jt){const t=ee.select(".bc-bars").append("div.label.bc-bar-total.before").classed("left",m?Rt:!Rt).classed("right",m?!Rt:Rt).lower();t.append("span.export-text").html((t=>e(t,!0))),Rt&&t.raise();const n=Math.max(...t.selectAll("span").nodes().map((t=>t.offsetWidth)));t.style("width","".concat(n,"px"))}Zh(te,Wt,m)}else if("bars-grouped"===y)ee.on("mousemove",(function(){const t=at(this),[e,n]=lt(t.node()),r=t.select("div.bc-bars"),o=n-(a.getElementBounds(r.node()).top-a.getElementBounds(t.node()).top),i=t.selectAll(".bc-bar-inner").filter((function(t,n){const{height:r,right:i,left:s}=a.getElementBounds(this);return Math.floor(o/r)===n&&e<i&&e>s}));i.empty()?Bt.clear():Bt.set(i.datum().column)})),Gh(te=(Qt=ee.append("div.bc-bars")).selectAll("div.bc-bar-bg.dw-rect").data((function(t){return _.map((function(e){return{column:e,row:t,value:t[e]}})).filter((function(t){return!isNaN(t.value)}))})).enter().append("div.bc-bar-bg.dw-rect").append("div.bc-bar-inner.dw-rect").style("background",(function(t,e){return g(ek(t,e,i))})).attr("data-column",ii("column")),Wt,m);else if("bars-bullet"===y)Gh(te=(Qt=ee.append("div.bc-bars")).append("div.bc-bar-bg.dw-rect").selectAll("div.bc-bar-inner").data((function(t){return _.map((function(e,n){return{type:n?"inner":"outer",row:t,column:e,value:t[e]}})).filter((function(t){return!isNaN(t.value)}))})).enter().append("div.bc-bar-inner.dw-rect").classed("bc-bullet-inner",(function(t){return"inner"===t.type})).style("background",(function(t){return g(Ht[t.type])})),Wt,m);else if("dot-plot"===y){(Qt=ee.append("div.bc-bars")).on("mousemove",(function(t){const{width:e}=a.getElementBounds(this),[n]=lt(this),r=t=>isNaN(t)?1/0:Math.abs(t-n),o=_.map((n=>({col:n,x:Wt(t[n])/100*e}))).sort(((t,e)=>r(e.x)-r(t.x))).pop();r(o.x)<20?Bt.set(o.col):Bt.clear()}));te=Qt.append("div.bc-bar-bg").selectAll("div.bc-bar-inner").data((function(t){return _.map((function(e){return{column:e,value:t[e],row:t}})).filter((function(t){return null!==t.value}))})).enter().append("div.bc-bar-inner.dw-circle").style("left",(t=>Wt(t.value)+"%")).style("background",(function(t,e){return g(ek(t,e,i))})).classed("bc-dot-highlight",(t=>Vt.series.includes(t.column))),te.filter((function(t){return isNaN(t.value)})).style("display","none"),St.classed("bc-with-series-highlight",Vt.series.length),_.length>1&&i.get("highlight-range")&&Qt.select(".bc-bar-bg").insert("div.bc-dot-diff.dw-rect",".bc-bar-inner").each((function(t){const e=_.filter((e=>Ot(t[e]))).map((e=>Wt(t[e]))),[n,r]=gt(e);t._bar0min=n<r,t._min=n+"%",t._max=100-r+"%"})).style("left",ii("_min")).style("right",ii("_max"))}else if("arrow-plot"===y){te=(Qt=ee.append("div.bc-bars")).append("div.bc-bar-bg").selectAll("div.bc-bar-inner").data((function(t){return _.map((function(e){return{column:e,value:t[e],row:t}}))})).enter().append("div.bc-bar-inner.dw-circle").style("margin-left","-5px").style("left",(t=>Wt(t.value)+"%")).style("display","none"),Qt.select(".bc-bar-bg").insert("div.bc-arrow.dw-arrow",".bc-bar-inner").each((function(t){const e=Vm({row:t,barColumns:_,timeScale:v,barScale:Wt,mode:y});Object.assign(t,e)})).filter((t=>Ot(t._v1)&&Ot(t._v2))).style("background",ii(re,g)).classed("bc-arrow-left",(function(t){return"left"===t._direction})).classed("bc-arrow-right",(function(t){return"right"===t._direction})).classed("bc-arrow-none",(function(t){return"none"===t._direction})).append("div.bc-arrow-inner.dw-arrow-inner").style("border-color",ii("_color",g)),Vh(ee,y,Wt,m)}else if("range-plot"===y){var oe=(Qt=ee.append("div.bc-bars")).append("div.bc-bar-bg");const t="circle"===i.get("range-ends",{}).shape,e=Wh(c,"vis.d3-range-plot.rangeEnds.circles.outline",{}),n=e.width&&!e.color;te=oe.selectAll("div.bc-bar-inner.dw-"+(t?"circle":"rect")).data((function(t){return _.filter((e=>Ot(t[e]))).map((e=>({row:t,column:e,value:t[e]})))})).enter().append("div.bc-bar-inner.dw-"+(t?"circle":"rect")).style("border-color",n?Ae:null).style("background",n?e.fill||c.colors.background:Ae),Qt.each((function(t){const e=Vm({row:t,barColumns:_,timeScale:v,barScale:Wt,mode:y});Object.assign(t,e)})),Qt.select(".bc-bar-bg").insert("div.bc-range.dw-rect",".bc-bar-inner").filter((t=>Ot(t[_[0]])&&Ot(t[_[1]]))).style("background",(function(t){var e=i.get("range-color","fixed"),n=tk(c,i.get("start"===t._direction?"base-color":"base-color2")),r=tk(c,i.get("end"===t._direction?"base-color":"base-color2"));switch(e){case"fixed":return g(tk(c,i.get("fixed-range-color","#cccccc")));case"lowest":return g(r,0);case"highest":return g(n,0);case"gradient":var o=ze(r,n);return"linear-gradient(to right, "+[0,.2,.4,.6,.8,1].map((function(t){return g(o(t))+" "+100*t+"%"})).join(", ")+")"}})).append("div").style("border-color",ii("_color",g)),Vh(ee,y,Wt,m)}te&&(te.on("mouseenter",(t=>{d("bar.mouseenter",t)})),te.on("mouseleave",(t=>{d("bar.mouseleave",t)})),te.on("click",(t=>{d("bar.click",t)})));var ie=i.get("range-value-labels","start");"arrow-plot"!==y&&"range-plot"!==y||!E||("start"!==ie&&"both"!==ie||Qt.append("div.bc-range-label").classed("bc-lbl-highlight",Vt.series.includes(_[0])).classed("bc-lbl-left",(function(t){return"right"===t._direction||"end"===t._direction||"none"===t._direction})).classed("bc-lbl-right",(function(t){return"left"===t._direction||"start"===t._direction})).append("span.label.bc-range-value.value").append("span.inner").style("color","arrow-plot"===y?t=>Yh(c,g(re(t))):Yh(c,g(tk(c,i.get("base-color",0))))).html((t=>R(t[_[0]]))),"start"!==ie&&Qt.append("div.bc-range-label").classed("bc-lbl-highlight",!["diff","change"].includes(ie)&&Vt.series.includes(_[1])).classed("bc-lbl-left",(function(t){return"left"===t._direction||"start"===t._direction})).classed("bc-lbl-right",(function(t){return"right"===t._direction||"end"===t._direction||"none"===t._direction})).append("span.label.bc-range-value.value").append("span.inner").style("color","arrow-plot"===y?t=>Yh(c,g(re(t))):Yh(c,g(tk(c,i.get("base-color2",1))))).html("diff"===ie?t=>{return e=t._diff,n=R(e),e>0?"+"+n:n;var e,n}:"change"===ie?t=>{return e=t._change,Hh(e)?"":h(e).format("+0"+(e<.01?".[0]":"")+"%");var e}:t=>R(t[_[1]])),Xh(ee)),!E||et||M?!et||nt||M||te.append("div.bc-bar-label.chart-text.value.label").attr("data-column",O).attr("data-row",ii("_row")).append("span").html(ii(O,V)):te.append("div.bc-bar-label.chart-text.value.label").classed("force-padding",(t=>!B&&bt&&t.value<0)).append("span").html(I),U&&(St.selectAll(".bc-row").each((function(){const t=b.left;let e=at(this).select(".bc-lbl-".concat(t));e.node()?e.append("span.label.bc-direct-lbl").lower().append("span.inner").html(ii(O,V)):e=at(this).select(".bc-bars").append("div.bc-lbl-".concat(t,".bc-range-label")).style(b.right,(function(t){return 100-t._min.replace("%","")+"%"})).append("span.label.bc-direct-lbl").append("span.inner").html(ii(O,V))})),function(){let t=0;return St.selectAll(".bc-row").each((function(){const e=["left","right"].reduce(((t,e)=>{const n=at(this),r=e+("left"===e&&U?"-direct":"");return t+of(n,".bc-lbl-".concat(e),r,a)}),0);t=Math.max(e,t)})),t}()>s[0]-50?(U=!1,St.selectAll(".bc-direct-lbl").remove()):St.selectAll(".bc-row-label").remove(),St.classed("bc-direct-labels",U));let ae=0;U||B||Zt.selectAll(".bc-row-label span, .bc-compact-group-label span").each((function(){ae=Math.max(ae,a.getElementBounds(this).width)})),ae>0&&(ae+=2*vt);const se=100*ae/s[0]+"%",le=100*(s[0]-ae+("bars-split"===y?+i.get("space-between-cols",10)-4:0))/s[0]+"%";let ce;Zt.selectAll(".bc-row-label").style("width",se),Zt.selectAll(".bc-bars").style("width",le),"right"===F&&"bars-bullet"!==y&&"dot-plot"!==y&&Kt.selectAll("div.bc-group-title.label").style("padding-left",se),U||"dot-plot"!==y&&!M||ee.style("min-height",(function(){const t=at(this).select(".bc-row-label span").node();return t.innerText||t.innerHTML?null:(ce||(t.innerText="I",ce=a.getElementBounds(t).height,t.innerText=""),ce+"px")})),"dot-plot"===y&&St.selectAll(".bc-bar-label span").each((function(){const{right:t,width:e}=a.getElementBounds(this);t>a.getElementBounds(Zt.node()).right&&at(this.parentNode).style("left",-e-5+"px")})),"bars"===y&&ef({$bars:Qt,rangeOverlays:ht,valueOverlays:ut,barScale:Wt,barThickness:kt,vis:i,rtl:m}),te.selectAll("div.bc-bar-label").each((function(t){if(M||"dot-plot"===y)return;if(bt)return void Kh(ee,y,a,m);const e=at(this),n=this.querySelector("span"),r=c.colors.background,o=fe(r).l,i=t._color,s=H&&!_.indexOf(t.column),l=a.getElementBounds(n).width+yt,u=a.getElementBounds(this.parentNode),h=u.width,f=a.getElementBounds(this.parentNode.parentNode),d={left:u.left-f.left,right:f.right-u.right},v=at(this.parentNode.parentNode).selectAll(".bc-bar-overlay").nodes(),x=["right","left"];let w=rt;[s,m,t.value<0].filter(Boolean).forEach((()=>{x.reverse(),w="left"===w?"right":"left"}));let k=l+yt<=h,A=!k&&x.find((t=>d[t]>=l+yt)),T=fe(g(i)).l<_t,E=!1,$=0;if(v.length){const t=sp({overlays:v,barData:{bbox:u,barbgBbox:f,color:i},labelData:{width:l-yt,padding:yt},labelColor:getComputedStyle(n).color,outsidePositions:x,getElementBounds:a.getElementBounds,themeBackground:r,labelAlign:w,invertLuminance:_t,cm:g,chroma:p});t&&({requireInvert:T,inside:k,outsidePosition:A,buffer:E,labelOffset:$}=t)}if(e.classed("inverted",k&&T).classed("inside",!A).classed("buffer",E).classed("align-".concat(w),!A&&"bars-stacked"!==y).classed("hidden","bars-stacked"===y&&!k),k)e.style("margin-".concat(w),"".concat($,"px"));else if(A){const t=A===b.left?-1*(l+yt+$):h+$;e.style("margin-".concat(b.left),"".concat(t,"px"))}else{(t.value<0&&!s||t.value>=0&&s)&&e.style("margin-".concat(b.left),"".concat(-l,"px"));const n=T!==o<_t;e.classed("outline",n).classed("inverted",n||Tt)}}));var ue=Math.min.apply(Math,Yt)<0;if("bars-grouped"!==y&&"bars-stacked"!==y||"hover"!==$||!E||te.selectAll("div.bc-bar-label").classed("hidden",!0),(bt||"after"===jt||M)&&(rf({$chart:St,mode:y,barSpace:s[0]-ae,barScale:Wt,directLabels:U,chart:a,rtl:m,isValidValue:Ot}),bt||"after"===jt)){Kh(ee,y,a,m,"bars-stacked"===y?"__stackTotalValue":"value")}const he="bars"===y||"bars-stacked"===y||"bars-grouped"===y||"bars-bullet"===y,de=Q||(ft||ue)&&"bars-split"!==y&&!B;if(de){const t=ap(Zt,jt),e=100*(ae+t)/s[0]+"%";Zt.each((function(n){const r=at(this).selectAll(".bc-bars").nodes()[0];if(n._w=a.getElementBounds(r).width-t,he){const t=at(this).selectAll(".bc-bar-bg"),e=t.size(),r=a.getElementBounds(this).top,o=a.getElementBounds(t.nodes()[0]).top,i=a.getElementBounds(t.nodes()[e-1]).bottom;n._y=o-r-dt+"px",n._h=Math.abs(i-o)+2*dt+"px"}else n._h=a.getElementBounds(this).height+"px",n._y=0;at(this).insert("div.bc-grid.above",".bc-row").parent().insert("div.bc-grid.below",".bc-row"),at(this).selectAll(".bc-grid").style("height",ii("_h")).style("top",ii("_y")).style("width","calc(".concat(le," - ").concat(t,"px)")).style(b[Rt?"right":"left"],e).insert("svg.grid-container").append("g.grid");const o={visId:i.id,belowChart:at(this).select(".bc-grid.below g.grid"),aboveChart:at(this).select(".bc-grid.above g.grid"),plotSize:[n._w,parseFloat(n._h)],theme:c,emotion:a.emotion,rtl:m,numeral:h,chroma:p},s=i.get("value-label-format","0,0.[00]"),l=i.get("axis-label-format"),u=z?"0,0.[00]%":l||s,f=jm({...o,barScale:Wt,scaleType:v?"date":"number",fitLabels:[Rt?m?"last":"first":m?"first":"last"],justBaseline:!Q&&(ue||ft),colFmt:i.chart().get("metadata.data.column-format",{})[_[0]]||{},tickPosition:ot,tickLabelFormat:u,xTicks:Et,stackPercentages:z});Im({...o,yTicks:at(this).selectAll(".bc-bars").nodes().map((t=>t.offsetTop))});const d={top:0,bottom:0};he&&["top","bottom"].forEach((t=>{const e="top"===t?"first-row":"last-row",n=a.getElementBounds(at(this).select(".bc-row.".concat(e)).node()),r=a.getElementBounds(at(this).select(".bc-row.".concat(e," .bc-bars")).node()),o="top"===t?Math.max(0,r.top-n.top):Math.max(0,n.bottom-r.bottom);d[t]=o,f[t]+=dt}));const g={top:f.top-d.top,bottom:f.bottom-d.bottom};g[ot]-=2;const y=ut.length?1:0;at(this).parent().style("padding-top",Math.max(g.top,y)+"px").style("padding-bottom",Math.max(g.bottom,y)+"px")}))}if(ct){var pe;pe="bars"===y?st.filter((t=>{let{from:e,invisible:n,labelDirectly:r,type:o}=t;if(e!==Jh){if(!i.dataset.hasColumn(e))return!1;if("number"!==i.dataset.column(e).type())return!1}return!n&&"value"===o&&r})).map((t=>{const e=i.dataset.column(t.from),n=t.from===Jh?0:Ct[0].values[0][t.from];return{label:t.title?t.title:tp(i,t.from,Jh),value:n,x:Wt(n),column:e,color:Qh(t,i.theme())}})).sort(((t,e)=>t.x-e.x)):_.map((function(t){return{label:l.column(t).title(),value:Ct[0].values[0][t],x:Wt(Ct[0].values[0][t]),column:t}})).sort(ai("x"));const t="bars"===y?Number(le.replace("%",""))/100*s[0]:s[0];var ge=2===pe.length?Math.abs(pe[0].x-pe[1].x)/100*t:1/0;pe.forEach((function(e,n){e.align=1===pe.length||2===pe.length&&ge>10010?"center":0===n?"right":n===pe.length-1?"left":"center",e.width="100px",e.left="center"===e.align?e.x-50/t*100+"%":"left"===e.align?e.x+"%":"auto",e.right="center"===e.align||"left"===e.align?"auto":100-e.x+"%",e.class="bc-direct-key-col label align-".concat(e.align),Vt.series.includes(e.column)&&(e.class+=" bc-lbl-highlight")}));var me=St.select(".bc-group .bc-group-content"),be=0,ye=me.append("div.bc-direct-key").style("width",le).style(b.left,se),ve=ye.selectAll("div.bc-direct-key-col").data(pe).enter().append("div.bc-direct-key-col.label").style("left",ii("left")).style("right",ii("right")).style("width",ii("width")).style("text-align",ii("align")).attr("class",ii("class")).attr("data-column",ii("column")).attr("data-row",-1),xe=ve.append("span").html(ii("label"));"range-plot"===y&&(E||i.get("range-ends.enabled"))&&xe.style("color",(t=>Yh(c,Ae(t)))),"bars"===y&&xe.style("color",(t=>{const e=Gt(g(t.color)).hex(),n=Kf(e);return Tt&&n<30||!Tt&&n>70?void 0:e})),"bars"!==y&&ve.append("i.bc-vline.connecting-line.export-text").html("|"),ve.each((function(){be=Math.max(be,10+a.getElementBounds(this).height)})),St.select(".bc-group-title:first-child").style("margin-bottom",be+"px"),ye.style("top",("bars"===y?8:5)-be+"px"),ve.style("bottom",-(be-10)+"px"),me.style("margin-top",k?"0px":be+"px"),ve.select("span").style("position","relative").style("left",(function(){const{left:t,width:e}=a.getElementBounds(this),n=t-10;if(n<0)return-1*n+"px";const r=s[0]-10-t-e;return r<0?r+"px":0}))}"bottom"===Z&&X&&St.select("div.bc-color-key").each((function(){this.parentNode.append(this)}));const we=i.get("show-color-key",!1),ke=function(t){let{mode:e,colorBy:n,colorKeys:r,colorCategories:o,useCustomColors:i,excludeEntries:a=[],axes:s={},overlays:l=[],baseColor:c,baseColor2:u,palette:h,cm:f,vis:d,theme:p}=t;switch(e){case"bars":{let t=rk({colorKeys:r,colorCategories:o,useAutoColor:!1,useCustomColors:i,palette:h,cm:f,vis:d});t=function(t,e){return e?t.filter((t=>!e.includes(t.key))):t}(t,a);const e=s.bars&&s.bars.title();l.filter((t=>!(t.invisible||"value"===t.type&&t.labelDirectly))).forEach((e=>{const n={label:e.title?e.title:"value"===e.type?tp(d,e.from,Jh):"".concat(tp(d,e.from,Jh)," - ").concat(tp(d,e.to,Jh)),color:f(Qh(e,p)),width:"value"===e.type?"2px":void 0,pattern:"range"===e.type&&"solid"!==e.pattern?{type:e.pattern,strokeWidth:Wh(p,"vis.d3-bars.pattern.strokeWidth",2),lineGap:Wh(p,"vis.d3-bars.pattern.lineGap",2)}:void 0};t.filter((t=>{let e=!0;for(const r in n)Nw(n[r],t[r])||(e=!1);return e})).length||t.push(n)}));const n=tk(p,null!=c?c:t);return t.length?t:[{label:e,color:f(n)}]}case"bars-split":return rk({colorKeys:r,colorCategories:o,useAutoColor:!n,useCustomColors:i,palette:h,cm:f,vis:d,getDefaultLabel:n?xi:nk});case"bars-stacked":case"bars-grouped":case"dot-plot":return rk({colorKeys:r,colorCategories:o,useAutoColor:!0,useCustomColors:i,palette:h,cm:f,vis:d,getDefaultLabel:nk});case"bars-bullet":return[{color:f(tk(p,c)),label:s.bars&&s.bars.title()},{color:f(tk(p,u)),label:s.bars2&&s.bars2.title()}];case"arrow-plot":{const t=rk({colorKeys:r,colorCategories:o,useAutoColor:!1,useCustomColors:i,palette:h,cm:f,vis:d}),e=s.labels&&s.labels.title(),n=tk(p,null!=c?c:t);return t.length?t:[{label:e,color:f(n)}]}default:return[]}}({vis:i,mode:y,colorBy:A,colorKeys:i.colorKeys(),colorCategories:it,useCustomColors:K,excludeEntries:it.excludeFromKey,axes:i.axes(!0),overlays:st,baseColor:i.get("base-color"),baseColor2:i.get("base-color2"),palette:u,theme:c,cm:g});let Me;if(we&&ke.length){const t=St.append("div.legend-container"),e=Wh(c,"vis.base.legend.position","top"),n=i.get("stack-color-legend",!1)&&ke.length>1,r=Wh(c,"vis.base.legend.swatch",{}),o=r.borderRadius||0,s=["dot-plot","range-plot"].includes(y)||"50%"===o;if(r.size||Of(c,"vis.base.legend.swatch.size",14),s){const t=r.size||r.height||14;Of(c,"vis.base.legend.swatch.width",t),Of(c,"vis.base.legend.swatch.height",t),Of(c,"vis.base.legend.swatch.borderRadius","50%")}Me=ei.categoryLegendWrapper(t.node(),{swatches:ke,theme:c,horizontal:!n,rtl:m,emotion:a.emotion,chroma:i.libraries().chroma,purifyHtml:dw.utils.purifyHtml,translate:i.chart().translate,locale:i.chart().locale}),"top"===e&&t.lower(),"bars-stacked"!==y&&"bars-grouped"!==y&&"dot-plot"!==y||(Me.on("mouseenter",(t=>{let{key:e}=t;return Bt.set(e)})),Me.on("mouseleave",Bt.clear))}if(f.fitchart){St.select("div.fitchart-spacer").remove();const t=a.getElementBounds(St.node()).height,e=a.getMaxChartHeight()-t;e>0&&St.append("div.fitchart-spacer").style("height",e+"px")}if(null!==(e=i.featurePreviews())&&void 0!==e&&e["bar-annotations"]){const t=Km({chart:a,$group:Kt,$groupcontent:Zt,mode:y,barColumns:_,allNegative:Rt,rtl:m,stackTotalsPosition:jt,barScale:Wt,independentScales:Y,mirrorBars:H,blockLabels:B,isBarTypeWithGrid:he,displayGridLines:de,extendGrid:dt,outsideLabels:bt});r=Vw({vis:i,$chart:St,mode:y,barColumns:_,size:s,annotationLayer:r,annotationPlots:t,timeScale:v,groupedData:Ct})}function Ae(t){const e=t.column===_[0]?"base-color":"base-color2";return g(tk(c,i.get(e,0)))}i.renderingComplete()},init:function(t){this.svg=t.node(),this.__canvas={w:+t.attr("width"),h:+t.attr("height"),lpad:10,rpad:10}},_svgCanvas:function(){return this.svg},colorKeys:function(){const t=this,e=function(t){let{axes:e,metadata:n,dataset:r}=t;return e.colors?Xm({metadata:n,dataset:r,columnName:e.colors}):[]}({axes:t.axes(),dataset:t.dataset,metadata:t.chart().getMetadata()});return e},keys:function(){const t=this;return function(t){let{axes:e,metadata:n,dataset:r,returnKeyLabelMap:o=!1}=t;return Xm({metadata:n,dataset:r,columnName:e.labels,returnKeyLabelMap:o})}({column:t.axes().labels,dataset:t.dataset,metadata:t.chart().getMetadata()})},getCenter:function(){return[1,2]}}}),...dw.visualization.hasVisHash?["4aadf059","%%499431e9%%".slice(2,-2)]:[])}();

