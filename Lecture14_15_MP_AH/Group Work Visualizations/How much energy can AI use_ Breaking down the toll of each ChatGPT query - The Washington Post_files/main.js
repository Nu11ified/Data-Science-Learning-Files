(()=>{"use strict";var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function o(){var t,e,o,i;let n=(null===(i=window)||void 0===i||null===(o=i.dataLayer)||void 0===o||null===(e=o.find)||void 0===e||null===(t=e.call(o,(t=>t.j_ucid)))||void 0===t?void 0:t.j_ucid)||localStorage.getItem("uuid");var a,s,r;return n||(n=(null===(r=window)||void 0===r||null===(s=r.crypto)||void 0===s||null===(a=s.randomUUID)||void 0===a?void 0:a.call(s))||function(){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";var e=(new Date).getTime();return t.replace(/[xy]/g,(function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)}))}(),localStorage.setItem("uuid",n)),n}function i(t,e=""){const o=`${document.cookie}`,i=`${t}=`;let n=0,a=0;return o.length>0&&(n=o.indexOf(i),-1!==n&&(n+=i.length,a=o.indexOf(";",n),-1===a&&(a=o.length),e=decodeURIComponent(o.substring(n,a)))),e}function n(){const t=i("wp_devicetype");return""!==t?"1"===t:window.innerWidth<=480}t.r(e),t.d(e,{fZ:()=>n,uk:()=>c,Ri:()=>i,Qs:()=>o,l1:()=>u,pK:()=>s,yw:()=>a});const a=(t,e,o)=>e.split(".").reduce(((t,e)=>t&&t[e]?t[e]:o),t);function s(){const t="test";let e=!1;try{localStorage.setItem(t,t),localStorage.removeItem(t),e=!0}catch(t){e=!1}return e}function r(t,e,o){const i=("variable"===o?new RegExp(`[\\?&;]${e}=([^&#?]*)`):new RegExp(`[\\?&;](${e})[^=&#?]*`)).exec(t);return i?i[i.length-1]:void 0}function l(t){return"string"==typeof t?t:(null==t?void 0:t.length)&&"string"==typeof t[0]?t[0]:""}function c(t,e){const o=r(window.location.href,"dcnode","variable");if(o)return o;const i=function(t){let e=window.commercialNode;return e="games.washingtonpost.com"===window.location.host?e||"entertainment/arkadium":e||t.commercialNode||t.commercial_node||"politics",e.replace(/\s/g,"").replace(/^\/*|\/*$/g,"").replace(/[^0-9a-zA-Z_.\-/]/g,"")}(t),n=function(t){const e=l(t);return e&&{article:"article",audiostory:"audio",blogfront:"blog",blogstory:"blog",blog:"blog",front:"front",graphicstory:"graphic",mediagallery:"photo",gallery:"photo",videostory:"video"}[e.toLowerCase()]||""}(t.contentType),a=l(t.contentName);return t.isHomepage?e?"homepage":i:!n&&(null==a?void 0:a.length)?`${i}/${a}`:i.endsWith("bytheway")?function(t){return"/travel/"===window.location.pathname?`${t}/front`:function(t){const e=window.location.href,o=r(e,t);return Boolean(o||new RegExp(t).exec(e))}("/tips/")?`${t}/tips`:/\/travel\/[0-9]{4}\/[0-9]{2}\/[0-9]{2}\//i.test(window.location.href)?`${t}/news`:/\/travel\/(?!tips)(?!news)[^\d]/i.test(window.location.href)?`${t}/city-guides`:`${t}`}(i):n&&"article"!==n?function(t,e,o){const i=!!(null==e?void 0:e.length);return"blog"===t&&i?`${o}/${t}/${e}`:"front"===t&&i?`${o}/${e}/${t}`:`${o}/${t}`}(n,a,i):i}function u(t){let e="";const o={},i=t.split("/"),n=i[0].length?0:1;for(let t=n;t<i.length;t++){const a=i[t];o[t>n?"subsection"+(t-n):"section"]=`${e}${a}`,e+=`${a}/`}return o}class d{constructor(t,e,o){this.keyValues={},this.metaData=t,this.url=e,this.commercialNode=o}j_tid(){const t=(window.j_tid?window.j_tid.toString():window.btoa(Date.now().toString()).replace(/=/gi,"")).toLowerCase(),e=a(window,"google_tag_manager.GTM-WHNNX8B");this.keyValues.j_tid=t,window.j_tid=t,e&&window.dataLayer&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({j_tid:t}))}j_ucid(){const t=o().toString().toLowerCase();this.keyValues.j_ucid=t,window.dataLayer=window.dataLayer||[],window.dataLayer.push({j_ucid:t})}j_cid(t){const e=i("_ga");if(e&&/^GA1.2.[0-9]*[.][0-9]/.test(e)){const t=e.split(".").slice(-2).join(".");this.keyValues.j_cid=t}else window.ga=window.ga||function(){window.ga.q=window.ga.q||[],window.ga.q.push(arguments)},window.ga.l=+new Date,window.ga("create","UA-133956668-1","auto"),window.ga((t=>{var e=t.get("clientId");this.keyValues.j_cid=e}));t(this.keyValues)}sub(){const t=i("wapo_actmgmt");if(!t)return void(this.keyValues.sub="no");if(/isub:1\b/.test(t))return void(this.keyValues.sub="yes");let e="reg";const o=t.match(/v:(\d+)/);if(o){const i=parseInt(o[1],10);(i<4&&/S:T\b/.test(t)||i>=4&&!/productID\b/.test(t)&&!/SC:0\b/.test(t))&&(e="terminated")}this.keyValues.sub=e}addSegmentsToAux(t){const e=localStorage.getItem("usersegmentsAdops"),o=e?JSON.parse(e):{};for(const e in o)1===o[e]&&t.push(e)}getAuxMap(){return localStorage.getItem("clavis.targeting")?JSON.parse(localStorage.getItem("clavis.targeting")).aux_map:localStorage.getItem("targeting_aux_map")?localStorage.getItem("targeting_aux_map").split(","):void 0}getContextualTargetingCa(){const t=a(this.metaData,"contextualTargeting.adcall",[]).filter((({key:t})=>"ca"===t))[0]||{values:[]};return Array.isArray(t.values)?t.values:[t.values]}isBrandSafe(){if(/arkadium/.test(this.commercialNode)||/amuse-labs/.test(this.commercialNode)||/comics/.test(this.commercialNode)||/horoscopes/.test(this.commercialNode))return!0}ca(){if(!s())return;const t=this.getAuxMap()||[],e=this.getContextualTargetingCa(),o=a(this.metaData,"clavis.auxiliaries",[]),i=e.length>0?e:o,n=[...t.map((t=>t.toString().toLocaleLowerCase())),...i.map((t=>t.toString().toLocaleLowerCase()))];this.isBrandSafe()&&n.push("rg5cq"),this.addSegmentsToAux(n),n.length&&(this.keyValues.ca=["true"].concat(n))}contextualTargetingKeys(){const t=a(this.metaData,"contextualTargeting.adcall",[]);Array.isArray(t)&&t.forEach((t=>{const e=a(t,"key",null),o=a(t,"values",null);null===e||"ca"===e||e in this.keyValues||null===o||!Array.isArray(o)&&"string"!=typeof o||(this.keyValues[e]=o)}))}wpnode(){this.metaData&&this.commercialNode&&(this.keyValues.wpnode=this.commercialNode)}ks(){this.keyValues.ks="1"}sections(){const t=this.metaData.primary_section_id||this.metaData.commercialNode;t&&(this.keyValues={...this.keyValues,...u(t)})}lgc_up(){this.keyValues.lgc_up=window.zeusAdUnitPath}init(t){return this.ca(),this.ks(),this.j_tid(),this.j_ucid(),this.j_cid(t),this.wpnode(),this.sub(),this.sections(),this.lgc_up(),this.contextualTargetingKeys(),this.keyValues}}const{fZ:g,uk:w}=e;function h(t){window.zeus=window.zeus||{cmd:[]},window.zeus.cmd.push((e=>{e.emit("ADD_KEYVALUES",t)}))}!async function(){const t=window.wp_meta_data||window.wpAdFusion||{},e=g(),o=function(t,e){return w(t,e)}(t,e);window.zeusCommercialNode=o,window.zeusAdUnitPath=function(t,e){return`/701/${t?"mob.wp.":"wpni."}${e}`}(e,o),window.zeusKeyvalues=function(t,e){const o=window.location.href;return new d(t,o,e).init(h)}(t,o)}()})();