"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6131],{96131:function(e,i,n){n.r(i),n.d(i,{AiOverviewAction:function(){return ec.a},AiOverviewBox:function(){return ed},ContentView:function(){return eo},useAiOverview:function(){return ec.l}});var r=n(5093),t=n(52676),a=n(9437),o=n(74471),l=n(81253),s=n(44962),d=n(61185),c=n(75271),u=n(66142),f=n(11660),m={},h=function(e,i,n,r){var t="".concat(e,"-").concat(i,"-").concat(n);m[t]||(m[t]=1,(0,f.Nf)(e,i,n,r))},p=n(27499),v=n(5047),g=(0,o.a)("div",{display:"flex",justifyContent:"center",marginTop:"-$025"}),x=(0,o.a)(v.a,{gap:"$050","@notSm":{width:"60%"}}),y=(0,o.a)("div",{display:"flex",flexDirection:"column",alignItems:"center",gap:"$025"}),b=(0,o.a)("p",{color:"$primary",fontSize:"$100",fontWeight:"$bold",letterSpacing:"0.32px"}),k=(0,o.a)("p",{textAlign:"center"}),j=function(e){var i=e.setContentView;return(0,c.useEffect)(function(){var e=setTimeout(function(){i(eo.CONTENT)},5e3);return function(){return clearTimeout(e)}},[]),(0,t.jsx)(g,{children:(0,t.jsxs)(x,{children:[(0,t.jsx)(d.a,{label:"feedback confirmation",size:"200",children:(0,t.jsx)(p.a,{})}),(0,t.jsxs)(y,{children:[(0,t.jsx)(b,{children:"Thanks for your feedback!"}),(0,t.jsx)(k,{children:"Your submission will help us improve The Washington Post reader experience for everyone."})]})]})})},w=n(91554),S=(0,o.a)("div",{display:"flex",flexDirection:"column",alignItems:"start",rowGap:"$100"}),$=(0,o.a)("div",{lineHeight:"$125",textAlign:"left"}),T=(0,o.a)("p",{color:"$primary",fontSize:"$100",fontWeight:"$bold",letterSpacing:"0.32px"}),_=(0,o.a)("p",{color:"$gray100",fontSize:"$075"}),I=(0,o.a)("ul",{display:"flex",flexDirection:"column",gap:"$050",listStylePosition:"outside",margin:0,padding:"0 $100"}),N=(0,o.a)("li",{textAlign:"left"}),A=(0,o.a)("p",{fontFamily:"$subhead",fontSize:"$100",lineHeight:"$125",textAlign:"left"}),C=(0,o.a)(s.a,{fontSize:"$075",fontWeight:"$regular",textDecoration:"underline","&.overrideStyles":{border:"none",color:"$gray100",padding:0,width:"fit-content","@hover":{"&:hover":{background:"unset"}}}}),E=function(e){var i=e.keyTakeawaysApproved,n=e.keyTakeaways,r=e.realtimeSummary,a=e.setContentView,o=(0,w.bp)().globalContent,l=function(){var e=JSON.parse(window.localStorage.getItem("wp_nlp")||"{}");if(((null==e?void 0:e.feedback_provided_for)||[]).indexOf(null==o?void 0:o._id)>-1){a(eo.CONFIRMATION);return}a(eo.FEEDBACK)};return i&&(null==n?void 0:n.length)>0?(0,t.jsxs)(S,{children:[(0,t.jsxs)($,{children:[(0,t.jsx)(T,{children:"AI Overview"}),(0,t.jsx)(_,{children:"Summary is AI-generated, newsroom-reviewed."})]}),(0,t.jsx)(I,{children:n.map(function(e){return(0,t.jsx)(N,{children:e.display},e._id)})}),(0,t.jsx)(C,{className:"overrideStyles",isOutline:!0,onClick:l,children:"Did our AI help? Share your thoughts."})]}):r?(0,t.jsxs)(S,{children:[(0,t.jsxs)($,{children:[(0,t.jsx)(T,{children:"AI Overview"}),(0,t.jsx)(_,{children:r.disclaimer})]}),(0,t.jsx)(A,{dangerouslySetInnerHTML:{__html:r.summary}}),(0,t.jsx)(C,{className:"overrideStyles",isOutline:!0,onClick:l,children:"Did our AI help? Share your thoughts."})]}):(0,t.jsx)(_,{css:{fontSize:"$100"},children:"Sorry, a summary is not available for this article at this time. Please try again later."})},O=n(94213),V=n(32586),D=n(13943),z=n(5565),L=n(72609),B=n(68490),P=n(44240),R=n(50824),W=n(75774),F=n(2221),M=n(70394),H=n(39436),U=n(33960),G=n(51484),Y={POSITIVE:"1",NEUTRAL:"2",NEGATIVE:"3"},J=(0,o.a)("div",{display:"flex",flexDirection:"column",gap:"$100",alignItems:"center"}),K=(0,o.a)(s.a,{alignSelf:"flex-start",gap:"$025",fontSize:"$075",fontWeight:"$regular","&.overrideStyles":{border:"none",color:"$gray60",padding:"0 $025 0 0","@hover":{"&:hover":{background:"unset"}}}}),Z=(0,o.a)("div",{display:"flex",flexDirection:"column",alignItems:"center",gap:"$025"}),q=(0,o.a)("p",{textAlign:"center"}),Q=(0,o.a)("div",{display:"flex",gap:"$200",variants:{reduceBottomMargin:{true:{marginBottom:"-$100"}}}}),X=(0,o.a)("div",{alignItems:"center",display:"flex",flexDirection:"column",padding:"$025"}),ee=(0,o.a)(s.a,{fontWeight:"$regular","&.overrideStyles":{border:"none",display:"contents",padding:0,"@hover":{"&:hover":{background:"unset"}}}}),ei=(0,o.a)("form",{display:"flex",flexDirection:"column",alignItems:"center",gap:"$100",overflow:"hidden",maxHeight:0,width:"90%",transition:"max-height 1s ease",visibility:"hidden","@notSm":{width:"60%"},variants:{show:{true:{maxHeight:"1000px",visibility:"visible"}}}}),en=(0,o.a)("div",{width:"100%"}),er=(0,o.a)("p",{color:"$red100",fontSize:"$075"}),et=function(e){switch(e){case Y.NEUTRAL:return"Unsure";case Y.NEGATIVE:return"No";default:return"Yes"}},ea=function(e){var i=e.overviewType,n=e.setContentView,a=(0,r._)((0,c.useState)(null),2),o=a[0],l=a[1],u=(0,r._)((0,c.useState)(null),2),f=u[0],m=u[1],p=(0,w.bp)().globalContent;(0,c.useEffect)(function(){h("article_summary_feedback","onpage","seen_feedback_ai")},[]);var v=function(e,i){var n,r={canonicalUrl:(0,H.Z2)(p),uuid:(0,G.getLocalStorageItem)("uuid")||"",rating:e,feedback:i,revisionId:null==p?void 0:null===(n=p.revision)||void 0===n?void 0:n.revision_id};return(0,U.Fs)(r)},g=function(e,i){var n={canonicalUrl:(0,H.Z2)(p),uuid:(0,G.getLocalStorageItem)("uuid")||"",rating:e,feedback:i};return(0,U.qY)(n)};return(0,t.jsxs)(J,{children:[(0,t.jsxs)(K,{className:"overrideStyles",icon:"left",isOutline:!0,onClick:function(){return n(eo.CONTENT)},children:[(0,t.jsx)(d.a,{label:"back",children:(0,t.jsx)(D.a,{})}),"Back"]}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(q,{css:{color:"$primary",fontSize:"$100",fontWeight:"$bold",letterSpacing:"0.32px"},children:"Share your thoughts"}),(0,t.jsx)(q,{children:"Did the AI summary tool improve your experience"})]}),(0,t.jsx)(Q,{reduceBottomMargin:!o,children:Object.keys(Y).map(function(e){var i,n="".concat(e.toLowerCase(),"-feedback");return(0,t.jsx)(X,{children:(0,t.jsxs)(ee,{className:"overrideStyles",onClick:function(){return l(Y[e])},children:[(0,t.jsx)(d.a,{label:n,size:"200",children:(i=Y[e])===Y.POSITIVE?o===Y.POSITIVE?(0,t.jsx)(z.a,{}):(0,t.jsx)(L.a,{}):i===Y.NEUTRAL?o===Y.NEUTRAL?(0,t.jsx)(R.a,{}):(0,t.jsx)(W.a,{}):i===Y.NEGATIVE?o===Y.NEGATIVE?(0,t.jsx)(B.a,{}):(0,t.jsx)(P.a,{}):null}),et(Y[e])]})},n)})}),(0,t.jsxs)(ei,{show:!!o,onSubmit:function(e){if(e.preventDefault(),!o){m(Error("Please select a rating"));return}("keyTakeaways"===i?v:g)(o,e.currentTarget["feedback-input"].value).then(function(){var e=JSON.parse(window.localStorage.getItem("wp_nlp")||"{}"),i=new Set((null==e?void 0:e.feedback_provided_for)||[]);i.add(null==p?void 0:p._id),window.localStorage.setItem("wp_nlp",JSON.stringify((0,V._)((0,O._)({},e),{feedback_provided_for:Array.from(i)}))),h("article_summary_feedback","onpage","submit_feedback_ai"),n(eo.CONFIRMATION)}).catch(function(){return m(Error("Error occurred submitting feedback. Please try again later."))})},children:[(0,t.jsx)(F.a,{orientation:"horizontal",decorative:!0}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(q,{css:{color:"$primary",fontSize:"$100",fontWeight:"$bold",letterSpacing:"0.32px"},children:"Tell us more!"}),(0,t.jsx)(q,{children:"What was most useful to you in this experience"})]}),(0,t.jsx)(en,{children:(0,t.jsx)(M.a,{id:"feedback-input",label:"Optional feedback",name:"feedback-input"})}),(0,t.jsx)(s.a,{type:"submit",variant:"primary",css:{width:"8rem"},children:"Submit"}),(null==f?void 0:f.message)&&(0,t.jsx)(er,{children:f.message})]})]})},eo={CONFIRMATION:"confirmation",CONTENT:"content",FEEDBACK:"feedback"},el=(0,o.a)(l.a,{backgroundColor:"$onPrimary",border:"1px solid",borderColor:"$gray300",borderRadius:"$025",marginBottom:"$100",maxHeight:"1000px",maxWidth:"650px",width:"100%",padding:"$125",transition:"opacity 0.2s ease, max-height 0.5s ease, margin-bottom 0.5s ease, padding 0.5s ease, visibility 0.5s ease",visibility:"visible",variants:{isCenteredLayout:{true:{margin:"0 auto $150 auto"}},isVisible:{false:{marginBottom:0,maxHeight:0,opacity:0,overflow:"hidden",padding:"0 $125",visibility:"hidden"}}}}),es=(0,o.a)(s.a,{"&.overrideStyles":{border:"none",marginTop:"-$050",marginRight:"-$050",position:"relative",float:"right"}}),ed=function(e){var i=(0,r._)((0,c.useState)(eo.CONTENT),2),n=i[0],o=i[1],l=(0,u.$Y)().articleProperties.isCenteredLayout,s=(null==e?void 0:e.keyTakeawaysApproved)&&(null==e?void 0:e.keyTakeaways.length)>0?"keyTakeaways":"realtimeSummary";(0,c.useEffect)(function(){h("article_summary_seen","onpage","keyTakeaways"===s?"seen_summary_ai_editor":"seen_summary_ai_auto")},[]);var f=(0,c.useMemo)(function(){var i=(0,t.jsx)(E,{setContentView:o,keyTakeawaysApproved:null==e?void 0:e.keyTakeawaysApproved,keyTakeaways:null==e?void 0:e.keyTakeaways,realtimeSummary:null==e?void 0:e.realtimeSummary});return n===eo.FEEDBACK&&(i=(0,t.jsx)(ea,{overviewType:s,setContentView:o})),n===eo.CONFIRMATION&&(i=(0,t.jsx)(j,{setContentView:o})),i},[n]);return(0,t.jsxs)(el,{isVisible:null==e?void 0:e.isVisible,isCenteredLayout:l,children:[(0,t.jsx)(es,{className:"overrideStyles",density:"compact",icon:"center",onClick:function(){var i;return null==e?void 0:null===(i=e.setIsVisible)||void 0===i?void 0:i.call(e,!1)},isOutline:!0,variant:"primary",children:(0,t.jsx)(d.a,{label:"",children:(0,t.jsx)(a.a,{})})}),f]})},ec=n(40713)}}]);