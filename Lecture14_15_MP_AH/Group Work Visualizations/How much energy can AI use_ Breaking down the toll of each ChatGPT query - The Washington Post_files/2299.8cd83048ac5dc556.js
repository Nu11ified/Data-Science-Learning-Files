"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2299],{32299:function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),r(35442),r(14503),r(75271),r(40507);var t=r(80883);r(73051),r(55249),r(5768);var o=r(72142);r(97195),r(74693),r(43750),r(32423),r(11726),r(87996),r(65194),r(89030),r(17347),r(4706),r(83767),r(39163),r(92452),r(56945),r(60191),r(30737),r(66292),r(93381),r(11931),r(40337),r(19891),r(42366),r(65711),r(17823),r(91162),r(38807),r(27814),r(15243),r(63864),r(65439),r(32474),r(120),r(43226),r(31223),n.StickyPlayer=t.StickyPlayer,n.StickyPlayerHumanReadTrigger=t.StickyPlayerHumanReadTrigger,n.StickyPlayerTrigger=t.StickyPlayerTrigger,n.useAudioSource=t.useAudioSource,n.StickyPlayerProvider=o.StickyPlayerProvider,n.useStickyPlayerContext=o.useStickyPlayerContext},65711:function(e,n,r){r.r(n),r.d(n,{ReportingObserverScript:function(){return y},useIsClient:function(){return d},useLocalStorage:function(){return l},useOnScreen:function(){return v},usePerformanceTracking:function(){return h},useReducedMotion:function(){return m},useWindowWidth:function(){return w}});var t=r(94213),o=r(32586),a=r(5093),i=r(29718),c=r(75271),u=r(86763),s=r.n(u),f=r(14224),d=function(){var e=(0,a._)((0,c.useState)(!1),2),n=e[0],r=e[1];return(0,c.useEffect)(function(){r(!0)},[]),n},l=function(e,n){var r=(0,a._)((0,c.useState)(function(){try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):n}catch(e){return console.log(e),n}}),2),t=r[0],o=r[1];return[t,function(n){try{var r=n instanceof Function?n(t):n;o(r),window.localStorage.setItem(e,JSON.stringify(r))}catch(e){console.log(e)}}]},v=function(e){var n=e.turnOff,r=e.ref,t=e.rootMargin,o=e.threshold,u=e.delay,s=void 0===u?400:u,f=(0,a._)((0,c.useState)(!1),2),d=f[0],l=f[1];return(0,c.useEffect)(function(){var e,n,c="u">(0,i._)(window.IntersectionObserver),u=r.current;return c&&(e=new IntersectionObserver(function(e){var r=(0,a._)(e,1)[0];r.isIntersecting&&(n=setTimeout(function(){l(r.isIntersecting)},s))},{root:null,rootMargin:t,threshold:o})),c&&u&&e.observe(u),function(){c&&e.unobserve(u),clearTimeout(n)}},[]),!!n||d};function p(){return window.innerWidth}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.wait,r=void 0===n?0:n,t=(0,a._)((0,c.useState)(p()),2),o=t[0],i=t[1];return(0,c.useEffect)(function(){var e=s()(function(){i(p())},r);return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[r]),o},m=function(){var e=(0,a._)((0,c.useState)(),2),n=e[0],r=e[1];return(0,c.useEffect)(function(){if(!window.matchMedia)return r(!1);var e=window.matchMedia("(prefers-reduced-motion: reduce)");r(e.matches);var n=function(e){r(e.matches)};return e.addEventListener("change",n),function(){e.removeEventListener("change",n)}},[]),n},g={dev:"site-dev-logs",sandbox:"site-sandbox-logs",staging:"site-staging-logs",prod:"site-prod-logs"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sampleRate,r=void 0===n?Number.parseFloat(f.env.NEXT_PUBLIC_SAMPLE_RATE||"0.00001"):n,a=e.app,i=void 0===a?"spectrum":a,u=e.env,s=void 0===u?"dev":u,d=e.debug,l=void 0!==d&&d,v=e.getLoginDetails,p=c.useRef(!1),w=c.useRef(0),m=c.useRef(performance.now()),h=c.useRef(0);c.useEffect(function(){var e=function(e){window.perfDataLayer=window.perfDataLayer||[];var n={sourcetype:"httpevent",time:Math.floor(Date.now()/1e3),index:"site-eng",source:g[s],event:(0,t._)({name:"performanceTracking",host:window.location.hostname,url:window.location.href,app:i},null==v?void 0:v(),e)};window.perfDataLayer.push(n)};if(!(Math.random()>r)){var n=null;if("PerformanceObserver"in window)try{(n=new PerformanceObserver(function(e){e.getEntries().forEach(function(e){l&&console.log("Long task detected:",e);var n={sourcetype:"httpevent",time:Math.floor(Date.now()/1e3),source:g[s],index:"site-eng",event:(0,o._)((0,t._)({name:"performanceTracking",host:window.location.hostname,url:window.location.href,app:i},null==v?void 0:v()),{longTask:e.toJSON()})};window.perfDataLayer=window.perfDataLayer||[],window.perfDataLayer.push(n)})})).observe({entryTypes:["longtask"]})}catch(e){console.error("PerformanceObserver for long tasks failed:",e)}var a=function(){var e=performance.now(),n=e-m.current;m.current=e,n>50&&(p.current=!0),h.current=requestAnimationFrame(a)};h.current=requestAnimationFrame(a);var c=setInterval(function(){var n={fpsDropDetected:p.current};if(p.current=!1,"memory"in performance&&performance.memory){var r=performance.memory,t=r.totalJSHeapSize,o=r.usedJSHeapSize,a=r.jsHeapSizeLimit;n.totalJSHeapSize=t,n.usedJSHeapSize=o,n.jsHeapSizeLimit=a,n.usedMB=o/1048576}n.elementsCount=document.getElementsByTagName("*").length,n.jsHeapGrowth=(n.usedMB||0)-w.current,w.current=n.usedMB||0,e(n);var i=window.perfDataLayer||[];l&&i.forEach(function(e){console.log("Perf tracking event:",e)});var c=i.map(function(e){return JSON.stringify(e)});0!==c.length&&(navigator.sendBeacon("https://www.washingtonpost.com/logs/collector",c.join("\n")),window.perfDataLayer=[])},6e4);return function(){clearInterval(c),n&&n.disconnect(),h.current&&cancelAnimationFrame(h.current)}}},[r,l])},y=function(e){var n=e.app,r=e.env,t=e.sampleRate,o=g[r];return c.createElement("script",{dangerouslySetInnerHTML:{__html:"\n          if (Math.random() <= ".concat(void 0===t?1e-5:t,' && \'ReportingObserver\' in window) {\n            const observer = new ReportingObserver((reports) => {\n              reports.forEach((report) => {\n                window.perfDataLayer = window.perfDataLayer || [];\n\n                const event = {\n                  sourcetype: "httpevent",\n                  time: Math.floor(Date.now() / 1000),\n                  source: "').concat(o,'",\n                  index: "site-eng",\n                  event: {\n                    name: "performanceTracking", \n                    host: window.location.hostname,\n                    url: window.location.href,\n                    app: "').concat(n,"\",\n                    report: report.toJSON(),\n                  }\n                };\n                window.perfDataLayer.push(event);\n              });\n            }, { types: ['crash', 'intervention', 'deprecation'], buffered: true });\n            observer.observe();\n\n            window.addEventListener(\"beforeunload\", () => {\n              observer.disconnect();\n            });\n          }\n        ")}})}}}]);