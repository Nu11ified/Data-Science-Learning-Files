"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9364],{79553:function(e,n,t){t.d(n,{q:function(){return i}});var o=t(74471),i={color:o.f.colors.accessible,textDecorationColor:o.f.colors.accessible,textDecorationLine:"underline",textDecorationThickness:"0.0625em",textUnderlineOffset:"0.125em","@hover":{"&:hover":{color:o.f.colors.gray80,textDecoration:"none"}}}},44251:function(e,n,t){t.d(n,{l:function(){return eQ}});var o,i=t(94213),r=t(5093),a=t(52676),l=t(75271),s=t(84750),c=t(99938),d={TOPIC:"topic",NEWSLETTER:"newsletter",NOTIFICATION:"notification",AUTH:"auth"},u=(0,l.createContext)({following:[],newsletters:[],notifications:[],isLoggedIn:!1,setProperty:function(){},logger:function(){}}),f=function(e){var n,t=e.children,o=e.logger,i=(0,r._)((0,l.useState)([]),2),f=i[0],p=i[1],g=(0,r._)((0,l.useState)([]),2),h=g[0],v=g[1],m=(0,r._)((0,l.useState)([]),2),x=m[0],w=m[1],y=(0,r._)((0,l.useState)(!1),2),b=y[0],S=y[1],j=(n=(0,s._)(function(e,n){return(0,c.Jh)(this,function(t){switch(e){case d.TOPIC:p(n);break;case d.NEWSLETTER:v(n);break;case d.NOTIFICATION:w(n);break;case d.AUTH:S(n)}return[2]})}),function(e,t){return n.apply(this,arguments)});return(0,a.jsx)(u.Provider,{value:{following:f,newsletters:h,notifications:x,isLoggedIn:b,setProperty:j,logger:o},children:t})},p=t(32586),g=t(82271),h=t(74471),v=t(84276),m=t(67696),x=t(26372),w=t(44962),y=t(91678),b=t(51484),S=t(11660),j=t(61185),k=t(24192),_=t(89851),C=function(e){var n=e.iconCSS,t=e.CustomComponent,o=e.isFollowing;return t?(0,a.jsx)(t,{isFollowing:o}):(0,a.jsx)(a.Fragment,{children:o?(0,a.jsxs)(a.Fragment,{children:["Following",(0,a.jsx)(j.a,{size:"100",label:"",css:n||{},children:(0,a.jsx)(k.a,{})})]}):(0,a.jsxs)(a.Fragment,{children:["Follow",(0,a.jsx)(j.a,{size:"100",label:"",css:n||{},children:(0,a.jsx)(_.a,{fr:""})})]})})},T=t(58999),E=(0,h.a)("div",{display:"flex",paddingBlock:h.f.space["100"]}),I=(0,h.a)("div",{flex:1}),F=(0,h.a)("div",{paddingBlockStart:"0.125rem"}),P=(0,h.a)("p",{color:h.f.colors.primary,marginBlock:0,fontSize:h.f.fontSizes["100"],fontFamily:h.f.fonts.subhead,fontWeight:h.f.fontWeights.bold}),z=(0,h.a)("p",{color:h.f.colors.accessible,fontSize:h.f.fontSizes["087"],marginBlock:0}),A=function(e){var n=e.id,t=e.title,o=e.description,i=e.children;return(0,a.jsxs)(E,{children:[(0,a.jsxs)(I,{children:[(0,a.jsx)(P,{id:n,children:t}),(0,a.jsx)(z,{children:o})]}),(0,a.jsx)(F,{children:i})]})},B=function(e){var n=e.id,t=e.title,o=e.description,i=e.checked,r=e.onCheckedChange;return(0,a.jsx)(A,{id:n,title:t,description:o,children:(0,a.jsx)(T.a.Root,{checked:i,"aria-labelledby":t,onCheckedChange:r,"data-test-id":"tf-nl-switch",children:(0,a.jsx)(T.a.Thumb,{})})})},O=function(e){var n=e.id,t=e.title,o=e.description,i=e.onCheckedChange,r=e.checked;return(0,a.jsx)(A,{id:n,title:t,description:o,children:(0,a.jsx)(T.a.Root,{"data-test-id":"tf-alert-switch",checked:r,"aria-labelledby":t,onCheckedChange:i,children:(0,a.jsx)(T.a.Thumb,{})})})},R=t(86671),N=(0,h.a)("div",{diplay:"flex",flexDirection:"column",justifyContent:"center",maxWidth:"311px",margin:"0 auto",paddingBlockStart:h.f.space["200"],paddingBlockEnd:h.f.space["200"]}),D=(0,h.a)("h2",{color:h.f.colors.primary,fontFamily:h.f.fonts.headline,fontSize:h.f.fontSizes["175"],textAlign:"center"}),L=(0,h.a)("p",{color:h.f.colors.primary,fontSize:h.f.fontSizes["100"],textAlign:"center",margin:"0"}),G=(0,h.a)("button",{textDecoration:"underline",color:h.f.colors.accessible,fontFamily:h.f.fonts.meta,fontSize:h.f.fontSizes["087"],textAlign:"center",marginTop:h.f.space["100"],marginBottom:h.f.space["150"],padding:"0",border:"none",backgroundColor:"transparent",display:"block",marginInline:"auto",cursor:"pointer"}),U=(0,h.a)(L,{paddingInline:h.f.space["075"],paddingBlock:h.f.space["100"],flexShrink:"0"}),J=(0,h.a)("div",{display:"flex",justifyContent:"center",alignItems:"center"}),W=(0,h.a)("span",{height:"1px",backgroundColor:h.f.colors.gray300,display:"inline-block",flexGrow:"1"}),M=(0,h.a)(w.a,{textDecoration:"none",color:h.f.colors.secondary,"&.overrideStyles":{textDecoration:"none",color:h.f.colors.secondary}}),H=function(e){var n,t,o=e.setShowAlreadyRegistered,i="".concat(b.ENDPOINTS.wapoSignin,"?next_url=").concat(encodeURIComponent(null===(t=window)||void 0===t?void 0:null===(n=t.location)||void 0===n?void 0:n.href));return(0,a.jsxs)(N,{"data-test-id":"tf-already-registered",children:[(0,a.jsx)(D,{children:"It looks like you already have an account"}),(0,a.jsx)(L,{children:"Check your email for a link to sign in securely, without a password"}),(0,a.jsxs)(J,{children:[(0,a.jsx)(W,{}),(0,a.jsx)(U,{children:"or"}),(0,a.jsx)(W,{})]}),(0,a.jsx)(M,{className:"overrideStyles",variant:"cta",as:"a",href:i,"data-test-id":"tf-signin-button",children:"Sign in"}),(0,a.jsx)(G,{onClick:function(){return o(!1)},"data-test-id":"tf-back-link",children:"Back"})]})},Q=t(81253),q=(0,h.a)("div",{diplay:"flex",flexDirection:"column",justifyContent:"center",maxWidth:"311px",margin:"0 auto",paddingBlockStart:h.f.space["200"],paddingBlockEnd:h.f.space["200"]}),K=(0,h.a)("h2",{color:h.f.colors.primary,fontFamily:h.f.fonts.headline,fontSize:h.f.fontSizes["150"],textAlign:"center"}),V=(0,h.a)("button",{textDecoration:"underline",color:h.f.colors.accessible,fontFamily:h.f.fonts.meta,fontSize:h.f.fontSizes["087"],textAlign:"center",marginTop:h.f.space["100"],padding:"0",border:"none",backgroundColor:"transparent",display:"block",marginInline:"auto",cursor:"pointer"}),X=(0,h.a)(Q.a,{textAlign:"center"}),Y=(0,h.a)(w.a,{textDecoration:"none",color:h.f.colors.secondary,marginTop:h.f.space["125"],display:"inline-block","&.overrideStyles":{textDecoration:"none",color:h.f.colors.secondary}}),Z=function(e){var n=e.setShowAlreadyRegisteredSSO,t={nextUrl:window.location.href,socialProvider:R.aA.SSO,thirdPartyAuth:!0},o="".concat(b.ENDPOINTS.base,"/user/auth/sso/login?state=").concat(window.btoa(JSON.stringify(t)));return(0,a.jsxs)(q,{"data-test-id":"tf-already-registered-sso",children:[(0,a.jsx)(K,{children:"It looks like you already have an account"}),(0,a.jsx)(X,{children:(0,a.jsx)(Y,{className:"overrideStyles",variant:"cta",as:"button",onClick:function(e){e.preventDefault(),new b.GoogleAnalytics().sendGAEvent((0,i._)({},R.KN.SSO)),setTimeout(function(){window.location.href=o},100)},"data-test-id":"tf-sso-button",children:"Continue with single sign-on"})}),(0,a.jsx)(V,{onClick:function(){return n(!1)},"data-test-id":"tf-back-link",children:"Back"})]})},$={IMAGE:"IMAGE"},ee=(0,h.a)("header",{display:"flex",flexDirection:"column",alignItems:"center",paddingBlockStart:h.f.space["150"],paddingBlockEnd:h.f.space["150"],margin:"0 ".concat(h.f.space[125])}),en=(0,h.a)("h2",{color:h.f.colors.primary,fontFamily:h.f.fonts.headline,fontSize:h.f.fontSizes["175"],marginBlock:0,textAlign:"center"}),et=(0,h.a)("div",{padding:h.f.space["125"]}),eo=(0,h.a)("img",{width:h.f.sizes["300"],height:"auto",objectFit:"contain",display:"inline-block",marginBottom:h.f.space["050"]}),ei=(0,h.a)("div",{fontSize:h.f.fontSizes["300"],pointerEvents:"none",marginBottom:h.f.space["050"]}),er=(0,h.a)("ul",{listStyle:"none",padding:0,marginBottom:0,textAlign:"left",display:"inline-block"}),ea=(0,h.a)("li",{color:h.f.colors.accessible,fontFamily:h.f.fonts.meta,fontSize:h.f.fontSizes["087"],marginBottom:h.f.space["050"],display:"flex",alignItems:"center","&:last-child":{marginBottom:0}}),el=(0,h.a)("p",{color:h.f.colors.accessible,fontFamily:h.f.fonts.meta,fontSize:h.f.fontSizes["087"],margin:"".concat(h.f.space["100"]," 0 0"),display:"flex",alignItems:"center"}),es=(0,h.a)("img",{width:h.f.sizes["100"],height:h.f.sizes["100"],marginRight:h.f.space["050"],objectFit:"contain"}),ec=(0,h.a)("span",{whiteSpace:"no-wrap",display:"inline-block"}),ed=(0,h.a)("p",{color:h.f.colors.accessible,fontFamily:h.f.fonts.meta,fontSize:h.f.fontSizes["087"],textAlign:"center",marginTop:h.f.space["100"],marginBottom:h.f.space["150"]}),eu=(0,h.a)("a",{textDecoration:"underline",color:h.f.colors.accessible}),ef=function(e){var n,t,o,d,u=e.config,f=e.regFormProps,g=e.customProps,v=(0,r._)((0,l.useState)(!1),2),m=v[0],x=v[1],w=(0,r._)((0,l.useState)(!1),2),y=w[0],S=w[1],j=u.followable,k="".concat(b.ENDPOINTS.wapoSignin,"?next_url=").concat(encodeURIComponent(null===(o=window)||void 0===o?void 0:null===(t=o.location)||void 0===t?void 0:t.href)),_={marginTop:h.f.space["150"]},C=(n=(0,s._)(function(e){return(0,c.Jh)(this,function(n){switch(n.label){case 0:if(!("Existing Subscriber"===e.registrationResultType||"Existing Non-Subscriber"===e.registrationResultType))return[3,1];return x(!0),[3,4];case 1:if("Existing SSO User"!==e.registrationResultType)return[3,2];return S(!0),[3,4];case 2:if("New User"!==e.registrationResultType)return[3,4];return[4,f.onRegistration()];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),T=(0,p._)((0,i._)({},f),{containerStyle:{minWidth:"auto",maxWidth:"325px",margin:"0 auto"},ctaStyleProps:_,ctaDensity:"compact",showTosOnLoad:!0,onRegistration:C});return(0,a.jsx)(et,{"data-test-id":"tf-regform",children:m?(0,a.jsx)(H,{setShowAlreadyRegistered:x}):y?(0,a.jsx)(Z,{setShowAlreadyRegisteredSSO:S}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ee,{children:[u.icon_type===$.IMAGE?(0,a.jsx)(eo,{src:j.image,alt:"",css:(null==g?void 0:null===(d=g.imageProps)||void 0===d?void 0:d.isCircle)?{borderRadius:"100%"}:void 0}):(0,a.jsx)(ei,{"aria-hidden":!0,children:u.emoji}),(0,a.jsxs)(en,{children:["Follow ",(0,a.jsx)(ec,{children:j.heading})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[j.paragraph&&(0,a.jsx)(el,{children:j.paragraph}),j.bullets&&(0,a.jsx)(er,{children:j.bullets.map(function(e){return(0,a.jsxs)(ea,{children:[(0,a.jsx)(es,{src:e.icon_image,alt:""}),(0,a.jsx)("span",{children:e.text})]},e.text)})})]})]}),(0,a.jsx)(R.GG,(0,i._)({},T)),(0,a.jsxs)(ed,{children:["Already a subscriber?"," ",(0,a.jsx)(eu,{href:k,"data-test-id":"tf-signin-link-regform",children:"Sign in"})]})]})})},ep=function(e){return"authors"===e?"author":"topic"},eg=function(e,n,t){return"authors"===e?n:t},eh=function(e,n){return!!e.find(function(e){return e.pack?e.pack===(null==n?void 0:n.id)&&!0===e.interested:e.id?e.id===(null==n?void 0:n.id)&&!0===e.following:null})},ev=(0,h.a)("header",{display:"flex",flexDirection:"column",alignItems:"center",paddingBlockStart:h.f.space["150"],paddingBlockEnd:h.f.space["125"]}),em=(0,h.a)("h2",{color:h.f.colors.primary,fontFamily:h.f.fonts.headline,fontSize:h.f.fontSizes["175"],marginBlockStart:h.f.space["050"],marginBlockEnd:h.f.space["025"]}),ex=(0,h.a)("p",{color:h.f.colors.accessible,marginBlockStart:0,marginBlockEnd:h.f.space["075"],textAlign:"center",maxWidth:"30ch"}),ew=(0,h.a)("div",{display:"flex",flexDirection:"column",width:"100%"}),ey=(0,h.a)("a",{textDecoration:"none"}),eb=function(e){var n=e.topicFollow,t=e.setTopicFollow;return(0,a.jsx)(w.a,{"data-test-id":"tf-pane-follow-btn",density:"compact",onClick:function(){return t(!n)},children:(0,a.jsx)(C,{isFollowing:n})})},eS=function(e){var n=e.children,t=e.destinationUrl;return t?(0,a.jsx)(ey,{href:t,children:n}):n},ej=(0,h.a)("div",{backgroundColor:h.f.colors.gray500,paddingInline:h.f.space["125"],paddingBottom:h.f.space["100"]}),ek=(0,h.a)("ul",{listStyle:"none",marginBlock:0,paddingInlineStart:0}),e_=(0,h.a)("li",{"&:not(:last-child)":{borderBottom:"1px solid ".concat(h.f.colors.gray300)}}),eC=(0,h.a)("img",{width:h.f.sizes["300"],height:"auto",objectFit:"contain",display:"inline-block"}),eT=(0,h.a)("div",{fontSize:h.f.fontSizes["300"],pointerEvents:"none"}),eE=function(e){var n,t,o,i,r=e.regFormProps,f=e.config,p=e.trackingProps,v=e.onFollowClick,m=e.subscribeToAll,x=e.updateGetroSetroAlerts,w=e.customProps,b=e.followTypeId,j=(0,l.useContext)(u),k=j.isLoggedIn,_=j.following,C=j.newsletters,T=j.notifications,E=j.setProperty,I=f.followable,F=(0,y.useEnrollmentActions)(),P=F.enroll,z=F.unenroll,A=eh(_,f);if(!k)return(0,a.jsx)(ef,{config:f,regFormProps:r,customProps:w});var R=(n=(0,s._)(function(e,n,t){var o,i;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(o={id:e,name:eg(b,f.followable.heading,n),frequency:"",sitewideDescription:"",image:""},!t)return[3,2];return[4,P(o,p)];case 1:return r.sent(),E(d.NEWSLETTER,(0,g._)(C).concat([e])),[3,4];case 2:return[4,z(o,p)];case 3:r.sent(),i=C.filter(function(n){return e!==n}),E(d.NEWSLETTER,i),r.label=4;case 4:return[2]}})}),function(e,t,o){return n.apply(this,arguments)}),N=function(e,n){(0,S.ob)({action:"onpage_news_alerts_toggle_".concat(n?"on":"off"),event:"onpage_news_alerts_toggle_".concat(n?"on":"off"),category:"onpage",label:e}),x(e,n)};return(0,a.jsx)("div",{children:(0,a.jsxs)(ew,{"data-test-id":"tf-pane-open",children:[(0,a.jsxs)(ev,{children:[(0,a.jsx)(eS,{destinationUrl:null==f?void 0:f.destination_url,children:f.icon_type===$.IMAGE?(0,a.jsx)(eC,{src:I.image,alt:"",css:(null==w?void 0:null===(t=w.imageProps)||void 0===t?void 0:t.isCircle)?{borderRadius:"100%"}:void 0}):(0,a.jsx)(eT,{"aria-hidden":!0,children:f.emoji})}),(0,a.jsx)(eS,{destinationUrl:null==f?void 0:f.destination_url,children:(0,a.jsx)(em,{css:(null==f?void 0:f.destination_url)?{"&:hover":{color:h.f.colors.gray80}}:{},children:I.heading})}),(0,a.jsx)(ex,{children:A?I.followed_prompt:I.unfollowed_prompt}),(0,a.jsx)(eb,{topicFollow:A,setTopicFollow:A?v:m})]}),(I.newsletters||I.notifications_site)&&(0,a.jsx)(ej,{children:(0,a.jsxs)(ek,{children:[null===(o=I.newsletters)||void 0===o?void 0:o.map(function(e){return(0,a.jsx)(e_,{children:(0,a.jsx)(B,{id:e.id,title:e.name,description:e.description,checked:C.indexOf(e.id)>-1,onCheckedChange:function(n){return R(e.id,e.name,n)}})},e.id)}),null===(i=I.notifications_site)||void 0===i?void 0:i.map(function(e){return(0,a.jsx)(e_,{children:(0,a.jsx)(O,{id:e.id,title:e.name,description:e.description,checked:T.indexOf(e.id)>-1,"data-is-checked":"".concat(T.indexOf(e.id)),onCheckedChange:function(n){return N(e.id,n)}})},e.id)})]})})]})})},eI="subscribed-alert-categories",eF="content-packs",eP="authors",ez=function(e,n,t,o){var i,r=null===(i=window)||void 0===i?void 0:i.getroSetro;return(0,l.useEffect)(function(){var n;if(null===(n=window)||void 0===n?void 0:n.getroSetro){var o=window.getroSetro.get(e)||[];t((0,g._)(o))}else window.getroSetroQueue=window.getroSetroQueue||[],window.getroSetroQueue.push(e)},[!0,r]),(0,l.useEffect)(function(){var n=function(n){var i=n.detail;(null==i?void 0:i.preference)===e&&((null==i?void 0:i.type)==="verified"&&(null==i?void 0:i.value)===void 0&&void 0!==o&&(window.getroSetro.set(e,o),t(o)),(null==i?void 0:i.type)==="update"&&(null==i?void 0:i.value)&&t(null==i?void 0:i.value),(null==i?void 0:i.type)==="value"&&(null==i?void 0:i.value)&&t(null==i?void 0:i.value),(null==i?void 0:i.type)==="ready"&&(null==i?void 0:i.value)&&t(null==i?void 0:i.value))};return window.addEventListener("GetroSetro",n),function(){window.removeEventListener("GetroSetro",n)}},[!0]),[function(o,i){try{var r=(window.getroSetro.get(e)||[]).filter(function(n){return e===eI?n!==o:e===eF?n.pack!==o.pack:e===eP&&n.id!==o.id});if(i){var a=(0,g._)(r).concat([o]);window.getroSetro.set(e,a,function(){return window.getroSetro.get(e)}),t(a)}else window.getroSetro.set(e,r,function(){return window.getroSetro.get(e)}),t(r)}catch(t){n("getroSetro failure on ".concat(e),t)}}]},eA=t(9024),eB={Accept:"application/json","Content-Type":"application/json"},eO=(o=(0,s._)(function(e,n,t){return(0,c.Jh)(this,function(o){switch(o.label){case 0:return[4,fetch("".concat("prod"===(t||(0,eA.d)())?"https://subscribe.washingtonpost.com":"https://subs-stage.washingtonpost.com","/preferenceapi/v1/current/preferences/").concat(n,"/set"),{body:JSON.stringify({value:e}),method:"POST",credentials:"include",headers:eB})];case 1:return[2,o.sent().json()]}})}),function(e,n,t){return o.apply(this,arguments)}),eR=(0,h.a)("div",{display:"flex",justifyContent:"space-between",alignItems:"center"}),eN=(0,h.a)("div",{display:"flex",alignItems:"center"}),eD=(0,h.a)("img",{width:h.f.sizes["125"],height:"auto",objectFit:"contain",display:"inline-block"}),eL=(0,h.a)("div",{fontSize:h.f.fontSizes["125"],pointerEvents:"none"}),eG=(0,h.a)("p",{color:h.f.colors.primary,fontSize:h.f.fontSizes["100"],paddingLeft:h.f.space["050"],marginBlock:"0"}),eU=(0,h.a)(v.a.Content,{height:"auto",padding:0,"& > div":{height:"100%",padding:0},variants:{density:{compact:{padding:0}}}}),eJ=(0,h.a)(m.a.Content,{"& > div":{height:"100%",padding:0},variants:{density:{compact:{padding:0}}}}),eW=(0,h.a)(v.a.Close,{position:"absolute",border:"none"}),eM=function(e){var n,t,o,f,j,k,_,T,E,I,F,P,z,A,B,O,R,N,D,L,G,U=e.regFormProps,J=e.trackingProps,W=e.topicConfig,M=e.customProps,H=e.environment,Q=e.followTypeId,q=(0,l.useContext)(u),K=q.following,V=q.isLoggedIn,X=q.setProperty,Y=q.logger,Z=q.newsletters,ee=(0,x.c)()===x.a.small,en=(0,y.useEnrollmentsContext)(),et=en.enrollments,eo=en.isLoading,ei=(0,y.useEnrollmentActions)().enroll,er=(null==W?void 0:null===(T=W.followable)||void 0===T?void 0:null===(_=T.newsletters)||void 0===_?void 0:_.length)>0,ea=er&&(null==W?void 0:null===(F=W.followable)||void 0===F?void 0:null===(I=F.newsletters)||void 0===I?void 0:null===(E=I[0])||void 0===E?void 0:E.id),el=(null==W?void 0:null===(z=W.followable)||void 0===z?void 0:null===(P=z.notifications_site)||void 0===P?void 0:P.length)>0,es=el&&(null==W?void 0:null===(O=W.followable)||void 0===O?void 0:null===(B=O.notifications_site)||void 0===B?void 0:null===(A=B[0])||void 0===A?void 0:A.id),ec=eh(K,W);(0,l.useEffect)(function(){if(!eo&&V&&er){var e=Object.keys(et).filter(function(e){return!0===et[e].enrolled}).map(function(e){return e});X(d.NEWSLETTER,e)}},[eo,er,V,et]);var ed=(n=(0,s._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:var t;if(!er||Z.includes(ea))return[2];return t=(0,s._)(function(e,n){var t;return(0,c.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,ei({id:e,name:eg(Q,W.followable.heading,n),frequency:"",sitewideDescription:"",image:""},J)];case 1:return o.sent(),X(d.NEWSLETTER,(0,g._)(Z).concat([e])),[3,3];case 2:return t=o.sent(),Y("error enrolling user on register, id: ".concat(e),t),[3,3];case 3:return[2]}})}),e=function(e,n){return t.apply(this,arguments)},[4,Promise.all(W.followable.newsletters.map(function(n){return e(n.id,n.name)}))];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)});(0,l.useEffect)(function(){X(d.AUTH,(0,b.isLoggedIn)())},[X]);var eu=(0,r._)(ez(eI,Y,function(e){return X(d.NOTIFICATION,(0,g._)(e))}),1)[0],ef=(0,r._)(ez(Q,Y,function(e){return X(d.TOPIC,e)}),1)[0],ev=(t=(0,s._)(function(e,n){var t;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(Q===eF&&(t={pack:W.id,interested:e,referenceId:null==W?void 0:W.referenceId}),Q===eP&&(t={id:W.id,following:e}),!n)return[3,2];return[4,eO([t],eF,H)];case 1:return o.sent(),X(d.TOPIC,[t]),[3,3];case 2:ef(t,e),o.label=3;case 3:return[2]}})}),function(e,n){return t.apply(this,arguments)}),em=(o=(0,s._)(function(e){return(0,c.Jh)(this,function(n){switch(n.label){case 0:if(!el)return[2];if((0,S.ob)({action:"onpage_news_alerts_toggle_on",category:"onpage",label:es}),!e)return[3,2];return[4,eO([es],eI,H)];case 1:return n.sent(),X(d.NOTIFICATION,[es]),[3,3];case 2:eu(es,!0),n.label=3;case 3:return[2]}})}),function(e){return o.apply(this,arguments)}),ex=(f=(0,s._)(function(){var e,n=arguments;return(0,c.Jh)(this,function(t){switch(t.label){case 0:e=n.length>0&&void 0!==n[0]&&n[0],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Promise.all([ev(!0,e),ed(),em(e)])];case 2:return t.sent(),[3,4];case 3:return Y("error in onRegistration callback",t.sent()),[3,4];case 4:return[2]}})}),function(){return f.apply(this,arguments)}),ew=(j=(0,s._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return X(d.AUTH,!0),[4,ex(!0)];case 1:return e.sent(),[2]}})}),function(){return j.apply(this,arguments)}),ey=(k=(0,s._)(function(e){var n;return(0,c.Jh)(this,function(t){switch(t.label){case 0:if((0,S.ob)({action:"onpage_click",category:"onpage",label:"inline_".concat(ep(Q),"_follow; ").concat(null==W?void 0:null===(n=W.followable)||void 0===n?void 0:n.heading)}),!(!ec&&e&&V))return[3,2];return[4,ex(!1)];case 1:t.sent(),t.label=2;case 2:return[2]}})}),function(e){return k.apply(this,arguments)});(0,l.useEffect)(function(){var e;(0,S.ob)({action:"onboarding_seen",category:"onpage",label:"".concat(ep(Q),"_follow; ").concat(null==W?void 0:null===(e=W.followable)||void 0===e?void 0:e.heading)})},[]);var eb={config:W,regFormProps:(0,p._)((0,i._)({},U),{onRegistration:ew}),trackingProps:J,customProps:M,onFollowClick:ev,subscribeToAll:ex,updateGetroSetroAlerts:eu,followTypeId:Q},eS={width:h.f.sizes["087"],height:h.f.sizes["087"]},ej={variant:"secondary",icon:"center",density:"default",css:{padding:"8px",border:"1px solid transparent","&hover":{backgroundColor:h.f.colors.alpha500}}},ek=new URLSearchParams(null==W?void 0:null===(R=W.followable)||void 0===R?void 0:R.image),e_=ek.get("w"),eC=ek.get("h");return(0,a.jsxs)(eR,{"data-test-id":"tf-wrapper",children:[!(null==M?void 0:M.asButton)&&(0,a.jsxs)(eN,{children:[(null==W?void 0:W.icon_type)===$.IMAGE?(0,a.jsx)(eD,{src:null==W?void 0:null===(N=W.followable)||void 0===N?void 0:N.image,width:e_,height:eC||e_,alt:"",css:(null==M?void 0:null===(D=M.imageProps)||void 0===D?void 0:D.isCircle)?{borderRadius:"100%",width:h.f.sizes["200"]}:void 0}):(0,a.jsx)(eL,{"aria-hidden":!0,children:null==W?void 0:W.emoji}),(0,a.jsxs)(eG,{children:[(0,a.jsx)("strong",{children:ec?"Following":"Follow"})," ",ec?null==W?void 0:null===(L=W.followable)||void 0===L?void 0:L.followed_affordance_title:null==W?void 0:null===(G=W.followable)||void 0===G?void 0:G.unfollowed_affordance_title]})]}),ee?(0,a.jsxs)(v.a.Root,{id:"bottom-id",onOpenChange:ey,children:[(0,a.jsx)(v.a.Trigger,(0,p._)((0,i._)({},(null==M?void 0:M.btnProps)||ej),{"data-test-id":"tf-open-drawer","data-active":ec,children:(0,a.jsx)(C,{iconCSS:eS,CustomComponent:(null==M?void 0:M.customButton)||void 0,isFollowing:ec})})),(0,a.jsxs)(eU,{position:"bottom",height:"auto",density:"compact","data-test-id":"tf-drawer",children:[(0,a.jsx)(eW,{css:{position:"absolute",borderColor:"transparent"},"data-test-id":"tf-drawer-close"}),(0,a.jsx)(eE,(0,i._)({},eb))]}),(0,a.jsx)(v.a.Scrim,{})]}):(0,a.jsxs)(m.a.Root,{onOpenChange:ey,children:[(0,a.jsx)(m.a.Trigger,{asChild:!0,children:(0,a.jsx)(w.a,(0,p._)((0,i._)({},(null==M?void 0:M.btnProps)||ej),{"data-test-id":"tf-open-popover","data-active":ec,children:(0,a.jsx)(C,{iconCSS:eS,CustomComponent:(null==M?void 0:M.customButton)||void 0,isFollowing:ec})}))}),(0,a.jsx)(m.a.Portal,{children:(0,a.jsxs)(eJ,{width:375,density:"compact","data-test-id":"tf-popover",children:[(0,a.jsx)(m.a.Close,{"data-test-id":"tf-drawer-close",css:{borderColor:"transparent"}}),(0,a.jsx)(eE,(0,i._)({},eb))]})})]})]})},eH=t(53307),eQ=function(e){var n=e.regFormProps,t=e.trackingProps,o=e.logger,l=e.topicConfig,s=e.customProps,c=e.environment,d=e.followTypeId;return(0,r._)((0,eH.B)(),1)[0]?null:(0,a.jsx)(f,{logger:o,children:(0,a.jsx)(eM,(0,i._)({},{regFormProps:n,trackingProps:t,topicConfig:l,customProps:s,environment:c,followTypeId:void 0===d?"content-packs":d}))})}},53307:function(e,n,t){t.d(n,{B:function(){return r}});var o=t(75271),i=t(51484),r=function(){var e=(0,o.useRef)(!1);return(0,o.useEffect)(function(){var n,t;e.current=(n=(0,i.getCookie)("wp_wv"),t=(0,i.getQueryParams)().no_nav,!!(null==n?void 0:n.match(/1.*/))||t)},[]),[e.current]}}}]);