"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6463],{6450:function(e,n,t){t.d(n,{Z:function(){return R}});var r,a,o,s=t(5093),i=t(52676),c=t(75271),l=t(74471),u=t(95750),d=t(88103),f=t(84750),m=t(99938),h=t(5047),p=t(32814),v=t(87978),g={id:"",aiSummaryEnabled:!1,aiPrompt:{enabled:!1,content:"",display_avatar:!1},credits:[]},x=function(e){var n,t,r,a=(null===(n=e.comments)||void 0===n?void 0:n.ai_prompt)||{},o=(null===(t=e.comments)||void 0===t?void 0:t.ai_summary)||{},s=void 0===(null==o?void 0:o.enabled)||(null==o?void 0:o.enabled);return{id:e._id,aiSummaryEnabled:s,aiPrompt:{enabled:null==a?void 0:a.enabled,content:null==a?void 0:a.content,display_avatar:null==a?void 0:a.display_avatar},credits:(null==e?void 0:null===(r=e.credits)||void 0===r?void 0:r.by)||[]}},b=(r=(0,f._)(function(){var e,n,t,r;return(0,m.Jh)(this,function(a){switch(a.label){case 0:e=new URLSearchParams,t=(n=new URLSearchParams(window.location.search).get("storyUrl"))?new URL(n).pathname:"",e.append("query",JSON.stringify({canonical_url:t})),e.append("_website","washpost"),(r=new URL("".concat(window.location.origin,"/prism/api/comments-standalone-page-view"))).search=e.toString(),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch(r.href,{method:"GET",cache:"no-cache",credentials:"include",headers:{"User-Agent":"WaPoAPI_UA/site-eng-comments-app",Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})];case 2:return[4,a.sent().json()];case 3:return[2,a.sent()];case 4:return console.log("error fetching standalone comment content",a.sent()),[3,5];case 5:return[2]}})}),function(){return r.apply(this,arguments)}),y=function(e){var n,t,r;return{id:null==e?void 0:e.arcId,aiSummaryEnabled:null==e?void 0:e.aiSummaryEnabled,aiPrompt:{enabled:null==e?void 0:null===(n=e.aiPrompt)||void 0===n?void 0:n.enabled,content:null==e?void 0:null===(t=e.aiPrompt)||void 0===t?void 0:t.content,display_avatar:null==e?void 0:null===(r=e.aiPrompt)||void 0===r?void 0:r.display_avatar},credits:null==e?void 0:e.credits}},w=(a=(0,f._)(function(e){return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(e)return[2,x(e)];return[4,b()];case 1:return[2,y.apply(void 0,[n.sent()])]}})}),function(e){return a.apply(this,arguments)}),j=function(e,n){if(e.length<=n)return e;var t=e.substr(0,e.lastIndexOf(" ",n));return"".concat(t,"...")},_=(o=(0,f._)(function(e){return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("https://perso.washingtonpost.com/comments-summarization-api/comments-summary",{method:"POST",body:JSON.stringify({id:e}),headers:{"Content-Type":"application/json"}})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()];case 3:return console.log(n.sent()),[3,4];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),N=function(e,n){var t=(0,s._)((0,c.useState)(""),2),r=t[0],a=t[1],o=(0,s._)((0,c.useState)(!1),2),i=o[0],l=o[1],u=(0,s._)((0,c.useState)(!1),2),d=u[0],h=u[1];return(0,c.useEffect)(function(){if(!i){var t;(t=(0,f._)(function(){var t;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(!e)return[2];if(!n)return h(!0),l(!0),[2];return[4,_(e)];case 1:if(!(t=r.sent()))return[2];return t.answer&&"Sorry, we couldn't generate a summary of the comments. Check back later."!==t.answer?a(t.answer):h(!0),l(!0),[2]}})}),function(){return t.apply(this,arguments)})()}},[e]),{content:r,loaded:i,noAnswer:d}},S=t(71576),k=t(52918),C=t(11660),T=(0,l.a)("h4",{fontSize:l.f.sizes["100"],fontWeight:l.f.fontWeights.bold,lineHeight:l.f.lineHeights["125"]}),A=(0,l.a)("span",{overflow:"hidden",color:l.f.colors["onBackground-subtle"],fontFamily:l.f.fonts.meta,fontSize:l.f.sizes["075"],fontWeight:l.f.fontWeights.light,lineHeight:l.f.lineHeights["125"]}),E=(0,l.a)("span",{color:l.f.colors["onBackground-subtle"],cursor:"pointer",marginBottom:l.f.space["100"],marginLeft:l.f.space["050"],textDecoration:"underline"}),L=function(e){var n=e.removeComponentSpacing,t=e.className,r=(0,s._)((0,c.useState)(!1),2),a=r[0];r[1];var o=(0,s._)((0,c.useState)(g),2),u=o[0],d=o[1],x=(0,p.bp)().globalContent,b=new Date((0,S.mm)(x))>=new Date("2020-01-01T00:00:00.000Z"),y=N(null==u?void 0:u.id,b),_=(0,c.useMemo)(function(){var e,n;return a||!y.content?null!==(n=null==y?void 0:y.content)&&void 0!==n?n:null==u?void 0:null===(e=u.aiPrompt)||void 0===e?void 0:e.content:j(y.content,280)},[a,y]);return(0,c.useEffect)(function(){var e;(e=(0,f._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,w(x)];case 1:return d(e.sent()),[2]}})}),function(){return e.apply(this,arguments)})()},[]),(0,i.jsxs)(i.Fragment,{children:[y.loaded&&!y.noAnswer&&(0,i.jsx)(h.a,{css:{padding:l.f.space["100"],border:"1px solid var(--wpds-colors-outline)",borderRadius:l.f.radii["050"]},className:n?"":void 0===t?"mb-lg-mod":t,children:(0,i.jsxs)(h.a,{css:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:l.f.space["075"],padding:l.f.space["025"]},children:[(0,i.jsxs)(h.a,{css:{display:"flex",flexDirection:"column",justifyContent:"flex-start",gap:l.f.space["025"],alignItems:"flex-start"},children:[(0,i.jsx)(T,{children:"What readers are saying"}),(0,i.jsxs)("div",{children:[_," ",(0,i.jsx)(E,{onClick:function(){document.activeElement.blur(),(0,k.L)(!0),(0,C.Nf)("commenting-load","ai-show-more","commenting-click-ss")},children:"Show more"})]}),(0,i.jsx)(A,{children:"This summary is AI-generated. AI can make mistakes and this summary is not a replacement for reading the comments."})]}),(0,i.jsx)(v.Z,{staffAvatars:!0})]})}),y.loaded&&y.noAnswer&&(0,i.jsx)(h.a,{css:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:l.f.space["150"]},children:(0,i.jsx)(v.Z,{className:n?"":null})})]})},P=(0,l.a)("div",{display:"flex"});(0,l.a)("div",{marginLeft:l.f.space["100"],variants:{noShareBtn:{true:{marginLeft:0}}}});var R=function(e){var n=e.className,t=e.css,r=e.hasComments,a=e.removeComponentSpacing,o=(0,d.Y)(),l=(0,s._)(c.useState(!1),2),f=(l[0],l[1]);return(c.useEffect(function(){f(!0)},[]),o&&!r)?null:(0,i.jsx)(u.Z,{children:(0,i.jsx)(P,{className:"".concat(void 0===n?"":n," article-bottom-action-bar"),css:void 0===t?{}:t,children:(0,i.jsx)(L,{removeComponentSpacing:void 0!==a&&a})})})}},87978:function(e,n,t){t.d(n,{X:function(){return E},Z:function(){return L}});var r=t(52676),a=t(93900),o=t(84750),s=t(94213),i=t(32586),c=t(25659),l=t(5093),u=t(82271),d=t(99938),f=t(75271),m=t(40507),h=t.n(m),p=t(89497),v=t(70252),g=t(74471),x=t(61185),b=t(68337),y=(0,g.a)("img",{width:g.f.sizes["125"],height:g.f.sizes["125"],borderRadius:g.f.radii["125"],marginLeft:"calc(-1 * ".concat(g.f.sizes["025"],")"),variants:{firstChild:{true:{marginLeft:"0px"}}}}),w=(0,g.a)("div",{marginRight:g.f.space["050"]}),j=function(e){var n=e.env,t=void 0===n?"sandbox":n,a=(e.className,e.staffAvatars),m=void 0===a||a,h=e.buttonText,j=e.noSummarizeButtonText,_=(0,c._)(e,["env","className","staffAvatars","buttonText","noSummarizeButtonText"]),N=(0,l._)(f.useState(null),2),S=N[0],k=N[1],C=(0,l._)(f.useState(null),2),T=C[0],A=C[1],E=(0,l._)(f.useState([]),2),L=E[0],P=E[1];f.useEffect(function(){var e=document.querySelector("link[rel=canonical]");if(e){var n=new URL("".concat(v.Wd[t],"/api/story/count.js"));n.searchParams.append("callback","CoralCount.setCount"),n.searchParams.append("notext","true"),n.searchParams.append("ref","boop"),n.searchParams.append("url",e.href),n.searchParams.append("staffAuthors",m?"true":"false"),k(n.href)}},[]);var R=(0,p.ZP)(S,(0,o._)(function(){var e,n,t,r=arguments;return(0,d.Jh)(this,function(a){switch(a.label){case 0:for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[4,fetch.apply(void 0,(0,u._)(n))];case 1:return[4,a.sent().text()];case 2:return[2,a.sent()]}})})),I=R.data,O=R.error,J=R.isLoading;return f.useEffect(function(){if(I&&!O&&!J)try{var e=I.substring(I.indexOf("(")+1,I.lastIndexOf(")")),n=JSON.parse(e),t=n.count,r=n.staffAuthors.slice(0,3);P(r),A(t)}catch(e){console.error(e)}},[J]),(0,r.jsxs)(r.Fragment,{children:[m&&0===L.length||!m&&(0,r.jsx)(x.a,{label:"",size:"100",css:{marginRight:g.f.space["050"]},children:(0,r.jsx)(b.a,{})}),m&&L.length>0&&(0,r.jsx)(w,{className:"coral-avatars-stack",children:L.map(function(e,n){return(0,r.jsx)(y,{src:e.avatar,alt:e.username,firstChild:0===n},e.id)})}),(0,r.jsxs)("span",(0,i._)((0,s._)({},_),{children:[m&&(0,r.jsx)("b",{children:"".concat(void 0===h?"Comments":h," ")}),T,!m&&(0,r.jsx)("b",{children:" ".concat(void 0===j?"Comments":j)})]}))]})};j.propTypes={className:h().string,staffAvatars:h().bool,env:h().oneOf(["dev","sandbox","prod"]),noText:h().bool};var _=t(52918),N=t(44962),S=t(98693),k=t(33546),C=t(83505),T=t(11660),A=function(e){var n=e.onClick,t=e.env,o=e.className,s=e.isLive,i=e.buttonText,c=void 0===i?"All comments":i,l=e.countAfterText,u=void 0!==l&&l,d=e.staffAvatars,f=void 0!==d&&d,m=e.simpleCounterComponent,h=void 0!==m&&m,p=h?a.X:j;return(0,r.jsx)("div",{className:void 0!==s&&s?"":void 0===o?"":o,"data-qa":"comments-btn-div",children:(0,r.jsxs)(N.a,{"aria-label":"Scroll to the comments section","data-qa":"comments-btn",className:"comments hide-for-print",variant:"primary",icon:"left",density:"default",onClick:function(e){document.activeElement.blur(),(0,_.L)(),n&&"function"==typeof n&&n(e),(0,T.Nf)("commenting-load","bottom-article","commenting-click-ss")},css:h?{height:"$250"}:{height:"$250",gap:"0",fontWeight:f?g.f.fontWeights.regular:g.f.fontWeights.bold},children:[h&&(0,r.jsx)(x.a,{label:"",size:"100",children:(0,r.jsx)(b.a,{})}),h&&!u&&(0,r.jsx)(r.Fragment,{children:c}),(0,r.jsx)(p,{env:void 0===t?"sandbox":t,staffAvatars:!h&&f,buttonText:c}),h&&u&&(0,r.jsx)(r.Fragment,{children:c})]})})},E=function(e){var n=e.onClick,t=e.className,a=e.buttonText,o=e.countAfterText,s=e.staffAvatars,i=e.simpleCounterComponent,c=(0,k.$Y)(),l=c.articleProperties.isLiveArticle;if(!c.hasComments)return null;var u=(0,r.jsx)(A,{buttonText:a,className:t,countAfterText:o,env:S.QG,isLive:l,onClick:n,staffAvatars:void 0!==s&&s,simpleCounterComponent:void 0!==i&&i});return(0,r.jsx)(C.Z,{children:u})},L=E},20133:function(e,n,t){t.d(n,{H:function(){return L},X:function(){return E.X}});var r=t(52676),a=t(75271),o=t(94213),s=t(32586),i=t(25659),c=t(5093),l=function(e){var n=function(e){try{return t.find(function(n){return n.name===e})}catch(e){console.error(e)}},t=[],r=e;return e.includes("?")&&(r=e.slice(1)),r.split("&").forEach(function(e){var n=(0,c._)(e.split("="),2),r=n[0],a=n[1];t.push({name:void 0!==r&&r,val:void 0!==a&&a})}),{get:function(e){var t=n(e);return!!t&&t.val},has:function(e){var t=n(e);return!!t&&e===t.name}}},u=t(40507),d=t.n(u),f=t(84750),m=t(99938),h=t(48479),p=t(92165),v=t(31385),g=t.n(v),x=t(19704),b=t(51484),y={CanComment:0,NeedsDisplayName:1,NeedsToVerifyEmail:2,NeedsToVerifyEmailAndDisplayName:3,NeedsToSignIn:5,NeedsToSubscribe:6,IsRestrictedSub:7},w=function(e){var n=e.authenticated,t=e.subscribed,r=e.wapoGroups,a=e.restrictedSub;if(!n)return y.NeedsToSignIn;if(!t&&a)return y.IsRestrictedSub;if(!t)return y.NeedsToSubscribe;var o=r.includes("commenting"),s=r.includes("email_verified"),i=r.includes("commenting_verified");return i||!s||o?i||!o||s?i?y.CanComment:y.NeedsToVerifyEmailAndDisplayName:y.NeedsToVerifyEmail:y.NeedsDisplayName},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.debug,t=void 0!==n&&n,r=(0,a.useRef)(0),o=(0,a.useRef)(0),s=(0,c._)((0,a.useState)(null),2),i=s[0],l=s[1],u=function(){r.current=r.current+1,t&&console.info("registerAuthConsumer call #".concat(r.current,":"));var e=!!(0,x.$8)(),n=!!(0,x.Rj)(),a=!!(0,b.isRestrictedSubscriber)(),o=(0,h.e)("wapo_groups")||"",s=w({authenticated:e,subscribed:n,wapoGroups:o,restrictedSub:a});t&&console.info({authenticated:e,subscribed:n,wapoGroups:o,restrictedSub:a},"=>",s),l(s)};return(0,a.useEffect)(function(){o.current=o.current+1,t&&console.info("useCommenterStatus > useEffect call #".concat(o.current)),(0,b.safeRegisterAuthConsumer)(u)},[l]),i},_=t(70252),N=function(e){var n=e.env,t=void 0===n?"sandbox":n,i=e.customStreamConfig,l=e.onEmbedLoaded,u=(0,a.useRef)(null),d=(0,c._)((0,a.useState)("loading"),2),v=d[0],x=d[1],b=(0,c._)((0,p._)("wapo_identity"),1)[0],w=j({debug:!0}),N=(0,a.useCallback)((0,f._)(function(){var e,n;return(0,m.Jh)(this,function(r){return"string"!=typeof(e=null==b?void 0:b.ctoken)?(console.info("No JWT stored, refreshing..."),[2,(0,_.wv)(t)]):(null==b?void 0:b.wapo_login_id)!==(0,h.e)("wapo_login_id")?(console.info("Stored JWT is for another wapo_login_id, refreshing..."),[2,(0,_.wv)(t)]):"number"!=typeof(n=null==b?void 0:b.ctokenexp)?(console.info("Stored JWT's expiration is unknown, refreshing..."),[2,(0,_.wv)(t)]):1e3*n<=new Date().getTime()?(console.info("Stored JWT has expired, refreshing..."),[2,(0,_.wv)(t)]):(console.info("Stored JWT is valid!"),[2,{accessToken:e,expiresAt:n}])})}),[!0,t,b]),S=(0,a.useCallback)(function(){console.error("error loading coral embed script"),x("error")},[x]),k=(0,a.useCallback)(function(){u.current=window.Coral.createStreamEmbed((0,_._g)(t,(0,s._)((0,o._)({},i),{env:t,refreshAccessToken:function(e){console.info("JWT expired after login, refreshing..."),(0,_.wv)(t).then(function(n){var t=n.accessToken;console.info("Sending refreshed JWT to Talk..."),e(t)}).catch(function(e){console.error("Refreshing JWT failed:"),console.error(e.stack||e)})}}))),window.__WAPO_COMMENTS_EMBED__=u.current,x("loaded"),l&&"function"==typeof l&&l()},[!0,t,x]);return(0,a.useEffect)(function(){"loaded"===v&&w===y.CanComment&&N().then(function(e){var n=e.accessToken;u.current&&(console.info("Logging into Talk with accessToken..."),u.current.login(n))}).catch(function(e){console.error("Could not get a valid accessToken for this commenter:"),console.error(e.stack||e)})},[w,!0,v,N]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g(),{id:"comments-stream",src:(0,_.nl)(t),onError:S,onLoad:k}),(0,r.jsx)("div",{className:"wpds-light","data-qa":"coral-comments",id:"comments"})]})};N.displayName="StreamEmbed",N.propTypes={env:d().oneOf(["dev","sandbox","prod"])};var S=t(52918),k=a.forwardRef(function(e,n){var t=e.className,a=e.env,c=e.customStreamConfig,u=(0,i._)(e,["className","env","customStreamConfig"]);return(0,r.jsx)("div",(0,s._)((0,o._)({ref:n,id:"comments-wrapper","data-qa":"comments-embed",className:void 0===t?"flex flex-column w-100 mt-md-l mb-lg mt-md":t},u),{children:(0,r.jsx)(N,{env:void 0===a?"sandbox":a,customStreamConfig:c,onEmbedLoaded:function(){l(window.location.search).has("commentID")&&(0,S.L)()}})}))});k.displayName="Comments",k.propTypes={className:d().string,customStreamConfig:d().any,env:d().oneOf(["dev","sandbox","prod"])};var C=t(98693),T=t(90605),A=t(83505),E=t(87978),L=function(e){var n=e.className;return(0,T.MD)()?(0,r.jsx)(A.Z,{children:(0,r.jsx)("div",{"data-testid":"coral-comments",children:(0,r.jsx)(k,{env:C.QG,customStreamConfig:{autoRender:!1},className:"".concat(n," hide-for-print")})})}):null}},95030:function(e,n,t){t.d(n,{d:function(){return m}});var r=t(52676);t(75271);var a=t(40507),o=t.n(a),s=t(65704),i=t(94780),c=t(74471),l=t(2846),u=t(41762),d=t(70354),f=(0,c.a)("div",{minHeight:595,"@notSm":{minHeight:755},"@media print":{display:"none"}}),m=function(e){var n=e.children,t=e.qaLabel,a=e.classes,o=e.eager,s=e.css;return(0,r.jsx)(f,{css:s,className:"".concat((0,i.k)(a)),"data-qa":t,children:(0,r.jsx)(l.Z,{offsetTop:1e3,offsetBottom:1e3,eager:o,children:n})})};m.propTypes={children:o().node,qaLabel:o().string,classes:o().string,eager:o().bool,css:o().object};var h=function(e){var n=e.articleList,t=e.clickHandler,a=e.customTitle,o=e.fyRequestId,i=e.prefix,c=e.showLabel,l=e.variant,f=(0,u.JZ)("injectArticleInRecommendationsList"),m=(0,u.RB)("injectArticleInRecommendationsList");return(0,r.jsx)(s.y,{articleList:void 0===n?[]:n,articleInjection:{injectArticleFlagProperties:m,injectArticleInRecommendations:f},clickHandler:t,customProps:{li:{},ul:{},wrapperDiv:{}},env:(0,d.Z)(),fyRequestId:void 0===o?"":o,lazyLoadImages:!1,packageLabelTitle:a,prefix:void 0===i?"":i,showLabel:void 0===c||c,variant:void 0===l?"postRecommendsDefault":l})};h.propTypes={articleList:o().arrayOf(o().shape({canonical_url:o().string,headlines:o().shape({basic:o().string}),description:o().shape({basic:o().string}),display_date:o().string,promo_items:o().shape({basic:o().shape({type:o().string,url:o().string})})})),clickHandler:o().func,customTitle:o().string,hasUpNext:o().bool,showLabel:o().bool,variant:o().oneOf(["custom","mostReadSection","mostReadSite","moreForYouAndPost","moreFromAuthor","postRecommendsDefault"]),prefix:o().string,fyRequestId:o().string},n.Z=h},27065:function(e,n,t){t.d(n,{Z:function(){return D}});var r,a=t(52676),o=t(40507),s=t.n(o),i=t(75271),c=t(83505),l=t(2846),u=t(33546),d=t(74471),f=t(93115),m=t(45939),h=t(5093),p=function(){var e=(0,h._)((0,i.useState)(!1),2),n=e[0],t=e[1];return(0,i.useEffect)(function(){t(!0)},[]),n},v=t(95030),g=t(9505),x=t(23137),b=(0,d.a)(x.ZP,{height:"850px",viewBox:"0 0 480 40",width:"100%",".headline":{x:0,rx:3,ry:3,width:"60%",height:25},".image":{x:"67%",rx:5,ry:5,height:140,width:210},".timestamp":{x:0,rx:3,ry:3,width:"35%",height:16},".divider":{width:"100%",height:1},"@sm":{height:"850px",viewBox:"0 0 480 56",width:"100%",".headline":{height:15},".image":{height:90,width:90},".timestamp":{height:10}}}),y=function(){var e=(0,g.Me)();return(0,a.jsxs)(b,{title:"Placeholder while More For You loads",backgroundColor:String(d.f.colors.faint),foregroundColor:String(d.f.colors.gray500),uniqueKey:"sc-for-you-skeleton-".concat(e),"data-testid":"sc-for-you-skeleton",children:[(0,a.jsx)("rect",{className:"headline",y:"0"}),(0,a.jsx)("rect",{className:"headline",y:"30"}),(0,a.jsx)("rect",{className:"headline",y:"60"}),(0,a.jsx)("rect",{className:"timestamp",y:"90"}),(0,a.jsx)("rect",{className:"image",y:"0"}),(0,a.jsx)("rect",{className:"divider",y:"160"}),(0,a.jsx)("rect",{className:"headline",y:"180"}),(0,a.jsx)("rect",{className:"headline",y:"210"}),(0,a.jsx)("rect",{className:"headline",y:"240"}),(0,a.jsx)("rect",{className:"timestamp",y:"270"}),(0,a.jsx)("rect",{className:"image",y:"180"}),(0,a.jsx)("rect",{className:"divider",y:"340"}),(0,a.jsx)("rect",{className:"headline",y:"360"}),(0,a.jsx)("rect",{className:"headline",y:"390"}),(0,a.jsx)("rect",{className:"headline",y:"420"}),(0,a.jsx)("rect",{className:"timestamp",y:"450"}),(0,a.jsx)("rect",{className:"image",y:"360"}),(0,a.jsx)("rect",{className:"divider",y:"520"}),(0,a.jsx)("rect",{className:"headline",y:"540"}),(0,a.jsx)("rect",{className:"headline",y:"570"}),(0,a.jsx)("rect",{className:"headline",y:"600"}),(0,a.jsx)("rect",{className:"timestamp",y:"630"}),(0,a.jsx)("rect",{className:"image",y:"540"}),(0,a.jsx)("rect",{className:"divider",y:"700"}),(0,a.jsx)("rect",{className:"headline",y:"720"}),(0,a.jsx)("rect",{className:"headline",y:"750"}),(0,a.jsx)("rect",{className:"headline",y:"780"}),(0,a.jsx)("rect",{className:"timestamp",y:"810"}),(0,a.jsx)("rect",{className:"image",y:"720"})]})},w=t(84750),j=t(99938),_=t(39324),N=t(32814),S=t(3653),k=t(48217),C=t(51484),T=t(70354),A=function(){switch((0,T.Z)()){case"dev":case"sandbox":return"https://foryou-flex-staging.washingtonpost.com";default:return"https://foryou-flex.washingtonpost.com"}},E="/recommendations/v1/articles/",L="".concat(E,"metadata"),P=function(e){var n=e.origin,t=void 0===n?A():n,r=e.resource;return"".concat(t).concat(void 0===r?E:r)},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.entries(e).find(function(e){var n=(0,h._)(e,2);return!0===(n[0],n[1])});return n?n[0]:null};(0,w._)(function(e){var n,t,r,a,o;return(0,j.Jh)(this,function(s){switch(s.label){case 0:return n=e.articleUrl,r=void 0===(t=e.origin)?A():t,(a=new URL("".concat(r).concat(L))).searchParams.append("url",n),[4,fetch(a)];case 1:if(!(o=s.sent()).ok)throw Error("An error occured while sending data. Check 'metadata' under the Network tab.");return[4,o.json()];case 2:return[2,s.sent()]}})});var I=function(){var e=new Headers;return e.append("Accept","application/json"),e.append("Content-Type","application/json"),e},O=(r=(0,w._)(function(e){var n,t,r,a,o,s,i,c,l;return(0,j.Jh)(this,function(u){switch(u.label){case 0:return t=void 0===(n=e.readlist)?[]:n,a=void 0===(r=e.breakpoint)?"":r,s=void 0===(o=e.canonical_url)?null:o,i=P({}),c=I(),[4,fetch(i,{body:JSON.stringify({contentType:"story",exclusions:[],limit:5,readlist:t,interface:"site",surface:"recirc",surface_variant:"beyond"===a?"max":a,current_url:s,wapo_login_id:(0,C.getLoginDetails)().wapoLoginID||null,j_ucid:(0,k.sr)()||null}),credentials:"include",method:"POST",headers:c})];case 1:if(!(l=u.sent()).ok)throw Error("An error occured while sending data. Check 'articles' under the Network tab.");return[4,l.json()];case 2:return[2,u.sent()]}})}),function(e){return r.apply(this,arguments)}),J=function(e){var n=e.breakpoint,t=void 0===n?"":n,r=(0,S.n)(),a=(0,N.bp)().globalContent,o=(null==a?void 0:a.canonical_url)||null;return(0,_.Z)(t?{readlist:r,breakpoint:t,canonical_url:o}:null,O)},W=function(e){var n,t=e.fallbackComponent,r=void 0===t?null:t,o=e.removeComponentSpacing,s=e.title,i=void 0===s?"More For You":s,c="section-for-you-recirc",l=p(),h=R((0,m.um)()),g=(0,f.S)().isSub,x=J({breakpoint:h})||{},b=x.data,w=x.error,j=x.isLoading,_=(0,u.$Y)().articleProperties.isOpinion;return j?(0,a.jsx)(y,{}):_?r:l?(null==b?void 0:null===(n=b.recommendations)||void 0===n?void 0:n.length)&&!w?(g||(i="More From The Post",c="more-from-the-post"),(0,a.jsx)(v.d,{css:{display:"inline-block",paddingBottom:void 0!==o&&o?0:d.f.space["100"]},qaLabel:c,children:(0,a.jsx)(v.Z,{customTitle:i,fyRequestId:null==b?void 0:b.request_id,variant:"moreForYouAndPost"})})):r:null},Z=function(e){var n=e.removeComponentSpacing;return(0,u.$Y)().articleProperties.isKidspost?null:(0,a.jsx)(c.Z,{children:(0,a.jsx)(l.Z,{renderPlaceholder:function(e){return(0,a.jsx)("div",{ref:e})},children:(0,a.jsx)(W,{removeComponentSpacing:void 0!==n&&n,title:"More For You"})})})};Z.propTypes={removeComponentSpacing:s().bool};var D=Z},98080:function(e,n,t){function r(e,n){("Enter"===e.key||" "===e.key)&&n()}function a(e,n){"Enter"===e.key&&n()}t.d(n,{_:function(){return a},t:function(){return r}})},70252:function(e,n,t){t.d(n,{Wd:function(){return o},_g:function(){return u},nl:function(){return i},wv:function(){return c}});var r=t(94213),a=t(32586),o={local:"http://localhost:8080",dev:"http://localhost:8080",sandbox:"https://talk-dev.washingtonpost.com",prod:"https://talk.washingtonpost.com"},s={dev:"https://subs-stage.washingtonpost.com",sandbox:"https://subs-stage.washingtonpost.com",stage:"https://subs-stage.washingtonpost.com",prod:"https://subscribe.washingtonpost.com",production:"https://subscribe.washingtonpost.com"},i=function(e){return"".concat(o[e],"/assets/js/embed.js?token=1725896287")},c=function(e){return new Promise(function(n,t){l(e,function(e){if(null===e)return t(Error("Unable to refresh identity"));var r=e.ctoken,a=e.ctokenexp;return"function"==typeof window.updateIdentity&&window.updateIdentity({ctoken:r,ctokenexp:a}),n({accessToken:r,expiresAt:a})})})},l=function(e,n){try{window.fetch("".concat(s[e],"/user/v2/current/comments/ctoken"),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){try{t.error||("dev"===e&&console.log(t),n(t))}catch(e){console.error(e),n(null)}})}catch(e){console.error(e),n(null)}},u=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sandbox",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a._)((0,r._)({},t),{id:"comments",title:"Comments",autoRender:null===(e=null==t?void 0:t.autoRender)||void 0===e||e,rootURL:o[n],refreshAccessToken:function(e){l(n,function(n){e(n.ctoken)})},events:function(){}})}},93900:function(e,n,t){t.d(n,{X:function(){return v}});var r=t(84750),a=t(94213),o=t(32586),s=t(25659),i=t(5093),c=t(82271),l=t(99938),u=t(52676),d=t(75271),f=t(40507),m=t.n(f),h=t(89497),p=t(70252),v=function(e){var n=e.env,t=void 0===n?"sandbox":n,f=e.className,m=(0,s._)(e,["env","className"]),v=(0,i._)(d.useState(null),2),g=v[0],x=v[1],b=(0,i._)(d.useState(null),2),y=b[0],w=b[1];d.useEffect(function(){var e=document.querySelector("link[rel=canonical]");if(e){var n=new URL("".concat(p.Wd[t],"/api/story/count.js"));n.searchParams.append("callback","CoralCount.setCount"),n.searchParams.append("notext","true"),n.searchParams.append("ref","boop"),n.searchParams.append("url",e.href),x(n.href)}},[]);var j=(0,h.ZP)(g,(0,r._)(function(){var e,n,t,r=arguments;return(0,l.Jh)(this,function(a){switch(a.label){case 0:for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[4,fetch.apply(void 0,(0,c._)(n))];case 1:return[4,a.sent().text()];case 2:return[2,a.sent()]}})})),_=j.data,N=j.error,S=j.isLoading;return d.useEffect(function(){if(_&&!N&&!S)try{var e=_.substring(_.indexOf("(")+1,_.lastIndexOf(")")),n=JSON.parse(e).count;w(n)}catch(e){console.error(e)}},[S]),(0,u.jsx)("span",(0,o._)((0,a._)({className:void 0===f?"":f},m),{children:y}))};v.propTypes={className:m().string,env:m().oneOf(["dev","sandbox","prod"]),noText:m().bool}},52918:function(e,n,t){t.d(n,{L:function(){return r}});var r=function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null===(e=window)||void 0===e?void 0:e.__WAPO_COMMENTS_EMBED__;t&&"function"==typeof t.render&&t.render({summaryExpanded:n})}}}]);